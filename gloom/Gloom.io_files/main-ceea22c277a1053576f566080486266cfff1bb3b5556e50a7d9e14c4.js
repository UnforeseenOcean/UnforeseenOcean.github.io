/*! jQuery v1.10.2 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license
*/
function addClass(elem,className){elem&&!(elem.className+"").match(new RegExp("( |^)"+className+"( |$)"))&&(elem.className=className+" "+elem.className)}function removeClass(elem,className){elem&&(elem.className=elem.className.replace(new RegExp("(^| )"+className+"( |$)")," "))}function hasClass(elem,className){return(" "+elem.className+" ").indexOf(" "+className+" ")>-1}function goodBrowser(){var match=navigator.userAgent.match(/MSIE (\d+)/);return document.querySelectorAll&&(null===match||parseInt(match[1])>=9)}function isIEBrowser(){return!!navigator.userAgent.match(/MSIE/)||!!navigator.userAgent.match(/Trident.*rv\:11\./)}function isIE9Browser(){return!!navigator.userAgent.match(/MSIE 9\./)}function iOS(){return!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g)}function setCookie(name,value,days){var t=new Date;t.setDate(t.getDate()+days);var expires=days?";expires="+t.toUTCString():"";document.cookie=name+"="+encodeURIComponent(value)+expires+";path=/"}function removeCookie(name){var date=new Date(0);document.cookie=name+"=; path=/; expires="+date.toUTCString()}function getCookies(){for(var pairs=document.cookie.split(";"),cookies={},i=0;i<pairs.length;i++){var pair=pairs[i].split("=");cookies[pair[0].replace(/^ /,"")]=decodeURIComponent(pair[1])}return cookies}function getCookie(name){for(var ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(name+"="))return decodeURIComponent(c.substring((name+"=").length,c.length))}return null}function onReady(callback){"interactive"==document.readyState||"complete"==document.readyState?callback.call():document.addEventListener("readystatechange",function(){onReady(callback)})}function paramNames(){return window.location.search.replace(/=[^&]+/g,"").replace(/^\?/,"").split(/&/)}function getParams(){for(var tokens,qs=window.location.search.split("+").join(" "),params={},re=/[?&]?([^=&?]+)=?([^&]*)/g;tokens=re.exec(qs);)params[decodeURIComponent(tokens[1])]=decodeURIComponent(tokens[2]);return params}function addListener(type,func,elem){var element=elem||window;element.addEventListener(type,func),unloaders.push(function(){element.removeEventListener(type,func)})}function removeListener(type,handler,elem){var element=elem||window;element.removeEventListener(type,handler),unloaders.filter(function(){})}function setWidgetTimeout(f,time){var indificator=setTimeout(f,time);return unloaders.push(function(){clearTimeout(indificator)}),indificator}function paramString(desiredParams){for(var desiredParam,pairs=[],params=getParams(),i=0;i<desiredParams.length;i++)desiredParam=desiredParams[i],params[desiredParam]&&pairs.push(desiredParam+"="+encodeURIComponent(params[desiredParam]));return pairs.join("&")}function toQueryString(hash){var pairs=[];for(var i in hash)hash.hasOwnProperty(i)&&pairs.push(i+"="+hash[i]);return pairs.join("&")}function dom(query,attrs,childs){var key,match=query.match(/^([^#.]*)#?([^.$]*).?(\S*)/),type=match[1]||"div",id=match[2],classes=match[3].replace(/\./g," "),element=document.createElement(type);if(attrs&&attrs.constructor===Array&&(childs=attrs,attrs=null),void 0!==attrs)if("string"==typeof attrs||"number"==typeof attrs)element.innerHTML=attrs;else for(key in attrs)attrs.hasOwnProperty(key)&&("id"===key||"innerHTML"===key||"value"===key||"src"===key||"className"===key?element[key]=attrs[key]:element.setAttribute(key,attrs[key]));return id&&element.setAttribute("id",id),classes&&element.setAttribute("class",classes),childs&&childs.forEach(function(child){element.appendChild(child)}),element}function style(el,attrs){Object.keys(attrs).forEach(function(key){el.style[key]=attrs[key]})}function throttle(action,delay){function callAction(){lastCall=Date.now(),action()}function canCallAction(){return!lastCall||Date.now()>=lastCall+delay}function pendingNext(){isNextPending=!0,setTimeout(function(){isNextPending=!1,canCallAction()&&callAction()},delay)}function canPendingNext(){return!isNextPending}var lastCall=null,isNextPending=!1;return function(){canCallAction()?callAction():canPendingNext()&&pendingNext()}}function uiCodemirrorDirective($timeout,uiCodemirrorConfig){function postLink(scope,iElement,iAttrs,ngModel){var codemirrorOptions=angular.extend({value:iElement.text()},uiCodemirrorConfig.codemirror||{},scope.$eval(iAttrs.uiCodemirror),scope.$eval(iAttrs.uiCodemirrorOpts)),codemirror=newCodemirrorEditor(iElement,codemirrorOptions);configOptionsWatcher(codemirror,iAttrs.uiCodemirror||iAttrs.uiCodemirrorOpts,scope),configNgModelLink(codemirror,ngModel,scope),configUiRefreshAttribute(codemirror,iAttrs.uiRefresh,scope),scope.$on("CodeMirror",function(event,callback){if(!angular.isFunction(callback))throw new Error("the CodeMirror event requires a callback function");callback(codemirror)}),angular.isFunction(codemirrorOptions.onLoad)&&codemirrorOptions.onLoad(codemirror)}function newCodemirrorEditor(iElement,codemirrorOptions){var codemirrot;return"TEXTAREA"===iElement[0].tagName?codemirrot=window.CodeMirror.fromTextArea(iElement[0],codemirrorOptions):(iElement.html(""),codemirrot=new window.CodeMirror(function(cm_el){iElement.append(cm_el)},codemirrorOptions)),codemirrot}function configOptionsWatcher(codemirrot,uiCodemirrorAttr,scope){function updateOptions(newValues,oldValue){angular.isObject(newValues)&&codemirrorDefaultsKeys.forEach(function(key){if(newValues.hasOwnProperty(key)){if(oldValue&&newValues[key]===oldValue[key])return;codemirrot.setOption(key,newValues[key])}})}if(uiCodemirrorAttr){var codemirrorDefaultsKeys=Object.keys(window.CodeMirror.defaults);scope.$watch(uiCodemirrorAttr,updateOptions,!0)}}function configNgModelLink(codemirror,ngModel,scope){ngModel&&(ngModel.$formatters.push(function(value){if(angular.isUndefined(value)||null===value)return"";if(angular.isObject(value)||angular.isArray(value))throw new Error("ui-codemirror cannot use an object or an array as a model");return value}),ngModel.$render=function(){var safeViewValue=ngModel.$viewValue||"";codemirror.setValue(safeViewValue)},codemirror.on("change",function(instance){var newValue=instance.getValue();newValue!==ngModel.$viewValue&&scope.$evalAsync(function(){ngModel.$setViewValue(newValue)})}))}function configUiRefreshAttribute(codeMirror,uiRefreshAttr,scope){uiRefreshAttr&&scope.$watch(uiRefreshAttr,function(newVal,oldVal){newVal!==oldVal&&$timeout(function(){codeMirror.refresh()})})}return{restrict:"EA",require:"?ngModel",compile:function(){if(angular.isUndefined(window.CodeMirror))throw new Error("ui-codemirror need CodeMirror to work... (o rly?)");return postLink}}}!function(e,t){function M(e){var t=e.length,n=x.type(e);return x.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function F(e){var t=O[e]={};return x.each(e.match(T)||[],function(e,n){t[n]=!0}),t}function R(e,n,r,i){if(x.acceptData(e)){var o,a,s=x.expando,l=e.nodeType,u=l?x.cache:e,c=l?e[s]:e[s]&&s;if(c&&u[c]&&(i||u[c].data)||r!==t||"string"!=typeof n)return c||(c=l?e[s]=p.pop()||x.guid++:s),u[c]||(u[c]=l?{}:{toJSON:x.noop}),("object"==typeof n||"function"==typeof n)&&(i?u[c]=x.extend(u[c],n):u[c].data=x.extend(u[c].data,n)),a=u[c],i||(a.data||(a.data={}),a=a.data),r!==t&&(a[x.camelCase(n)]=r),"string"==typeof n?(o=a[n],null==o&&(o=a[x.camelCase(n)])):o=a,o}}function W(e,t,n){if(x.acceptData(e)){var r,i,o=e.nodeType,a=o?x.cache:e,s=o?e[x.expando]:x.expando;if(a[s]){if(t&&(r=n?a[s]:a[s].data)){x.isArray(t)?t=t.concat(x.map(t,x.camelCase)):t in r?t=[t]:(t=x.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;for(;i--;)delete r[t[i]];if(n?!I(r):!x.isEmptyObject(r))return}(n||(delete a[s].data,I(a[s])))&&(o?x.cleanData([e],!0):x.support.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function $(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(P,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:B.test(r)?x.parseJSON(r):r}catch(o){}x.data(e,n,r)}else r=t}return r}function I(e){var t;for(t in e)if(("data"!==t||!x.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function it(){return!0}function ot(){return!1}function at(){try{return a.activeElement}catch(e){}}function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function ft(e,t,n){if(x.isFunction(t))return x.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return x.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(st.test(t))return x.filter(t,e,n);t=x.filter(t,e)}return x.grep(e,function(e){return x.inArray(e,t)>=0!==n})}function dt(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function Lt(e,t){return x.nodeName(e,"table")&&x.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function Ht(e){return e.type=(null!==x.find.attr(e,"type"))+"/"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _t(e,t){for(var n,r=0;null!=(n=e[r]);r++)x._data(n,"globalEval",!t||x._data(t[r],"globalEval"))}function Mt(e,t){if(1===t.nodeType&&x.hasData(e)){var n,r,i,o=x._data(e),a=x._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)x.event.add(t,n,s[n][r])}a.data&&(a.data=x.extend({},a.data))}}function Ot(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!x.support.noCloneEvent&&t[x.expando]){i=x._data(t);for(r in i.events)x.removeEvent(t,r,i.handle);t.removeAttribute(x.expando)}"script"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),x.support.html5Clone&&e.innerHTML&&!x.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Ct.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function Ft(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||x.nodeName(o,n)?s.push(o):x.merge(s,Ft(o,n));return n===t||n&&x.nodeName(e,n)?x.merge([e],s):s}function Bt(e){Ct.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;i--;)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===x.css(e,"display")||!x.contains(e.ownerDocument,e)}function rn(e,t){for(var n,r,i,o=[],a=0,s=e.length;s>a;a++)r=e[a],r.style&&(o[a]=x._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(o[a]=x._data(r,"olddisplay",ln(r.nodeName)))):o[a]||(i=nn(r),(n&&"none"!==n||!i)&&x._data(r,"olddisplay",i?n:x.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function an(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=x.css(e,n+Zt[o],!0,i)),r?("content"===n&&(a-=x.css(e,"padding"+Zt[o],!0,i)),"margin"!==n&&(a-=x.css(e,"border"+Zt[o]+"Width",!0,i))):(a+=x.css(e,"padding"+Zt[o],!0,i),"padding"!==n&&(a+=x.css(e,"border"+Zt[o]+"Width",!0,i)));return a}function sn(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(x.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?"border":"content"),r,o)+"px"}function ln(e){var t=a,n=Gt[e];return n||(n=un(e,t),"none"!==n&&n||(Pt=(Pt||x("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=un(e,t),Pt.detach()),Gt[e]=n),n}function un(e,t){var n=x(t.createElement(e)).appendTo(t.body),r=x.css(n[0],"display");return n.remove(),r}function gn(e,t,n,r){var i;if(x.isArray(t))x.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==x.type(t))r(e,t);else for(i in t)gn(e+"["+i+"]",t[i],n,r)}function Hn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(T)||[];if(x.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){function s(l){var u;return o[l]=!0,x.each(e[l]||[],function(e,l){var c=l(n,r,i);return"string"!=typeof c||a||o[c]?a?!(u=c):t:(n.dataTypes.unshift(c),s(c),!1)}),u}var o={},a=e===jn;return s(n.dataTypes[0])||!o["*"]&&s("*")}function _n(e,n){var r,i,o=x.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&x.extend(!0,e,r),e}function Mn(e,n,r){for(var i,o,a,s,l=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(s in l)if(l[s]&&l[s].test(o)){u.unshift(s);break}if(u[0]in r)a=u[0];else{for(s in r){if(!u[0]||e.converters[s+" "+u[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==u[0]&&u.unshift(a),r[a]):t}function On(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=u[l+" "+o]||u["* "+o],!a)for(i in u)if(s=i.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[i]:u[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(p){return{state:"parsererror",error:a?p:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Kn(){return setTimeout(function(){Xn=t}),Xn=x.now()}function Zn(e,t,n){for(var r,i=(Qn[t]||[]).concat(Qn["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,t,e))return r}function er(e,t,n){var r,i,o=0,a=Gn.length,s=x.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=Xn||Kn(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,o=1-r,a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(o);return s.notifyWith(e,[u,o,n]),1>o&&l?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return t?s.resolveWith(e,[u,t]):s.rejectWith(e,[u,t]),this}}),c=u.props;for(tr(c,u.opts.specialEasing);a>o;o++)if(r=Gn[o].call(u,e,c,u.opts))return r;return x.map(c,Zn,u),x.isFunction(u.opts.start)&&u.opts.start.call(e,u),x.fx.timer(x.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function tr(e,t){var n,r,i,o,a;for(n in e)if(r=x.camelCase(n),i=t[r],o=e[n],x.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=x.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function nr(e,t,n){var r,i,o,a,s,l,u=this,c={},p=e.style,f=e.nodeType&&nn(e),d=x._data(e,"fxshow");n.queue||(s=x._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,x.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===x.css(e,"display")&&"none"===x.css(e,"float")&&(x.support.inlineBlockNeedsLayout&&"inline"!==ln(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",x.support.shrinkWrapBlocks||u.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Vn.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(f?"hide":"show"))continue;c[r]=d&&d[r]||x.style(e,r)}if(!x.isEmptyObject(c)){d?"hidden"in d&&(f=d.hidden):d=x._data(e,"fxshow",{}),o&&(d.hidden=!f),f?x(e).show():u.done(function(){x(e).hide()}),u.done(function(){var t;x._removeData(e,"fxshow");for(t in c)x.style(e,t,c[t])});for(r in c)a=Zn(f?d[r]:0,r,u),r in d||(d[r]=a.start,f&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function or(e){return x.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,o=e.location,a=e.document,s=a.documentElement,l=e.jQuery,u=e.$,c={},p=[],f="1.10.2",d=p.concat,h=p.push,g=p.slice,m=p.indexOf,y=c.toString,v=c.hasOwnProperty,b=f.trim,x=function(e,t){return new x.fn.init(e,t,r)},w=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=/\S+/g,C=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,k=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,E=/^[\],:{}\s]*$/,S=/(?:^|:|,)(?:\s*\[)+/g,A=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,j=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,D=/^-ms-/,L=/-([\da-z])/gi,H=function(e,t){return t.toUpperCase()},q=function(e){(a.addEventListener||"load"===e.type||"complete"===a.readyState)&&(_(),x.ready())},_=function(){a.addEventListener?(a.removeEventListener("DOMContentLoaded",q,!1),e.removeEventListener("load",q,!1)):(a.detachEvent("onreadystatechange",q),e.detachEvent("onload",q))};x.fn=x.prototype={jquery:f,constructor:x,init:function(e,n,r){var i,o;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof x?n[0]:n,x.merge(this,x.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:a,!0)),k.test(i[1])&&x.isPlainObject(n))for(i in n)x.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(o=a.getElementById(i[2]),o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=a,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):x.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),x.makeArray(e,this))},selector:"",length:0,toArray:function(){return g.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return x.each(this,e,t)},ready:function(e){return x.ready.promise().done(e),this},slice:function(){return this.pushStack(g.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(x.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:h,sort:[].sort,splice:[].splice},x.fn.init.prototype=x.fn,x.extend=x.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},l=2),"object"==typeof s||x.isFunction(s)||(s={}),u===l&&(s=this,--l);u>l;l++)if(null!=(o=arguments[l]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(x.isPlainObject(r)||(n=x.isArray(r)))?(n?(n=!1,a=e&&x.isArray(e)?e:[]):a=e&&x.isPlainObject(e)?e:{},s[i]=x.extend(c,a,r)):r!==t&&(s[i]=r));return s},x.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===x&&(e.$=u),t&&e.jQuery===x&&(e.jQuery=l),x},isReady:!1,readyWait:1,holdReady:function(e){e?x.readyWait++:x.ready(!0)},ready:function(e){if(e===!0?!--x.readyWait:!x.isReady){if(!a.body)return setTimeout(x.ready);x.isReady=!0,e!==!0&&--x.readyWait>0||(n.resolveWith(a,[x]),x.fn.trigger&&x(a).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===x.type(e)},isArray:Array.isArray||function(e){return"array"===x.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[y.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||"object"!==x.type(e)||e.nodeType||x.isWindow(e))return!1;try{if(e.constructor&&!v.call(e,"constructor")&&!v.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}if(x.support.ownLast)for(n in e)return v.call(e,n);for(n in e);return n===t||v.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||a;var r=k.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=x.buildFragment([e],t,i),i&&x(i).remove(),x.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=x.trim(n),n&&E.test(n.replace(A,"@").replace(j,"]").replace(S,"")))?Function("return "+n)():(x.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||x.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&x.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(D,"ms-").replace(L,H)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a)for(;o>i&&(r=t.apply(e[i],n),r!==!1);i++);else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a)for(;o>i&&(r=t.call(e[i],i,e[i]),r!==!1);i++);else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:b&&!b.call("\ufeff\xa0")?function(e){return null==e?"":b.call(e)}:function(e){return null==e?"":(e+"").replace(C,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?x.merge(n,"string"==typeof e?[e]:e):h.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(m)return m.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else for(;n[o]!==t;)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return d.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(o=e[n],n=e,e=o),x.isFunction(e)?(r=g.call(arguments,2),i=function(){return e.apply(n||this,r.concat(g.call(arguments)))},i.guid=e.guid=e.guid||x.guid++,i):t},access:function(e,n,r,i,o,a,s){var l=0,u=e.length,c=null==r;if("object"===x.type(r)){o=!0;for(l in r)x.access(e,n,l,r[l],!0,a,s)}else if(i!==t&&(o=!0,x.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(x(e),n)})),n))for(;u>l;l++)n(e[l],r,s?i:i.call(e[l],l,n(e[l],r)));return o?e:c?n.call(e):u?n(e[0],r):a},now:function(){return(new Date).getTime()},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),x.ready.promise=function(t){if(!n)if(n=x.Deferred(),"complete"===a.readyState)setTimeout(x.ready);else if(a.addEventListener)a.addEventListener("DOMContentLoaded",q,!1),e.addEventListener("load",q,!1);else{a.attachEvent("onreadystatechange",q),e.attachEvent("onload",q);var r=!1;try{r=null==e.frameElement&&a.documentElement}catch(i){}r&&r.doScroll&&function o(){if(!x.isReady){try{r.doScroll("left")}catch(e){return setTimeout(o,50)}_(),x.ready()}}()}return n.promise(t)},x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()}),r=x(a),function(e,t){function at(e,t,n,i){var o,a,s,l,u,c,d,m,y,x;if((t?t.ownerDocument||t:w)!==f&&p(t),t=t||f,n=n||[],!e||"string"!=typeof e)return n;if(1!==(l=t.nodeType)&&9!==l)return[];if(h&&!i){if(o=Z.exec(e))if(s=o[1]){if(9===l){if(a=t.getElementById(s),!a||!a.parentNode)return n;if(a.id===s)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(s))&&v(t,a)&&a.id===s)return n.push(a),n}else{if(o[2])return M.apply(n,t.getElementsByTagName(e)),n;if((s=o[3])&&r.getElementsByClassName&&t.getElementsByClassName)return M.apply(n,t.getElementsByClassName(s)),n}if(r.qsa&&(!g||!g.test(e))){if(m=d=b,y=t,x=9===l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){for(c=mt(e),(d=t.getAttribute("id"))?m=d.replace(nt,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",u=c.length;u--;)c[u]=m+yt(c[u]);y=V.test(e)&&t.parentNode||t,x=c.join(",")}if(x)try{return M.apply(n,y.querySelectorAll(x)),n}catch(T){}finally{d||t.removeAttribute("id")}}}return kt(e.replace(z,"$1"),t,n,i)}function st(){function t(n,r){return e.push(n+=" ")>o.cacheLength&&delete t[e.shift()],t[n]=r}var e=[];return t}function lt(e){return e[b]=!0,e}function ut(e){var t=f.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ct(e,t){for(var n=e.split("|"),r=e.length;r--;)o.attrHandle[n[r]]=t}function pt(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||D)-(~e.sourceIndex||D);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function dt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ht(e){return lt(function(t){return t=+t,lt(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function gt(){}function mt(e,t){var n,r,i,a,s,l,u,c=k[e+" "];if(c)return t?0:c.slice(0);for(s=e,l=[],u=o.preFilter;s;){(!n||(r=X.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(i=[])),n=!1,(r=U.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(z," ")}),s=s.slice(n.length));for(a in o.filter)!(r=Q[a].exec(s))||u[a]&&!(r=u[a](r))||(n=r.shift(),i.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?at.error(e):k(e,l).slice(0)}function yt(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function vt(e,t,n){var r=t.dir,o=n&&"parentNode"===r,a=C++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i)}:function(t,n,s){var l,u,c,p=T+" "+a;if(s){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,s))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(c=t[b]||(t[b]={}),(u=c[r])&&u[0]===p){if((l=u[1])===!0||l===i)return l===!0}else if(u=c[r]=[p],u[1]=e(t,n,s)||i,u[1]===!0)return!0}}function bt(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function xt(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;l>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),u&&t.push(s));return a}function wt(e,t,n,r,i,o){return r&&!r[b]&&(r=wt(r)),i&&!i[b]&&(i=wt(i,o)),lt(function(o,a,s,l){var u,c,p,f=[],d=[],h=a.length,g=o||Nt(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:xt(g,f,e,s,l),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,l),r)for(u=xt(y,d),r(u,[],s,l),c=u.length;c--;)(p=u[c])&&(y[d[c]]=!(m[d[c]]=p));if(o){if(i||e){if(i){for(u=[],c=y.length;c--;)(p=y[c])&&u.push(m[c]=p);i(null,y=[],u,l)}for(c=y.length;c--;)(p=y[c])&&(u=i?F.call(o,p):f[c])>-1&&(o[u]=!(a[u]=p))}}else y=xt(y===a?y.splice(h,y.length):y),i?i(null,a,y,l):M.apply(a,y)})}function Tt(e){for(var t,n,r,i=e.length,a=o.relative[e[0].type],s=a||o.relative[" "],l=a?1:0,c=vt(function(e){return e===t},s,!0),p=vt(function(e){return F.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==u)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];i>l;l++)if(n=o.relative[e[l].type])f=[vt(bt(f),n)];else{if(n=o.filter[e[l].type].apply(null,e[l].matches),n[b]){for(r=++l;i>r&&!o.relative[e[r].type];r++);return wt(l>1&&bt(f),l>1&&yt(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(z,"$1"),n,r>l&&Tt(e.slice(l,r)),i>r&&Tt(e=e.slice(r)),i>r&&yt(e))}f.push(n)}return bt(f)}function Ct(e,t){var n=0,r=t.length>0,a=e.length>0,s=function(s,l,c,p,d){var h,g,m,y=[],v=0,b="0",x=s&&[],w=null!=d,C=u,N=s||a&&o.find.TAG("*",d&&l.parentNode||l),k=T+=null==C?1:Math.random()||.1;for(w&&(u=l!==f&&l,i=n);null!=(h=N[b]);b++){if(a&&h){for(g=0;m=e[g++];)if(m(h,l,c)){p.push(h);break}w&&(T=k,i=++n)}r&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,r&&b!==v){for(g=0;m=t[g++];)m(x,y,l,c);if(s){if(v>0)for(;b--;)x[b]||y[b]||(y[b]=q.call(p));y=xt(y)}M.apply(p,y),w&&!s&&y.length>0&&v+t.length>1&&at.uniqueSort(p)}return w&&(T=k,u=C),x};return r?lt(s):s}function Nt(e,t,n){for(var r=0,i=t.length;i>r;r++)at(e,t[r],n);return n}function kt(e,t,n,i){var a,s,u,c,p,f=mt(e);if(!i&&1===f.length){if(s=f[0]=f[0].slice(0),s.length>2&&"ID"===(u=s[0]).type&&r.getById&&9===t.nodeType&&h&&o.relative[s[1].type]){if(t=(o.find.ID(u.matches[0].replace(rt,it),t)||[])[0],!t)return n;e=e.slice(s.shift().value.length)}for(a=Q.needsContext.test(e)?0:s.length;a--&&(u=s[a],!o.relative[c=u.type]);)if((p=o.find[c])&&(i=p(u.matches[0].replace(rt,it),V.test(s[0].type)&&t.parentNode||t))){if(s.splice(a,1),e=i.length&&yt(s),!e)return M.apply(n,i),n;break}}return l(e,f)(i,t,!h,n,V.test(e)),n}var n,r,i,o,a,s,l,u,c,p,f,d,h,g,m,y,v,b="sizzle"+-new Date,w=e.document,T=0,C=0,N=st(),k=st(),E=st(),S=!1,A=function(e,t){return e===t?(S=!0,0):0},j=typeof t,D=1<<31,L={}.hasOwnProperty,H=[],q=H.pop,_=H.push,M=H.push,O=H.slice,F=H.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",P="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",W=R.replace("w","w#"),$="\\["+P+"*("+R+")"+P+"*(?:([*^$|!~]?=)"+P+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+W+")|)|)"+P+"*\\]",I=":("+R+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+$.replace(3,8)+")*)|.*)\\)|)",z=RegExp("^"+P+"+|((?:^|[^\\\\])(?:\\\\.)*)"+P+"+$","g"),X=RegExp("^"+P+"*,"+P+"*"),U=RegExp("^"+P+"*([>+~]|"+P+")"+P+"*"),V=RegExp(P+"*[+~]"),Y=RegExp("="+P+"*([^\\]'\"]*)"+P+"*\\]","g"),J=RegExp(I),G=RegExp("^"+W+"$"),Q={ID:RegExp("^#("+R+")"),CLASS:RegExp("^\\.("+R+")"),TAG:RegExp("^("+R.replace("w","w*")+")"),ATTR:RegExp("^"+$),PSEUDO:RegExp("^"+I),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+P+"*(even|odd|(([+-]|)(\\d*)n|)"+P+"*(?:([+-]|)"+P+"*(\\d+)|))"+P+"*\\)|)","i"),bool:RegExp("^(?:"+B+")$","i"),needsContext:RegExp("^"+P+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+P+"*((?:-\\d)?\\d*)"+P+"*\\)|)(?=[^-]|$)","i")},K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,nt=/'|\\/g,rt=RegExp("\\\\([\\da-f]{1,6}"+P+"?|("+P+")|.)","ig"),it=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(55296|r>>10,56320|1023&r)};try{M.apply(H=O.call(w.childNodes),w.childNodes),H[w.childNodes.length].nodeType}catch(ot){M={apply:H.length?function(e,t){_.apply(e,O.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}s=at.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},r=at.support={},p=at.setDocument=function(e){var n=e?e.ownerDocument||e:w,i=n.defaultView;return n!==f&&9===n.nodeType&&n.documentElement?(f=n,d=n.documentElement,h=!s(n),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){p()}),r.attributes=ut(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=ut(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=ut(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",
e.firstChild.className="i",2===e.getElementsByClassName("i").length}),r.getById=ut(function(e){return d.appendChild(e).id=b,!n.getElementsByName||!n.getElementsByName(b).length}),r.getById?(o.find.ID=function(e,t){if(typeof t.getElementById!==j&&h){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},o.filter.ID=function(e){var t=e.replace(rt,it);return function(e){return e.getAttribute("id")===t}}):(delete o.find.ID,o.filter.ID=function(e){var t=e.replace(rt,it);return function(e){var n=typeof e.getAttributeNode!==j&&e.getAttributeNode("id");return n&&n.value===t}}),o.find.TAG=r.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==j?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},o.find.CLASS=r.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==j&&h?n.getElementsByClassName(e):t},m=[],g=[],(r.qsa=K.test(n.querySelectorAll))&&(ut(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||g.push("\\["+P+"*(?:value|"+B+")"),e.querySelectorAll(":checked").length||g.push(":checked")}),ut(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&g.push("[*^$]="+P+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(r.matchesSelector=K.test(y=d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ut(function(e){r.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),m.push("!=",I)}),g=g.length&&RegExp(g.join("|")),m=m.length&&RegExp(m.join("|")),v=K.test(d.contains)||d.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=d.compareDocumentPosition?function(e,t){if(e===t)return S=!0,0;var i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return i?1&i||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===n||v(w,e)?-1:t===n||v(w,t)?1:c?F.call(c,e)-F.call(c,t):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return S=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:c?F.call(c,e)-F.call(c,t):0;if(o===a)return pt(e,t);for(r=e;r=r.parentNode;)s.unshift(r);for(r=t;r=r.parentNode;)l.unshift(r);for(;s[i]===l[i];)i++;return i?pt(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},n):f},at.matches=function(e,t){return at(e,null,null,t)},at.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&p(e),t=t.replace(Y,"='$1']"),!(!r.matchesSelector||!h||m&&m.test(t)||g&&g.test(t)))try{var n=y.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(i){}return at(t,f,null,[e]).length>0},at.contains=function(e,t){return(e.ownerDocument||e)!==f&&p(e),v(e,t)},at.attr=function(e,n){(e.ownerDocument||e)!==f&&p(e);var i=o.attrHandle[n.toLowerCase()],a=i&&L.call(o.attrHandle,n.toLowerCase())?i(e,n,!h):t;return a===t?r.attributes||!h?e.getAttribute(n):(a=e.getAttributeNode(n))&&a.specified?a.value:null:a},at.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},at.uniqueSort=function(e){var t,n=[],i=0,o=0;if(S=!r.detectDuplicates,c=!r.sortStable&&e.slice(0),e.sort(A),S){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return e},a=at.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=a(t);return n},o=at.selectors={cacheLength:50,createPseudo:lt,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(rt,it),e[3]=(e[4]||e[5]||"").replace(rt,it),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||at.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&at.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return Q.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&J.test(r)&&(n=mt(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(rt,it).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=N[e+" "];return t||(t=RegExp("(^|"+P+")"+e+"("+P+"|$)"))&&N(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==j&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=at.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,p,f,d,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!l&&!s;if(m){if(o){for(;g;){for(p=t;p=p[g];)if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){for(c=m[b]||(m[b]={}),u=c[e]||[],d=u[0]===T&&u[1],f=u[0]===T&&u[2],p=d&&m.childNodes[d];p=++d&&p&&p[g]||(f=d=0)||h.pop();)if(1===p.nodeType&&++f&&p===t){c[e]=[T,d,f];break}}else if(v&&(u=(t[b]||(t[b]={}))[e])&&u[0]===T)f=u[1];else for(;(p=++d&&p&&p[g]||(f=d=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++f||(v&&((p[b]||(p[b]={}))[e]=[T,f]),p!==t)););return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=o.pseudos[e]||o.setFilters[e.toLowerCase()]||at.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],o.setFilters.hasOwnProperty(e.toLowerCase())?lt(function(e,n){for(var i,o=r(e,t),a=o.length;a--;)i=F.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:lt(function(e){var t=[],n=[],r=l(e.replace(z,"$1"));return r[b]?lt(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:lt(function(e){return function(t){return at(e,t).length>0}}),contains:lt(function(e){return function(t){return(t.textContent||t.innerText||a(t)).indexOf(e)>-1}}),lang:lt(function(e){return G.test(e||"")||at.error("unsupported lang: "+e),e=e.replace(rt,it).toLowerCase(),function(t){var n;do if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!o.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:ht(function(){return[0]}),last:ht(function(e,t){return[t-1]}),eq:ht(function(e,t,n){return[0>n?n+t:n]}),even:ht(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:ht(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:ht(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:ht(function(e,t,n){for(var r=0>n?n+t:n;t>++r;)e.push(r);return e})}},o.pseudos.nth=o.pseudos.eq;for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})o.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})o.pseudos[n]=dt(n);gt.prototype=o.filters=o.pseudos,o.setFilters=new gt,l=at.compile=function(e,t){var n,r=[],i=[],o=E[e+" "];if(!o){for(t||(t=mt(e)),n=t.length;n--;)o=Tt(t[n]),o[b]?r.push(o):i.push(o);o=E(e,Ct(i,r))}return o},r.sortStable=b.split("").sort(A).join("")===b,r.detectDuplicates=S,p(),r.sortDetached=ut(function(e){return 1&e.compareDocumentPosition(f.createElement("div"))}),ut(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ct("type|href|height|width",function(e,n,r){return r?t:e.getAttribute(n,"type"===n.toLowerCase()?1:2)}),r.attributes&&ut(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ct("value",function(e,n,r){return r||"input"!==e.nodeName.toLowerCase()?t:e.defaultValue}),ut(function(e){return null==e.getAttribute("disabled")})||ct(B,function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&i.specified?i.value:e[n]===!0?n.toLowerCase():null}),x.find=at,x.expr=at.selectors,x.expr[":"]=x.expr.pseudos,x.unique=at.uniqueSort,x.text=at.getText,x.isXMLDoc=at.isXML,x.contains=at.contains}(e);var O={};x.Callbacks=function(e){e="string"==typeof e?O[e]||F(e):x.extend({},e);var n,r,i,o,a,s,l=[],u=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=l.length,n=!0;l&&o>a;a++)if(l[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,l&&(u?u.length&&c(u.shift()):r?l=[]:p.disable())},p={add:function(){if(l){var t=l.length;!function i(t){x.each(t,function(t,n){var r=x.type(n);"function"===r?e.unique&&p.has(n)||l.push(n):n&&n.length&&"string"!==r&&i(n)})}(arguments),n?o=l.length:r&&(s=t,c(r))}return this},remove:function(){return l&&x.each(arguments,function(e,t){for(var r;(r=x.inArray(t,l,r))>-1;)l.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?x.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=u=r=t,this},disabled:function(){return!l},lock:function(){return u=t,r||p.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||i&&!u||(t=t||[],t=[e,t.slice?t.slice():t],n?u.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},x.extend({Deferred:function(e){var t=[["resolve","done",x.Callbacks("once memory"),"resolved"],["reject","fail",x.Callbacks("once memory"),"rejected"],["notify","progress",x.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return x.Deferred(function(n){x.each(t,function(t,o){var a=o[0],s=x.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&x.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?x.extend(e,r):r}},i={};return r.pipe=r.then,x.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var s,l,u,t=0,n=g.call(arguments),r=n.length,i=1!==r||e&&x.isFunction(e.promise)?r:0,o=1===i?e:x.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?g.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}};if(r>1)for(s=Array(r),l=Array(r),u=Array(r);r>t;t++)n[t]&&x.isFunction(n[t].promise)?n[t].promise().done(a(t,u,n)).fail(o.reject).progress(a(t,l,s)):--i;return i||o.resolveWith(u,n),o.promise()}}),x.support=function(t){var n,r,o,s,l,u,c,p,f,d=a.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*")||[],r=d.getElementsByTagName("a")[0],!r||!r.style||!n.length)return t;s=a.createElement("select"),u=s.appendChild(a.createElement("option")),o=d.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==d.className,t.leadingWhitespace=3===d.firstChild.nodeType,t.tbody=!d.getElementsByTagName("tbody").length,t.htmlSerialize=!!d.getElementsByTagName("link").length,t.style=/top/.test(r.getAttribute("style")),t.hrefNormalized="/a"===r.getAttribute("href"),t.opacity=/^0.5/.test(r.style.opacity),t.cssFloat=!!r.style.cssFloat,t.checkOn=!!o.value,t.optSelected=u.selected,t.enctype=!!a.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==a.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!u.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}o=a.createElement("input"),o.setAttribute("value",""),t.input=""===o.getAttribute("value"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","t"),o.setAttribute("name","t"),l=a.createDocumentFragment(),l.appendChild(o),t.appendChecked=o.checked,t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c="on"+f,"t"),t[f+"Bubbles"]=c in e||d.attributes[c].expando===!1;d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip;for(f in x(t))break;return t.ownLast="0"!==f,x(function(){var n,r,o,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",l=a.getElementsByTagName("body")[0];l&&(n=a.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",l.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=d.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",p=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=p&&0===o[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",x.swap(l,null!=l.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===d.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,r=d.appendChild(a.createElement("div")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML="",d.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(l.style.zoom=1)),l.removeChild(n),n=d=o=r=null)}),n=s=l=u=r=o=null,t}({});var B=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;x.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?x.cache[e[x.expando]]:e[x.expando],!!e&&!I(e)},data:function(e,t,n){return R(e,t,n)},removeData:function(e,t){return W(e,t)},_data:function(e,t,n){return R(e,t,n,!0)},_removeData:function(e,t){return W(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&x.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),x.fn.extend({data:function(e,n){var r,i,o=null,a=0,s=this[0];if(e===t){if(this.length&&(o=x.data(s),1===s.nodeType&&!x._data(s,"parsedAttrs"))){for(r=s.attributes;r.length>a;a++)i=r[a].name,0===i.indexOf("data-")&&(i=x.camelCase(i.slice(5)),$(s,i,o[i]));x._data(s,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){x.data(this,e)}):arguments.length>1?this.each(function(){x.data(this,e,n)}):s?$(s,e,x.data(s,e)):null},removeData:function(e){return this.each(function(){x.removeData(this,e)})}}),x.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=x._data(e,n),r&&(!i||x.isArray(r)?i=x._data(e,n,x.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),r=n.length,i=n.shift(),o=x._queueHooks(e,t),a=function(){x.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return x._data(e,n)||x._data(e,n,{empty:x.Callbacks("once memory").add(function(){x._removeData(e,t+"queue"),x._removeData(e,n)})})}}),x.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?x.queue(this[0],e):n===t?this:this.each(function(){var t=x.queue(this,e,n);x._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&x.dequeue(this,e)})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},delay:function(e,t){return e=x.fx?x.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=x.Deferred(),a=this,s=this.length,l=function(){--i||o.resolveWith(a,[a])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";s--;)r=x._data(a[s],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(l));return l(),o.promise(n)}});var z,X,U=/[\t\r\n\f]/g,V=/\r/g,Y=/^(?:input|select|textarea|button|object)$/i,J=/^(?:a|area)$/i,G=/^(?:checked|selected)$/i,Q=x.support.getSetAttribute,K=x.support.input;x.fn.extend({attr:function(e,t){return x.access(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})},prop:function(e,t){return x.access(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return e=x.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,l="string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(T)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(U," "):" ")){for(o=0;i=t[o++];)0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=x.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,l=0===arguments.length||"string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(T)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(U," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");n.className=e?x.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):x.isFunction(e)?this.each(function(n){x(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,r=0,o=x(this),a=e.match(T)||[];t=a[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else(n===i||"boolean"===n)&&(this.className&&x._data(this,"__className__",this.className),this.className=this.className||e===!1?"":x._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(U," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];return arguments.length?(i=x.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=i?e.call(this,n,x(this).val()):e,null==o?o="":"number"==typeof o?o+="":x.isArray(o)&&(o=x.map(o,function(e){return null==e?"":e+""})),r=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,o,"value")!==t||(this.value=o))})):o?(r=x.valHooks[o.type]||x.valHooks[o.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(V,""):null==n?"":n)):void 0}}),x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,l=0>i?s:o?i:0;s>l;l++)if(n=r[l],!(!n.selected&&l!==i||(x.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&x.nodeName(n.parentNode,"optgroup"))){if(t=x(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=x.makeArray(t),a=i.length;a--;)r=i[a],(r.selected=x.inArray(x(r).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,n,r){var o,a,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?typeof e.getAttribute===i?x.prop(e,n,r):(1===s&&x.isXMLDoc(e)||(n=n.toLowerCase(),o=x.attrHooks[n]||(x.expr.match.bool.test(n)?X:z)),r===t?o&&"get"in o&&null!==(a=o.get(e,n))?a:(a=x.find.attr(e,n),null==a?t:a):null!==r?o&&"set"in o&&(a=o.set(e,r,n))!==t?a:(e.setAttribute(n,r+""),r):(x.removeAttr(e,n),t)):void 0},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(T);if(o&&1===e.nodeType)for(;n=o[i++];)r=x.propFix[n]||n,x.expr.match.bool.test(n)?K&&Q||!G.test(n)?e[r]=!1:e[x.camelCase("default-"+n)]=e[r]=!1:x.attr(e,n,""),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!x.support.radioValue&&"radio"===t&&x.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,r){var i,o,a,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?(a=1!==s||!x.isXMLDoc(e),a&&(n=x.propFix[n]||n,o=x.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]):void 0},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,"tabindex");return t?parseInt(t,10):Y.test(e.nodeName)||J.test(e.nodeName)&&e.href?0:-1}}}}),X={set:function(e,t,n){return t===!1?x.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&x.propFix[n]||n,n):e[x.camelCase("default-"+n)]=e[n]=!0,n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(e,n){var r=x.expr.attrHandle[n]||x.find.attr;x.expr.attrHandle[n]=K&&Q||!G.test(n)?function(e,n,i){var o=x.expr.attrHandle[n],a=i?t:(x.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return x.expr.attrHandle[n]=o,a}:function(e,n,r){return r?t:e[x.camelCase("default-"+n)]?n.toLowerCase():null}}),K&&Q||(x.attrHooks.value={set:function(e,n,r){return x.nodeName(e,"input")?(e.defaultValue=n,t):z&&z.set(e,n,r)}}),Q||(z={set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},x.expr.attrHandle.id=x.expr.attrHandle.name=x.expr.attrHandle.coords=function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&""!==i.value?i.value:null},x.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&r.specified?r.value:t},set:z.set},x.attrHooks.contenteditable={set:function(e,t,n){z.set(e,""===t?!1:t,n)}},x.each(["width","height"],function(e,n){x.attrHooks[n]={set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}}})),x.support.hrefNormalized||x.each(["href","src"],function(e,t){x.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),x.support.style||(x.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),x.support.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.support.enctype||(x.propFix.enctype="encoding"),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,n){return x.isArray(n)?e.checked=x.inArray(x(e).val(),n)>=0:t}},x.support.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;x.event={global:{},add:function(e,n,r,o,a){var s,l,u,c,p,f,d,h,g,m,y,v=x._data(e);if(v){for(r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=x.guid++),(l=v.events)||(l=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof x===i||e&&x.event.triggered===e.type?t:x.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||"").match(T)||[""],u=n.length;u--;)s=rt.exec(n[u])||[],g=y=s[1],m=(s[2]||"").split(".").sort(),g&&(p=x.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=x.event.special[g]||{},d=x.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&x.expr.match.needsContext.test(a),namespace:m.join(".")},c),(h=l[g])||(h=l[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent("on"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),x.event.global[g]=!0);e=null}},remove:function(e,t,n,r,i){var o,a,s,l,u,c,p,f,d,h,g,m=x.hasData(e)&&x._data(e);if(m&&(c=m.events)){for(t=(t||"").match(T)||[""],u=t.length;u--;)if(s=rt.exec(t[u])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){for(p=x.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=f.length;o--;)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));l&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||x.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)x.event.remove(e,d+t[u],n,r,!0);x.isEmptyObject(c)&&(delete m.handle,x._removeData(e,"events"))}},trigger:function(n,r,i,o){var s,l,u,c,p,f,d,h=[i||a],g=v.call(n,"type")?n.type:n,m=v.call(n,"namespace")?n.namespace.split("."):[];if(u=f=i=i||a,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+x.event.triggered)&&(g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),l=0>g.indexOf(":")&&"on"+g,n=n[x.expando]?n:new x.Event(g,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:x.makeArray(r,[n]),p=x.event.special[g]||{},o||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!o&&!p.noBubble&&!x.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(u=u.parentNode);u;u=u.parentNode)h.push(u),f=u;f===(i.ownerDocument||a)&&h.push(f.defaultView||f.parentWindow||e)}for(d=0;(u=h[d++])&&!n.isPropagationStopped();)n.type=d>1?c:p.bindType||g,s=(x._data(u,"events")||{})[n.type]&&x._data(u,"handle"),s&&s.apply(u,r),s=l&&u[l],s&&x.acceptData(u)&&s.apply&&s.apply(u,r)===!1&&n.preventDefault();if(n.type=g,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(h.pop(),r)===!1)&&x.acceptData(i)&&l&&i[g]&&!x.isWindow(i)){f=i[l],f&&(i[l]=null),x.event.triggered=g;try{i[g]()}catch(y){}x.event.triggered=t,f&&(i[l]=f)}return n.result}},dispatch:function(e){e=x.event.fix(e);var n,r,i,o,a,s=[],l=g.call(arguments),u=(x._data(this,"events")||{})[e.type]||[],c=x.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(s=x.event.handlers.call(this,e,u),n=0;(o=s[n++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,a=0;(i=o.handlers[a++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((x.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,l),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],l=n.delegateCount,u=e.target;if(l&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==e.type)){for(o=[],a=0;l>a;a++)i=n[a],r=i.selector+" ",o[r]===t&&(o[r]=i.needsContext?x(r,this).index(u)>=0:x.find(r,this,null,[u]).length),o[r]&&o.push(i);o.length&&s.push({elem:u,handlers:o})}return n.length>l&&s.push({elem:this,handlers:n.slice(l)}),s},fix:function(e){if(e[x.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new x.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||a),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,s=n.button,l=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||a,o=i.documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&l&&(e.relatedTarget=l===e.target?n.toElement:l),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==at()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===at()&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},click:{trigger:function(){return x.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t},_default:function(e){return x.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=x.extend(new x.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?x.event.trigger(i,null,t):x.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},x.removeEvent=a.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},x.Event=function(e,n){return this instanceof x.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&x.extend(this,n),this.timeStamp=e&&e.timeStamp||x.now(),this[x.expando]=!0,t):new x.Event(e,n)},x.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},x.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!x.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),x.support.submitBubbles||(x.event.special.submit={
setup:function(){return x.nodeName(this,"form")?!1:(x.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=x.nodeName(n,"input")||x.nodeName(n,"button")?n.form:t;r&&!x._data(r,"submitBubbles")&&(x.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),x._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&x.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return x.nodeName(this,"form")?!1:(x.event.remove(this,"._submit"),t)}}),x.support.changeBubbles||(x.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(x.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),x.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),x.event.simulate("change",this,e,!0)})),!1):(x.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!x._data(t,"changeBubbles")&&(x.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||x.event.simulate("change",this.parentNode,e,!0)}),x._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return x.event.remove(this,"._change"),!Z.test(this.nodeName)}}),x.support.focusinBubbles||x.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){x.event.simulate(t,e.target,x.event.fix(e),!0)};x.event.special[t]={setup:function(){0===n++&&a.addEventListener(e,r,!0)},teardown:function(){0===--n&&a.removeEventListener(e,r,!0)}}}),x.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return x().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=x.guid++)),this.each(function(){x.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,x(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){x.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?x.event.trigger(e,n,r,!0):t}});var st=/^.[^:#\[\.,]*$/,lt=/^(?:parents|prev(?:Until|All))/,ut=x.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};x.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(x(e).filter(function(){for(t=0;i>t;t++)if(x.contains(r[t],this))return!0}));for(t=0;i>t;t++)x.find(e,r[t],n);return n=this.pushStack(i>1?x.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=x(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(x.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e||[],!0))},filter:function(e){return this.pushStack(ft(this,e||[],!1))},is:function(e){return!!ft(this,"string"==typeof e&&ut.test(e)?x(e):e||[],!1).length},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=ut.test(e)||"string"!=typeof e?x(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(a?a.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?x.unique(o):o)},index:function(e){return e?"string"==typeof e?x.inArray(this[0],x(e)):x.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?x(e,t):x.makeArray(e&&e.nodeType?[e]:e),r=x.merge(this.get(),n);return this.pushStack(x.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x.dir(e,"parentNode")},parentsUntil:function(e,t,n){return x.dir(e,"parentNode",n)},next:function(e){return pt(e,"nextSibling")},prev:function(e){return pt(e,"previousSibling")},nextAll:function(e){return x.dir(e,"nextSibling")},prevAll:function(e){return x.dir(e,"previousSibling")},nextUntil:function(e,t,n){return x.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return x.dir(e,"previousSibling",n)},siblings:function(e){return x.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return x.sibling(e.firstChild)},contents:function(e){return x.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:x.merge([],e.childNodes)}},function(e,t){x.fn[e]=function(n,r){var i=x.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=x.filter(r,i)),this.length>1&&(ct[e]||(i=x.unique(i)),lt.test(e)&&(i=i.reverse())),this.pushStack(i)}}),x.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,r){for(var i=[],o=e[n];o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!x(o).is(r));)1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+ht+")[\\s/>]","i"),yt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,xt=/<tbody/i,wt=/<|&#?\w+;/,Tt=/<(?:script|style|link)/i,Ct=/^(?:checkbox|radio)$/i,Nt=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^$|\/(?:java|ecma)script/i,Et=/^true\/(.*)/,St=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,At={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:x.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},jt=dt(a),Dt=jt.appendChild(a.createElement("div"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,x.fn.extend({text:function(e){return x.access(this,function(e){return e===t?x.text(this):this.empty().append((this[0]&&this[0].ownerDocument||a).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Lt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Lt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?x.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||x.cleanData(Ft(n)),n.parentNode&&(t&&x.contains(n.ownerDocument,n)&&_t(Ft(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&x.cleanData(Ft(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&x.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return x.clone(this,e,t)})},html:function(e){return x.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,""):t;if(!("string"!=typeof e||Tt.test(e)||!x.support.htmlSerialize&&mt.test(e)||!x.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(x.cleanData(Ft(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=x.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),x(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=d.apply([],e);var r,i,o,a,s,l,u=0,c=this.length,p=this,f=c-1,h=e[0],g=x.isFunction(h);if(g||!(1>=c||"string"!=typeof h||x.support.checkClone)&&Nt.test(h))return this.each(function(r){var i=p.eq(r);g&&(e[0]=h.call(this,r,i.html())),i.domManip(e,t,n)});if(c&&(l=x.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=l.firstChild,1===l.childNodes.length&&(l=r),r)){for(a=x.map(Ft(l,"script"),Ht),o=a.length;c>u;u++)i=l,u!==f&&(i=x.clone(i,!0,!0),o&&x.merge(a,Ft(i,"script"))),t.call(this[u],i,u);if(o)for(s=a[a.length-1].ownerDocument,x.map(a,qt),u=0;o>u;u++)i=a[u],kt.test(i.type||"")&&!x._data(i,"globalEval")&&x.contains(s,i)&&(i.src?x._evalUrl(i.src):x.globalEval((i.text||i.textContent||i.innerHTML||"").replace(St,"")));l=r=null}return this}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){x.fn[e]=function(e){for(var n,r=0,i=[],o=x(e),a=o.length-1;a>=r;r++)n=r===a?this:this.clone(!0),x(o[r])[t](n),h.apply(i,n.get());return this.pushStack(i)}}),x.extend({clone:function(e,t,n){var r,i,o,a,s,l=x.contains(e.ownerDocument,e);if(x.support.html5Clone||x.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(x.support.noCloneEvent&&x.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(r=Ft(o),s=Ft(e),a=0;null!=(i=s[a]);++a)r[a]&&Ot(i,r[a]);if(t)if(n)for(s=s||Ft(e),r=r||Ft(o),a=0;null!=(i=s[a]);a++)Mt(i,r[a]);else Mt(e,o);return r=Ft(o,"script"),r.length>0&&_t(r,!l&&Ft(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){for(var i,o,a,s,l,u,c,p=e.length,f=dt(t),d=[],h=0;p>h;h++)if(o=e[h],o||0===o)if("object"===x.type(o))x.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){for(s=s||f.appendChild(t.createElement("div")),l=(bt.exec(o)||["",""])[1].toLowerCase(),c=At[l]||At._default,s.innerHTML=c[1]+o.replace(vt,"<$1></$2>")+c[2],i=c[0];i--;)s=s.lastChild;if(!x.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!x.support.tbody)for(o="table"!==l||xt.test(o)?"<table>"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;i--;)x.nodeName(u=o.childNodes[i],"tbody")&&!u.childNodes.length&&o.removeChild(u);for(x.merge(d,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));for(s&&f.removeChild(s),x.support.appendChecked||x.grep(Ft(d,"input"),Bt),h=0;o=d[h++];)if((!r||-1===x.inArray(o,r))&&(a=x.contains(o.ownerDocument,o),s=Ft(f.appendChild(o),"script"),a&&_t(s),n))for(i=0;o=s[i++];)kt.test(o.type||"")&&n.push(o);return s=null,f},cleanData:function(e,t){for(var n,r,o,a,s=0,l=x.expando,u=x.cache,c=x.support.deleteExpando,f=x.event.special;null!=(n=e[s]);s++)if((t||x.acceptData(n))&&(o=n[l],a=o&&u[o])){if(a.events)for(r in a.events)f[r]?x.event.remove(n,r):x.removeEvent(n,r,a.handle);u[o]&&(delete u[o],c?delete n[l]:typeof n.removeAttribute!==i?n.removeAttribute(l):n[l]=null,p.push(o))}},_evalUrl:function(e){return x.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),x.fn.extend({wrapAll:function(e){if(x.isFunction(e))return this.each(function(t){x(this).wrapAll(e.call(this,t))});if(this[0]){var t=x(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return x.isFunction(e)?this.each(function(t){x(this).wrapInner(e.call(this,t))}):this.each(function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=x.isFunction(e);return this.each(function(n){x(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){x.nodeName(this,"body")||x(this).replaceWith(this.childNodes)}).end()}});var Pt,Rt,Wt,$t=/alpha\([^)]*\)/i,It=/opacity\s*=\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp("^("+w+")(.*)$","i"),Yt=RegExp("^("+w+")(?!px)[a-z%]+$","i"),Jt=RegExp("^([+-])=("+w+")","i"),Gt={BODY:"block"},Qt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];x.fn.extend({css:function(e,n){return x.access(this,function(e,n,r){var i,o,a={},s=0;if(x.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=x.css(e,n[s],!1,o);return a}return r!==t?x.style(e,n,r):x.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){nn(this)?x(this).show():x(this).hide()})}}),x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":x.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,l=x.camelCase(n),u=e.style;if(n=x.cssProps[l]||(x.cssProps[l]=tn(u,l)),s=x.cssHooks[n]||x.cssHooks[l],r===t)return s&&"get"in s&&(o=s.get(e,!1,i))!==t?o:u[n];if(a=typeof r,"string"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(x.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||x.cssNumber[l]||(r+="px"),x.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(u[n]="inherit"),s&&"set"in s&&(r=s.set(e,r,i))===t)))try{u[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,l=x.camelCase(n);return n=x.cssProps[l]||(x.cssProps[l]=tn(e.style,l)),s=x.cssHooks[n]||x.cssHooks[l],s&&"get"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),"normal"===a&&n in Kt&&(a=Kt[n]),""===r||r?(o=parseFloat(a),r===!0||x.isNumeric(o)?o||0:a):a}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),l=s?s.getPropertyValue(n)||s[n]:t,u=e.style;return s&&(""!==l||x.contains(e.ownerDocument,e)||(l=x.style(e,n)),Yt.test(l)&&Ut.test(n)&&(i=u.width,o=u.minWidth,a=u.maxWidth,u.minWidth=u.maxWidth=u.width=l,l=s.width,u.width=i,u.minWidth=o,u.maxWidth=a)),l}):a.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),l=s?s[n]:t,u=e.style;return null==l&&u&&u[n]&&(l=u[n]),Yt.test(l)&&!zt.test(n)&&(i=u.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),u.left="fontSize"===n?"1em":l,l=u.pixelLeft+"px",u.left=i,a&&(o.left=a)),""===l?"auto":l}),x.each(["height","width"],function(e,n){x.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(x.css(e,"display"))?x.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,i),i):0)}}}),x.support.opacity||(x.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=x.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===x.trim(o.replace($t,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+" "+i)}}),x(function(){x.support.reliableMarginRight||(x.cssHooks.marginRight={get:function(e,n){return n?x.swap(e,{display:"inline-block"},Wt,[e,"marginRight"]):t}}),!x.support.pixelPosition&&x.fn.position&&x.each(["top","left"],function(e,n){x.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?x(e).position()[n]+"px":r):t}}})}),x.expr&&x.expr.filters&&(x.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!x.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||x.css(e,"display"))},x.expr.filters.visible=function(e){return!x.expr.filters.hidden(e)}),x.each({margin:"",padding:"",border:"Width"},function(e,t){x.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(x.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\[\]$/,fn=/\r?\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Ct.test(e))}).map(function(e,t){var n=x(this).val();return null==n?null:x.isArray(n)?x.map(n,function(e){return{name:t.name,value:e.replace(fn,"\r\n")}}):{name:t.name,value:n.replace(fn,"\r\n")}}).get()}}),x.param=function(e,n){var r,i=[],o=function(e,t){t=x.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=x.ajaxSettings&&x.ajaxSettings.traditional),x.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join("&").replace(cn,"+")},x.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var mn,yn,vn=x.now(),bn=/\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Cn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Nn=/^(?:GET|HEAD)$/,kn=/^\/\//,En=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Sn=x.fn.load,An={},jn={},Dn="*/".concat("*");try{yn=o.href}catch(Ln){yn=a.createElement("a"),yn.href="",yn=yn.href}mn=En.exec(yn.toLowerCase())||[],x.fn.load=function(e,n,r){if("string"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,l=e.indexOf(" ");return l>=0&&(i=e.slice(l,e.length),e=e.slice(0,l)),x.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&x.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments,s.html(i?x("<div>").append(x.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}}),x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:"GET",isLocal:Cn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":x.parseJSON,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?_n(_n(e,x.ajaxSettings),t):_n(x.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){function k(e,n,r,i){var c,y,v,w,T,N=n;2!==b&&(b=2,s&&clearTimeout(s),u=t,a=i||"",C.readyState=e>0?4:0,c=e>=200&&300>e||304===e,r&&(w=Mn(p,C,r)),w=On(p,w,C,c),c?(p.ifModified&&(T=C.getResponseHeader("Last-Modified"),T&&(x.lastModified[o]=T),T=C.getResponseHeader("etag"),T&&(x.etag[o]=T)),204===e||"HEAD"===p.type?N="nocontent":304===e?N="notmodified":(N=w.state,y=w.data,v=w.error,c=!v)):(v=N,(e||!N)&&(N="error",0>e&&(e=0))),C.status=e,C.statusText=(n||N)+"",c?h.resolveWith(f,[y,N,C]):h.rejectWith(f,[C,N,v]),C.statusCode(m),m=t,l&&d.trigger(c?"ajaxSuccess":"ajaxError",[C,p,c?y:v]),g.fireWith(f,[C,N]),l&&(d.trigger("ajaxComplete",[C,p]),--x.active||x.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,l,u,c,p=x.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?x(f):x.event,h=x.Deferred(),g=x.Callbacks("once memory"),m=p.statusCode||{},y={},v={},b=0,w="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!c)for(c={};t=Tn.exec(a);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return b||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||w;return u&&u.abort(t),k(0,t),this}};if(h.promise(C).complete=g.add,C.success=C.done,C.error=C.fail,p.url=((e||p.url||yn)+"").replace(xn,"").replace(kn,mn[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=x.trim(p.dataType||"*").toLowerCase().match(T)||[""],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(mn[3]||("http:"===mn[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=x.param(p.data,p.traditional)),qn(An,p,n,C),2===b)return C;l=p.global,l&&0===x.active++&&x.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Nn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,"$1_="+vn++):o+(bn.test(o)?"&":"?")+"_="+vn++)),p.ifModified&&(x.lastModified[o]&&C.setRequestHeader("If-Modified-Since",x.lastModified[o]),x.etag[o]&&C.setRequestHeader("If-None-Match",x.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&C.setRequestHeader("Content-Type",p.contentType),C.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Dn+"; q=0.01":""):p.accepts["*"]);for(i in p.headers)C.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,C,p)===!1||2===b))return C.abort();w="abort";for(i in{success:1,error:1,complete:1})C[i](p[i]);if(u=qn(jn,p,n,C)){C.readyState=1,l&&d.trigger("ajaxSend",[C,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){C.abort("timeout")},p.timeout));try{b=1,u.send(y,k)}catch(N){if(!(2>b))throw N;k(-1,N)}}else k(-1,"No Transport");return C},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,n){return x.get(e,t,n,"script")}}),x.each(["get","post"],function(e,n){x[n]=function(e,r,i,o){return x.isFunction(r)&&(o=o||i,i=r,r=t),x.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),x.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=a.head||x("head")[0]||a.documentElement;return{send:function(t,i){n=a.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Fn=[],Bn=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Fn.pop()||x.expando+"_"+vn++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,l=n.jsonp!==!1&&(Bn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=x.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Bn,"$1"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||x.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,Fn.push(o)),s&&x.isFunction(a)&&a(s[0]),s=a=t}),"script"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};x.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=x.ajaxSettings.xhr(),x.support.cors=!!Rn&&"withCredentials"in Rn,Rn=x.support.ajax=!!Rn,Rn&&x.ajaxTransport(function(n){if(!n.crossDomain||x.support.cors){var r;return{send:function(i,o){var a,s,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)l[s]=n.xhrFields[s];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)l.setRequestHeader(s,i[s])}catch(u){}l.send(n.hasContent&&n.data||null),r=function(e,i){var s,u,c,p;try{if(r&&(i||4===l.readyState))if(r=t,a&&(l.onreadystatechange=x.noop,$n&&delete Pn[a]),i)4!==l.readyState&&l.abort();else{p={},s=l.status,u=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(p.text=l.responseText);try{c=l.statusText}catch(f){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,u)},n.async?4===l.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},x(e).unload($n)),Pn[a]=r),l.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp("^(?:([+-])=|)("+w+")([a-z%]*)$","i"),Jn=/queueHooks$/,Gn=[nr],Qn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Yn.exec(t),o=i&&i[3]||(x.cssNumber[e]?"":"px"),a=(x.cssNumber[e]||"px"!==o&&+r)&&Yn.exec(x.css(n.elem,e)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do s=s||".5",a/=s,x.style(n.elem,e,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--l)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};x.Animation=x.extend(er,{tweener:function(e,t){x.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}}),x.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(x.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=x.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[x.cssProps[e.prop]]||x.cssHooks[e.prop])?x.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.each(["toggle","show","hide"],function(e,t){var n=x.fn[t];x.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=x.isEmptyObject(e),o=x.speed(t,n,r),a=function(){var t=er(this,x.extend({},e),o);(i||x._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=x.timers,a=x._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&x.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=x._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=x.timers,a=r?r.length:0;for(n.finish=!0,x.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),x.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),x.speed=function(e,t,n){var r=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||x.isFunction(e)&&e,duration:e,easing:n&&t||t&&!x.isFunction(t)&&t};return r.duration=x.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in x.fx.speeds?x.fx.speeds[r.duration]:x.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){x.isFunction(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},x.timers=[],x.fx=rr.prototype.init,x.fx.tick=function(){var e,n=x.timers,r=0;for(Xn=x.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||x.fx.stop(),Xn=t},x.fx.timer=function(e){e()&&x.timers.push(e)&&x.fx.start()},x.fx.interval=13,x.fx.start=function(){Un||(Un=setInterval(x.fx.tick,x.fx.interval))},x.fx.stop=function(){clearInterval(Un),Un=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fx.step={},x.expr&&x.expr.filters&&(x.expr.filters.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length}),x.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){x.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;return s?(n=s.documentElement,x.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o):void 0},x.offset={setOffset:function(e,t,n){var r=x.css(e,"position");"static"===r&&(e.style.position="relative");var p,f,i=x(e),o=i.offset(),a=x.css(e,"top"),s=x.css(e,"left"),l=("absolute"===r||"fixed"===r)&&x.inArray("auto",[a,s])>-1,u={},c={};l?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),x.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(u.top=t.top-o.top+p),null!=t.left&&(u.left=t.left-o.left+f),"using"in t?t.using.call(e,u):i.css(u)}},x.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===x.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),x.nodeName(e[0],"html")||(n=e.offset()),n.top+=x.css(e[0],"borderTopWidth",!0),n.left+=x.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-x.css(r,"marginTop",!0),left:t.left-n.left-x.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||s;e&&!x.nodeName(e,"html")&&"static"===x.css(e,"position");)e=e.offsetParent;
return e||s})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);x.fn[e]=function(i){return x.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?x(a).scrollLeft():o,r?o:x(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}}),x.each({Height:"height",Width:"width"},function(e,n){x.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){x.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(i===!0||o===!0?"margin":"border");return x.access(this,function(n,r,i){var o;return x.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?x.css(n,r,s):x.style(n,r,i,s)},n,a?i:t,a,null)}})}),x.fn.size=function(){return this.length},x.fn.andSelf=x.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=x:(e.jQuery=e.$=x,"function"==typeof define&&define.amd&&define("jquery",[],function(){return x}))}(window),function($,undefined){$.rails!==undefined&&$.error("jquery-ujs has already been loaded!");var rails,$document=$(document);$.rails=rails={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(xhr){var token=$('meta[name="csrf-token"]').attr("content");token&&xhr.setRequestHeader("X-CSRF-Token",token)},refreshCSRFTokens:function(){var csrfToken=$("meta[name=csrf-token]").attr("content"),csrfParam=$("meta[name=csrf-param]").attr("content");$('form input[name="'+csrfParam+'"]').val(csrfToken)},fire:function(obj,name,data){var event=$.Event(name);return obj.trigger(event,data),event.result!==!1},confirm:function(message){return confirm(message)},ajax:function(options){return $.ajax(options)},href:function(element){return element[0].href},handleRemote:function(element){var method,url,data,withCredentials,dataType,options;if(rails.fire(element,"ajax:before")){if(withCredentials=element.data("with-credentials")||null,dataType=element.data("type")||$.ajaxSettings&&$.ajaxSettings.dataType,element.is("form")){method=element.attr("method"),url=element.attr("action"),data=element.serializeArray();var button=element.data("ujs:submit-button");button&&(data.push(button),element.data("ujs:submit-button",null))}else element.is(rails.inputChangeSelector)?(method=element.data("method"),url=element.data("url"),data=element.serialize(),element.data("params")&&(data=data+"&"+element.data("params"))):element.is(rails.buttonClickSelector)?(method=element.data("method")||"get",url=element.data("url"),data=element.serialize(),element.data("params")&&(data=data+"&"+element.data("params"))):(method=element.data("method"),url=rails.href(element),data=element.data("params")||null);return options={type:method||"GET",data:data,dataType:dataType,beforeSend:function(xhr,settings){return settings.dataType===undefined&&xhr.setRequestHeader("accept","*/*;q=0.5, "+settings.accepts.script),rails.fire(element,"ajax:beforeSend",[xhr,settings])?void element.trigger("ajax:send",xhr):!1},success:function(data,status,xhr){element.trigger("ajax:success",[data,status,xhr])},complete:function(xhr,status){element.trigger("ajax:complete",[xhr,status])},error:function(xhr,status,error){element.trigger("ajax:error",[xhr,status,error])},crossDomain:rails.isCrossDomain(url)},withCredentials&&(options.xhrFields={withCredentials:withCredentials}),url&&(options.url=url),rails.ajax(options)}return!1},isCrossDomain:function(url){var originAnchor=document.createElement("a");originAnchor.href=location.href;var urlAnchor=document.createElement("a");try{return urlAnchor.href=url,urlAnchor.href=urlAnchor.href,!urlAnchor.protocol||!urlAnchor.host||originAnchor.protocol+"//"+originAnchor.host!=urlAnchor.protocol+"//"+urlAnchor.host}catch(e){return!0}},handleMethod:function(link){var href=rails.href(link),method=link.data("method"),target=link.attr("target"),csrfToken=$("meta[name=csrf-token]").attr("content"),csrfParam=$("meta[name=csrf-param]").attr("content"),form=$('<form method="post" action="'+href+'"></form>'),metadataInput='<input name="_method" value="'+method+'" type="hidden" />';csrfParam===undefined||csrfToken===undefined||rails.isCrossDomain(href)||(metadataInput+='<input name="'+csrfParam+'" value="'+csrfToken+'" type="hidden" />'),target&&form.attr("target",target),form.hide().append(metadataInput).appendTo("body"),form.submit()},formElements:function(form,selector){return form.is("form")?$(form[0].elements).filter(selector):form.find(selector)},disableFormElements:function(form){rails.formElements(form,rails.disableSelector).each(function(){rails.disableFormElement($(this))})},disableFormElement:function(element){var method,replacement;method=element.is("button")?"html":"val",replacement=element.data("disable-with"),element.data("ujs:enable-with",element[method]()),replacement!==undefined&&element[method](replacement),element.prop("disabled",!0)},enableFormElements:function(form){rails.formElements(form,rails.enableSelector).each(function(){rails.enableFormElement($(this))})},enableFormElement:function(element){var method=element.is("button")?"html":"val";element.data("ujs:enable-with")&&element[method](element.data("ujs:enable-with")),element.prop("disabled",!1)},allowAction:function(element){var callback,message=element.data("confirm"),answer=!1;return message?(rails.fire(element,"confirm")&&(answer=rails.confirm(message),callback=rails.fire(element,"confirm:complete",[answer])),answer&&callback):!0},blankInputs:function(form,specifiedSelector,nonBlank){var input,valueToCheck,inputs=$(),selector=specifiedSelector||"input,textarea",allInputs=form.find(selector);return allInputs.each(function(){if(input=$(this),valueToCheck=input.is("input[type=checkbox],input[type=radio]")?input.is(":checked"):input.val(),!valueToCheck==!nonBlank){if(input.is("input[type=radio]")&&allInputs.filter('input[type=radio]:checked[name="'+input.attr("name")+'"]').length)return!0;inputs=inputs.add(input)}}),inputs.length?inputs:!1},nonBlankInputs:function(form,specifiedSelector){return rails.blankInputs(form,specifiedSelector,!0)},stopEverything:function(e){return $(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(element){var replacement=element.data("disable-with");element.data("ujs:enable-with",element.html()),replacement!==undefined&&element.html(replacement),element.bind("click.railsDisable",function(e){return rails.stopEverything(e)})},enableElement:function(element){element.data("ujs:enable-with")!==undefined&&(element.html(element.data("ujs:enable-with")),element.removeData("ujs:enable-with")),element.unbind("click.railsDisable")}},rails.fire($document,"rails:attachBindings")&&($.ajaxPrefilter(function(options,originalOptions,xhr){options.crossDomain||rails.CSRFProtection(xhr)}),$document.delegate(rails.linkDisableSelector,"ajax:complete",function(){rails.enableElement($(this))}),$document.delegate(rails.buttonDisableSelector,"ajax:complete",function(){rails.enableFormElement($(this))}),$document.delegate(rails.linkClickSelector,"click.rails",function(e){var link=$(this),method=link.data("method"),data=link.data("params"),metaClick=e.metaKey||e.ctrlKey;if(!rails.allowAction(link))return rails.stopEverything(e);if(!metaClick&&link.is(rails.linkDisableSelector)&&rails.disableElement(link),link.data("remote")!==undefined){if(metaClick&&(!method||"GET"===method)&&!data)return!0;var handleRemote=rails.handleRemote(link);return handleRemote===!1?rails.enableElement(link):handleRemote.error(function(){rails.enableElement(link)}),!1}return link.data("method")?(rails.handleMethod(link),!1):void 0}),$document.delegate(rails.buttonClickSelector,"click.rails",function(e){var button=$(this);if(!rails.allowAction(button))return rails.stopEverything(e);button.is(rails.buttonDisableSelector)&&rails.disableFormElement(button);var handleRemote=rails.handleRemote(button);return handleRemote===!1?rails.enableFormElement(button):handleRemote.error(function(){rails.enableFormElement(button)}),!1}),$document.delegate(rails.inputChangeSelector,"change.rails",function(e){var link=$(this);return rails.allowAction(link)?(rails.handleRemote(link),!1):rails.stopEverything(e)}),$document.delegate(rails.formSubmitSelector,"submit.rails",function(e){var blankRequiredInputs,nonBlankFileInputs,form=$(this),remote=form.data("remote")!==undefined;if(!rails.allowAction(form))return rails.stopEverything(e);if(form.attr("novalidate")==undefined&&(blankRequiredInputs=rails.blankInputs(form,rails.requiredInputSelector),blankRequiredInputs&&rails.fire(form,"ajax:aborted:required",[blankRequiredInputs])))return rails.stopEverything(e);if(remote){if(nonBlankFileInputs=rails.nonBlankInputs(form,rails.fileInputSelector)){setTimeout(function(){rails.disableFormElements(form)},13);var aborted=rails.fire(form,"ajax:aborted:file",[nonBlankFileInputs]);return aborted||setTimeout(function(){rails.enableFormElements(form)},13),aborted}return rails.handleRemote(form),!1}setTimeout(function(){rails.disableFormElements(form)},13)}),$document.delegate(rails.formInputClickSelector,"click.rails",function(event){var button=$(this);if(!rails.allowAction(button))return rails.stopEverything(event);var name=button.attr("name"),data=name?{name:name,value:button.val()}:null;button.closest("form").data("ujs:submit-button",data)}),$document.delegate(rails.formSubmitSelector,"ajax:send.rails",function(event){this==event.target&&rails.disableFormElements($(this))}),$document.delegate(rails.formSubmitSelector,"ajax:complete.rails",function(event){this==event.target&&rails.enableFormElements($(this))}),$(function(){rails.refreshCSRFTokens()}))}(jQuery),/* ===================================================
 * bootstrap-transition.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#transitions
 * ===================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function($){"use strict";$(function(){$.support.transition=function(){var transitionEnd=function(){var name,el=document.createElement("bootstrap"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(name in transEndEventNames)if(void 0!==el.style[name])return transEndEventNames[name]}();return transitionEnd&&{end:transitionEnd}}()})}(window.jQuery),/* ==========================================================
 * bootstrap-alert.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#alerts
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function($){"use strict";var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.prototype.close=function(e){function removeElement(){$parent.trigger("closed").remove()}var $parent,$this=$(this),selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")),$parent=$(selector),e&&e.preventDefault(),$parent.length||($parent=$this.hasClass("alert")?$this:$this.parent()),$parent.trigger(e=$.Event("close")),e.isDefaultPrevented()||($parent.removeClass("in"),$.support.transition&&$parent.hasClass("fade")?$parent.on($.support.transition.end,removeElement):removeElement())};var old=$.fn.alert;$.fn.alert=function(option){return this.each(function(){var $this=$(this),data=$this.data("alert");data||$this.data("alert",data=new Alert(this)),"string"==typeof option&&data[option].call($this)})},$.fn.alert.Constructor=Alert,$.fn.alert.noConflict=function(){return $.fn.alert=old,this},$(document).on("click.alert.data-api",dismiss,Alert.prototype.close)}(window.jQuery),/* =========================================================
 * bootstrap-modal.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#modals
 * =========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
!function($){"use strict";var Modal=function(element,options){this.options=options,this.$element=$(element).delegate('[data-dismiss="modal"]',"click.dismiss.modal",$.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};Modal.prototype={constructor:Modal,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var that=this,e=$.Event("show");this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");that.$element.parent().length||that.$element.appendTo(document.body),that.$element.show(),transition&&that.$element[0].offsetWidth,that.$element.addClass("in").attr("aria-hidden",!1),that.enforceFocus(),transition?that.$element.one($.support.transition.end,function(){that.$element.focus().trigger("shown")}):that.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault();e=$.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),$(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),$.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var that=this;$(document).on("focusin.modal",function(e){that.$element[0]===e.target||that.$element.has(e.target).length||that.$element.focus()})},escape:function(){var that=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&that.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var that=this,timeout=setTimeout(function(){that.$element.off($.support.transition.end),that.hideModal()},500);this.$element.one($.support.transition.end,function(){clearTimeout(timeout),that.hideModal()})},hideModal:function(){var that=this;this.$element.hide(),this.backdrop(function(){that.removeBackdrop(),that.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(callback){var animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;if(this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?$.proxy(this.$element[0].focus,this.$element[0]):$.proxy(this.hide,this)),doAnimate&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!callback)return;doAnimate?this.$backdrop.one($.support.transition.end,callback):callback()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one($.support.transition.end,callback):callback()):callback&&callback()}};var old=$.fn.modal;$.fn.modal=function(option){return this.each(function(){var $this=$(this),data=$this.data("modal"),options=$.extend({},$.fn.modal.defaults,$this.data(),"object"==typeof option&&option);data||$this.data("modal",data=new Modal(this,options)),"string"==typeof option?data[option]():options.show&&data.show()})},$.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},$.fn.modal.Constructor=Modal,$.fn.modal.noConflict=function(){return $.fn.modal=old,this},$(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());e.preventDefault(),$target.modal(option).one("hide",function(){$this.focus()})})}(window.jQuery),/* ============================================================
 * bootstrap-dropdown.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#dropdowns
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function($){"use strict";function clearMenus(){$(".dropdown-backdrop").remove(),$(toggle).each(function(){getParent($(this)).removeClass("open")})}function getParent($this){var $parent,selector=$this.attr("data-target");return selector||(selector=$this.attr("href"),selector=selector&&/#/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,"")),$parent=selector&&$(selector),$parent&&$parent.length||($parent=$this.parent()),$parent}var toggle="[data-toggle=dropdown]",Dropdown=function(element){var $el=$(element).on("click.dropdown.data-api",this.toggle);$("html").on("click.dropdown.data-api",function(){$el.parent().removeClass("open")})};Dropdown.prototype={constructor:Dropdown,toggle:function(e){var $parent,isActive,$this=$(this);if(!$this.is(".disabled, :disabled"))return $parent=getParent($this),isActive=$parent.hasClass("open"),clearMenus(),isActive||("ontouchstart"in document.documentElement&&$('<div class="dropdown-backdrop"/>').insertBefore($(this)).on("click",clearMenus),$parent.toggleClass("open")),$this.focus(),!1},keydown:function(e){var $this,$items,$parent,isActive,index;if(/(38|40|27)/.test(e.keyCode)&&($this=$(this),e.preventDefault(),e.stopPropagation(),!$this.is(".disabled, :disabled"))){if($parent=getParent($this),isActive=$parent.hasClass("open"),!isActive||isActive&&27==e.keyCode)return 27==e.which&&$parent.find(toggle).focus(),$this.click();$items=$("[role=menu] li:not(.divider):visible a",$parent),$items.length&&(index=$items.index($items.filter(":focus")),38==e.keyCode&&index>0&&index--,40==e.keyCode&&index<$items.length-1&&index++,~index||(index=0),$items.eq(index).focus())}}};var old=$.fn.dropdown;$.fn.dropdown=function(option){return this.each(function(){var $this=$(this),data=$this.data("dropdown");data||$this.data("dropdown",data=new Dropdown(this)),"string"==typeof option&&data[option].call($this)})},$.fn.dropdown.Constructor=Dropdown,$.fn.dropdown.noConflict=function(){return $.fn.dropdown=old,this},$(document).on("click.dropdown.data-api",clearMenus).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.dropdown.data-api",toggle+", [role=menu]",Dropdown.prototype.keydown)}(window.jQuery),/* =============================================================
 * bootstrap-scrollspy.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#scrollspy
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================== */
!function($){"use strict";function ScrollSpy(element,options){var href,process=$.proxy(this.process,this),$element=$($(element).is("body")?window:element);this.options=$.extend({},$.fn.scrollspy.defaults,options),this.$scrollElement=$element.on("scroll.scroll-spy.data-api",process),this.selector=(this.options.target||(href=$(element).attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=$("body"),this.refresh(),this.process()}ScrollSpy.prototype={constructor:ScrollSpy,refresh:function(){var $targets,self=this;this.offsets=$([]),this.targets=$([]),$targets=this.$body.find(this.selector).map(function(){var $el=$(this),href=$el.data("target")||$el.attr("href"),$href=/^#\w/.test(href)&&$(href);return $href&&$href.length&&[[$href.position().top+(!$.isWindow(self.$scrollElement.get(0))&&self.$scrollElement.scrollTop()),href]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){self.offsets.push(this[0]),self.targets.push(this[1])})},process:function(){var i,scrollTop=this.$scrollElement.scrollTop()+this.options.offset,scrollHeight=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,maxScroll=scrollHeight-this.$scrollElement.height(),offsets=this.offsets,targets=this.targets,activeTarget=this.activeTarget;if(scrollTop>=maxScroll)return activeTarget!=(i=targets.last()[0])&&this.activate(i);for(i=offsets.length;i--;)activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(!offsets[i+1]||scrollTop<=offsets[i+1])&&this.activate(targets[i])},activate:function(target){var active,selector;this.activeTarget=target,$(this.selector).parent(".active").removeClass("active"),selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]',active=$(selector).parent("li").addClass("active"),active.parent(".dropdown-menu").length&&(active=active.closest("li.dropdown").addClass("active")),active.trigger("activate")}};var old=$.fn.scrollspy;$.fn.scrollspy=function(option){return this.each(function(){var $this=$(this),data=$this.data("scrollspy"),options="object"==typeof option&&option;data||$this.data("scrollspy",data=new ScrollSpy(this,options)),"string"==typeof option&&data[option]()})},$.fn.scrollspy.Constructor=ScrollSpy,$.fn.scrollspy.defaults={offset:10},$.fn.scrollspy.noConflict=function(){return $.fn.scrollspy=old,this},$(window).on("load",function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this);$spy.scrollspy($spy.data())})})}(window.jQuery),/* ========================================================
 * bootstrap-tab.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#tabs
 * ========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================== */
!function($){"use strict";var Tab=function(element){this.element=$(element)};Tab.prototype={constructor:Tab,show:function(){var previous,$target,e,$this=this.element,$ul=$this.closest("ul:not(.dropdown-menu)"),selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")),$this.parent("li").hasClass("active")||(previous=$ul.find(".active:last a")[0],e=$.Event("show",{relatedTarget:previous}),$this.trigger(e),e.isDefaultPrevented()||($target=$(selector),this.activate($this.parent("li"),$ul),this.activate($target,$target.parent(),function(){$this.trigger({type:"shown",relatedTarget:previous})})))},activate:function(element,container,callback){function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),element.addClass("active"),transition?(element[0].offsetWidth,element.addClass("in")):element.removeClass("fade"),element.parent(".dropdown-menu")&&element.closest("li.dropdown").addClass("active"),callback&&callback()}var $active=container.find("> .active"),transition=callback&&$.support.transition&&$active.hasClass("fade");transition?$active.one($.support.transition.end,next):next(),$active.removeClass("in")}};var old=$.fn.tab;$.fn.tab=function(option){return this.each(function(){var $this=$(this),data=$this.data("tab");data||$this.data("tab",data=new Tab(this)),"string"==typeof option&&data[option]()})},$.fn.tab.Constructor=Tab,$.fn.tab.noConflict=function(){return $.fn.tab=old,this},$(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),$(this).tab("show")})}(window.jQuery),/* ===========================================================
 * bootstrap-tooltip.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function($){"use strict";var Tooltip=function(element,options){this.init("tooltip",element,options)};Tooltip.prototype={constructor:Tooltip,init:function(type,element,options){var eventIn,eventOut,triggers,trigger,i;for(this.type=type,this.$element=$(element),this.options=this.getOptions(options),this.enabled=!0,triggers=this.options.trigger.split(" "),i=triggers.length;i--;)trigger=triggers[i],"click"==trigger?this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this)):"manual"!=trigger&&(eventIn="hover"==trigger?"mouseenter":"focus",eventOut="hover"==trigger?"mouseleave":"blur",this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this)),this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this)));this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(options){return options=$.extend({},$.fn[this.type].defaults,this.$element.data(),options),options.delay&&"number"==typeof options.delay&&(options.delay={show:options.delay,hide:options.delay}),options},enter:function(e){var self,defaults=$.fn[this.type].defaults,options={};return this._options&&$.each(this._options,function(key,value){defaults[key]!=value&&(options[key]=value)},this),self=$(e.currentTarget)[this.type](options).data(this.type),self.options.delay&&self.options.delay.show?(clearTimeout(this.timeout),self.hoverState="in",void(this.timeout=setTimeout(function(){"in"==self.hoverState&&self.show()},self.options.delay.show))):self.show()},leave:function(e){var self=$(e.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),self.options.delay&&self.options.delay.hide?(self.hoverState="out",void(this.timeout=setTimeout(function(){"out"==self.hoverState&&self.hide()},self.options.delay.hide))):self.hide()},show:function(){var $tip,pos,actualWidth,actualHeight,placement,tp,e=$.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;switch($tip=this.tip(),this.setContent(),this.options.animation&&$tip.addClass("fade"),placement="function"==typeof this.options.placement?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,$tip.detach().css({top:0,left:0,display:"block"}),this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element),pos=this.getPosition(),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight,placement){case"bottom":tp={top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2};break;case"top":tp={top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2};break;case"left":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth};break;case"right":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}}this.applyPlacement(tp,placement),this.$element.trigger("shown")}},applyPlacement:function(offset,placement){var actualWidth,actualHeight,delta,replace,$tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight;$tip.offset(offset).addClass(placement).addClass("in"),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight,"top"==placement&&actualHeight!=height&&(offset.top=offset.top+height-actualHeight,replace=!0),"bottom"==placement||"top"==placement?(delta=0,offset.left<0&&(delta=-2*offset.left,offset.left=0,$tip.offset(offset),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight),this.replaceArrow(delta-width+actualWidth,actualWidth,"left")):this.replaceArrow(actualHeight-height,actualHeight,"top"),replace&&$tip.offset(offset)},replaceArrow:function(delta,dimension,position){this.arrow().css(position,delta?50*(1-delta/dimension)+"%":"")},setContent:function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title),$tip.removeClass("fade in top bottom left right")},hide:function(){function removeWithAnimation(){var timeout=setTimeout(function(){$tip.off($.support.transition.end).detach()},500);$tip.one($.support.transition.end,function(){clearTimeout(timeout),$tip.detach()})}var $tip=this.tip(),e=$.Event("hide");return this.$element.trigger(e),e.isDefaultPrevented()?void 0:($tip.removeClass("in"),$.support.transition&&this.$tip.hasClass("fade")?removeWithAnimation():$tip.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var $e=this.$element;($e.attr("title")||"string"!=typeof $e.attr("data-original-title"))&&$e.attr("data-original-title",$e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var el=this.$element[0];return $.extend({},"function"==typeof el.getBoundingClientRect?el.getBoundingClientRect():{width:el.offsetWidth,height:el.offsetHeight},this.$element.offset())},getTitle:function(){var title,$e=this.$element,o=this.options;return title=$e.attr("data-original-title")||("function"==typeof o.title?o.title.call($e[0]):o.title)},tip:function(){return this.$tip=this.$tip||$(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var self=e?$(e.currentTarget)[this.type](this._options).data(this.type):this;self.tip().hasClass("in")?self.hide():self.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var old=$.fn.tooltip;$.fn.tooltip=function(option){return this.each(function(){var $this=$(this),data=$this.data("tooltip"),options="object"==typeof option&&option;data||$this.data("tooltip",data=new Tooltip(this,options)),"string"==typeof option&&data[option]()})},$.fn.tooltip.Constructor=Tooltip,$.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},$.fn.tooltip.noConflict=function(){return $.fn.tooltip=old,this}}(window.jQuery),/* ===========================================================
 * bootstrap-popover.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#popovers
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =========================================================== */
!function($){"use strict";var Popover=function(element,options){this.init("popover",element,options)};Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype,{constructor:Popover,setContent:function(){var $tip=this.tip(),title=this.getTitle(),content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title),$tip.find(".popover-content")[this.options.html?"html":"text"](content),$tip.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var content,$e=this.$element,o=this.options;return content=("function"==typeof o.content?o.content.call($e[0]):o.content)||$e.attr("data-content")},tip:function(){return this.$tip||(this.$tip=$(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var old=$.fn.popover;$.fn.popover=function(option){return this.each(function(){var $this=$(this),data=$this.data("popover"),options="object"==typeof option&&option;data||$this.data("popover",data=new Popover(this,options)),"string"==typeof option&&data[option]()})},$.fn.popover.Constructor=Popover,$.fn.popover.defaults=$.extend({},$.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),$.fn.popover.noConflict=function(){return $.fn.popover=old,this}}(window.jQuery),/* ============================================================
 * bootstrap-button.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#buttons
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function($){"use strict";var Button=function(element,options){this.$element=$(element),this.options=$.extend({},$.fn.button.defaults,options)};Button.prototype.setState=function(state){var d="disabled",$el=this.$element,data=$el.data(),val=$el.is("input")?"val":"html";state+="Text",data.resetText||$el.data("resetText",$el[val]()),$el[val](data[state]||this.options[state]),setTimeout(function(){"loadingText"==state?$el.addClass(d).attr(d,d):$el.removeClass(d).removeAttr(d)},0)},Button.prototype.toggle=function(){var $parent=this.$element.closest('[data-toggle="buttons-radio"]');$parent&&$parent.find(".active").removeClass("active"),this.$element.toggleClass("active")};var old=$.fn.button;$.fn.button=function(option){return this.each(function(){var $this=$(this),data=$this.data("button"),options="object"==typeof option&&option;data||$this.data("button",data=new Button(this,options)),"toggle"==option?data.toggle():option&&data.setState(option)})},$.fn.button.defaults={loadingText:"loading..."},$.fn.button.Constructor=Button,$.fn.button.noConflict=function(){return $.fn.button=old,this},$(document).on("click.button.data-api","[data-toggle^=button]",function(e){var $btn=$(e.target);$btn.hasClass("btn")||($btn=$btn.closest(".btn")),$btn.button("toggle")})}(window.jQuery),/* =============================================================
 * bootstrap-collapse.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#collapse
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function($){"use strict";var Collapse=function(element,options){this.$element=$(element),this.options=$.extend({},$.fn.collapse.defaults,options),this.options.parent&&(this.$parent=$(this.options.parent)),this.options.toggle&&this.toggle()};Collapse.prototype={constructor:Collapse,dimension:function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"},show:function(){var dimension,scroll,actives,hasData;if(!this.transitioning&&!this.$element.hasClass("in")){if(dimension=this.dimension(),scroll=$.camelCase(["scroll",dimension].join("-")),actives=this.$parent&&this.$parent.find("> .accordion-group > .in"),actives&&actives.length){if(hasData=actives.data("collapse"),hasData&&hasData.transitioning)return;actives.collapse("hide"),hasData||actives.data("collapse",null)}this.$element[dimension](0),this.transition("addClass",$.Event("show"),"shown"),$.support.transition&&this.$element[dimension](this.$element[0][scroll])}},hide:function(){var dimension;!this.transitioning&&this.$element.hasClass("in")&&(dimension=this.dimension(),this.reset(this.$element[dimension]()),this.transition("removeClass",$.Event("hide"),"hidden"),this.$element[dimension](0))},reset:function(size){var dimension=this.dimension();return this.$element.removeClass("collapse")[dimension](size||"auto")[0].offsetWidth,this.$element[null!==size?"addClass":"removeClass"]("collapse"),this},transition:function(method,startEvent,completeEvent){var that=this,complete=function(){"show"==startEvent.type&&that.reset(),that.transitioning=0,that.$element.trigger(completeEvent)};this.$element.trigger(startEvent),startEvent.isDefaultPrevented()||(this.transitioning=1,this.$element[method]("in"),$.support.transition&&this.$element.hasClass("collapse")?this.$element.one($.support.transition.end,complete):complete())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var old=$.fn.collapse;$.fn.collapse=function(option){return this.each(function(){var $this=$(this),data=$this.data("collapse"),options=$.extend({},$.fn.collapse.defaults,$this.data(),"object"==typeof option&&option);data||$this.data("collapse",data=new Collapse(this,options)),"string"==typeof option&&data[option]()})},$.fn.collapse.defaults={toggle:!0},$.fn.collapse.Constructor=Collapse,$.fn.collapse.noConflict=function(){return $.fn.collapse=old,this},$(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var href,$this=$(this),target=$this.attr("data-target")||e.preventDefault()||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""),option=$(target).data("collapse")?"toggle":$this.data();$this[$(target).hasClass("in")?"addClass":"removeClass"]("collapsed"),$(target).collapse(option)})}(window.jQuery),/* ==========================================================
 * bootstrap-carousel.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#carousel
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function($){"use strict";var Carousel=function(element,options){this.$element=$(element),this.$indicators=this.$element.find(".carousel-indicators"),this.options=options,"hover"==this.options.pause&&this.$element.on("mouseenter",$.proxy(this.pause,this)).on("mouseleave",$.proxy(this.cycle,this))};Carousel.prototype={cycle:function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(pos){var activeIndex=this.getActiveIndex(),that=this;if(!(pos>this.$items.length-1||0>pos))return this.sliding?this.$element.one("slid",function(){that.to(pos)}):activeIndex==pos?this.pause().cycle():this.slide(pos>activeIndex?"next":"prev",$(this.$items[pos]))},pause:function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&$.support.transition.end&&(this.$element.trigger($.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(type,next){var e,$active=this.$element.find(".item.active"),$next=next||$active[type](),isCycling=this.interval,direction="next"==type?"left":"right",fallback="next"==type?"first":"last",that=this;if(this.sliding=!0,isCycling&&this.pause(),$next=$next.length?$next:this.$element.find(".item")[fallback](),e=$.Event("slide",{relatedTarget:$next[0],direction:direction}),!$next.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var $nextIndicator=$(that.$indicators.children()[that.getActiveIndex()]);$nextIndicator&&$nextIndicator.addClass("active")})),$.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(e),e.isDefaultPrevented())return;$next.addClass(type),$next[0].offsetWidth,$active.addClass(direction),$next.addClass(direction),this.$element.one($.support.transition.end,function(){$next.removeClass([type,direction].join(" ")).addClass("active"),$active.removeClass(["active",direction].join(" ")),that.sliding=!1,setTimeout(function(){that.$element.trigger("slid")},0)})}else{if(this.$element.trigger(e),e.isDefaultPrevented())return;$active.removeClass("active"),$next.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return isCycling&&this.cycle(),this}}};var old=$.fn.carousel;$.fn.carousel=function(option){return this.each(function(){var $this=$(this),data=$this.data("carousel"),options=$.extend({},$.fn.carousel.defaults,"object"==typeof option&&option),action="string"==typeof option?option:options.slide;data||$this.data("carousel",data=new Carousel(this,options)),"number"==typeof option?data.to(option):action?data[action]():options.interval&&data.pause().cycle()})},$.fn.carousel.defaults={interval:5e3,pause:"hover"},$.fn.carousel.Constructor=Carousel,$.fn.carousel.noConflict=function(){return $.fn.carousel=old,this},$(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(e){var href,slideIndex,$this=$(this),$target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")),options=$.extend({},$target.data(),$this.data());$target.carousel(options),(slideIndex=$this.attr("data-slide-to"))&&$target.data("carousel").pause().to(slideIndex).cycle(),e.preventDefault()})}(window.jQuery),/* =============================================================
 * bootstrap-typeahead.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#typeahead
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function($){"use strict";var Typeahead=function(element,options){this.$element=$(element),this.options=$.extend({},$.fn.typeahead.defaults,options),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=$(this.options.menu),this.shown=!1,this.listen()};Typeahead.prototype={constructor:Typeahead,select:function(){var val=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(val)).change(),this.hide()},updater:function(item){return item},show:function(){var pos=$.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:pos.top+pos.height,left:pos.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(event){var items;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(items=$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source,items?this.process(items):this)},process:function(items){var that=this;return items=$.grep(items,function(item){return that.matcher(item)}),items=this.sorter(items),items.length?this.render(items.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(item){return~item.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(items){for(var item,beginswith=[],caseSensitive=[],caseInsensitive=[];item=items.shift();)item.toLowerCase().indexOf(this.query.toLowerCase())?~item.indexOf(this.query)?caseSensitive.push(item):caseInsensitive.push(item):beginswith.push(item);return beginswith.concat(caseSensitive,caseInsensitive)},highlighter:function(item){var query=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return item.replace(new RegExp("("+query+")","ig"),function($1,match){return"<strong>"+match+"</strong>"})},render:function(items){var that=this;return items=$(items).map(function(i,item){return i=$(that.options.item).attr("data-value",item),i.find("a").html(that.highlighter(item)),i[0]}),items.first().addClass("active"),this.$menu.html(items),this},next:function(event){var active=this.$menu.find(".active").removeClass("active"),next=active.next();next.length||(next=$(this.$menu.find("li")[0])),next.addClass("active")},prev:function(event){var active=this.$menu.find(".active").removeClass("active"),prev=active.prev();prev.length||(prev=this.$menu.find("li").last()),prev.addClass("active")},listen:function(){this.$element.on("focus",$.proxy(this.focus,this)).on("blur",$.proxy(this.blur,this)).on("keypress",$.proxy(this.keypress,this)).on("keyup",$.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",$.proxy(this.keydown,this)),this.$menu.on("click",$.proxy(this.click,this)).on("mouseenter","li",$.proxy(this.mouseenter,this)).on("mouseleave","li",$.proxy(this.mouseleave,this))},eventSupported:function(eventName){var isSupported=eventName in this.$element;return isSupported||(this.$element.setAttribute(eventName,"return;"),isSupported="function"==typeof this.$element[eventName]),isSupported},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~$.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(e){this.focused=!0},blur:function(e){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),$(e.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var old=$.fn.typeahead;$.fn.typeahead=function(option){return this.each(function(){var $this=$(this),data=$this.data("typeahead"),options="object"==typeof option&&option;data||$this.data("typeahead",data=new Typeahead(this,options)),"string"==typeof option&&data[option]()})},$.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},$.fn.typeahead.Constructor=Typeahead,$.fn.typeahead.noConflict=function(){return $.fn.typeahead=old,this},$(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(e){var $this=$(this);$this.data("typeahead")||$this.typeahead($this.data())})}(window.jQuery),/* ==========================================================
 * bootstrap-affix.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#affix
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function($){"use strict";var Affix=function(element,options){this.options=$.extend({},$.fn.affix.defaults,options),this.$window=$(window).on("scroll.affix.data-api",$.proxy(this.checkPosition,this)).on("click.affix.data-api",$.proxy(function(){setTimeout($.proxy(this.checkPosition,this),1)},this)),this.$element=$(element),this.checkPosition()};Affix.prototype.checkPosition=function(){if(this.$element.is(":visible")){var affix,scrollHeight=$(document).height(),scrollTop=this.$window.scrollTop(),position=this.$element.offset(),offset=this.options.offset,offsetBottom=offset.bottom,offsetTop=offset.top,reset="affix affix-top affix-bottom";"object"!=typeof offset&&(offsetBottom=offsetTop=offset),"function"==typeof offsetTop&&(offsetTop=offset.top()),"function"==typeof offsetBottom&&(offsetBottom=offset.bottom()),affix=null!=this.unpin&&scrollTop+this.unpin<=position.top?!1:null!=offsetBottom&&position.top+this.$element.height()>=scrollHeight-offsetBottom?"bottom":null!=offsetTop&&offsetTop>=scrollTop?"top":!1,this.affixed!==affix&&(this.affixed=affix,this.unpin="bottom"==affix?position.top-scrollTop:null,this.$element.removeClass(reset).addClass("affix"+(affix?"-"+affix:"")))}};var old=$.fn.affix;$.fn.affix=function(option){return this.each(function(){var $this=$(this),data=$this.data("affix"),options="object"==typeof option&&option;data||$this.data("affix",data=new Affix(this,options)),"string"==typeof option&&data[option]()})},$.fn.affix.Constructor=Affix,$.fn.affix.defaults={offset:0},$.fn.affix.noConflict=function(){return $.fn.affix=old,this},$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var $spy=$(this),data=$spy.data();data.offset=data.offset||{},data.offsetBottom&&(data.offset.bottom=data.offsetBottom),data.offsetTop&&(data.offset.top=data.offsetTop),$spy.affix(data)})})}(window.jQuery),function($){$.fn.autogrow=function(options){return this.filter("textarea").each(function(){var $this=$(this),minHeight=$this.height(),blankLine=($this.css("lineHeight"),void 0===$this.data("no-blank-line")),shadow=$("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:$(this).width()-parseInt($this.css("paddingLeft"))-parseInt($this.css("paddingRight")),fontSize:$this.css("fontSize"),fontFamily:$this.css("fontFamily"),lineHeight:$this.css("lineHeight"),resize:"none"}).appendTo(document.body),update=function(){var times=function(string,number){for(var i=0,r="";number>i;i++)r+=string;return r};if(this.value.length<=1e5){var val=this.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(space){return times("&nbsp;",space.length-1)+" "});shadow.html(val),$(this).css("height",Math.max(shadow.height()+(blankLine||this==document.activeElement?20:0),minHeight))}else $(this).css("height",Math.max(3e3,minHeight))};$(this).change(update).keyup(update).keydown(update).focus(update).blur(update),update.apply(this)}),this}}(jQuery),$(document).on("focus","textarea",function(){$(this).data("autogrowed")||$(this).data("no-autogrow")||$(this).autogrow().data("autogrowed",!0)}),$(function(){$(".apply-cdn-fallback").size()>0&&$("body").addClass("cdn-fallback")}),/*!
 * clipboard.js v1.6.1
 * https://zenorocha.github.io/clipboard.js
 *
 * Licensed MIT © Zeno Rocha
 */
function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.Clipboard=f()}}(function(){var define;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){function closest(element,selector){for(;element&&element.nodeType!==DOCUMENT_NODE_TYPE;){if(element.matches(selector))return element;element=element.parentNode}}var DOCUMENT_NODE_TYPE=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var proto=Element.prototype;proto.matches=proto.matchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector||proto.webkitMatchesSelector}module.exports=closest},{}],2:[function(require,module,exports){function delegate(element,selector,type,callback,useCapture){var listenerFn=listener.apply(this,arguments);return element.addEventListener(type,listenerFn,useCapture),{destroy:function(){element.removeEventListener(type,listenerFn,useCapture)}}}function listener(element,selector,type,callback){return function(e){e.delegateTarget=closest(e.target,selector),e.delegateTarget&&callback.call(element,e)}}var closest=require("./closest");module.exports=delegate},{"./closest":1}],3:[function(require,module,exports){exports.node=function(value){return void 0!==value&&value instanceof HTMLElement&&1===value.nodeType},exports.nodeList=function(value){var type=Object.prototype.toString.call(value);return void 0!==value&&("[object NodeList]"===type||"[object HTMLCollection]"===type)&&"length"in value&&(0===value.length||exports.node(value[0]))},exports.string=function(value){return"string"==typeof value||value instanceof String},exports.fn=function(value){var type=Object.prototype.toString.call(value);return"[object Function]"===type}},{}],4:[function(require,module,exports){function listen(target,type,callback){if(!target&&!type&&!callback)throw new Error("Missing required arguments");if(!is.string(type))throw new TypeError("Second argument must be a String");if(!is.fn(callback))throw new TypeError("Third argument must be a Function");if(is.node(target))return listenNode(target,type,callback);if(is.nodeList(target))return listenNodeList(target,type,callback);if(is.string(target))return listenSelector(target,type,callback);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function listenNode(node,type,callback){return node.addEventListener(type,callback),{destroy:function(){node.removeEventListener(type,callback)}}}function listenNodeList(nodeList,type,callback){return Array.prototype.forEach.call(nodeList,function(node){node.addEventListener(type,callback)}),{destroy:function(){Array.prototype.forEach.call(nodeList,function(node){node.removeEventListener(type,callback)})}}}function listenSelector(selector,type,callback){return delegate(document.body,selector,type,callback)}var is=require("./is"),delegate=require("delegate");module.exports=listen},{"./is":3,delegate:2}],5:[function(require,module,exports){function select(element){var selectedText;if("SELECT"===element.nodeName)element.focus(),selectedText=element.value;else if("INPUT"===element.nodeName||"TEXTAREA"===element.nodeName){var isReadOnly=element.hasAttribute("readonly");isReadOnly||element.setAttribute("readonly",""),element.select(),element.setSelectionRange(0,element.value.length),isReadOnly||element.removeAttribute("readonly"),selectedText=element.value}else{element.hasAttribute("contenteditable")&&element.focus();var selection=window.getSelection(),range=document.createRange();range.selectNodeContents(element),selection.removeAllRanges(),selection.addRange(range),selectedText=selection.toString()}return selectedText}module.exports=select},{}],6:[function(require,module,exports){function E(){}E.prototype={on:function(name,callback,ctx){var e=this.e||(this.e={});return(e[name]||(e[name]=[])).push({fn:callback,ctx:ctx}),this},once:function(name,callback,ctx){function listener(){self.off(name,listener),callback.apply(ctx,arguments)}var self=this;return listener._=callback,this.on(name,listener,ctx)},emit:function(name){var data=[].slice.call(arguments,1),evtArr=((this.e||(this.e={}))[name]||[]).slice(),i=0,len=evtArr.length;for(i;len>i;i++)evtArr[i].fn.apply(evtArr[i].ctx,data);return this},off:function(name,callback){var e=this.e||(this.e={}),evts=e[name],liveEvents=[];if(evts&&callback)for(var i=0,len=evts.length;len>i;i++)evts[i].fn!==callback&&evts[i].fn._!==callback&&liveEvents.push(evts[i]);return liveEvents.length?e[name]=liveEvents:delete e[name],this}},module.exports=E},{}],7:[function(require,module,exports){!function(global,factory){if("function"==typeof define&&define.amd)define(["module","select"],factory);else if("undefined"!=typeof exports)factory(module,require("select"));else{var mod={exports:{}};factory(mod,global.select),global.clipboardAction=mod.exports}}(this,function(module,_select){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _select2=_interopRequireDefault(_select),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),ClipboardAction=function(){function ClipboardAction(options){_classCallCheck(this,ClipboardAction),this.resolveOptions(options),this.initSelection()}return _createClass(ClipboardAction,[{key:"resolveOptions",value:function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=options.action,this.emitter=options.emitter,this.target=options.target,this.text=options.text,this.trigger=options.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var _this=this,isRTL="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return _this.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[isRTL?"right":"left"]="-9999px";var yPosition=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=yPosition+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=_select2["default"](this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=_select2["default"](this.target),this.copyText()}},{key:"copyText",value:function(){var succeeded=void 0;try{succeeded=document.execCommand(this.action)}catch(err){succeeded=!1}this.handleResult(succeeded)}},{key:"handleResult",value:function(succeeded){this.emitter.emit(succeeded?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var action=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=action,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(target){if(void 0!==target){if(!target||"object"!==("undefined"==typeof target?"undefined":_typeof(target))||1!==target.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&target.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(target.hasAttribute("readonly")||target.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=target}},get:function(){return this._target}}]),ClipboardAction}();module.exports=ClipboardAction})},{select:5}],8:[function(require,module,exports){!function(global,factory){if("function"==typeof define&&define.amd)define(["module","./clipboard-action","tiny-emitter","good-listener"],factory);else if("undefined"!=typeof exports)factory(module,require("./clipboard-action"),require("tiny-emitter"),require("good-listener"));else{var mod={exports:{}};factory(mod,global.clipboardAction,global.tinyEmitter,global.goodListener),global.clipboard=mod.exports}}(this,function(module,_clipboardAction,_tinyEmitter,_goodListener){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function getAttributeValue(suffix,element){var attribute="data-clipboard-"+suffix;if(element.hasAttribute(attribute))return element.getAttribute(attribute)}var _clipboardAction2=_interopRequireDefault(_clipboardAction),_tinyEmitter2=_interopRequireDefault(_tinyEmitter),_goodListener2=_interopRequireDefault(_goodListener),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Clipboard=function(_Emitter){function Clipboard(trigger,options){_classCallCheck(this,Clipboard);var _this=_possibleConstructorReturn(this,(Clipboard.__proto__||Object.getPrototypeOf(Clipboard)).call(this));return _this.resolveOptions(options),_this.listenClick(trigger),_this}return _inherits(Clipboard,_Emitter),_createClass(Clipboard,[{key:"resolveOptions",value:function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof options.action?options.action:this.defaultAction,this.target="function"==typeof options.target?options.target:this.defaultTarget,this.text="function"==typeof options.text?options.text:this.defaultText}},{key:"listenClick",value:function(trigger){var _this2=this;this.listener=_goodListener2["default"](trigger,"click",function(e){return _this2.onClick(e)})}},{key:"onClick",value:function(e){var trigger=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new _clipboardAction2["default"]({action:this.action(trigger),target:this.target(trigger),text:this.text(trigger),trigger:trigger,emitter:this})}},{key:"defaultAction",value:function(trigger){return getAttributeValue("action",trigger)}},{key:"defaultTarget",value:function(trigger){var selector=getAttributeValue("target",trigger);return selector?document.querySelector(selector):void 0}},{key:"defaultText",value:function(trigger){return getAttributeValue("text",trigger)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var action=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],actions="string"==typeof action?[action]:action,support=!!document.queryCommandSupported;return actions.forEach(function(action){support=support&&!!document.queryCommandSupported(action)}),support}}]),Clipboard}(_tinyEmitter2["default"]);module.exports=Clipboard})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)}),/*
 * Fingerprintjs2 1.5.0 - Modern & flexible browser fingerprint library v2
 * https://github.com/Valve/fingerprintjs2
 * Copyright (c) 2015 Valentin Vasilyev (valentin.vasilyev@outlook.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL VALENTIN VASILYEV BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(name,context,definition){"use strict";"function"==typeof define&&define.amd?define(definition):"undefined"!=typeof module&&module.exports?module.exports=definition():context.exports?context.exports=definition():context[name]=definition()}("Fingerprint2",this,function(){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(searchElement,fromIndex){var k;if(null==this)throw new TypeError("'this' is null or undefined");var O=Object(this),len=O.length>>>0;if(0===len)return-1;var n=+fromIndex||0;if(Math.abs(n)===1/0&&(n=0),n>=len)return-1;for(k=Math.max(n>=0?n:len-Math.abs(n),0);len>k;){if(k in O&&O[k]===searchElement)return k;k++}return-1});var Fingerprint2=function(options){if(!(this instanceof Fingerprint2))return new Fingerprint2(options);var defaultOptions={swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",detectScreenOrientation:!0,sortPluginsFor:[/palemoon/i],userDefinedFonts:[]};this.options=this.extend(options,defaultOptions),this.nativeForEach=Array.prototype.forEach,this.nativeMap=Array.prototype.map};return Fingerprint2.prototype={extend:function(source,target){if(null==source)return target;for(var k in source)null!=source[k]&&target[k]!==source[k]&&(target[k]=source[k]);return target},log:function(msg){window.console&&console.log(msg)},get:function(done){var keys=[];keys=this.userAgentKey(keys),keys=this.languageKey(keys),keys=this.colorDepthKey(keys),keys=this.pixelRatioKey(keys),keys=this.hardwareConcurrencyKey(keys),keys=this.screenResolutionKey(keys),keys=this.availableScreenResolutionKey(keys),keys=this.timezoneOffsetKey(keys),keys=this.sessionStorageKey(keys),keys=this.localStorageKey(keys),keys=this.indexedDbKey(keys),keys=this.addBehaviorKey(keys),keys=this.openDatabaseKey(keys),keys=this.cpuClassKey(keys),keys=this.platformKey(keys),keys=this.doNotTrackKey(keys),keys=this.pluginsKey(keys),keys=this.canvasKey(keys),keys=this.webglKey(keys),keys=this.adBlockKey(keys),keys=this.hasLiedLanguagesKey(keys),keys=this.hasLiedResolutionKey(keys),keys=this.hasLiedOsKey(keys),keys=this.hasLiedBrowserKey(keys),keys=this.touchSupportKey(keys);var that=this;this.fontsKey(keys,function(newKeys){var values=[];that.each(newKeys,function(pair){var value=pair.value;"undefined"!=typeof pair.value.join&&(value=pair.value.join(";")),values.push(value)});var murmur=that.x64hash128(values.join("~~~"),31);return done(murmur,newKeys)})},userAgentKey:function(keys){return this.options.excludeUserAgent||keys.push({key:"user_agent",value:this.getUserAgent()}),keys},getUserAgent:function(){return navigator.userAgent},languageKey:function(keys){return this.options.excludeLanguage||keys.push({key:"language",value:navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||""}),keys},colorDepthKey:function(keys){return this.options.excludeColorDepth||keys.push({key:"color_depth",value:screen.colorDepth||-1}),keys},pixelRatioKey:function(keys){return this.options.excludePixelRatio||keys.push({key:"pixel_ratio",value:this.getPixelRatio()}),keys},getPixelRatio:function(){return window.devicePixelRatio||""},screenResolutionKey:function(keys){return this.options.excludeScreenResolution?keys:this.getScreenResolution(keys)},getScreenResolution:function(keys){var resolution;return resolution=this.options.detectScreenOrientation&&screen.height>screen.width?[screen.height,screen.width]:[screen.width,screen.height],"undefined"!=typeof resolution&&keys.push({key:"resolution",value:resolution}),keys},availableScreenResolutionKey:function(keys){return this.options.excludeAvailableScreenResolution?keys:this.getAvailableScreenResolution(keys)},getAvailableScreenResolution:function(keys){var available;return screen.availWidth&&screen.availHeight&&(available=this.options.detectScreenOrientation?screen.availHeight>screen.availWidth?[screen.availHeight,screen.availWidth]:[screen.availWidth,screen.availHeight]:[screen.availHeight,screen.availWidth]),"undefined"!=typeof available&&keys.push({key:"available_resolution",value:available}),keys},timezoneOffsetKey:function(keys){return this.options.excludeTimezoneOffset||keys.push({key:"timezone_offset",value:(new Date).getTimezoneOffset()}),keys},sessionStorageKey:function(keys){return!this.options.excludeSessionStorage&&this.hasSessionStorage()&&keys.push({key:"session_storage",value:1}),keys},localStorageKey:function(keys){return!this.options.excludeSessionStorage&&this.hasLocalStorage()&&keys.push({key:"local_storage",value:1}),keys},indexedDbKey:function(keys){return!this.options.excludeIndexedDB&&this.hasIndexedDB()&&keys.push({key:"indexed_db",value:1}),keys},addBehaviorKey:function(keys){return document.body&&!this.options.excludeAddBehavior&&document.body.addBehavior&&keys.push({key:"add_behavior",value:1}),keys},openDatabaseKey:function(keys){return!this.options.excludeOpenDatabase&&window.openDatabase&&keys.push({key:"open_database",value:1}),keys},cpuClassKey:function(keys){return this.options.excludeCpuClass||keys.push({key:"cpu_class",value:this.getNavigatorCpuClass()}),keys},platformKey:function(keys){return this.options.excludePlatform||keys.push({key:"navigator_platform",value:this.getNavigatorPlatform()}),keys},doNotTrackKey:function(keys){return this.options.excludeDoNotTrack||keys.push({key:"do_not_track",value:this.getDoNotTrack()}),keys},canvasKey:function(keys){return!this.options.excludeCanvas&&this.isCanvasSupported()&&keys.push({key:"canvas",value:this.getCanvasFp()}),keys},webglKey:function(keys){return this.options.excludeWebGL?("undefined"==typeof NODEBUG&&this.log("Skipping WebGL fingerprinting per excludeWebGL configuration option"),keys):this.isWebGlSupported()?(keys.push({key:"webgl",value:this.getWebglFp()}),keys):("undefined"==typeof NODEBUG&&this.log("Skipping WebGL fingerprinting because it is not supported in this browser"),keys)},adBlockKey:function(keys){return this.options.excludeAdBlock||keys.push({key:"adblock",value:this.getAdBlock()}),keys},hasLiedLanguagesKey:function(keys){return this.options.excludeHasLiedLanguages||keys.push({key:"has_lied_languages",value:this.getHasLiedLanguages()}),keys},hasLiedResolutionKey:function(keys){return this.options.excludeHasLiedResolution||keys.push({key:"has_lied_resolution",value:this.getHasLiedResolution()}),keys},hasLiedOsKey:function(keys){return this.options.excludeHasLiedOs||keys.push({key:"has_lied_os",value:this.getHasLiedOs()}),keys},hasLiedBrowserKey:function(keys){return this.options.excludeHasLiedBrowser||keys.push({key:"has_lied_browser",value:this.getHasLiedBrowser()}),keys},fontsKey:function(keys,done){return this.options.excludeJsFonts?this.flashFontsKey(keys,done):this.jsFontsKey(keys,done)},flashFontsKey:function(keys,done){return this.options.excludeFlashFonts?("undefined"==typeof NODEBUG&&this.log("Skipping flash fonts detection per excludeFlashFonts configuration option"),done(keys)):this.hasSwfObjectLoaded()?this.hasMinFlashInstalled()?"undefined"==typeof this.options.swfPath?("undefined"==typeof NODEBUG&&this.log("To use Flash fonts detection, you must pass a valid swfPath option, skipping Flash fonts enumeration"),done(keys)):void this.loadSwfAndDetectFonts(function(fonts){keys.push({key:"swf_fonts",value:fonts.join(";")}),done(keys)}):("undefined"==typeof NODEBUG&&this.log("Flash is not installed, skipping Flash fonts enumeration"),done(keys)):("undefined"==typeof NODEBUG&&this.log("Swfobject is not detected, Flash fonts enumeration is skipped"),done(keys))},jsFontsKey:function(keys,done){var that=this;return setTimeout(function(){var baseFonts=["monospace","sans-serif","serif"],fontList=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Garamond","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"],extendedFontList=["Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"];that.options.extendedJsFonts&&(fontList=fontList.concat(extendedFontList)),fontList=fontList.concat(that.options.userDefinedFonts);var testString="mmmmmmmmmmlli",testSize="72px",h=document.getElementsByTagName("body")[0],baseFontsDiv=document.createElement("div"),fontsDiv=document.createElement("div"),defaultWidth={},defaultHeight={},createSpan=function(){var s=document.createElement("span");return s.style.position="absolute",s.style.left="-9999px",s.style.fontSize=testSize,s.style.lineHeight="normal",s.innerHTML=testString,s},createSpanWithFonts=function(fontToDetect,baseFont){var s=createSpan();return s.style.fontFamily="'"+fontToDetect+"',"+baseFont,s},initializeBaseFontsSpans=function(){for(var spans=[],index=0,length=baseFonts.length;length>index;index++){var s=createSpan();s.style.fontFamily=baseFonts[index],baseFontsDiv.appendChild(s),spans.push(s)}return spans},initializeFontsSpans=function(){for(var spans={},i=0,l=fontList.length;l>i;i++){for(var fontSpans=[],j=0,numDefaultFonts=baseFonts.length;numDefaultFonts>j;j++){var s=createSpanWithFonts(fontList[i],baseFonts[j]);fontsDiv.appendChild(s),fontSpans.push(s)}spans[fontList[i]]=fontSpans}return spans},isFontAvailable=function(fontSpans){for(var detected=!1,i=0;i<baseFonts.length;i++)if(detected=fontSpans[i].offsetWidth!==defaultWidth[baseFonts[i]]||fontSpans[i].offsetHeight!==defaultHeight[baseFonts[i]])return detected;return detected},baseFontsSpans=initializeBaseFontsSpans();h.appendChild(baseFontsDiv);for(var index=0,length=baseFonts.length;length>index;index++)defaultWidth[baseFonts[index]]=baseFontsSpans[index].offsetWidth,defaultHeight[baseFonts[index]]=baseFontsSpans[index].offsetHeight;var fontsSpans=initializeFontsSpans();h.appendChild(fontsDiv);for(var available=[],i=0,l=fontList.length;l>i;i++)isFontAvailable(fontsSpans[fontList[i]])&&available.push(fontList[i]);h.removeChild(fontsDiv),h.removeChild(baseFontsDiv),keys.push({key:"js_fonts",value:available}),done(keys)},1)},pluginsKey:function(keys){return this.options.excludePlugins||(this.isIE()?this.options.excludeIEPlugins||keys.push({key:"ie_plugins",value:this.getIEPlugins()}):keys.push({key:"regular_plugins",value:this.getRegularPlugins()})),keys},getRegularPlugins:function(){for(var plugins=[],i=0,l=navigator.plugins.length;l>i;i++)plugins.push(navigator.plugins[i]);return this.pluginsShouldBeSorted()&&(plugins=plugins.sort(function(a,b){return a.name>b.name?1:a.name<b.name?-1:0})),this.map(plugins,function(p){var mimeTypes=this.map(p,function(mt){return[mt.type,mt.suffixes].join("~")}).join(",");return[p.name,p.description,mimeTypes].join("::")},this)},getIEPlugins:function(){var result=[];if(Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window){var names=["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"];result=this.map(names,function(name){try{return new ActiveXObject(name),name}catch(e){return null}})}return navigator.plugins&&(result=result.concat(this.getRegularPlugins())),result},pluginsShouldBeSorted:function(){for(var should=!1,i=0,l=this.options.sortPluginsFor.length;l>i;i++){var re=this.options.sortPluginsFor[i];if(navigator.userAgent.match(re)){should=!0;break}}return should},touchSupportKey:function(keys){return this.options.excludeTouchSupport||keys.push({key:"touch_support",value:this.getTouchSupport()}),keys},hardwareConcurrencyKey:function(keys){return this.options.excludeHardwareConcurrency||keys.push({key:"hardware_concurrency",value:this.getHardwareConcurrency()}),keys},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},hasLocalStorage:function(){try{return!!window.localStorage}catch(e){return!0}},hasIndexedDB:function(){try{return!!window.indexedDB}catch(e){return!0}},getHardwareConcurrency:function(){return navigator.hardwareConcurrency?navigator.hardwareConcurrency:"unknown"},getNavigatorCpuClass:function(){return navigator.cpuClass?navigator.cpuClass:"unknown"},getNavigatorPlatform:function(){return navigator.platform?navigator.platform:"unknown"},getDoNotTrack:function(){return navigator.doNotTrack?navigator.doNotTrack:navigator.msDoNotTrack?navigator.msDoNotTrack:window.doNotTrack?window.doNotTrack:"unknown"},getTouchSupport:function(){var maxTouchPoints=0,touchEvent=!1;"undefined"!=typeof navigator.maxTouchPoints?maxTouchPoints=navigator.maxTouchPoints:"undefined"!=typeof navigator.msMaxTouchPoints&&(maxTouchPoints=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent"),touchEvent=!0}catch(_){}var touchStart="ontouchstart"in window;return[maxTouchPoints,touchEvent,touchStart]},getCanvasFp:function(){var result=[],canvas=document.createElement("canvas");canvas.width=2e3,canvas.height=200,canvas.style.display="inline";var ctx=canvas.getContext("2d");return ctx.rect(0,0,10,10),ctx.rect(2,2,6,6),result.push("canvas winding:"+(ctx.isPointInPath(5,5,"evenodd")===!1?"yes":"no")),ctx.textBaseline="alphabetic",ctx.fillStyle="#f60",ctx.fillRect(125,1,62,20),ctx.fillStyle="#069",this.options.dontUseFakeFontInCanvas?ctx.font="11pt Arial":ctx.font="11pt no-real-font-123",ctx.fillText("Cwm fjordbank glyphs vext quiz, \ud83d\ude03",2,15),ctx.fillStyle="rgba(102, 204, 0, 0.2)",ctx.font="18pt Arial",ctx.fillText("Cwm fjordbank glyphs vext quiz, \ud83d\ude03",4,45),ctx.globalCompositeOperation="multiply",ctx.fillStyle="rgb(255,0,255)",ctx.beginPath(),ctx.arc(50,50,50,0,2*Math.PI,!0),ctx.closePath(),ctx.fill(),ctx.fillStyle="rgb(0,255,255)",ctx.beginPath(),ctx.arc(100,50,50,0,2*Math.PI,!0),ctx.closePath(),ctx.fill(),ctx.fillStyle="rgb(255,255,0)",ctx.beginPath(),ctx.arc(75,100,50,0,2*Math.PI,!0),ctx.closePath(),ctx.fill(),ctx.fillStyle="rgb(255,0,255)",ctx.arc(75,75,75,0,2*Math.PI,!0),ctx.arc(75,75,25,0,2*Math.PI,!0),ctx.fill("evenodd"),result.push("canvas fp:"+canvas.toDataURL()),result.join("~")},getWebglFp:function(){var gl,fa2s=function(fa){return gl.clearColor(0,0,0,1),gl.enable(gl.DEPTH_TEST),gl.depthFunc(gl.LEQUAL),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),"["+fa[0]+", "+fa[1]+"]"},maxAnisotropy=function(gl){var anisotropy,ext=gl.getExtension("EXT_texture_filter_anisotropic")||gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||gl.getExtension("MOZ_EXT_texture_filter_anisotropic");return ext?(anisotropy=gl.getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT),0===anisotropy&&(anisotropy=2),anisotropy):null};if(gl=this.getWebglCanvas(),!gl)return null;var result=[],vShaderTemplate="attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}",fShaderTemplate="precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}",vertexPosBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,vertexPosBuffer);var vertices=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);gl.bufferData(gl.ARRAY_BUFFER,vertices,gl.STATIC_DRAW),vertexPosBuffer.itemSize=3,vertexPosBuffer.numItems=3;var program=gl.createProgram(),vshader=gl.createShader(gl.VERTEX_SHADER);gl.shaderSource(vshader,vShaderTemplate),gl.compileShader(vshader);var fshader=gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(fshader,fShaderTemplate),gl.compileShader(fshader),gl.attachShader(program,vshader),gl.attachShader(program,fshader),gl.linkProgram(program),gl.useProgram(program),program.vertexPosAttrib=gl.getAttribLocation(program,"attrVertex"),program.offsetUniform=gl.getUniformLocation(program,"uniformOffset"),gl.enableVertexAttribArray(program.vertexPosArray),gl.vertexAttribPointer(program.vertexPosAttrib,vertexPosBuffer.itemSize,gl.FLOAT,!1,0,0),gl.uniform2f(program.offsetUniform,1,1),gl.drawArrays(gl.TRIANGLE_STRIP,0,vertexPosBuffer.numItems),null!=gl.canvas&&result.push(gl.canvas.toDataURL()),result.push("extensions:"+gl.getSupportedExtensions().join(";")),result.push("webgl aliased line width range:"+fa2s(gl.getParameter(gl.ALIASED_LINE_WIDTH_RANGE))),result.push("webgl aliased point size range:"+fa2s(gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE))),result.push("webgl alpha bits:"+gl.getParameter(gl.ALPHA_BITS)),result.push("webgl antialiasing:"+(gl.getContextAttributes().antialias?"yes":"no")),result.push("webgl blue bits:"+gl.getParameter(gl.BLUE_BITS)),result.push("webgl depth bits:"+gl.getParameter(gl.DEPTH_BITS)),result.push("webgl green bits:"+gl.getParameter(gl.GREEN_BITS)),result.push("webgl max anisotropy:"+maxAnisotropy(gl)),result.push("webgl max combined texture image units:"+gl.getParameter(gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),result.push("webgl max cube map texture size:"+gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE)),result.push("webgl max fragment uniform vectors:"+gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS)),result.push("webgl max render buffer size:"+gl.getParameter(gl.MAX_RENDERBUFFER_SIZE)),result.push("webgl max texture image units:"+gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS)),result.push("webgl max texture size:"+gl.getParameter(gl.MAX_TEXTURE_SIZE)),result.push("webgl max varying vectors:"+gl.getParameter(gl.MAX_VARYING_VECTORS)),result.push("webgl max vertex attribs:"+gl.getParameter(gl.MAX_VERTEX_ATTRIBS)),result.push("webgl max vertex texture image units:"+gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),result.push("webgl max vertex uniform vectors:"+gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS)),result.push("webgl max viewport dims:"+fa2s(gl.getParameter(gl.MAX_VIEWPORT_DIMS))),result.push("webgl red bits:"+gl.getParameter(gl.RED_BITS)),result.push("webgl renderer:"+gl.getParameter(gl.RENDERER)),result.push("webgl shading language version:"+gl.getParameter(gl.SHADING_LANGUAGE_VERSION)),result.push("webgl stencil bits:"+gl.getParameter(gl.STENCIL_BITS)),result.push("webgl vendor:"+gl.getParameter(gl.VENDOR)),result.push("webgl version:"+gl.getParameter(gl.VERSION));try{var extensionDebugRendererInfo=gl.getExtension("WEBGL_debug_renderer_info");extensionDebugRendererInfo?(result.push("webgl unmasked vendor:"+gl.getParameter(extensionDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),result.push("webgl unmasked renderer:"+gl.getParameter(extensionDebugRendererInfo.UNMASKED_RENDERER_WEBGL))):"undefined"==typeof NODEBUG&&this.log("WebGL fingerprinting is incomplete, because your browser does not have the extension WEBGL_debug_renderer_info")}catch(e){}return gl.getShaderPrecisionFormat?(result.push("webgl vertex shader high float precision:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.HIGH_FLOAT).precision),result.push("webgl vertex shader high float precision rangeMin:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.HIGH_FLOAT).rangeMin),result.push("webgl vertex shader high float precision rangeMax:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.HIGH_FLOAT).rangeMax),result.push("webgl vertex shader medium float precision:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.MEDIUM_FLOAT).precision),result.push("webgl vertex shader medium float precision rangeMin:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.MEDIUM_FLOAT).rangeMin),result.push("webgl vertex shader medium float precision rangeMax:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.MEDIUM_FLOAT).rangeMax),result.push("webgl vertex shader low float precision:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.LOW_FLOAT).precision),result.push("webgl vertex shader low float precision rangeMin:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.LOW_FLOAT).rangeMin),result.push("webgl vertex shader low float precision rangeMax:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.LOW_FLOAT).rangeMax),result.push("webgl fragment shader high float precision:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.HIGH_FLOAT).precision),result.push("webgl fragment shader high float precision rangeMin:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.HIGH_FLOAT).rangeMin),result.push("webgl fragment shader high float precision rangeMax:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.HIGH_FLOAT).rangeMax),result.push("webgl fragment shader medium float precision:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.MEDIUM_FLOAT).precision),result.push("webgl fragment shader medium float precision rangeMin:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.MEDIUM_FLOAT).rangeMin),result.push("webgl fragment shader medium float precision rangeMax:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.MEDIUM_FLOAT).rangeMax),result.push("webgl fragment shader low float precision:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.LOW_FLOAT).precision),result.push("webgl fragment shader low float precision rangeMin:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.LOW_FLOAT).rangeMin),result.push("webgl fragment shader low float precision rangeMax:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.LOW_FLOAT).rangeMax),result.push("webgl vertex shader high int precision:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.HIGH_INT).precision),result.push("webgl vertex shader high int precision rangeMin:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.HIGH_INT).rangeMin),result.push("webgl vertex shader high int precision rangeMax:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.HIGH_INT).rangeMax),result.push("webgl vertex shader medium int precision:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.MEDIUM_INT).precision),result.push("webgl vertex shader medium int precision rangeMin:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.MEDIUM_INT).rangeMin),result.push("webgl vertex shader medium int precision rangeMax:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.MEDIUM_INT).rangeMax),result.push("webgl vertex shader low int precision:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.LOW_INT).precision),result.push("webgl vertex shader low int precision rangeMin:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.LOW_INT).rangeMin),result.push("webgl vertex shader low int precision rangeMax:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.LOW_INT).rangeMax),result.push("webgl fragment shader high int precision:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.HIGH_INT).precision),result.push("webgl fragment shader high int precision rangeMin:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.HIGH_INT).rangeMin),result.push("webgl fragment shader high int precision rangeMax:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.HIGH_INT).rangeMax),result.push("webgl fragment shader medium int precision:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.MEDIUM_INT).precision),result.push("webgl fragment shader medium int precision rangeMin:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.MEDIUM_INT).rangeMin),result.push("webgl fragment shader medium int precision rangeMax:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.MEDIUM_INT).rangeMax),result.push("webgl fragment shader low int precision:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.LOW_INT).precision),result.push("webgl fragment shader low int precision rangeMin:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.LOW_INT).rangeMin),result.push("webgl fragment shader low int precision rangeMax:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.LOW_INT).rangeMax),result.join("~")):("undefined"==typeof NODEBUG&&this.log("WebGL fingerprinting is incomplete, because your browser does not support getShaderPrecisionFormat"),result.join("~"))},getAdBlock:function(){var ads=document.createElement("div");ads.innerHTML="&nbsp;",ads.className="adsbox";var result=!1;try{document.body.appendChild(ads),result=0===document.getElementsByClassName("adsbox")[0].offsetHeight,document.body.removeChild(ads)}catch(e){result=!1}return result},getHasLiedLanguages:function(){if("undefined"!=typeof navigator.languages)try{var firstLanguages=navigator.languages[0].substr(0,2);if(firstLanguages!==navigator.language.substr(0,2))return!0}catch(err){return!0}return!1},getHasLiedResolution:function(){return screen.width<screen.availWidth?!0:screen.height<screen.availHeight?!0:!1},getHasLiedOs:function(){var os,userAgent=navigator.userAgent.toLowerCase(),oscpu=navigator.oscpu,platform=navigator.platform.toLowerCase();os=userAgent.indexOf("windows phone")>=0?"Windows Phone":userAgent.indexOf("win")>=0?"Windows":userAgent.indexOf("android")>=0?"Android":userAgent.indexOf("linux")>=0?"Linux":userAgent.indexOf("iphone")>=0||userAgent.indexOf("ipad")>=0?"iOS":userAgent.indexOf("mac")>=0?"Mac":"Other";var mobileDevice;if(mobileDevice="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?!0:!1,mobileDevice&&"Windows Phone"!==os&&"Android"!==os&&"iOS"!==os&&"Other"!==os)return!0;if("undefined"!=typeof oscpu){if(oscpu=oscpu.toLowerCase(),oscpu.indexOf("win")>=0&&"Windows"!==os&&"Windows Phone"!==os)return!0;if(oscpu.indexOf("linux")>=0&&"Linux"!==os&&"Android"!==os)return!0;if(oscpu.indexOf("mac")>=0&&"Mac"!==os&&"iOS"!==os)return!0;if(0===oscpu.indexOf("win")&&0===oscpu.indexOf("linux")&&oscpu.indexOf("mac")>=0&&"other"!==os)return!0}return platform.indexOf("win")>=0&&"Windows"!==os&&"Windows Phone"!==os?!0:(platform.indexOf("linux")>=0||platform.indexOf("android")>=0||platform.indexOf("pike")>=0)&&"Linux"!==os&&"Android"!==os?!0:(platform.indexOf("mac")>=0||platform.indexOf("ipad")>=0||platform.indexOf("ipod")>=0||platform.indexOf("iphone")>=0)&&"Mac"!==os&&"iOS"!==os?!0:0===platform.indexOf("win")&&0===platform.indexOf("linux")&&platform.indexOf("mac")>=0&&"other"!==os?!0:"undefined"==typeof navigator.plugins&&"Windows"!==os&&"Windows Phone"!==os?!0:!1},getHasLiedBrowser:function(){
var browser,userAgent=navigator.userAgent.toLowerCase(),productSub=navigator.productSub;if(browser=userAgent.indexOf("firefox")>=0?"Firefox":userAgent.indexOf("opera")>=0||userAgent.indexOf("opr")>=0?"Opera":userAgent.indexOf("chrome")>=0?"Chrome":userAgent.indexOf("safari")>=0?"Safari":userAgent.indexOf("trident")>=0?"Internet Explorer":"Other",("Chrome"===browser||"Safari"===browser||"Opera"===browser)&&"20030107"!==productSub)return!0;var tempRes=eval.toString().length;if(37===tempRes&&"Safari"!==browser&&"Firefox"!==browser&&"Other"!==browser)return!0;if(39===tempRes&&"Internet Explorer"!==browser&&"Other"!==browser)return!0;if(33===tempRes&&"Chrome"!==browser&&"Opera"!==browser&&"Other"!==browser)return!0;var errFirefox;try{throw"a"}catch(err){try{err.toSource(),errFirefox=!0}catch(errOfErr){errFirefox=!1}}return errFirefox&&"Firefox"!==browser&&"Other"!==browser?!0:!1},isCanvasSupported:function(){var elem=document.createElement("canvas");return!(!elem.getContext||!elem.getContext("2d"))},isWebGlSupported:function(){if(!this.isCanvasSupported())return!1;var glContext,canvas=document.createElement("canvas");try{glContext=canvas.getContext&&(canvas.getContext("webgl")||canvas.getContext("experimental-webgl"))}catch(e){glContext=!1}return!!window.WebGLRenderingContext&&!!glContext},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName?!0:"Netscape"===navigator.appName&&/Trident/.test(navigator.userAgent)?!0:!1},hasSwfObjectLoaded:function(){return"undefined"!=typeof window.swfobject},hasMinFlashInstalled:function(){return swfobject.hasFlashPlayerVersion("9.0.0")},addFlashDivNode:function(){var node=document.createElement("div");node.setAttribute("id",this.options.swfContainerId),document.body.appendChild(node)},loadSwfAndDetectFonts:function(done){var hiddenCallback="___fp_swf_loaded";window[hiddenCallback]=function(fonts){done(fonts)};var id=this.options.swfContainerId;this.addFlashDivNode();var flashvars={onReady:hiddenCallback},flashparams={allowScriptAccess:"always",menu:"false"};swfobject.embedSWF(this.options.swfPath,id,"1","1","9.0.0",!1,flashvars,flashparams,{})},getWebglCanvas:function(){var canvas=document.createElement("canvas"),gl=null;try{gl=canvas.getContext("webgl")||canvas.getContext("experimental-webgl")}catch(e){}return gl||(gl=null),gl},each:function(obj,iterator,context){if(null!==obj)if(this.nativeForEach&&obj.forEach===this.nativeForEach)obj.forEach(iterator,context);else if(obj.length===+obj.length){for(var i=0,l=obj.length;l>i;i++)if(iterator.call(context,obj[i],i,obj)==={})return}else for(var key in obj)if(obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key,obj)==={})return},map:function(obj,iterator,context){var results=[];return null==obj?results:this.nativeMap&&obj.map===this.nativeMap?obj.map(iterator,context):(this.each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list)}),results)},x64Add:function(m,n){m=[m[0]>>>16,65535&m[0],m[1]>>>16,65535&m[1]],n=[n[0]>>>16,65535&n[0],n[1]>>>16,65535&n[1]];var o=[0,0,0,0];return o[3]+=m[3]+n[3],o[2]+=o[3]>>>16,o[3]&=65535,o[2]+=m[2]+n[2],o[1]+=o[2]>>>16,o[2]&=65535,o[1]+=m[1]+n[1],o[0]+=o[1]>>>16,o[1]&=65535,o[0]+=m[0]+n[0],o[0]&=65535,[o[0]<<16|o[1],o[2]<<16|o[3]]},x64Multiply:function(m,n){m=[m[0]>>>16,65535&m[0],m[1]>>>16,65535&m[1]],n=[n[0]>>>16,65535&n[0],n[1]>>>16,65535&n[1]];var o=[0,0,0,0];return o[3]+=m[3]*n[3],o[2]+=o[3]>>>16,o[3]&=65535,o[2]+=m[2]*n[3],o[1]+=o[2]>>>16,o[2]&=65535,o[2]+=m[3]*n[2],o[1]+=o[2]>>>16,o[2]&=65535,o[1]+=m[1]*n[3],o[0]+=o[1]>>>16,o[1]&=65535,o[1]+=m[2]*n[2],o[0]+=o[1]>>>16,o[1]&=65535,o[1]+=m[3]*n[1],o[0]+=o[1]>>>16,o[1]&=65535,o[0]+=m[0]*n[3]+m[1]*n[2]+m[2]*n[1]+m[3]*n[0],o[0]&=65535,[o[0]<<16|o[1],o[2]<<16|o[3]]},x64Rotl:function(m,n){return n%=64,32===n?[m[1],m[0]]:32>n?[m[0]<<n|m[1]>>>32-n,m[1]<<n|m[0]>>>32-n]:(n-=32,[m[1]<<n|m[0]>>>32-n,m[0]<<n|m[1]>>>32-n])},x64LeftShift:function(m,n){return n%=64,0===n?m:32>n?[m[0]<<n|m[1]>>>32-n,m[1]<<n]:[m[1]<<n-32,0]},x64Xor:function(m,n){return[m[0]^n[0],m[1]^n[1]]},x64Fmix:function(h){return h=this.x64Xor(h,[0,h[0]>>>1]),h=this.x64Multiply(h,[4283543511,3981806797]),h=this.x64Xor(h,[0,h[0]>>>1]),h=this.x64Multiply(h,[3301882366,444984403]),h=this.x64Xor(h,[0,h[0]>>>1])},x64hash128:function(key,seed){key=key||"",seed=seed||0;for(var remainder=key.length%16,bytes=key.length-remainder,h1=[0,seed],h2=[0,seed],k1=[0,0],k2=[0,0],c1=[2277735313,289559509],c2=[1291169091,658871167],i=0;bytes>i;i+=16)k1=[255&key.charCodeAt(i+4)|(255&key.charCodeAt(i+5))<<8|(255&key.charCodeAt(i+6))<<16|(255&key.charCodeAt(i+7))<<24,255&key.charCodeAt(i)|(255&key.charCodeAt(i+1))<<8|(255&key.charCodeAt(i+2))<<16|(255&key.charCodeAt(i+3))<<24],k2=[255&key.charCodeAt(i+12)|(255&key.charCodeAt(i+13))<<8|(255&key.charCodeAt(i+14))<<16|(255&key.charCodeAt(i+15))<<24,255&key.charCodeAt(i+8)|(255&key.charCodeAt(i+9))<<8|(255&key.charCodeAt(i+10))<<16|(255&key.charCodeAt(i+11))<<24],k1=this.x64Multiply(k1,c1),k1=this.x64Rotl(k1,31),k1=this.x64Multiply(k1,c2),h1=this.x64Xor(h1,k1),h1=this.x64Rotl(h1,27),h1=this.x64Add(h1,h2),h1=this.x64Add(this.x64Multiply(h1,[0,5]),[0,1390208809]),k2=this.x64Multiply(k2,c2),k2=this.x64Rotl(k2,33),k2=this.x64Multiply(k2,c1),h2=this.x64Xor(h2,k2),h2=this.x64Rotl(h2,31),h2=this.x64Add(h2,h1),h2=this.x64Add(this.x64Multiply(h2,[0,5]),[0,944331445]);switch(k1=[0,0],k2=[0,0],remainder){case 15:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+14)],48));case 14:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+13)],40));case 13:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+12)],32));case 12:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+11)],24));case 11:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+10)],16));case 10:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+9)],8));case 9:k2=this.x64Xor(k2,[0,key.charCodeAt(i+8)]),k2=this.x64Multiply(k2,c2),k2=this.x64Rotl(k2,33),k2=this.x64Multiply(k2,c1),h2=this.x64Xor(h2,k2);case 8:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+7)],56));case 7:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+6)],48));case 6:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+5)],40));case 5:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+4)],32));case 4:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+3)],24));case 3:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+2)],16));case 2:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+1)],8));case 1:k1=this.x64Xor(k1,[0,key.charCodeAt(i)]),k1=this.x64Multiply(k1,c1),k1=this.x64Rotl(k1,31),k1=this.x64Multiply(k1,c2),h1=this.x64Xor(h1,k1)}return h1=this.x64Xor(h1,[0,key.length]),h2=this.x64Xor(h2,[0,key.length]),h1=this.x64Add(h1,h2),h2=this.x64Add(h2,h1),h1=this.x64Fmix(h1),h2=this.x64Fmix(h2),h1=this.x64Add(h1,h2),h2=this.x64Add(h2,h1),("00000000"+(h1[0]>>>0).toString(16)).slice(-8)+("00000000"+(h1[1]>>>0).toString(16)).slice(-8)+("00000000"+(h2[0]>>>0).toString(16)).slice(-8)+("00000000"+(h2[1]>>>0).toString(16)).slice(-8)}},Fingerprint2.VERSION="1.5.0",Fingerprint2}),Array.prototype.getUnique=function(){var i,e,o={},a=[];for(i=0;e=this[i];i++)o[e]=1;for(e in o)a.push(e);return a},Array.prototype.indexOf||(Array.prototype.indexOf=function(elt){var len=this.length>>>0,from=Number(arguments[1])||0;for(from=0>from?Math.ceil(from):Math.floor(from),0>from&&(from+=len);len>from;from++)if(from in this&&this[from]===elt)return from;return-1}),/*!
 * jQuery.filer
 * Copyright (c) 2015 CreativeDream
 * Website: https://github.com/CreativeDream/jquery.filer
 * Version: 1.0.5 (19-Nov-2015)
 * Requires: jQuery v1.7.1 or later
 */
function($){"use strict";$.fn.filer=function(q){return this.each(function(t,r){var s=$(r),b=".jFiler",p=$(),o=$(),l=$(),sl=[],n_f=$.isFunction(q)?q(s,$.fn.filer.defaults):q,n=n_f&&$.isPlainObject(n_f)?$.extend(!0,{},$.fn.filer.defaults,n_f):$.fn.filer.defaults,f={init:function(){s.wrap('<div class="jFiler"></div>'),f._set("props"),s.prop("jFiler").boxEl=p=s.closest(b),f._changeInput()},_bindInput:function(){n.changeInput&&o.size()>0&&o.bind("click",f._clickHandler),s.on({focus:function(){o.addClass("focused")},blur:function(){o.removeClass("focused")},change:function(){f._onChange()}}),n.dragDrop&&(o.length>0?o:s).bind("drop",f._dragDrop.drop).bind("dragover",f._dragDrop.dragEnter).bind("dragleave",f._dragDrop.dragLeave),n.uploadFile&&n.clipBoardPaste&&$(window).on("paste",f._clipboardPaste)},_unbindInput:function(){n.changeInput&&o.size()>0&&o.unbind("click",f._clickHandler)},_clickHandler:function(){s.click()},_applyAttrSettings:function(){var d=["name","limit","maxSize","extensions","changeInput","showThumbs","allowDuplicates","appendTo","theme","addMore","excludeName","files","uploadUrl","uploadData","options"];for(var k in d){var j="data-jfiler-"+d[k];if(f._assets.hasAttr(j)){switch(d[k]){case"changeInput":case"showThumbs":case"allowDuplicates":case"addMore":n[d[k]]=["true","false"].indexOf(s.attr(j))>-1?"true"==s.attr(j):s.attr(j);break;case"extensions":n[d[k]]=s.attr(j).replace(/ /g,"").split(",");break;case"uploadUrl":n.uploadFile&&(n.uploadFile.url=s.attr(j));break;case"uploadData":n.uploadFile&&(n.uploadFile.data=JSON.parse(s.attr(j)));break;case"files":case"options":n[d[k]]=JSON.parse(s.attr(j));break;default:n[d[k]]=s.attr(j)}s.removeAttr(j)}}},_changeInput:function(){if(f._applyAttrSettings(),null!=n.beforeRender&&"function"==typeof n.beforeRender?n.beforeRender(p,s):null,n.theme&&p.addClass("jFiler-theme-"+n.theme),"input"!=s.get(0).tagName.toLowerCase()&&"file"!=s.get(0).type)o=s,s=$('<input type="file" name="'+n.name+'" />'),s.css({position:"absolute",left:"-9999px",top:"-9999px","z-index":"-9999"}),p.prepend(s),f._isGn=s;else if(n.changeInput){switch(typeof n.changeInput){case"boolean":o=$('<div class="jFiler-input"><div class="jFiler-input-caption"><span>'+n.captions.feedback+'</span></div><div class="jFiler-input-button">'+n.captions.button+'</div></div>"');break;case"string":case"object":o=$(n.changeInput);break;case"function":o=$(n.changeInput(p,s,n))}s.after(o),s.css({position:"absolute",left:"-9999px",top:"-9999px","z-index":"-9999"})}s.prop("jFiler").newInputEl=o,f._bindInput(),n.files&&f._append(!1,{files:n.files}),null!=n.afterRender&&"function"==typeof n.afterRender?n.afterRender(l,p,o,s):null},_clear:function(){f.files=null,s.prop("jFiler").files=null,n.uploadFile||n.addMore||f._reset(),f._set("feedback",f._itFl&&f._itFl.length>0?f._itFl.length+" "+n.captions.feedback2:n.captions.feedback),null!=n.onEmpty&&"function"==typeof n.onEmpty?n.onEmpty(p,o,s):null},_reset:function(a){if(!a){if(!n.uploadFile&&n.addMore){for(var i=0;i<sl.length;i++)sl[i].remove();sl=[],f._unbindInput(),s=f._isGn?f._isGn:$(r),f._bindInput()}f._set("input","")}f._itFl=[],f._itFc=null,f._ajFc=0,f._set("props"),s.prop("jFiler").files_list=f._itFl,s.prop("jFiler").current_file=f._itFc,f._prEr||(f._itFr=[],p.find("input[name^='jfiler-items-exclude-']:hidden").remove()),l.fadeOut("fast",function(){$(this).remove()}),s.prop("jFiler").listEl=l=$()},_set:function(element,value){switch(element){case"input":s.val("");break;case"feedback":o.length>0&&o.find(".jFiler-input-caption span").html(value);break;case"props":s.prop("jFiler")||s.prop("jFiler",{options:n,listEl:l,boxEl:p,newInputEl:o,inputEl:s,files:f.files,files_list:f._itFl,current_file:f._itFc,append:function(data){return f._append(!1,{files:[data]})},remove:function(id){return f._remove(null,{binded:!0,data:{id:id}}),!0},reset:function(){return f._reset(),f._clear(),!0},retry:function(data){return f._retryUpload(data)}})}},_filesCheck:function(){var s=0;if(n.limit&&f.files.length+f._itFl.length>n.limit)return alert(f._assets.textParse(n.captions.errors.filesLimit)),!1;for(var t=0;t<f.files.length;t++){var x=f.files[t].name.split(".").pop().toLowerCase(),file=f.files[t],m={name:file.name,size:file.size,size2:f._assets.bytesToSize(file.size),type:file.type,ext:x};if(null!=n.extensions&&-1==$.inArray(x,n.extensions))return alert(f._assets.textParse(n.captions.errors.filesType,m)),!1;if(null!=n.maxSize&&f.files[t].size>1048576*n.maxSize)return alert(f._assets.textParse(n.captions.errors.filesSize,m)),!1;if(4096==file.size&&0==file.type.length)return!1;if((n.addMore||n.uploadFile)&&!n.allowDuplicates){var m=f._itFl.filter(function(a,b){return a.file.name!=file.name||a.file.size!=file.size||a.file.type!=file.type||(file.lastModified?a.file.lastModified!=file.lastModified:0)?void 0:!0});if(m.length>0)return!1}s+=f.files[t].size}return null!=n.maxSize&&s>=Math.round(1048576*n.maxSize)?(alert(f._assets.textParse(n.captions.errors.filesSizeAll)),!1):!0},_thumbCreator:{create:function(i){var file=f.files[i],id=f._itFc?f._itFc.id:i,name=file.name,size=file.size,type=file.type.split("/",1).toString().toLowerCase(),ext=-1!=name.indexOf(".")?name.split(".").pop().toLowerCase():"",progressBar=n.uploadFile?'<div class="jFiler-jProgressBar">'+n.templates.progressBar+"</div>":"",opts={id:id,name:name,size:size,size2:f._assets.bytesToSize(size),type:type,extension:ext,icon:f._assets.getIcon(ext,type),icon2:f._thumbCreator.generateIcon({type:type,extension:ext}),image:'<div class="jFiler-item-thumb-image fi-loading"></div>',progressBar:progressBar,_appended:file._appended},html="";return file.opts&&(opts=$.extend({},file.opts,opts)),html=$(f._thumbCreator.renderContent(opts)).attr("data-jfiler-index",id),html.get(0).jfiler_id=id,f._thumbCreator.renderFile(file,html,opts),file.forList?html:(f._itFc.html=html,html.hide()[n.templates.itemAppendToEnd?"appendTo":"prependTo"](l.find(n.templates._selectors.list)).show(),void(file._appended||f._onSelect(i)))},renderContent:function(opts){return f._assets.textParse(opts._appended?n.templates.itemAppend:n.templates.item,opts)},renderFile:function(file,html,opts){if(0==html.find(".jFiler-item-thumb-image").size())return!1;if(file.file&&"image"==opts.type){var g='<img src="'+file.file+'" draggable="false" />',m=html.find(".jFiler-item-thumb-image.fi-loading");return $(g).error(function(){g=f._thumbCreator.generateIcon(opts),html.addClass("jFiler-no-thumbnail"),m.removeClass("fi-loading").html(g)}).load(function(){m.removeClass("fi-loading").html(g)}),!0}if(window.File&&window.FileList&&window.FileReader&&"image"==opts.type&&opts.size<6e6){var y=new FileReader;y.onload=function(e){var g='<img src="'+e.target.result+'" draggable="false" />',m=html.find(".jFiler-item-thumb-image.fi-loading");$(g).error(function(){g=f._thumbCreator.generateIcon(opts),html.addClass("jFiler-no-thumbnail"),m.removeClass("fi-loading").html(g)}).load(function(){m.removeClass("fi-loading").html(g)})},y.readAsDataURL(file)}else{var g=f._thumbCreator.generateIcon(opts),m=html.find(".jFiler-item-thumb-image.fi-loading");html.addClass("jFiler-no-thumbnail"),m.removeClass("fi-loading").html(g)}},generateIcon:function(obj){var m=new Array(3);if(obj&&obj.type&&obj.extension)switch(obj.type){case"image":m[0]="f-image",m[1]='<i class="fa fa-file-image-o"></i>';break;case"video":m[0]="f-video",m[1]='<i class="fa fa-file-video-o"></i>';break;case"audio":m[0]="f-audio",m[1]='<i class="fa fa-file-audio-o"></i>';break;default:m[0]="f-file f-file-ext-"+obj.extension,m[1]=obj.extension.length>0?"."+obj.extension:"",m[2]=1}else m[0]="f-file",m[1]=obj.extension&&obj.extension.length>0?"."+obj.extension:"",m[2]=1;var el='<span class="jFiler-icon-file '+m[0]+'">'+m[1]+"</span>";if(1==m[2]){var c=f._assets.text2Color(obj.extension);if(c){var j=$(el).appendTo("body"),h=j.css("box-shadow");h=c+h.substring(h.replace(/^.*(rgba?\([^)]+\)).*$/,"$1").length,h.length),j.css({"-webkit-box-shadow":h,"-moz-box-shadow":h,"box-shadow":h}).attr("style","-webkit-box-shadow: "+h+"; -moz-box-shadow: "+h+"; box-shadow: "+h+";"),el=j.prop("outerHTML"),j.remove()}}return el},_box:function(params){if(null!=n.beforeShow&&"function"==typeof n.beforeShow?!n.beforeShow(f.files,l,p,o,s):!1)return!1;if(l.length<1){if(n.appendTo)var appendTo=$(n.appendTo);else var appendTo=p;appendTo.find(".jFiler-items").remove(),l=$('<div class="jFiler-items jFiler-row"></div>'),s.prop("jFiler").listEl=l,l.append(f._assets.textParse(n.templates.box)).appendTo(appendTo),l.on("click",n.templates._selectors.remove,function(e){e.preventDefault();var cf=n.templates.removeConfirmation?confirm(n.captions.removeConfirmation):!0;cf&&f._remove(params?params.remove.event:e,params?params.remove.el:$(this).closest(n.templates._selectors.item))})}if(f.files)for(var i=0;i<f.files.length;i++)f.files[i]._appended||(f.files[i]._choosed=!0),f._addToMemory(i),f._thumbCreator.create(i)}},_upload:function(i){var el=f._itFc.html,formData=new FormData,c=f._itFc,onSend=function(){if(null!=n.uploadFile.data&&$.isPlainObject(n.uploadFile.data))for(var k in n.uploadFile.data)formData.append(k,n.uploadFile.data[k]);formData.append(s.attr("name"),c.file,c.file.name?c.file.name:!1),f._ajax.send(el,formData,c)};if(null!=n.beforeSendDeferred&&"function"==typeof n.beforeSendDeferred){var deferred=n.beforeSendDeferred(c.id,n.uploadFile.data);deferred.done(function(){onSend()})}else onSend()},_ajax:{send:function(el,formData,c){return c.ajax=$.ajax({url:n.uploadFile.url,data:formData,type:n.uploadFile.type,enctype:n.uploadFile.enctype,xhr:function(){var myXhr=$.ajaxSettings.xhr();return myXhr.upload&&myXhr.upload.addEventListener("progress",function(e){f._ajax.progressHandling(e,el)},!1),myXhr},complete:function(jqXHR,textStatus){c.ajax=!1,f._ajFc++,f.files&&f._ajFc>=f.files.length&&(f._ajFc=0,null!=n.uploadFile.onComplete&&"function"==typeof n.uploadFile.onComplete?n.uploadFile.onComplete(l,p,o,s,jqXHR,textStatus):null)},beforeSend:function(jqXHR,settings){return null!=n.uploadFile.beforeSend&&"function"==typeof n.uploadFile.beforeSend?n.uploadFile.beforeSend(el,l,p,o,s,c.id,jqXHR,settings):!0},success:function(data,textStatus,jqXHR){c.uploaded=!0,null!=n.uploadFile.success&&"function"==typeof n.uploadFile.success?n.uploadFile.success(data,el,l,p,o,s,c.id,textStatus,jqXHR):null},error:function(jqXHR,textStatus,errorThrown){c.uploaded=!1,null!=n.uploadFile.error&&"function"==typeof n.uploadFile.error?n.uploadFile.error(el,l,p,o,s,c.id,jqXHR,textStatus,errorThrown):null},statusCode:n.uploadFile.statusCode,cache:!1,contentType:!1,processData:!1}),c.ajax},progressHandling:function(e,el){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total).toString();null!=n.uploadFile.onProgress&&"function"==typeof n.uploadFile.onProgress?n.uploadFile.onProgress(t,el,l,p,o,s):null,el.find(".jFiler-jProgressBar").find(n.templates._selectors.progressBar).css("width",t+"%")}}},_dragDrop:{dragEnter:function(e){e.preventDefault(),e.stopPropagation(),p.addClass("dragged"),f._set("feedback",n.captions.drop),null!=n.dragDrop.dragEnter&&"function"==typeof n.dragDrop.dragEnter?n.dragDrop.dragEnter(e,o,s,p):null},dragLeave:function(e){return e.preventDefault(),e.stopPropagation(),f._dragDrop._dragLeaveCheck(e)?(p.removeClass("dragged"),f._set("feedback",n.captions.feedback),void(null!=n.dragDrop.dragLeave&&"function"==typeof n.dragDrop.dragLeave?n.dragDrop.dragLeave(e,o,s,p):null)):!1},drop:function(e){e.preventDefault(),p.removeClass("dragged"),f._set("feedback",n.captions.feedback),e&&e.originalEvent&&e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.files&&e.originalEvent.dataTransfer.files.length>0&&f._onChange(e,e.originalEvent.dataTransfer.files),null!=n.dragDrop.drop&&"function"==typeof n.dragDrop.drop?n.dragDrop.drop(e.originalEvent.dataTransfer.files,e,o,s,p):null},_dragLeaveCheck:function(e){var related=e.relatedTarget,inside=!1;return related!==o&&(related&&(inside=$.contains(o,related)),inside)?!1:!0}},_clipboardPaste:function(e,fromDrop){if((fromDrop||e.originalEvent.clipboardData||e.originalEvent.clipboardData.items)&&(!fromDrop||e.originalEvent.dataTransfer||e.originalEvent.dataTransfer.items)&&!f._clPsePre){var items=fromDrop?e.originalEvent.dataTransfer.items:e.originalEvent.clipboardData.items,b64toBlob=function(b64Data,contentType,sliceSize){contentType=contentType||"",sliceSize=sliceSize||512;for(var byteCharacters=atob(b64Data),byteArrays=[],offset=0;offset<byteCharacters.length;offset+=sliceSize){for(var slice=byteCharacters.slice(offset,offset+sliceSize),byteNumbers=new Array(slice.length),i=0;i<slice.length;i++)byteNumbers[i]=slice.charCodeAt(i);var byteArray=new Uint8Array(byteNumbers);byteArrays.push(byteArray)}var blob=new Blob(byteArrays,{type:contentType});return blob};if(items)for(var i=0;i<items.length;i++)if(-1!==items[i].type.indexOf("image")||-1!==items[i].type.indexOf("text/uri-list")){if(fromDrop)try{window.atob(e.originalEvent.dataTransfer.getData("text/uri-list").toString().split(",")[1])}catch(e){return}var blob=fromDrop?b64toBlob(e.originalEvent.dataTransfer.getData("text/uri-list").toString().split(",")[1],"image/png"):items[i].getAsFile();blob.name=Math.random().toString(36).substring(5),blob.name+=-1!=blob.type.indexOf("/")?"."+blob.type.split("/")[1].toString().toLowerCase():".png",f._onChange(e,[blob]),f._clPsePre=setTimeout(function(){delete f._clPsePre},1e3)}}},_onSelect:function(i){n.uploadFile&&!$.isEmptyObject(n.uploadFile)&&f._upload(i),null!=n.onSelect&&"function"==typeof n.onSelect?n.onSelect(f.files[i],f._itFc.html,l,p,o,s):null,i+1>=f.files.length&&(null!=n.afterShow&&"function"==typeof n.afterShow?n.afterShow(l,p,o,s):null)},_onChange:function(e,d){if(d){if(!d||0==d.length)return f._set("input",""),f._clear(),!1;f.files=d}else{if(!s.get(0).files||"undefined"==typeof s.get(0).files||0==s.get(0).files.length)return n.uploadFile||n.addMore||(f._set("input",""),f._clear()),!1;f.files=s.get(0).files}if(n.uploadFile||n.addMore||f._reset(!0),s.prop("jFiler").files=f.files,!f._filesCheck()||(null!=n.beforeSelect&&"function"==typeof n.beforeSelect?!n.beforeSelect(f.files,l,p,o,s):!1))return f._set("input",""),f._clear(),!1;if(f._set("feedback",f.files.length+f._itFl.length+" "+n.captions.feedback2),n.showThumbs)f._thumbCreator._box();else for(var i=0;i<f.files.length;i++)f.files[i]._choosed=!0,f._addToMemory(i),f._onSelect(i);if(!n.uploadFile&&n.addMore){var elem=$('<input type="file" />'),attributes=s.prop("attributes");$.each(attributes,function(){elem.attr(this.name,this.value)}),s.after(elem),f._unbindInput(),sl.push(elem),s=elem,f._bindInput(),f._set("props")}},_append:function(e,data){var files=data?data.files:!1;if(files&&!(files.length<=0)&&(f.files=files,s.prop("jFiler").files=f.files,n.showThumbs)){for(var i=0;i<f.files.length;i++)f.files[i]._appended=!0;f._thumbCreator._box()}},_getList:function(e,data){var files=data?data.files:!1;if(files&&!(files.length<=0)&&(f.files=files,s.prop("jFiler").files=f.files,n.showThumbs)){for(var returnData=[],i=0;i<f.files.length;i++)f.files[i].forList=!0,returnData.push(f._thumbCreator.create(i));data.callback&&data.callback(returnData,l,p,o,s)}},_retryUpload:function(e,data){var id=parseInt("object"==typeof data?data.attr("data-jfiler-index"):data),obj=f._itFl.filter(function(value,key){return value.id==id});return obj.length>0?!n.uploadFile||$.isEmptyObject(n.uploadFile)||obj[0].uploaded?void 0:(f._itFc=obj[0],s.prop("jFiler").current_file=f._itFc,f._upload(id),!0):!1},_remove:function(e,el){if(el.binded){if("undefined"!=typeof el.data.id&&(el=l.find(n.templates._selectors.item+"[data-jfiler-index='"+el.data.id+"']"),0==el.size()))return!1;el.data.el&&(el=el.data.el)}var attrId=el.get(0).jfiler_id||el.attr("data-jfiler-index"),id=null,excl_input=function(id){var input=p.find("input[name^='jfiler-items-exclude-']:hidden").first(),item=f._itFl[id],val=[];if(0==input.size()&&(input=$('<input type="hidden" name="jfiler-items-exclude-'+(n.excludeName?n.excludeName:("[]"!=s.attr("name").slice(-2)?s.attr("name"):s.attr("name").substring(0,s.attr("name").length-2))+"-"+t)+'">'),input.appendTo(p)),item.file._choosed||item.file._appended||item.uploaded){if(f._prEr=!0,f._itFr.push(item),n.addMore){var current_input=item.input,count_same_input=0;f._itFl.filter(function(val,index){val.file._choosed&&val.input.get(0)==current_input.get(0)&&count_same_input++}),1==count_same_input&&(f._itFr=f._itFr.filter(function(val,index){return val.file._choosed?val.input.get(0)!=current_input.get(0):!0}),current_input.val(""),f._prEr=!1)}for(var i=0;i<f._itFr.length;i++)val.push(f._itFr[i].file.name);val=JSON.stringify(val),input.val(val)}},callback=function(el,id){excl_input(id),f._itFl.splice(id,1),f._itFl.length<1?(f._reset(),f._clear()):f._set("feedback",f._itFl.length+" "+n.captions.feedback2),el.fadeOut("fast",function(){$(this).remove()})};for(var key in f._itFl)"length"!==key&&f._itFl.hasOwnProperty(key)&&f._itFl[key].id==attrId&&(id=key);return f._itFl.hasOwnProperty(id)?f._itFl[id].ajax?(f._itFl[id].ajax.abort(),void callback(el,id)):(null!=n.onRemove&&"function"==typeof n.onRemove?n.onRemove(el,f._itFl[id].file,id,l,p,o,s):null,callback(el,id),void(null!=n.afterRemove&&"function"==typeof n.afterRemove?n.afterRemove(el,l,p,o,s):null)):!1},_addToMemory:function(i){f._itFl.push({id:f._itFl.length,file:f.files[i],html:$(),ajax:!1,uploaded:!1}),n.addMore&&!f.files[i]._appended&&(f._itFl[f._itFl.length-1].input=s),f._itFc=f._itFl[f._itFl.length-1],s.prop("jFiler").files_list=f._itFl,s.prop("jFiler").current_file=f._itFc},_assets:{bytesToSize:function(bytes){if(0==bytes)return"";var k=1e3,sizes=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(bytes)/Math.log(k));return(bytes/Math.pow(k,i)).toPrecision(3)+" "+sizes[i]},hasAttr:function(attr,el){var el=el?el:s,a=el.attr(attr);return a&&"undefined"!=typeof a?!0:!1},getIcon:function(ext,type){var types=["audio","image","text","video"];return $.inArray(type,types)>-1?'<i class="fa fa-file-'+type+"-o jfi-file-ext-"+ext+'"></i>':'<i class="fa fa-file-o jfi-file-type-'+type+" jfi-file-ext-"+ext+'"></i>'},textParse:function(text,opts){switch(opts=$.extend({},{limit:n.limit,maxSize:n.maxSize,extensions:n.extensions?n.extensions.join(","):null},opts&&$.isPlainObject(opts)?opts:{},n.options),typeof text){case"string":return text.replace(/\{\{fi-(.*?)\}\}/g,function(match,a){return a=a.replace(/ /g,""),a.match(/(.*?)\|limitTo\:(\d+)/)?a.replace(/(.*?)\|limitTo\:(\d+)/,function(match,a,b){var a=opts[a]?opts[a]:"",str=a.substring(0,b);return str=a.length>str.length?str.substring(0,str.length-3)+"...":str}):opts[a]?opts[a]:""});case"function":return text(opts);default:return text}},text2Color:function(str){if(!str||0==str.length)return!1;for(var i=0,hash=0;i<str.length;hash=str.charCodeAt(i++)+((hash<<5)-hash));for(var i=0,colour="#";3>i;colour+=("00"+(hash>>2*i++&255).toString(16)).slice(-2));return colour}},files:null,_itFl:[],_itFc:null,_itFr:[],_ajFc:0,_prEr:!1};return s.on("filer.append",function(e,data){f._append(e,data)}).on("filer.remove",function(e,data){data.binded=!0,f._remove(e,data)}).on("filer.reset",function(e){return f._reset(),f._clear(),!0}).on("filer.generateList",function(e,data){return f._getList(e,data)}).on("filer.retry",function(e,data){return f._retryUpload(e,data)}),f.init(),this})},$.fn.filer.defaults={limit:null,maxSize:null,extensions:null,changeInput:!0,showThumbs:!1,allowDuplicates:!1,appendTo:null,theme:"default",templates:{box:'<ul class="jFiler-items-list jFiler-items-default"></ul>',item:'<li class="jFiler-item"><div class="jFiler-item-container"><div class="jFiler-item-inner"><div class="jFiler-item-icon pull-left">{{fi-icon}}</div><div class="jFiler-item-info pull-left"><div class="jFiler-item-title" title="{{fi-name}}">{{fi-name | limitTo:30}}</div><div class="jFiler-item-others"><span>size: {{fi-size2}}</span><span>type: {{fi-extension}}</span><span class="jFiler-item-status">{{fi-progressBar}}</span></div><div class="jFiler-item-assets"><ul class="list-inline"><li><a class="fa fa-trash-o jFiler-item-trash-action"></a></li></ul></div></div></div></div></li>',itemAppend:'<li class="jFiler-item"><div class="jFiler-item-container"><div class="jFiler-item-inner"><div class="jFiler-item-icon pull-left">{{fi-icon}}</div><div class="jFiler-item-info pull-left"><div class="jFiler-item-title">{{fi-name | limitTo:35}}</div><div class="jFiler-item-others"><span>size: {{fi-size2}}</span><span>type: {{fi-extension}}</span><span class="jFiler-item-status"></span></div><div class="jFiler-item-assets"><ul class="list-inline"><li><a class="fa fa-trash-o jFiler-item-trash-action"></a></li></ul></div></div></div></div></li>',progressBar:'<div class="bar"></div>',itemAppendToEnd:!1,removeConfirmation:!0,_selectors:{list:".jFiler-items-list",item:".jFiler-item",progressBar:".bar",remove:".jFiler-item-trash-action"}},files:null,uploadFile:null,dragDrop:null,addMore:!1,clipBoardPaste:!0,excludeName:null,beforeRender:null,afterRender:null,beforeShow:null,beforeSelect:null,onSelect:null,afterShow:null,onRemove:null,afterRemove:null,beforeSendDeferred:null,onEmpty:null,options:null,captions:{button:"Choose Files",feedback:"Choose files To Upload",feedback2:"files were chosen",drop:"Drop file here to Upload",removeConfirmation:"Are you sure you want to remove this file?",errors:{filesLimit:"Only {{fi-limit}} files are allowed to be uploaded.",filesType:"Only Images are allowed to be uploaded.",filesSize:"{{fi-name}} is too large! Please upload file up to {{fi-maxSize}} MB.",filesSizeAll:"Files you've choosed are too large! Please upload files up to {{fi-maxSize}} MB."}}}}(jQuery),function(f,h,$){function g(m){var l={},n=/^jQuery\d+$/;return $.each(m.attributes,function(p,o){o.specified&&!n.test(o.name)&&(l[o.name]=o.value)}),l}function b(m,n){var l=this,o=$(l);if(l.value==o.attr("placeholder")&&o.hasClass("placeholder"))if(o.data("placeholder-password")){if(o=o.hide().next().show().attr("id",o.removeAttr("id").data("placeholder-id")),m===!0)return o[0].value=n;o.focus()}else l.value="",o.removeClass("placeholder"),l==h.activeElement&&l.select()}function e(){var q,l=this,p=$(l),o=this.id;if(""==l.value){if("password"==l.type){if(!p.data("placeholder-textinput")){try{q=p.clone().attr({type:"text"})}catch(n){q=$("<input>").attr($.extend(g(this),{type:"text"}))}q.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":o}).bind("focus.placeholder",b),p.data({"placeholder-textinput":q,"placeholder-id":o}).before(q)}p=p.removeAttr("id").hide().prev().attr("id",o).show()}p.addClass("placeholder"),p[0].value=p.attr("placeholder")}else p.removeClass("placeholder")}var k,j,a="placeholder"in h.createElement("input"),d="placeholder"in h.createElement("textarea"),i=$.fn,c=$.valHooks;a&&d?(j=i.placeholder=function(){return this},j.input=j.textarea=!0):(j=i.placeholder=function(){var l=this;return l.filter((a?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":b,"blur.placeholder":e}).data("placeholder-enabled",!0).trigger("blur.placeholder"),l},j.input=a,j.textarea=d,k={get:function(m){var l=$(m);return l.data("placeholder-enabled")&&l.hasClass("placeholder")?"":m.value},set:function(m,n){var l=$(m);return l.data("placeholder-enabled")?(""==n?(m.value=n,m!=h.activeElement&&e.call(m)):l.hasClass("placeholder")?b.call(m,!0,n)||(m.value=n):m.value=n,l):m.value=n}},a||(c.input=k),d||(c.textarea=k),$(function(){$(h).delegate("form","submit.placeholder",function(){var l=$(".placeholder",this).each(b);setTimeout(function(){l.each(e)},10)})}),$(f).bind("beforeunload.placeholder",function(){$(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),$.extend({inspect:function(obj,n){n=n||"this";for(var p in obj){if($.isPlainObject(obj[p]))return void $.inspect(obj[p],n+"."+p);console.log(n+"."+p.toString()+" = "+obj[p])}}}),function(factory){var registeredInModuleLoader=!1;if("function"==typeof define&&define.amd&&(define(factory),registeredInModuleLoader=!0),"object"==typeof exports&&(module.exports=factory(),registeredInModuleLoader=!0),!registeredInModuleLoader){var OldCookies=window.Cookies,api=window.Cookies=factory();api.noConflict=function(){return window.Cookies=OldCookies,api}}}(function(){function extend(){for(var i=0,result={};i<arguments.length;i++){var attributes=arguments[i];for(var key in attributes)result[key]=attributes[key]}return result}function init(converter){function api(key,value,attributes){var result;if("undefined"!=typeof document){if(arguments.length>1){if(attributes=extend({path:"/"},api.defaults,attributes),"number"==typeof attributes.expires){var expires=new Date;expires.setMilliseconds(expires.getMilliseconds()+864e5*attributes.expires),attributes.expires=expires}try{result=JSON.stringify(value),/^[\{\[]/.test(result)&&(value=result)}catch(e){}return value=converter.write?converter.write(value,key):encodeURIComponent(String(value)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),key=encodeURIComponent(String(key)),key=key.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),key=key.replace(/[\(\)]/g,escape),document.cookie=[key,"=",value,attributes.expires?"; expires="+attributes.expires.toUTCString():"",attributes.path?"; path="+attributes.path:"",attributes.domain?"; domain="+attributes.domain:"",attributes.secure?"; secure":""].join("")}key||(result={});for(var cookies=document.cookie?document.cookie.split("; "):[],rdecode=/(%[0-9A-Z]{2})+/g,i=0;i<cookies.length;i++){var parts=cookies[i].split("="),cookie=parts.slice(1).join("=");'"'===cookie.charAt(0)&&(cookie=cookie.slice(1,-1));try{var name=parts[0].replace(rdecode,decodeURIComponent);if(cookie=converter.read?converter.read(cookie,name):converter(cookie,name)||cookie.replace(rdecode,decodeURIComponent),this.json)try{cookie=JSON.parse(cookie)}catch(e){}if(key===name){result=cookie;break}key||(result[name]=cookie)}catch(e){}}return result}}return api.set=api,api.get=function(key){return api.call(api,key)},api.getJSON=function(){return api.apply({json:!0},[].slice.call(arguments))},api.defaults={},api.remove=function(key,attributes){api(key,"",extend(attributes,{expires:-1}))},api.withConverter=init,api}return init(function(){})});var Cookies=Cookies.withConverter({write:function(value){return encodeURIComponent(value).replace(/%(23|24|26|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)},read:function(value){return value.replace(/\+/g," ").replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}});(function(){function addMapEntry(map,pair){return map.set(pair[0],pair[1]),map}function addSetEntry(set,value){return set.add(value),set}function arrayEach(array,iteratee){for(var index=-1,length=null==array?0:array.length;++index<length&&iteratee(array[index],index,array)!==!1;);return array}function arrayFilter(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function arraySome(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}function baseUnary(func){return function(value){return func(value)}}function cacheHas(cache,key){return cache.has(key)}function getValue(object,key){return null==object?undefined:object[key]}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}function lodash(){}function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value,this}function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[],this.size=0}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(0>index)return!1;var lastIndex=data.length-1;return index==lastIndex?data.pop():splice.call(data,index,1),--this.size,!0}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return 0>index?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return 0>index?(++this.size,data.push([key,value])):data[index][1]=value,this}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);return this.size-=result?1:0,result}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this}function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}function setCacheAdd(value){return this.__data__.set(value,HASH_UNDEFINED),this}function setCacheHas(value){return this.__data__.has(value)}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(key){var data=this.__data__,result=data["delete"](key);return this.size=data.size,result}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this}function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(value!==undefined||key in object)||baseAssignValue(object,key,value)}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function baseAssignIn(object,source){return object&&copyObject(source,keysIn(source),object)}function baseAssignValue(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}function baseClone(value,bitmask,customizer,key,object,stack){
var result,isDeep=bitmask&CLONE_DEEP_FLAG,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG;if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),result!==undefined)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=initCloneArray(value),!isDeep)return copyArray(value,result)}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return cloneBuffer(value,isDeep);if(tag==objectTag||tag==argsTag||isFunc&&!object){if(result=isFlat||isFunc?{}:initCloneObject(value),!isDeep)return isFlat?copySymbolsIn(value,baseAssignIn(result,value)):copySymbols(value,baseAssign(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=initCloneByTag(value,tag,baseClone,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked)return stacked;stack.set(value,result);var keysFunc=isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys,props=isArr?undefined:keysFunc(value);return arrayEach(props||value,function(subValue,key){props&&(key=subValue,subValue=value[key]),assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))}),result}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function baseGetTag(value){return null==value?value===undefined?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other?!0:null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!==value&&other!==other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack)}function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other);objTag=objTag==argsTag?objectTag:objTag,othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return isSameTag?(stack||(stack=new Stack),equalObjects(object,other,bitmask,customizer,equalFunc,stack)):!1}function baseIsNative(value){if(!isObject(value)||isMasked(value))return!1;var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}function baseKeysIn(object){if(!isObject(object))return nativeKeysIn(object);var isProto=isPrototype(object),result=[];for(var key in object)("constructor"!=key||!isProto&&hasOwnProperty.call(object,key))&&result.push(key);return result}function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);return buffer.copy(result),result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}function cloneMap(map,isDeep,cloneFunc){var array=isDeep?cloneFunc(mapToArray(map),CLONE_DEEP_FLAG):mapToArray(map);return arrayReduce(array,addMapEntry,new map.constructor)}function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result.lastIndex=regexp.lastIndex,result}function cloneSet(set,isDeep,cloneFunc){var array=isDeep?cloneFunc(setToArray(set),CLONE_DEEP_FLAG):setToArray(set);return arrayReduce(array,addSetEntry,new set.constructor)}function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}function copyArray(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;newValue===undefined&&(newValue=source[key]),isNew?baseAssignValue(object,key,newValue):assignValue(object,key,newValue)}return object}function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}function copySymbolsIn(source,object){return copyObject(source,getSymbolsIn(source),object)}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(compared!==undefined){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,function(othValue,othIndex){return cacheHas(seen,othIndex)||arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)?void 0:seen.push(othIndex)})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack["delete"](array),stack["delete"](other),result}function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case arrayBufferTag:return object.byteLength==other.byteLength&&equalFunc(new Uint8Array(object),new Uint8Array(other))?!0:!1;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=COMPARE_UNORDERED_FLAG,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack["delete"](object),result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1)}return stack["delete"](object),stack["delete"](other),result}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}function initCloneArray(array){var length=array.length,result=array.constructor(length);return length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input),result}function initCloneObject(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object))}function initCloneByTag(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return cloneMap(object,isDeep,cloneFunc);case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return cloneSet(object,isDeep,cloneFunc);case symbolTag:return cloneSymbol(object)}}function isIndex(value,length){return length=null==length?MAX_SAFE_INTEGER:length,!!length&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&length>value}function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}function isPrototype(value){var Ctor=value&&value.constructor,proto="function"==typeof Ctor&&Ctor.prototype||objectProto;return value===proto}function nativeKeysIn(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);return result}function objectToString(value){return nativeObjectToString.call(value)}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function cloneDeep(value){return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}function eq(value,other){return value===other||value!==value&&other!==other}function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}function isEqual(value,other){return baseIsEqual(value,other)}function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&MAX_SAFE_INTEGER>=value}function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}function isObjectLike(value){return null!=value&&"object"==typeof value}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}function stubArray(){return[]}function stubFalse(){return!1}var undefined,VERSION="4.17.4",LARGE_ARRAY_SIZE=200,HASH_UNDEFINED="__lodash_hash_undefined__",CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",arrayTag="[object Array]",asyncTag="[object AsyncFunction]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",nullTag="[object Null]",objectTag="[object Object]",promiseTag="[object Promise]",proxyTag="[object Proxy]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",undefinedTag="[object Undefined]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reFlags=/\w*$/,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}(),nativeObjectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:undefined,Symbol=root.Symbol,Uint8Array=root.Uint8Array,allocUnsafe=Buffer?Buffer.allocUnsafe:undefined,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,symToStringTag=Symbol?Symbol.toStringTag:undefined,defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}(),nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,nativeKeys=overArg(Object.keys,Object),DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined,baseCreate=function(){function object(){}return function(proto){if(!isObject(proto))return{};if(objectCreate)return objectCreate(proto);object.prototype=proto;var result=new object;return object.prototype=undefined,result}}();Hash.prototype.clear=hashClear,Hash.prototype["delete"]=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype["delete"]=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype["delete"]=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,Stack.prototype.clear=stackClear,Stack.prototype["delete"]=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)}))}:stubArray,getSymbolsIn=nativeGetSymbols?function(object){for(var result=[];object;)arrayPush(result,getSymbols(object)),object=getPrototype(object);return result}:stubArray,getTag=baseGetTag;(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return result});var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray=Array.isArray,isBuffer=nativeIsBuffer||stubFalse,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;lodash.keys=keys,lodash.keysIn=keysIn,lodash.cloneDeep=cloneDeep,lodash.eq=eq,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isArrayLike=isArrayLike,lodash.isBuffer=isBuffer,lodash.isEqual=isEqual,lodash.isFunction=isFunction,lodash.isLength=isLength,lodash.isObject=isObject,lodash.isObjectLike=isObjectLike,lodash.isTypedArray=isTypedArray,lodash.stubArray=stubArray,lodash.stubFalse=stubFalse,lodash.VERSION=VERSION,root._=lodash}).call(this),function($){function parseParam(url,paramName){var p=paramName.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),regex=new RegExp("[\\?&]"+p+"=([^&#]*)"),results=regex.exec(url);return null===results?null:decodeURIComponent(results[1].replace(/\+/g," "))}$.getParam=function(paramName){return parseParam(location.search,paramName)},$.withParam=function(url,paramName,value){var s=url.split(/#/,2);return parseParam(url,paramName)===value?url:s[0]+(s[0].match(/\?/)?"&":"?")+encodeURIComponent(paramName)+"="+encodeURIComponent(value)+(s[1]?"#"+s[1]:"")}}(jQuery),navigator.userAgent.match(/Windows/)&&$("html").addClass("windows"),navigator.userAgent.match(/Safari/)&&!navigator.userAgent.match(/Chrome/)&&$("html").addClass("safari"),function(){$(document).on("click focus mouseover",".user-fragment a, .user-links a",function(){var href;return $(this).attr("target","_blank").attr("rel","noopener"),href=$(this).attr("href"),href&&!href.match(/^[a-z]+?:/i)?$(this).attr("href","http://"+$(this).attr("href")):void 0})}.call(this),String.prototype.toProperCase=function(){return this.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})},String.prototype.toCapitalStart=function(){return this.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1)})},String.prototype.strip=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.toPermalink=function(){return this.replace(/[^a-z0-9 ]/,"").gsub(/ +/,"-")},String.prototype.getParameter=function(name){var i,val,params=this.split("&");for(i=0;i<params.length;i++)if(val=params[i].split("="),val[0]===name)return decodeURIComponent(val[1]);return null},function(){window.trackEvent=function(dataStr){var extras,i,len,ref,replaced,s;if("undefined"!=typeof ga&&null!==ga){for(replaced=dataStr.replace(/###APP_NAME###/i,window.actionMarketingAppName),extras=[],ref=replaced.split(/\|/),i=0,len=ref.length;len>i;i++)s=ref[i],extras.push(s.toProperCase());if(ga.apply(window,["send","event"].concat(extras)),ga.getByName&&ga.getByName("widgetIntegration"))return ga.apply(window,["widgetIntegration.send","event"].concat(extras))}},window.trackPageview=function(dataStr){return"undefined"!=typeof ga&&null!==ga&&(ga.apply(window,["send","pageview"].concat(dataStr.split(/\|/))),ga.getByName&&ga.getByName("widgetIntegration"))?ga.apply(window,["widgetIntegration.send","pageview"].concat(dataStr.split(/\|/))):void 0},$(document).on("click","[data-track-event]",function(){return trackEvent($(this).data("track-event"))}).on("click","[data-track-pageview]",function(){return trackPageview($(this).data("track-pageview")),$(this).removeAttr("track-pageview")})}.call(this),function($){$.iconset_gleam={iconClass:"fa",iconClassFix:"fa-",icons:["","500px","adjust","adn","align-center","align-justify","align-left","align-right","amazon","ambulance","american-sign-language-interpreting","anchor","android","angellist","angle-double-down","angle-double-left","angle-double-right","angle-double-up","angle-down","angle-left","angle-right","angle-up","apple","archive","area-chart","arrow-circle-down","arrow-circle-left","arrow-circle-o-down","arrow-circle-o-left","arrow-circle-o-right","arrow-circle-o-up","arrow-circle-right","arrow-circle-up","arrow-down","arrow-left","arrow-right","arrow-up","arrows","arrows-alt","arrows-h","arrows-v","assistive-listening-systems","asterisk","at","audio-description","automobile","backward","balance-scale","ban","bank","bar-chart","bar-chart-o","barcode","bars","battery-0","battery-1","battery-2","battery-3","battery-4","battery-empty","battery-full","battery-half","battery-quarter","battery-three-quarters","bed","beer","behance","behance-square","bell","bell-o","bell-slash","bell-slash-o","bicycle","binoculars","birthday-cake","bitbucket","bitbucket-square","bitcoin","black-tie","blind","bluetooth","bluetooth-b","bold","bolt","bomb","book","bookmark","bookmark-o","braille","briefcase","btc","bug","building","building-o","bullhorn","bullseye","bus","buysellads","cab","calculator","calendar","calendar-check-o","calendar-minus-o","calendar-o","calendar-plus-o","calendar-times-o","camera","camera-retro","car","caret-down","caret-left","caret-right","caret-square-o-down","caret-square-o-left","caret-square-o-right","caret-square-o-up","caret-up","cart-arrow-down","cart-plus","cc","cc-amex","cc-diners-club","cc-discover","cc-jcb","cc-mastercard","cc-paypal","cc-stripe","cc-visa","certificate","chain","chain-broken","check","check-circle","check-circle-o","check-square","check-square-o","chevron-circle-down","chevron-circle-left","chevron-circle-right","chevron-circle-up","chevron-down","chevron-left","chevron-right","chevron-up","child","chrome","circle","circle-o","circle-o-notch","circle-thin","clipboard","clock-o","clone","close","cloud","cloud-download","cloud-upload","cny","code","code-fork","codepen","codiepie","coffee","cog","cogs","columns","comment","comment-o","commenting","commenting-o","comments","comments-o","compass","compress","connectdevelop","contao","copy","copyright","creative-commons","credit-card","credit-card-alt","crop","crosshairs","css3","cube","cubes","cut","cutlery","dashboard","dashcube","database","deaf","dedent","delicious","desktop","deviantart","diamond","digg","disqus","dollar","dot-circle-o","download","dribbble","dropbox","drupal","edge","edit","eject","ellipsis-h","ellipsis-v","empire","envelope","envelope-o","envelope-square","envira","eraser","eur","euro","eventbrite","exchange","exclamation","exclamation-circle","exclamation-triangle","expand","expeditedssl","external-link","external-link-square","eye","eye-slash","eyedropper","facebook","facebook-f","facebook-official","facebook-square","fast-backward","fast-forward","fax","female","fighter-jet","file","file-archive-o","file-audio-o","file-code-o","file-excel-o","file-image-o","file-movie-o","file-o","file-pdf-o","file-photo-o","file-picture-o","file-powerpoint-o","file-sound-o","file-text","file-text-o","file-video-o","file-word-o","file-zip-o","files-o","film","filter","fire","fire-extinguisher","firefox","first-order","flag","flag-checkered","flag-o","flash","flask","flickr","floppy-o","folder","folder-o","folder-open","folder-open-o","font","font-awesome","fonticons","fort-awesome","forumbee","forward","foursquare","frown-o","futbol-o","gamepad","gavel","gbp","ge","gear","gears","genderless","genderless","get-pocket","gg","gg-circle","gift","git","git-square","github","github-alt","github-square","gitlab","gittip","glass","glide","glide-g","globe","google","google-plus","google-plus-official","google-plus-square","google-wallet","graduation-cap","gratipay","group","h-square","hacker-news","hand-grab-o","hand-lizard-o","hand-o-down","hand-o-left","hand-o-right","hand-o-up","hand-paper-o","hand-peace-o","hand-pointer-o","hand-rock-o","hand-scissors-o","hand-spock-o","hand-stop-o","hashtag","hdd-o","header","headphones","heart","heart-o","heartbeat","history","home","hospital-o","hotel","hourglass","hourglass-1","hourglass-2","hourglass-3","hourglass-end","hourglass-half","hourglass-o","hourglass-start","houzz","html5","i-cursor","ils","image","inbox","indent","industry","info","info-circle","indiegogo","inr","instagram","institution","internet-explorer","ioxhost","italic","joomla","jpy","jsfiddle","key","keyboard-o","kickstarter","krw","language","laptop","lastfm","lastfm-square","leaf","leanpub","legal","lemon-o","level-down","level-up","life-bouy","life-buoy","life-ring","life-saver","lightbulb-o","line-chart","link","linkedin","linkedin-square","linux","list","list-alt","list-ol","list-ul","location-arrow","lock","long-arrow-down","long-arrow-left","long-arrow-right","long-arrow-up","low-vision","magic","magnet","mail-forward","mail-reply","mail-reply-all","male","map","map-marker","map-o","map-pin","map-signs","mars","mars-double","mars-stroke","mars-stroke-h","mars-stroke-v","maxcdn","meanpath","medium","medkit","meh-o","mercury","microphone","microphone-slash","minus","minus-circle","minus-square","minus-square-o","mixcloud","mobile","mobile-phone","modx","money","moon-o","mortar-board","motorcycle","mouse-pointer","music","navicon","neuter","newspaper-o","object-group","object-ungroup","odnoklassniki","odnoklassniki-square","opencart","openid","opera","optin-monster","outdent","pagelines","paint-brush","paper-plane","paper-plane-o","paperclip","paragraph","paste","pause","pause-circle","pause-circle-o","paw","paypal","pencil","pencil-square","pencil-square-o","percent","phone","phone-square","photo","picture-o","pie-chart","pied-piper","pied-piper-alt","pinterest","pinterest-p","pinterest-square","plane","play","play-circle","play-circle-o","plug","plus","plus-circle","plus-square","plus-square-o","power-off","print","product-hunt","puzzle-piece","qq","qrcode","question","question-circle","question-circle-o","quote-left","quote-right","ra","random","rebel","recycle","reddit","reddit-alien","reddit-square","refresh","registered","remove","renren","reorder","repeat","reply","reply-all","retweet","rmb","road","rocket","rotate-left","rotate-right","rouble","rss","rss-square","rub","ruble","rupee","safari","save","scissors","scribd","search","search-minus","search-plus","sellsy","send","send-o","server","share","share-alt","share-alt-square","share-square","share-square-o","shekel","sheqel","shield","ship","shirtsinbulk","shopping-bag","shopping-basket","shopping-cart","sign-in","sign-language","sign-out","signal","simplybuilt","sitemap","skyatlas","skype","slack","sliders","slideshare","smile-o","snapchat","snapchat-square","soccer-ball-o","sort","sort-alpha-asc","sort-alpha-desc","sort-amount-asc","sort-amount-desc","sort-asc","sort-desc","sort-down","sort-numeric-asc","sort-numeric-desc","sort-up","soundcloud","space-shuttle","spinner","spoon","spotify","square","square-o","stack-exchange","stack-overflow","star","star-half","star-half-empty","star-half-full","star-half-o","star-o","steam","steam-square","step-backward","step-forward","stethoscope","sticky-note","sticky-note-o","stop","stop-circle","stop-circle-o","street-view","strikethrough","stumbleupon","stumbleupon-circle","subscript","subway","suitcase","sun-o","superscript","support","table","tablet","tachometer","tag","tags","tasks","taxi","television","tencent-weibo","terminal","text-height","text-width","th","th-large","th-list","themeisle","thumb-tack","thumbs-down","thumbs-o-down","thumbs-o-up","thumbs-up","ticket","times","times-circle","times-circle-o","tint","toggle-down","toggle-left","toggle-off","toggle-on","toggle-right","toggle-up","trademark","train","transgender","transgender-alt","trash","trash-o","tree","trello","tripadvisor","trophy","truck","try","tty","tumblr","tumblr-square","turkish-lira","tv","twitch","twitter","twitter-square","typeform","umbrella","underline","undo","universal-access","university","unlink","unlock","unlock-alt","unsorted","upload","usb","usd","user","user-md","user-plus","user-secret","user-times","users","venus","venus-double","venus-mars","viacoin","viadeo","viadeo-square","video-camera","vimeo","vimeo-square","vine","vk","volume-control-phone","volume-down","volume-off","volume-up","warning","wechat","weibo","weixin","whatsapp","wheelchair","wheelchair-alt","wifi","wikipedia-w","windows","wistia","won","wordpress","wpbeginner","wpforms","wrench","xing","xing-square","y-combinator","yahoo","yc","yelp","yen","yoast","youtube","youtube-play","youtube-square"]}}(jQuery),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):global.moment=factory()}(this,function(){"use strict";function utils_hooks__hooks(){return hookCallback.apply(null,arguments)}function setHookCallback(callback){hookCallback=callback}function isArray(input){return input instanceof Array||"[object Array]"===Object.prototype.toString.call(input)}function isObject(input){return null!=input&&"[object Object]"===Object.prototype.toString.call(input)}function isObjectEmpty(obj){var k;for(k in obj)return!1;return!0}function isDate(input){return input instanceof Date||"[object Date]"===Object.prototype.toString.call(input)}function map(arr,fn){var i,res=[];for(i=0;i<arr.length;++i)res.push(fn(arr[i],i));return res}function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function extend(a,b){for(var i in b)hasOwnProp(b,i)&&(a[i]=b[i]);
return hasOwnProp(b,"toString")&&(a.toString=b.toString),hasOwnProp(b,"valueOf")&&(a.valueOf=b.valueOf),a}function create_utc__createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,!0).utc()}function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function getParsingFlags(m){return null==m._pf&&(m._pf=defaultParsingFlags()),m._pf}function valid__isValid(m){if(null==m._isValid){var flags=getParsingFlags(m),parsedParts=some.call(flags.parsedDateParts,function(i){return null!=i}),isNowValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidMonth&&!flags.invalidWeekday&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated&&(!flags.meridiem||flags.meridiem&&parsedParts);if(m._strict&&(isNowValid=isNowValid&&0===flags.charsLeftOver&&0===flags.unusedTokens.length&&void 0===flags.bigHour),null!=Object.isFrozen&&Object.isFrozen(m))return isNowValid;m._isValid=isNowValid}return m._isValid}function valid__createInvalid(flags){var m=create_utc__createUTC(NaN);return null!=flags?extend(getParsingFlags(m),flags):getParsingFlags(m).userInvalidated=!0,m}function isUndefined(input){return void 0===input}function copyConfig(to,from){var i,prop,val;if(isUndefined(from._isAMomentObject)||(to._isAMomentObject=from._isAMomentObject),isUndefined(from._i)||(to._i=from._i),isUndefined(from._f)||(to._f=from._f),isUndefined(from._l)||(to._l=from._l),isUndefined(from._strict)||(to._strict=from._strict),isUndefined(from._tzm)||(to._tzm=from._tzm),isUndefined(from._isUTC)||(to._isUTC=from._isUTC),isUndefined(from._offset)||(to._offset=from._offset),isUndefined(from._pf)||(to._pf=getParsingFlags(from)),isUndefined(from._locale)||(to._locale=from._locale),momentProperties.length>0)for(i in momentProperties)prop=momentProperties[i],val=from[prop],isUndefined(val)||(to[prop]=val);return to}function Moment(config){copyConfig(this,config),this._d=new Date(null!=config._d?config._d.getTime():NaN),updateInProgress===!1&&(updateInProgress=!0,utils_hooks__hooks.updateOffset(this),updateInProgress=!1)}function isMoment(obj){return obj instanceof Moment||null!=obj&&null!=obj._isAMomentObject}function absFloor(number){return 0>number?Math.ceil(number)||0:Math.floor(number)}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;return 0!==coercedNumber&&isFinite(coercedNumber)&&(value=absFloor(coercedNumber)),value}function compareArrays(array1,array2,dontConvert){var i,len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0;for(i=0;len>i;i++)(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i]))&&diffs++;return diffs+lengthDiff}function warn(msg){utils_hooks__hooks.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+msg)}function deprecate(msg,fn){var firstTime=!0;return extend(function(){if(null!=utils_hooks__hooks.deprecationHandler&&utils_hooks__hooks.deprecationHandler(null,msg),firstTime){for(var arg,args=[],i=0;i<arguments.length;i++){if(arg="","object"==typeof arguments[i]){arg+="\n["+i+"] ";for(var key in arguments[0])arg+=key+": "+arguments[0][key]+", ";arg=arg.slice(0,-2)}else arg=arguments[i];args.push(arg)}warn(msg+"\nArguments: "+Array.prototype.slice.call(args).join("")+"\n"+(new Error).stack),firstTime=!1}return fn.apply(this,arguments)},fn)}function deprecateSimple(name,msg){null!=utils_hooks__hooks.deprecationHandler&&utils_hooks__hooks.deprecationHandler(name,msg),deprecations[name]||(warn(msg),deprecations[name]=!0)}function isFunction(input){return input instanceof Function||"[object Function]"===Object.prototype.toString.call(input)}function locale_set__set(config){var prop,i;for(i in config)prop=config[i],isFunction(prop)?this[i]=prop:this["_"+i]=prop;this._config=config,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function mergeConfigs(parentConfig,childConfig){var prop,res=extend({},parentConfig);for(prop in childConfig)hasOwnProp(childConfig,prop)&&(isObject(parentConfig[prop])&&isObject(childConfig[prop])?(res[prop]={},extend(res[prop],parentConfig[prop]),extend(res[prop],childConfig[prop])):null!=childConfig[prop]?res[prop]=childConfig[prop]:delete res[prop]);for(prop in parentConfig)hasOwnProp(parentConfig,prop)&&!hasOwnProp(childConfig,prop)&&isObject(parentConfig[prop])&&(res[prop]=extend({},res[prop]));return res}function Locale(config){null!=config&&this.set(config)}function locale_calendar__calendar(key,mom,now){var output=this._calendar[key]||this._calendar.sameElse;return isFunction(output)?output.call(mom,now):output}function longDateFormat(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];return format||!formatUpper?format:(this._longDateFormat[key]=formatUpper.replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)}),this._longDateFormat[key])}function invalidDate(){return this._invalidDate}function ordinal(number){return this._ordinal.replace("%d",number)}function relative__relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return isFunction(output)?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)}function pastFuture(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return isFunction(format)?format(output):format.replace(/%s/i,output)}function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+"s"]=aliases[shorthand]=unit}function normalizeUnits(units){return"string"==typeof units?aliases[units]||aliases[units.toLowerCase()]:void 0}function normalizeObjectUnits(inputObject){var normalizedProp,prop,normalizedInput={};for(prop in inputObject)hasOwnProp(inputObject,prop)&&(normalizedProp=normalizeUnits(prop),normalizedProp&&(normalizedInput[normalizedProp]=inputObject[prop]));return normalizedInput}function addUnitPriority(unit,priority){priorities[unit]=priority}function getPrioritizedUnits(unitsObj){var units=[];for(var u in unitsObj)units.push({unit:u,priority:priorities[u]});return units.sort(function(a,b){return a.priority-b.priority}),units}function makeGetSet(unit,keepTime){return function(value){return null!=value?(get_set__set(this,unit,value),utils_hooks__hooks.updateOffset(this,keepTime),this):get_set__get(this,unit)}}function get_set__get(mom,unit){return mom.isValid()?mom._d["get"+(mom._isUTC?"UTC":"")+unit]():NaN}function get_set__set(mom,unit,value){mom.isValid()&&mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}function stringGet(units){return units=normalizeUnits(units),isFunction(this[units])?this[units]():this}function stringSet(units,value){if("object"==typeof units){units=normalizeObjectUnits(units);for(var prioritized=getPrioritizedUnits(units),i=0;i<prioritized.length;i++)this[prioritized[i].unit](units[prioritized[i].unit])}else if(units=normalizeUnits(units),isFunction(this[units]))return this[units](value);return this}function zeroFill(number,targetLength,forceSign){var absNumber=""+Math.abs(number),zerosToFill=targetLength-absNumber.length,sign=number>=0;return(sign?forceSign?"+":"":"-")+Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber}function addFormatToken(token,padded,ordinal,callback){var func=callback;"string"==typeof callback&&(func=function(){return this[callback]()}),token&&(formatTokenFunctions[token]=func),padded&&(formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2])}),ordinal&&(formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token)})}function removeFormattingTokens(input){return input.match(/\[[\s\S]/)?input.replace(/^\[|\]$/g,""):input.replace(/\\/g,"")}function makeFormatFunction(format){var i,length,array=format.match(formattingTokens);for(i=0,length=array.length;length>i;i++)formatTokenFunctions[array[i]]?array[i]=formatTokenFunctions[array[i]]:array[i]=removeFormattingTokens(array[i]);return function(mom){var i,output="";for(i=0;length>i;i++)output+=array[i]instanceof Function?array[i].call(mom,format):array[i];return output}}function formatMoment(m,format){return m.isValid()?(format=expandFormat(format,m.localeData()),formatFunctions[format]=formatFunctions[format]||makeFormatFunction(format),formatFunctions[format](m)):m.localeData().invalidDate()}function expandFormat(format,locale){function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}var i=5;for(localFormattingTokens.lastIndex=0;i>=0&&localFormattingTokens.test(format);)format=format.replace(localFormattingTokens,replaceLongDateFormatTokens),localFormattingTokens.lastIndex=0,i-=1;return format}function addRegexToken(token,regex,strictRegex){regexes[token]=isFunction(regex)?regex:function(isStrict,localeData){return isStrict&&strictRegex?strictRegex:regex}}function getParseRegexForToken(token,config){return hasOwnProp(regexes,token)?regexes[token](config._strict,config._locale):new RegExp(unescapeFormat(token))}function unescapeFormat(s){return regexEscape(s.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4}))}function regexEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function addParseToken(token,callback){var i,func=callback;for("string"==typeof token&&(token=[token]),"number"==typeof callback&&(func=function(input,array){array[callback]=toInt(input)}),i=0;i<token.length;i++)tokens[token[i]]=func}function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{},callback(input,config._w,config,token)})}function addTimeToArrayFromToken(token,input,config){null!=input&&hasOwnProp(tokens,token)&&tokens[token](input,config._a,config,token)}function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}function localeMonths(m,format){return m?isArray(this._months)?this._months[m.month()]:this._months[(this._months.isFormat||MONTHS_IN_FORMAT).test(format)?"format":"standalone"][m.month()]:this._months}function localeMonthsShort(m,format){return m?isArray(this._monthsShort)?this._monthsShort[m.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(format)?"format":"standalone"][m.month()]:this._monthsShort}function units_month__handleStrictParse(monthName,format,strict){var i,ii,mom,llc=monthName.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;12>i;++i)mom=create_utc__createUTC([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(mom,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(mom,"").toLocaleLowerCase();return strict?"MMM"===format?(ii=indexOf.call(this._shortMonthsParse,llc),-1!==ii?ii:null):(ii=indexOf.call(this._longMonthsParse,llc),-1!==ii?ii:null):"MMM"===format?(ii=indexOf.call(this._shortMonthsParse,llc),-1!==ii?ii:(ii=indexOf.call(this._longMonthsParse,llc),-1!==ii?ii:null)):(ii=indexOf.call(this._longMonthsParse,llc),-1!==ii?ii:(ii=indexOf.call(this._shortMonthsParse,llc),-1!==ii?ii:null))}function localeMonthsParse(monthName,format,strict){var i,mom,regex;if(this._monthsParseExact)return units_month__handleStrictParse.call(this,monthName,format,strict);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(mom=create_utc__createUTC([2e3,i]),strict&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i")),strict||this._monthsParse[i]||(regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,""),this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")),strict&&"MMMM"===format&&this._longMonthsParse[i].test(monthName))return i;if(strict&&"MMM"===format&&this._shortMonthsParse[i].test(monthName))return i;if(!strict&&this._monthsParse[i].test(monthName))return i}}function setMonth(mom,value){var dayOfMonth;if(!mom.isValid())return mom;if("string"==typeof value)if(/^\d+$/.test(value))value=toInt(value);else if(value=mom.localeData().monthsParse(value),"number"!=typeof value)return mom;return dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value)),mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth),mom}function getSetMonth(value){return null!=value?(setMonth(this,value),utils_hooks__hooks.updateOffset(this,!0),this):get_set__get(this,"Month")}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}function monthsShortRegex(isStrict){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),isStrict?this._monthsShortStrictRegex:this._monthsShortRegex):(hasOwnProp(this,"_monthsShortRegex")||(this._monthsShortRegex=defaultMonthsShortRegex),this._monthsShortStrictRegex&&isStrict?this._monthsShortStrictRegex:this._monthsShortRegex)}function monthsRegex(isStrict){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),isStrict?this._monthsStrictRegex:this._monthsRegex):(hasOwnProp(this,"_monthsRegex")||(this._monthsRegex=defaultMonthsRegex),this._monthsStrictRegex&&isStrict?this._monthsStrictRegex:this._monthsRegex)}function computeMonthsParse(){function cmpLenRev(a,b){return b.length-a.length}var i,mom,shortPieces=[],longPieces=[],mixedPieces=[];for(i=0;12>i;i++)mom=create_utc__createUTC([2e3,i]),shortPieces.push(this.monthsShort(mom,"")),longPieces.push(this.months(mom,"")),mixedPieces.push(this.months(mom,"")),mixedPieces.push(this.monthsShort(mom,""));for(shortPieces.sort(cmpLenRev),longPieces.sort(cmpLenRev),mixedPieces.sort(cmpLenRev),i=0;12>i;i++)shortPieces[i]=regexEscape(shortPieces[i]),longPieces[i]=regexEscape(longPieces[i]);for(i=0;24>i;i++)mixedPieces[i]=regexEscape(mixedPieces[i]);this._monthsRegex=new RegExp("^("+mixedPieces.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+longPieces.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i")}function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}function getIsLeapYear(){return isLeapYear(this.year())}function createDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);return 100>y&&y>=0&&isFinite(date.getFullYear())&&date.setFullYear(y),date}function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));return 100>y&&y>=0&&isFinite(date.getUTCFullYear())&&date.setUTCFullYear(y),date}function firstWeekOffset(year,dow,doy){var fwd=7+dow-doy,fwdlw=(7+createUTCDate(year,0,fwd).getUTCDay()-dow)%7;return-fwdlw+fwd-1}function dayOfYearFromWeeks(year,week,weekday,dow,doy){var resYear,resDayOfYear,localWeekday=(7+weekday-dow)%7,weekOffset=firstWeekOffset(year,dow,doy),dayOfYear=1+7*(week-1)+localWeekday+weekOffset;return 0>=dayOfYear?(resYear=year-1,resDayOfYear=daysInYear(resYear)+dayOfYear):dayOfYear>daysInYear(year)?(resYear=year+1,resDayOfYear=dayOfYear-daysInYear(year)):(resYear=year,resDayOfYear=dayOfYear),{year:resYear,dayOfYear:resDayOfYear}}function weekOfYear(mom,dow,doy){var resWeek,resYear,weekOffset=firstWeekOffset(mom.year(),dow,doy),week=Math.floor((mom.dayOfYear()-weekOffset-1)/7)+1;return 1>week?(resYear=mom.year()-1,resWeek=week+weeksInYear(resYear,dow,doy)):week>weeksInYear(mom.year(),dow,doy)?(resWeek=week-weeksInYear(mom.year(),dow,doy),resYear=mom.year()+1):(resYear=mom.year(),resWeek=week),{week:resWeek,year:resYear}}function weeksInYear(year,dow,doy){var weekOffset=firstWeekOffset(year,dow,doy),weekOffsetNext=firstWeekOffset(year+1,dow,doy);return(daysInYear(year)-weekOffset+weekOffsetNext)/7}function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week}function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(input){var week=this.localeData().week(this);return null==input?week:this.add(7*(input-week),"d")}function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return null==input?week:this.add(7*(input-week),"d")}function parseWeekday(input,locale){return"string"!=typeof input?input:isNaN(input)?(input=locale.weekdaysParse(input),"number"==typeof input?input:null):parseInt(input,10)}function parseIsoWeekday(input,locale){return"string"==typeof input?locale.weekdaysParse(input)%7||7:isNaN(input)?null:input}function localeWeekdays(m,format){return m?isArray(this._weekdays)?this._weekdays[m.day()]:this._weekdays[this._weekdays.isFormat.test(format)?"format":"standalone"][m.day()]:this._weekdays}function localeWeekdaysShort(m){return m?this._weekdaysShort[m.day()]:this._weekdaysShort}function localeWeekdaysMin(m){return m?this._weekdaysMin[m.day()]:this._weekdaysMin}function day_of_week__handleStrictParse(weekdayName,format,strict){var i,ii,mom,llc=weekdayName.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;7>i;++i)mom=create_utc__createUTC([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(mom,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(mom,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(mom,"").toLocaleLowerCase();return strict?"dddd"===format?(ii=indexOf.call(this._weekdaysParse,llc),-1!==ii?ii:null):"ddd"===format?(ii=indexOf.call(this._shortWeekdaysParse,llc),-1!==ii?ii:null):(ii=indexOf.call(this._minWeekdaysParse,llc),-1!==ii?ii:null):"dddd"===format?(ii=indexOf.call(this._weekdaysParse,llc),-1!==ii?ii:(ii=indexOf.call(this._shortWeekdaysParse,llc),-1!==ii?ii:(ii=indexOf.call(this._minWeekdaysParse,llc),-1!==ii?ii:null))):"ddd"===format?(ii=indexOf.call(this._shortWeekdaysParse,llc),-1!==ii?ii:(ii=indexOf.call(this._weekdaysParse,llc),-1!==ii?ii:(ii=indexOf.call(this._minWeekdaysParse,llc),-1!==ii?ii:null))):(ii=indexOf.call(this._minWeekdaysParse,llc),-1!==ii?ii:(ii=indexOf.call(this._weekdaysParse,llc),-1!==ii?ii:(ii=indexOf.call(this._shortWeekdaysParse,llc),-1!==ii?ii:null)))}function localeWeekdaysParse(weekdayName,format,strict){var i,mom,regex;if(this._weekdaysParseExact)return day_of_week__handleStrictParse.call(this,weekdayName,format,strict);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;7>i;i++){if(mom=create_utc__createUTC([2e3,1]).day(i),strict&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(mom,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(mom,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(mom,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,""),this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")),strict&&"dddd"===format&&this._fullWeekdaysParse[i].test(weekdayName))return i;if(strict&&"ddd"===format&&this._shortWeekdaysParse[i].test(weekdayName))return i;if(strict&&"dd"===format&&this._minWeekdaysParse[i].test(weekdayName))return i;if(!strict&&this._weekdaysParse[i].test(weekdayName))return i}}function getSetDayOfWeek(input){if(!this.isValid())return null!=input?this:NaN;var day=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=input?(input=parseWeekday(input,this.localeData()),this.add(input-day,"d")):day}function getSetLocaleDayOfWeek(input){if(!this.isValid())return null!=input?this:NaN;var weekday=(this.day()+7-this.localeData()._week.dow)%7;return null==input?weekday:this.add(input-weekday,"d")}function getSetISODayOfWeek(input){if(!this.isValid())return null!=input?this:NaN;if(null!=input){var weekday=parseIsoWeekday(input,this.localeData());return this.day(this.day()%7?weekday:weekday-7)}return this.day()||7}function weekdaysRegex(isStrict){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),isStrict?this._weekdaysStrictRegex:this._weekdaysRegex):(hasOwnProp(this,"_weekdaysRegex")||(this._weekdaysRegex=defaultWeekdaysRegex),this._weekdaysStrictRegex&&isStrict?this._weekdaysStrictRegex:this._weekdaysRegex)}function weekdaysShortRegex(isStrict){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),isStrict?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(hasOwnProp(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=defaultWeekdaysShortRegex),this._weekdaysShortStrictRegex&&isStrict?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function weekdaysMinRegex(isStrict){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),isStrict?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(hasOwnProp(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=defaultWeekdaysMinRegex),this._weekdaysMinStrictRegex&&isStrict?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function computeWeekdaysParse(){function cmpLenRev(a,b){return b.length-a.length}var i,mom,minp,shortp,longp,minPieces=[],shortPieces=[],longPieces=[],mixedPieces=[];for(i=0;7>i;i++)mom=create_utc__createUTC([2e3,1]).day(i),minp=this.weekdaysMin(mom,""),shortp=this.weekdaysShort(mom,""),longp=this.weekdays(mom,""),minPieces.push(minp),shortPieces.push(shortp),longPieces.push(longp),mixedPieces.push(minp),mixedPieces.push(shortp),mixedPieces.push(longp);for(minPieces.sort(cmpLenRev),shortPieces.sort(cmpLenRev),longPieces.sort(cmpLenRev),mixedPieces.sort(cmpLenRev),i=0;7>i;i++)shortPieces[i]=regexEscape(shortPieces[i]),longPieces[i]=regexEscape(longPieces[i]),mixedPieces[i]=regexEscape(mixedPieces[i]);this._weekdaysRegex=new RegExp("^("+mixedPieces.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+longPieces.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+minPieces.join("|")+")","i")}function hFormat(){return this.hours()%12||12}function kFormat(){return this.hours()||24}function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase)})}function matchMeridiem(isStrict,locale){return locale._meridiemParse}function localeIsPM(input){return"p"===(input+"").toLowerCase().charAt(0)}function localeMeridiem(hours,minutes,isLower){return hours>11?isLower?"pm":"PM":isLower?"am":"AM"}function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key}function chooseLocale(names){for(var j,next,locale,split,i=0;i<names.length;){for(split=normalizeLocale(names[i]).split("-"),j=split.length,next=normalizeLocale(names[i+1]),next=next?next.split("-"):null;j>0;){if(locale=loadLocale(split.slice(0,j).join("-")))return locale;if(next&&next.length>=j&&compareArrays(split,next,!0)>=j-1)break;j--}i++}return null}function loadLocale(name){var oldLocale=null;if(!locales[name]&&"undefined"!=typeof module&&module&&module.exports)try{oldLocale=globalLocale._abbr,require("./locale/"+name),locale_locales__getSetGlobalLocale(oldLocale)}catch(e){}return locales[name]}function locale_locales__getSetGlobalLocale(key,values){var data;return key&&(data=isUndefined(values)?locale_locales__getLocale(key):defineLocale(key,values),data&&(globalLocale=data)),globalLocale._abbr}function defineLocale(name,config){if(null!==config){var parentConfig=baseConfig;return config.abbr=name,null!=locales[name]?(deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),parentConfig=locales[name]._config):null!=config.parentLocale&&(null!=locales[config.parentLocale]?parentConfig=locales[config.parentLocale]._config:deprecateSimple("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/")),locales[name]=new Locale(mergeConfigs(parentConfig,config)),locale_locales__getSetGlobalLocale(name),locales[name]}return delete locales[name],null}function updateLocale(name,config){if(null!=config){var locale,parentConfig=baseConfig;null!=locales[name]&&(parentConfig=locales[name]._config),config=mergeConfigs(parentConfig,config),locale=new Locale(config),locale.parentLocale=locales[name],locales[name]=locale,locale_locales__getSetGlobalLocale(name)}else null!=locales[name]&&(null!=locales[name].parentLocale?locales[name]=locales[name].parentLocale:null!=locales[name]&&delete locales[name]);return locales[name]}function locale_locales__getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr&&(key=key._locale._abbr),!key)return globalLocale;if(!isArray(key)){if(locale=loadLocale(key))return locale;key=[key]}return chooseLocale(key)}function locale_locales__listLocales(){return keys(locales)}function checkOverflow(m){var overflow,a=m._a;return a&&-2===getParsingFlags(m).overflow&&(overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||24===a[HOUR]&&(0!==a[MINUTE]||0!==a[SECOND]||0!==a[MILLISECOND])?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1,getParsingFlags(m)._overflowDayOfYear&&(YEAR>overflow||overflow>DATE)&&(overflow=DATE),getParsingFlags(m)._overflowWeeks&&-1===overflow&&(overflow=WEEK),getParsingFlags(m)._overflowWeekday&&-1===overflow&&(overflow=WEEKDAY),getParsingFlags(m).overflow=overflow),m}function configFromISO(config){var i,l,allowTime,dateFormat,timeFormat,tzFormat,string=config._i,match=extendedIsoRegex.exec(string)||basicIsoRegex.exec(string);if(match){for(getParsingFlags(config).iso=!0,i=0,l=isoDates.length;l>i;i++)if(isoDates[i][1].exec(match[1])){dateFormat=isoDates[i][0],allowTime=isoDates[i][2]!==!1;break}if(null==dateFormat)return void(config._isValid=!1);if(match[3]){for(i=0,l=isoTimes.length;l>i;i++)if(isoTimes[i][1].exec(match[3])){timeFormat=(match[2]||" ")+isoTimes[i][0];break}if(null==timeFormat)return void(config._isValid=!1)}if(!allowTime&&null!=timeFormat)return void(config._isValid=!1);if(match[4]){if(!tzRegex.exec(match[4]))return void(config._isValid=!1);tzFormat="Z"}config._f=dateFormat+(timeFormat||"")+(tzFormat||""),configFromStringAndFormat(config)}else config._isValid=!1}function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);return null!==matched?void(config._d=new Date(+matched[1])):(configFromISO(config),void(config._isValid===!1&&(delete config._isValid,utils_hooks__hooks.createFromInputFallback(config))))}function defaults(a,b,c){return null!=a?a:null!=b?b:c}function currentDateArray(config){var nowValue=new Date(utils_hooks__hooks.now());return config._useUTC?[nowValue.getUTCFullYear(),nowValue.getUTCMonth(),nowValue.getUTCDate()]:[nowValue.getFullYear(),nowValue.getMonth(),nowValue.getDate()]}function configFromArray(config){var i,date,currentDate,yearToUse,input=[];if(!config._d){for(currentDate=currentDateArray(config),config._w&&null==config._a[DATE]&&null==config._a[MONTH]&&dayOfYearFromWeekInfo(config),config._dayOfYear&&(yearToUse=defaults(config._a[YEAR],currentDate[YEAR]),config._dayOfYear>daysInYear(yearToUse)&&(getParsingFlags(config)._overflowDayOfYear=!0),date=createUTCDate(yearToUse,0,config._dayOfYear),config._a[MONTH]=date.getUTCMonth(),config._a[DATE]=date.getUTCDate()),i=0;3>i&&null==config._a[i];++i)config._a[i]=input[i]=currentDate[i];for(;7>i;i++)config._a[i]=input[i]=null==config._a[i]?2===i?1:0:config._a[i];24===config._a[HOUR]&&0===config._a[MINUTE]&&0===config._a[SECOND]&&0===config._a[MILLISECOND]&&(config._nextDay=!0,config._a[HOUR]=0),config._d=(config._useUTC?createUTCDate:createDate).apply(null,input),null!=config._tzm&&config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm),config._nextDay&&(config._a[HOUR]=24)}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp,weekdayOverflow;w=config._w,null!=w.GG||null!=w.W||null!=w.E?(dow=1,doy=4,weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(local__createLocal(),1,4).year),week=defaults(w.W,1),weekday=defaults(w.E,1),(1>weekday||weekday>7)&&(weekdayOverflow=!0)):(dow=config._locale._week.dow,doy=config._locale._week.doy,weekYear=defaults(w.gg,config._a[YEAR],weekOfYear(local__createLocal(),dow,doy).year),week=defaults(w.w,1),null!=w.d?(weekday=w.d,(0>weekday||weekday>6)&&(weekdayOverflow=!0)):null!=w.e?(weekday=w.e+dow,(w.e<0||w.e>6)&&(weekdayOverflow=!0)):weekday=dow),1>week||week>weeksInYear(weekYear,dow,doy)?getParsingFlags(config)._overflowWeeks=!0:null!=weekdayOverflow?getParsingFlags(config)._overflowWeekday=!0:(temp=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),config._a[YEAR]=temp.year,config._dayOfYear=temp.dayOfYear)}function configFromStringAndFormat(config){if(config._f===utils_hooks__hooks.ISO_8601)return void configFromISO(config);config._a=[],getParsingFlags(config).empty=!0;var i,parsedInput,tokens,token,skipped,string=""+config._i,stringLength=string.length,totalParsedInputLength=0;for(tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[],i=0;i<tokens.length;i++)token=tokens[i],parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0],parsedInput&&(skipped=string.substr(0,string.indexOf(parsedInput)),skipped.length>0&&getParsingFlags(config).unusedInput.push(skipped),string=string.slice(string.indexOf(parsedInput)+parsedInput.length),totalParsedInputLength+=parsedInput.length),formatTokenFunctions[token]?(parsedInput?getParsingFlags(config).empty=!1:getParsingFlags(config).unusedTokens.push(token),addTimeToArrayFromToken(token,parsedInput,config)):config._strict&&!parsedInput&&getParsingFlags(config).unusedTokens.push(token);getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength,string.length>0&&getParsingFlags(config).unusedInput.push(string),config._a[HOUR]<=12&&getParsingFlags(config).bigHour===!0&&config._a[HOUR]>0&&(getParsingFlags(config).bigHour=void 0),getParsingFlags(config).parsedDateParts=config._a.slice(0),getParsingFlags(config).meridiem=config._meridiem,config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem),configFromArray(config),checkOverflow(config)}function meridiemFixWrap(locale,hour,meridiem){var isPm;return null==meridiem?hour:null!=locale.meridiemHour?locale.meridiemHour(hour,meridiem):null!=locale.isPM?(isPm=locale.isPM(meridiem),isPm&&12>hour&&(hour+=12),isPm||12!==hour||(hour=0),hour):hour}function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(0===config._f.length)return getParsingFlags(config).invalidFormat=!0,void(config._d=new Date(NaN));for(i=0;i<config._f.length;i++)currentScore=0,tempConfig=copyConfig({},config),null!=config._useUTC&&(tempConfig._useUTC=config._useUTC),tempConfig._f=config._f[i],configFromStringAndFormat(tempConfig),valid__isValid(tempConfig)&&(currentScore+=getParsingFlags(tempConfig).charsLeftOver,currentScore+=10*getParsingFlags(tempConfig).unusedTokens.length,getParsingFlags(tempConfig).score=currentScore,(null==scoreToBeat||scoreToBeat>currentScore)&&(scoreToBeat=currentScore,bestMoment=tempConfig));extend(config,bestMoment||tempConfig)}function configFromObject(config){if(!config._d){var i=normalizeObjectUnits(config._i);config._a=map([i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond],function(obj){return obj&&parseInt(obj,10)}),configFromArray(config)}}function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));return res._nextDay&&(res.add(1,"d"),res._nextDay=void 0),res}function prepareConfig(config){var input=config._i,format=config._f;return config._locale=config._locale||locale_locales__getLocale(config._l),null===input||void 0===format&&""===input?valid__createInvalid({nullInput:!0}):("string"==typeof input&&(config._i=input=config._locale.preparse(input)),isMoment(input)?new Moment(checkOverflow(input)):(isArray(format)?configFromStringAndArray(config):isDate(input)?config._d=input:format?configFromStringAndFormat(config):configFromInput(config),valid__isValid(config)||(config._d=null),config))}function configFromInput(config){var input=config._i;void 0===input?config._d=new Date(utils_hooks__hooks.now()):isDate(input)?config._d=new Date(input.valueOf()):"string"==typeof input?configFromString(config):isArray(input)?(config._a=map(input.slice(0),function(obj){
return parseInt(obj,10)}),configFromArray(config)):"object"==typeof input?configFromObject(config):"number"==typeof input?config._d=new Date(input):utils_hooks__hooks.createFromInputFallback(config)}function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};return"boolean"==typeof locale&&(strict=locale,locale=void 0),(isObject(input)&&isObjectEmpty(input)||isArray(input)&&0===input.length)&&(input=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=isUTC,c._l=locale,c._i=input,c._f=format,c._strict=strict,createFromConfig(c)}function local__createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,!1)}function pickBy(fn,moments){var res,i;if(1===moments.length&&isArray(moments[0])&&(moments=moments[0]),!moments.length)return local__createLocal();for(res=moments[0],i=1;i<moments.length;++i)(!moments[i].isValid()||moments[i][fn](res))&&(res=moments[i]);return res}function min(){var args=[].slice.call(arguments,0);return pickBy("isBefore",args)}function max(){var args=[].slice.call(arguments,0);return pickBy("isAfter",args)}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+1e3*seconds+6e4*minutes+1e3*hours*60*60,this._days=+days+7*weeks,this._months=+months+3*quarters+12*years,this._data={},this._locale=locale_locales__getLocale(),this._bubble()}function isDuration(obj){return obj instanceof Duration}function absRound(number){return 0>number?-1*Math.round(-1*number):Math.round(number)}function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset(),sign="+";return 0>offset&&(offset=-offset,sign="-"),sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~offset%60,2)})}function offsetFromString(matcher,string){var matches=(string||"").match(matcher)||[],chunk=matches[matches.length-1]||[],parts=(chunk+"").match(chunkOffset)||["-",0,0],minutes=+(60*parts[1])+toInt(parts[2]);return"+"===parts[0]?minutes:-minutes}function cloneWithOffset(input,model){var res,diff;return model._isUTC?(res=model.clone(),diff=(isMoment(input)||isDate(input)?input.valueOf():local__createLocal(input).valueOf())-res.valueOf(),res._d.setTime(res._d.valueOf()+diff),utils_hooks__hooks.updateOffset(res,!1),res):local__createLocal(input).local()}function getDateOffset(m){return 15*-Math.round(m._d.getTimezoneOffset()/15)}function getSetOffset(input,keepLocalTime){var localAdjust,offset=this._offset||0;return this.isValid()?null!=input?("string"==typeof input?input=offsetFromString(matchShortOffset,input):Math.abs(input)<16&&(input=60*input),!this._isUTC&&keepLocalTime&&(localAdjust=getDateOffset(this)),this._offset=input,this._isUTC=!0,null!=localAdjust&&this.add(localAdjust,"m"),offset!==input&&(!keepLocalTime||this._changeInProgress?add_subtract__addSubtract(this,create__createDuration(input-offset,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,utils_hooks__hooks.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?offset:getDateOffset(this):null!=input?this:NaN}function getSetZone(input,keepLocalTime){return null!=input?("string"!=typeof input&&(input=-input),this.utcOffset(input,keepLocalTime),this):-this.utcOffset()}function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime)}function setOffsetToLocal(keepLocalTime){return this._isUTC&&(this.utcOffset(0,keepLocalTime),this._isUTC=!1,keepLocalTime&&this.subtract(getDateOffset(this),"m")),this}function setOffsetToParsedOffset(){if(this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var tZone=offsetFromString(matchOffset,this._i);0===tZone?this.utcOffset(0,!0):this.utcOffset(offsetFromString(matchOffset,this._i))}return this}function hasAlignedHourOffset(input){return this.isValid()?(input=input?local__createLocal(input).utcOffset():0,(this.utcOffset()-input)%60===0):!1}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted))return this._isDSTShifted;var c={};if(copyConfig(c,this),c=prepareConfig(c),c._a){var other=c._isUTC?create_utc__createUTC(c._a):local__createLocal(c._a);this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function isLocal(){return this.isValid()?!this._isUTC:!1}function isUtcOffset(){return this.isValid()?this._isUTC:!1}function isUtc(){return this.isValid()?this._isUTC&&0===this._offset:!1}function create__createDuration(input,key){var sign,ret,diffRes,duration=input,match=null;return isDuration(input)?duration={ms:input._milliseconds,d:input._days,M:input._months}:"number"==typeof input?(duration={},key?duration[key]=input:duration.milliseconds=input):(match=aspNetRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(absRound(1e3*match[MILLISECOND]))*sign}):(match=isoRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),w:parseIso(match[4],sign),d:parseIso(match[5],sign),h:parseIso(match[6],sign),m:parseIso(match[7],sign),s:parseIso(match[8],sign)}):null==duration?duration={}:"object"==typeof duration&&("from"in duration||"to"in duration)&&(diffRes=momentsDifference(local__createLocal(duration.from),local__createLocal(duration.to)),duration={},duration.ms=diffRes.milliseconds,duration.M=diffRes.months),ret=new Duration(duration),isDuration(input)&&hasOwnProp(input,"_locale")&&(ret._locale=input._locale),ret}function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};return res.months=other.month()-base.month()+12*(other.year()-base.year()),base.clone().add(res.months,"M").isAfter(other)&&--res.months,res.milliseconds=+other-+base.clone().add(res.months,"M"),res}function momentsDifference(base,other){var res;return base.isValid()&&other.isValid()?(other=cloneWithOffset(other,base),base.isBefore(other)?res=positiveMomentsDifference(base,other):(res=positiveMomentsDifference(other,base),res.milliseconds=-res.milliseconds,res.months=-res.months),res):{milliseconds:0,months:0}}function createAdder(direction,name){return function(val,period){var dur,tmp;return null===period||isNaN(+period)||(deprecateSimple(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),tmp=val,val=period,period=tmp),val="string"==typeof val?+val:val,dur=create__createDuration(val,period),add_subtract__addSubtract(this,dur,direction),this}}function add_subtract__addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=absRound(duration._days),months=absRound(duration._months);mom.isValid()&&(updateOffset=null==updateOffset?!0:updateOffset,milliseconds&&mom._d.setTime(mom._d.valueOf()+milliseconds*isAdding),days&&get_set__set(mom,"Date",get_set__get(mom,"Date")+days*isAdding),months&&setMonth(mom,get_set__get(mom,"Month")+months*isAdding),updateOffset&&utils_hooks__hooks.updateOffset(mom,days||months))}function getCalendarFormat(myMoment,now){var diff=myMoment.diff(now,"days",!0);return-6>diff?"sameElse":-1>diff?"lastWeek":0>diff?"lastDay":1>diff?"sameDay":2>diff?"nextDay":7>diff?"nextWeek":"sameElse"}function moment_calendar__calendar(time,formats){var now=time||local__createLocal(),sod=cloneWithOffset(now,this).startOf("day"),format=utils_hooks__hooks.calendarFormat(this,sod)||"sameElse",output=formats&&(isFunction(formats[format])?formats[format].call(this,now):formats[format]);return this.format(output||this.localeData().calendar(format,this,local__createLocal(now)))}function clone(){return new Moment(this)}function isAfter(input,units){var localInput=isMoment(input)?input:local__createLocal(input);return this.isValid()&&localInput.isValid()?(units=normalizeUnits(isUndefined(units)?"millisecond":units),"millisecond"===units?this.valueOf()>localInput.valueOf():localInput.valueOf()<this.clone().startOf(units).valueOf()):!1}function isBefore(input,units){var localInput=isMoment(input)?input:local__createLocal(input);return this.isValid()&&localInput.isValid()?(units=normalizeUnits(isUndefined(units)?"millisecond":units),"millisecond"===units?this.valueOf()<localInput.valueOf():this.clone().endOf(units).valueOf()<localInput.valueOf()):!1}function isBetween(from,to,units,inclusivity){return inclusivity=inclusivity||"()",("("===inclusivity[0]?this.isAfter(from,units):!this.isBefore(from,units))&&(")"===inclusivity[1]?this.isBefore(to,units):!this.isAfter(to,units))}function isSame(input,units){var inputMs,localInput=isMoment(input)?input:local__createLocal(input);return this.isValid()&&localInput.isValid()?(units=normalizeUnits(units||"millisecond"),"millisecond"===units?this.valueOf()===localInput.valueOf():(inputMs=localInput.valueOf(),this.clone().startOf(units).valueOf()<=inputMs&&inputMs<=this.clone().endOf(units).valueOf())):!1}function isSameOrAfter(input,units){return this.isSame(input,units)||this.isAfter(input,units)}function isSameOrBefore(input,units){return this.isSame(input,units)||this.isBefore(input,units)}function diff(input,units,asFloat){var that,zoneDelta,delta,output;return this.isValid()?(that=cloneWithOffset(input,this),that.isValid()?(zoneDelta=6e4*(that.utcOffset()-this.utcOffset()),units=normalizeUnits(units),"year"===units||"month"===units||"quarter"===units?(output=monthDiff(this,that),"quarter"===units?output/=3:"year"===units&&(output/=12)):(delta=this-that,output="second"===units?delta/1e3:"minute"===units?delta/6e4:"hour"===units?delta/36e5:"day"===units?(delta-zoneDelta)/864e5:"week"===units?(delta-zoneDelta)/6048e5:delta),asFloat?output:absFloor(output)):NaN):NaN}function monthDiff(a,b){var anchor2,adjust,wholeMonthDiff=12*(b.year()-a.year())+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,"months");return 0>b-anchor?(anchor2=a.clone().add(wholeMonthDiff-1,"months"),adjust=(b-anchor)/(anchor-anchor2)):(anchor2=a.clone().add(wholeMonthDiff+1,"months"),adjust=(b-anchor)/(anchor2-anchor)),-(wholeMonthDiff+adjust)||0}function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function moment_format__toISOString(){var m=this.clone().utc();return 0<m.year()&&m.year()<=9999?isFunction(Date.prototype.toISOString)?this.toDate().toISOString():formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function format(inputString){inputString||(inputString=this.isUtc()?utils_hooks__hooks.defaultFormatUtc:utils_hooks__hooks.defaultFormat);var output=formatMoment(this,inputString);return this.localeData().postformat(output)}function from(time,withoutSuffix){return this.isValid()&&(isMoment(time)&&time.isValid()||local__createLocal(time).isValid())?create__createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix):this.localeData().invalidDate()}function fromNow(withoutSuffix){return this.from(local__createLocal(),withoutSuffix)}function to(time,withoutSuffix){return this.isValid()&&(isMoment(time)&&time.isValid()||local__createLocal(time).isValid())?create__createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix):this.localeData().invalidDate()}function toNow(withoutSuffix){return this.to(local__createLocal(),withoutSuffix)}function locale(key){var newLocaleData;return void 0===key?this._locale._abbr:(newLocaleData=locale_locales__getLocale(key),null!=newLocaleData&&(this._locale=newLocaleData),this)}function localeData(){return this._locale}function startOf(units){switch(units=normalizeUnits(units)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===units&&this.weekday(0),"isoWeek"===units&&this.isoWeekday(1),"quarter"===units&&this.month(3*Math.floor(this.month()/3)),this}function endOf(units){return units=normalizeUnits(units),void 0===units||"millisecond"===units?this:("date"===units&&(units="day"),this.startOf(units).add(1,"isoWeek"===units?"week":units).subtract(1,"ms"))}function to_type__valueOf(){return this._d.valueOf()-6e4*(this._offset||0)}function unix(){return Math.floor(this.valueOf()/1e3)}function toDate(){return new Date(this.valueOf())}function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()]}function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()}}function toJSON(){return this.isValid()?this.toISOString():null}function moment_valid__isValid(){return valid__isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter)}function getSetWeekYear(input){return getSetWeekYearHelper.call(this,input,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function getSetISOWeekYear(input){return getSetWeekYearHelper.call(this,input,this.isoWeek(),this.isoWeekday(),1,4)}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)}function getSetWeekYearHelper(input,week,weekday,dow,doy){var weeksTarget;return null==input?weekOfYear(this,dow,doy).year:(weeksTarget=weeksInYear(input,dow,doy),week>weeksTarget&&(week=weeksTarget),setWeekAll.call(this,input,week,weekday,dow,doy))}function setWeekAll(weekYear,week,weekday,dow,doy){var dayOfYearData=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),date=createUTCDate(dayOfYearData.year,0,dayOfYearData.dayOfYear);return this.year(date.getUTCFullYear()),this.month(date.getUTCMonth()),this.date(date.getUTCDate()),this}function getSetQuarter(input){return null==input?Math.ceil((this.month()+1)/3):this.month(3*(input-1)+this.month()%3)}function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==input?dayOfYear:this.add(input-dayOfYear,"d")}function parseMs(input,array){array[MILLISECOND]=toInt(1e3*("0."+input))}function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}function moment__createUnix(input){return local__createLocal(1e3*input)}function moment__createInZone(){return local__createLocal.apply(null,arguments).parseZone()}function preParsePostFormat(string){return string}function lists__get(format,index,field,setter){var locale=locale_locales__getLocale(),utc=create_utc__createUTC().set(setter,index);return locale[field](utc,format)}function listMonthsImpl(format,index,field){if("number"==typeof format&&(index=format,format=void 0),format=format||"",null!=index)return lists__get(format,index,field,"month");var i,out=[];for(i=0;12>i;i++)out[i]=lists__get(format,i,field,"month");return out}function listWeekdaysImpl(localeSorted,format,index,field){"boolean"==typeof localeSorted?("number"==typeof format&&(index=format,format=void 0),format=format||""):(format=localeSorted,index=format,localeSorted=!1,"number"==typeof format&&(index=format,format=void 0),format=format||"");var locale=locale_locales__getLocale(),shift=localeSorted?locale._week.dow:0;if(null!=index)return lists__get(format,(index+shift)%7,field,"day");var i,out=[];for(i=0;7>i;i++)out[i]=lists__get(format,(i+shift)%7,field,"day");return out}function lists__listMonths(format,index){return listMonthsImpl(format,index,"months")}function lists__listMonthsShort(format,index){return listMonthsImpl(format,index,"monthsShort")}function lists__listWeekdays(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdays")}function lists__listWeekdaysShort(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdaysShort")}function lists__listWeekdaysMin(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdaysMin")}function duration_abs__abs(){var data=this._data;return this._milliseconds=mathAbs(this._milliseconds),this._days=mathAbs(this._days),this._months=mathAbs(this._months),data.milliseconds=mathAbs(data.milliseconds),data.seconds=mathAbs(data.seconds),data.minutes=mathAbs(data.minutes),data.hours=mathAbs(data.hours),data.months=mathAbs(data.months),data.years=mathAbs(data.years),this}function duration_add_subtract__addSubtract(duration,input,value,direction){var other=create__createDuration(input,value);return duration._milliseconds+=direction*other._milliseconds,duration._days+=direction*other._days,duration._months+=direction*other._months,duration._bubble()}function duration_add_subtract__add(input,value){return duration_add_subtract__addSubtract(this,input,value,1)}function duration_add_subtract__subtract(input,value){return duration_add_subtract__addSubtract(this,input,value,-1)}function absCeil(number){return 0>number?Math.floor(number):Math.ceil(number)}function bubble(){var seconds,minutes,hours,years,monthsFromDays,milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data;return milliseconds>=0&&days>=0&&months>=0||0>=milliseconds&&0>=days&&0>=months||(milliseconds+=864e5*absCeil(monthsToDays(months)+days),days=0,months=0),data.milliseconds=milliseconds%1e3,seconds=absFloor(milliseconds/1e3),data.seconds=seconds%60,minutes=absFloor(seconds/60),data.minutes=minutes%60,hours=absFloor(minutes/60),data.hours=hours%24,days+=absFloor(hours/24),monthsFromDays=absFloor(daysToMonths(days)),months+=monthsFromDays,days-=absCeil(monthsToDays(monthsFromDays)),years=absFloor(months/12),months%=12,data.days=days,data.months=months,data.years=years,this}function daysToMonths(days){return 4800*days/146097}function monthsToDays(months){return 146097*months/4800}function as(units){var days,months,milliseconds=this._milliseconds;if(units=normalizeUnits(units),"month"===units||"year"===units)return days=this._days+milliseconds/864e5,months=this._months+daysToMonths(days),"month"===units?months:months/12;switch(days=this._days+Math.round(monthsToDays(this._months)),units){case"week":return days/7+milliseconds/6048e5;case"day":return days+milliseconds/864e5;case"hour":return 24*days+milliseconds/36e5;case"minute":return 1440*days+milliseconds/6e4;case"second":return 86400*days+milliseconds/1e3;case"millisecond":return Math.floor(864e5*days)+milliseconds;default:throw new Error("Unknown unit "+units)}}function duration_as__valueOf(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12)}function makeAs(alias){return function(){return this.as(alias)}}function duration_get__get(units){return units=normalizeUnits(units),this[units+"s"]()}function makeGetter(name){return function(){return this._data[name]}}function weeks(){return absFloor(this.days()/7)}function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function duration_humanize__relativeTime(posNegDuration,withoutSuffix,locale){var duration=create__createDuration(posNegDuration).abs(),seconds=round(duration.as("s")),minutes=round(duration.as("m")),hours=round(duration.as("h")),days=round(duration.as("d")),months=round(duration.as("M")),years=round(duration.as("y")),a=seconds<thresholds.s&&["s",seconds]||1>=minutes&&["m"]||minutes<thresholds.m&&["mm",minutes]||1>=hours&&["h"]||hours<thresholds.h&&["hh",hours]||1>=days&&["d"]||days<thresholds.d&&["dd",days]||1>=months&&["M"]||months<thresholds.M&&["MM",months]||1>=years&&["y"]||["yy",years];return a[2]=withoutSuffix,a[3]=+posNegDuration>0,a[4]=locale,substituteTimeAgo.apply(null,a)}function duration_humanize__getSetRelativeTimeRounding(roundingFunction){return void 0===roundingFunction?round:"function"==typeof roundingFunction?(round=roundingFunction,!0):!1}function duration_humanize__getSetRelativeTimeThreshold(threshold,limit){return void 0===thresholds[threshold]?!1:void 0===limit?thresholds[threshold]:(thresholds[threshold]=limit,!0)}function humanize(withSuffix){var locale=this.localeData(),output=duration_humanize__relativeTime(this,!withSuffix,locale);return withSuffix&&(output=locale.pastFuture(+this,output)),locale.postformat(output)}function iso_string__toISOString(){var minutes,hours,years,seconds=iso_string__abs(this._milliseconds)/1e3,days=iso_string__abs(this._days),months=iso_string__abs(this._months);minutes=absFloor(seconds/60),hours=absFloor(minutes/60),seconds%=60,minutes%=60,years=absFloor(months/12),months%=12;var Y=years,M=months,D=days,h=hours,m=minutes,s=seconds,total=this.asSeconds();return total?(0>total?"-":"")+"P"+(Y?Y+"Y":"")+(M?M+"M":"")+(D?D+"D":"")+(h||m||s?"T":"")+(h?h+"H":"")+(m?m+"M":"")+(s?s+"S":""):"P0D"}var hookCallback,some;some=Array.prototype.some?Array.prototype.some:function(fun){for(var t=Object(this),len=t.length>>>0,i=0;len>i;i++)if(i in t&&fun.call(this,t[i],i,t))return!0;return!1};var momentProperties=utils_hooks__hooks.momentProperties=[],updateInProgress=!1,deprecations={};utils_hooks__hooks.suppressDeprecationWarnings=!1,utils_hooks__hooks.deprecationHandler=null;var keys;keys=Object.keys?Object.keys:function(obj){var i,res=[];for(i in obj)hasOwnProp(obj,i)&&res.push(i);return res};var indexOf,defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},defaultInvalidDate="Invalid date",defaultOrdinal="%d",defaultOrdinalParse=/\d{1,2}/,defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},aliases={},priorities={},formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,formatFunctions={},formatTokenFunctions={},match1=/\d/,match2=/\d\d/,match3=/\d{3}/,match4=/\d{4}/,match6=/[+-]?\d{6}/,match1to2=/\d\d?/,match3to4=/\d\d\d\d?/,match5to6=/\d\d\d\d\d\d?/,match1to3=/\d{1,3}/,match1to4=/\d{1,4}/,match1to6=/[+-]?\d{1,6}/,matchUnsigned=/\d+/,matchSigned=/[+-]?\d+/,matchOffset=/Z|[+-]\d\d:?\d\d/gi,matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi,matchTimestamp=/[+-]?\d+(\.\d{1,3})?/,matchWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,regexes={},tokens={},YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,WEEK=7,WEEKDAY=8;indexOf=Array.prototype.indexOf?Array.prototype.indexOf:function(o){var i;for(i=0;i<this.length;++i)if(this[i]===o)return i;return-1},addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1}),addFormatToken("MMM",0,0,function(format){return this.localeData().monthsShort(this,format)}),addFormatToken("MMMM",0,0,function(format){return this.localeData().months(this,format)}),addUnitAlias("month","M"),addUnitPriority("month",8),addRegexToken("M",match1to2),addRegexToken("MM",match1to2,match2),addRegexToken("MMM",function(isStrict,locale){return locale.monthsShortRegex(isStrict)}),addRegexToken("MMMM",function(isStrict,locale){return locale.monthsRegex(isStrict)}),addParseToken(["M","MM"],function(input,array){array[MONTH]=toInt(input)-1}),addParseToken(["MMM","MMMM"],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);null!=month?array[MONTH]=month:getParsingFlags(config).invalidMonth=input});var MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),defaultMonthsShortRegex=matchWord,defaultMonthsRegex=matchWord;addFormatToken("Y",0,0,function(){var y=this.year();return 9999>=y?""+y:"+"+y}),addFormatToken(0,["YY",2],0,function(){return this.year()%100}),addFormatToken(0,["YYYY",4],0,"year"),addFormatToken(0,["YYYYY",5],0,"year"),addFormatToken(0,["YYYYYY",6,!0],0,"year"),addUnitAlias("year","y"),addUnitPriority("year",1),addRegexToken("Y",matchSigned),addRegexToken("YY",match1to2,match2),addRegexToken("YYYY",match1to4,match4),addRegexToken("YYYYY",match1to6,match6),addRegexToken("YYYYYY",match1to6,match6),addParseToken(["YYYYY","YYYYYY"],YEAR),addParseToken("YYYY",function(input,array){array[YEAR]=2===input.length?utils_hooks__hooks.parseTwoDigitYear(input):toInt(input)}),addParseToken("YY",function(input,array){array[YEAR]=utils_hooks__hooks.parseTwoDigitYear(input)}),addParseToken("Y",function(input,array){array[YEAR]=parseInt(input,10)}),utils_hooks__hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",!0);addFormatToken("w",["ww",2],"wo","week"),addFormatToken("W",["WW",2],"Wo","isoWeek"),addUnitAlias("week","w"),addUnitAlias("isoWeek","W"),addUnitPriority("week",5),addUnitPriority("isoWeek",5),addRegexToken("w",match1to2),addRegexToken("ww",match1to2,match2),addRegexToken("W",match1to2),addRegexToken("WW",match1to2,match2),addWeekParseToken(["w","ww","W","WW"],function(input,week,config,token){week[token.substr(0,1)]=toInt(input)});var defaultLocaleWeek={dow:0,doy:6};addFormatToken("d",0,"do","day"),addFormatToken("dd",0,0,function(format){return this.localeData().weekdaysMin(this,format)}),addFormatToken("ddd",0,0,function(format){return this.localeData().weekdaysShort(this,format)}),addFormatToken("dddd",0,0,function(format){return this.localeData().weekdays(this,format)}),addFormatToken("e",0,0,"weekday"),addFormatToken("E",0,0,"isoWeekday"),addUnitAlias("day","d"),addUnitAlias("weekday","e"),addUnitAlias("isoWeekday","E"),addUnitPriority("day",11),addUnitPriority("weekday",11),addUnitPriority("isoWeekday",11),addRegexToken("d",match1to2),addRegexToken("e",match1to2),addRegexToken("E",match1to2),addRegexToken("dd",function(isStrict,locale){return locale.weekdaysMinRegex(isStrict)}),addRegexToken("ddd",function(isStrict,locale){return locale.weekdaysShortRegex(isStrict)}),addRegexToken("dddd",function(isStrict,locale){return locale.weekdaysRegex(isStrict)}),addWeekParseToken(["dd","ddd","dddd"],function(input,week,config,token){var weekday=config._locale.weekdaysParse(input,token,config._strict);null!=weekday?week.d=weekday:getParsingFlags(config).invalidWeekday=input}),addWeekParseToken(["d","e","E"],function(input,week,config,token){week[token]=toInt(input)});var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),defaultWeekdaysRegex=matchWord,defaultWeekdaysShortRegex=matchWord,defaultWeekdaysMinRegex=matchWord;addFormatToken("H",["HH",2],0,"hour"),addFormatToken("h",["hh",2],0,hFormat),addFormatToken("k",["kk",2],0,kFormat),addFormatToken("hmm",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)}),addFormatToken("hmmss",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)}),addFormatToken("Hmm",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)}),addFormatToken("Hmmss",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)}),meridiem("a",!0),meridiem("A",!1),addUnitAlias("hour","h"),addUnitPriority("hour",13),addRegexToken("a",matchMeridiem),addRegexToken("A",matchMeridiem),addRegexToken("H",match1to2),addRegexToken("h",match1to2),addRegexToken("HH",match1to2,match2),addRegexToken("hh",match1to2,match2),addRegexToken("hmm",match3to4),addRegexToken("hmmss",match5to6),addRegexToken("Hmm",match3to4),addRegexToken("Hmmss",match5to6),addParseToken(["H","HH"],HOUR),addParseToken(["a","A"],function(input,array,config){config._isPm=config._locale.isPM(input),config._meridiem=input}),addParseToken(["h","hh"],function(input,array,config){array[HOUR]=toInt(input),getParsingFlags(config).bigHour=!0}),addParseToken("hmm",function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos)),array[MINUTE]=toInt(input.substr(pos)),getParsingFlags(config).bigHour=!0}),addParseToken("hmmss",function(input,array,config){var pos1=input.length-4,pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1)),array[MINUTE]=toInt(input.substr(pos1,2)),array[SECOND]=toInt(input.substr(pos2)),getParsingFlags(config).bigHour=!0}),addParseToken("Hmm",function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos)),array[MINUTE]=toInt(input.substr(pos))}),addParseToken("Hmmss",function(input,array,config){var pos1=input.length-4,pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1)),array[MINUTE]=toInt(input.substr(pos1,2)),array[SECOND]=toInt(input.substr(pos2))});var globalLocale,defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i,getSetHour=makeGetSet("Hours",!0),baseConfig={calendar:defaultCalendar,longDateFormat:defaultLongDateFormat,invalidDate:defaultInvalidDate,ordinal:defaultOrdinal,ordinalParse:defaultOrdinalParse,relativeTime:defaultRelativeTime,months:defaultLocaleMonths,monthsShort:defaultLocaleMonthsShort,week:defaultLocaleWeek,weekdays:defaultLocaleWeekdays,weekdaysMin:defaultLocaleWeekdaysMin,weekdaysShort:defaultLocaleWeekdaysShort,meridiemParse:defaultLocaleMeridiemParse},locales={},extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,tzRegex=/Z|[+-]\d\d(?::?\d\d)?/,isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],isoTimes=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;utils_hooks__hooks.createFromInputFallback=deprecate("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""))}),utils_hooks__hooks.ISO_8601=function(){};var prototypeMin=deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var other=local__createLocal.apply(null,arguments);return this.isValid()&&other.isValid()?this>other?this:other:valid__createInvalid()}),prototypeMax=deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var other=local__createLocal.apply(null,arguments);return this.isValid()&&other.isValid()?other>this?this:other:valid__createInvalid()}),now=function(){return Date.now?Date.now():+new Date};offset("Z",":"),offset("ZZ",""),addRegexToken("Z",matchShortOffset),addRegexToken("ZZ",matchShortOffset),addParseToken(["Z","ZZ"],function(input,array,config){config._useUTC=!0,config._tzm=offsetFromString(matchShortOffset,input);
});var chunkOffset=/([\+\-]|\d\d)/gi;utils_hooks__hooks.updateOffset=function(){};var aspNetRegex=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,isoRegex=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;create__createDuration.fn=Duration.prototype;var add_subtract__add=createAdder(1,"add"),add_subtract__subtract=createAdder(-1,"subtract");utils_hooks__hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",utils_hooks__hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){return void 0===key?this.localeData():this.locale(key)});addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100}),addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100}),addWeekYearFormatToken("gggg","weekYear"),addWeekYearFormatToken("ggggg","weekYear"),addWeekYearFormatToken("GGGG","isoWeekYear"),addWeekYearFormatToken("GGGGG","isoWeekYear"),addUnitAlias("weekYear","gg"),addUnitAlias("isoWeekYear","GG"),addUnitPriority("weekYear",1),addUnitPriority("isoWeekYear",1),addRegexToken("G",matchSigned),addRegexToken("g",matchSigned),addRegexToken("GG",match1to2,match2),addRegexToken("gg",match1to2,match2),addRegexToken("GGGG",match1to4,match4),addRegexToken("gggg",match1to4,match4),addRegexToken("GGGGG",match1to6,match6),addRegexToken("ggggg",match1to6,match6),addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(input,week,config,token){week[token.substr(0,2)]=toInt(input)}),addWeekParseToken(["gg","GG"],function(input,week,config,token){week[token]=utils_hooks__hooks.parseTwoDigitYear(input)}),addFormatToken("Q",0,"Qo","quarter"),addUnitAlias("quarter","Q"),addUnitPriority("quarter",7),addRegexToken("Q",match1),addParseToken("Q",function(input,array){array[MONTH]=3*(toInt(input)-1)}),addFormatToken("D",["DD",2],"Do","date"),addUnitAlias("date","D"),addUnitPriority("date",9),addRegexToken("D",match1to2),addRegexToken("DD",match1to2,match2),addRegexToken("Do",function(isStrict,locale){return isStrict?locale._ordinalParse:locale._ordinalParseLenient}),addParseToken(["D","DD"],DATE),addParseToken("Do",function(input,array){array[DATE]=toInt(input.match(match1to2)[0],10)});var getSetDayOfMonth=makeGetSet("Date",!0);addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear"),addUnitAlias("dayOfYear","DDD"),addUnitPriority("dayOfYear",4),addRegexToken("DDD",match1to3),addRegexToken("DDDD",match3),addParseToken(["DDD","DDDD"],function(input,array,config){config._dayOfYear=toInt(input)}),addFormatToken("m",["mm",2],0,"minute"),addUnitAlias("minute","m"),addUnitPriority("minute",14),addRegexToken("m",match1to2),addRegexToken("mm",match1to2,match2),addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",!1);addFormatToken("s",["ss",2],0,"second"),addUnitAlias("second","s"),addUnitPriority("second",15),addRegexToken("s",match1to2),addRegexToken("ss",match1to2,match2),addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",!1);addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)}),addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),addFormatToken(0,["SSS",3],0,"millisecond"),addFormatToken(0,["SSSS",4],0,function(){return 10*this.millisecond()}),addFormatToken(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),addFormatToken(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),addFormatToken(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),addFormatToken(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),addFormatToken(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),addUnitAlias("millisecond","ms"),addUnitPriority("millisecond",16),addRegexToken("S",match1to3,match1),addRegexToken("SS",match1to3,match2),addRegexToken("SSS",match1to3,match3);var token;for(token="SSSS";token.length<=9;token+="S")addRegexToken(token,matchUnsigned);for(token="S";token.length<=9;token+="S")addParseToken(token,parseMs);var getSetMillisecond=makeGetSet("Milliseconds",!1);addFormatToken("z",0,0,"zoneAbbr"),addFormatToken("zz",0,0,"zoneName");var momentPrototype__proto=Moment.prototype;momentPrototype__proto.add=add_subtract__add,momentPrototype__proto.calendar=moment_calendar__calendar,momentPrototype__proto.clone=clone,momentPrototype__proto.diff=diff,momentPrototype__proto.endOf=endOf,momentPrototype__proto.format=format,momentPrototype__proto.from=from,momentPrototype__proto.fromNow=fromNow,momentPrototype__proto.to=to,momentPrototype__proto.toNow=toNow,momentPrototype__proto.get=stringGet,momentPrototype__proto.invalidAt=invalidAt,momentPrototype__proto.isAfter=isAfter,momentPrototype__proto.isBefore=isBefore,momentPrototype__proto.isBetween=isBetween,momentPrototype__proto.isSame=isSame,momentPrototype__proto.isSameOrAfter=isSameOrAfter,momentPrototype__proto.isSameOrBefore=isSameOrBefore,momentPrototype__proto.isValid=moment_valid__isValid,momentPrototype__proto.lang=lang,momentPrototype__proto.locale=locale,momentPrototype__proto.localeData=localeData,momentPrototype__proto.max=prototypeMax,momentPrototype__proto.min=prototypeMin,momentPrototype__proto.parsingFlags=parsingFlags,momentPrototype__proto.set=stringSet,momentPrototype__proto.startOf=startOf,momentPrototype__proto.subtract=add_subtract__subtract,momentPrototype__proto.toArray=toArray,momentPrototype__proto.toObject=toObject,momentPrototype__proto.toDate=toDate,momentPrototype__proto.toISOString=moment_format__toISOString,momentPrototype__proto.toJSON=toJSON,momentPrototype__proto.toString=toString,momentPrototype__proto.unix=unix,momentPrototype__proto.valueOf=to_type__valueOf,momentPrototype__proto.creationData=creationData,momentPrototype__proto.year=getSetYear,momentPrototype__proto.isLeapYear=getIsLeapYear,momentPrototype__proto.weekYear=getSetWeekYear,momentPrototype__proto.isoWeekYear=getSetISOWeekYear,momentPrototype__proto.quarter=momentPrototype__proto.quarters=getSetQuarter,momentPrototype__proto.month=getSetMonth,momentPrototype__proto.daysInMonth=getDaysInMonth,momentPrototype__proto.week=momentPrototype__proto.weeks=getSetWeek,momentPrototype__proto.isoWeek=momentPrototype__proto.isoWeeks=getSetISOWeek,momentPrototype__proto.weeksInYear=getWeeksInYear,momentPrototype__proto.isoWeeksInYear=getISOWeeksInYear,momentPrototype__proto.date=getSetDayOfMonth,momentPrototype__proto.day=momentPrototype__proto.days=getSetDayOfWeek,momentPrototype__proto.weekday=getSetLocaleDayOfWeek,momentPrototype__proto.isoWeekday=getSetISODayOfWeek,momentPrototype__proto.dayOfYear=getSetDayOfYear,momentPrototype__proto.hour=momentPrototype__proto.hours=getSetHour,momentPrototype__proto.minute=momentPrototype__proto.minutes=getSetMinute,momentPrototype__proto.second=momentPrototype__proto.seconds=getSetSecond,momentPrototype__proto.millisecond=momentPrototype__proto.milliseconds=getSetMillisecond,momentPrototype__proto.utcOffset=getSetOffset,momentPrototype__proto.utc=setOffsetToUTC,momentPrototype__proto.local=setOffsetToLocal,momentPrototype__proto.parseZone=setOffsetToParsedOffset,momentPrototype__proto.hasAlignedHourOffset=hasAlignedHourOffset,momentPrototype__proto.isDST=isDaylightSavingTime,momentPrototype__proto.isLocal=isLocal,momentPrototype__proto.isUtcOffset=isUtcOffset,momentPrototype__proto.isUtc=isUtc,momentPrototype__proto.isUTC=isUtc,momentPrototype__proto.zoneAbbr=getZoneAbbr,momentPrototype__proto.zoneName=getZoneName,momentPrototype__proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth),momentPrototype__proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth),momentPrototype__proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear),momentPrototype__proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",getSetZone),momentPrototype__proto.isDSTShifted=deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",isDaylightSavingTimeShifted);var momentPrototype=momentPrototype__proto,prototype__proto=Locale.prototype;prototype__proto.calendar=locale_calendar__calendar,prototype__proto.longDateFormat=longDateFormat,prototype__proto.invalidDate=invalidDate,prototype__proto.ordinal=ordinal,prototype__proto.preparse=preParsePostFormat,prototype__proto.postformat=preParsePostFormat,prototype__proto.relativeTime=relative__relativeTime,prototype__proto.pastFuture=pastFuture,prototype__proto.set=locale_set__set,prototype__proto.months=localeMonths,prototype__proto.monthsShort=localeMonthsShort,prototype__proto.monthsParse=localeMonthsParse,prototype__proto.monthsRegex=monthsRegex,prototype__proto.monthsShortRegex=monthsShortRegex,prototype__proto.week=localeWeek,prototype__proto.firstDayOfYear=localeFirstDayOfYear,prototype__proto.firstDayOfWeek=localeFirstDayOfWeek,prototype__proto.weekdays=localeWeekdays,prototype__proto.weekdaysMin=localeWeekdaysMin,prototype__proto.weekdaysShort=localeWeekdaysShort,prototype__proto.weekdaysParse=localeWeekdaysParse,prototype__proto.weekdaysRegex=weekdaysRegex,prototype__proto.weekdaysShortRegex=weekdaysShortRegex,prototype__proto.weekdaysMinRegex=weekdaysMinRegex,prototype__proto.isPM=localeIsPM,prototype__proto.meridiem=localeMeridiem,locale_locales__getSetGlobalLocale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=1===toInt(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return number+output}}),utils_hooks__hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",locale_locales__getSetGlobalLocale),utils_hooks__hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",locale_locales__getLocale);var mathAbs=Math.abs,asMilliseconds=makeAs("ms"),asSeconds=makeAs("s"),asMinutes=makeAs("m"),asHours=makeAs("h"),asDays=makeAs("d"),asWeeks=makeAs("w"),asMonths=makeAs("M"),asYears=makeAs("y"),milliseconds=makeGetter("milliseconds"),seconds=makeGetter("seconds"),minutes=makeGetter("minutes"),hours=makeGetter("hours"),days=makeGetter("days"),months=makeGetter("months"),years=makeGetter("years"),round=Math.round,thresholds={s:45,m:45,h:22,d:26,M:11},iso_string__abs=Math.abs,duration_prototype__proto=Duration.prototype;duration_prototype__proto.abs=duration_abs__abs,duration_prototype__proto.add=duration_add_subtract__add,duration_prototype__proto.subtract=duration_add_subtract__subtract,duration_prototype__proto.as=as,duration_prototype__proto.asMilliseconds=asMilliseconds,duration_prototype__proto.asSeconds=asSeconds,duration_prototype__proto.asMinutes=asMinutes,duration_prototype__proto.asHours=asHours,duration_prototype__proto.asDays=asDays,duration_prototype__proto.asWeeks=asWeeks,duration_prototype__proto.asMonths=asMonths,duration_prototype__proto.asYears=asYears,duration_prototype__proto.valueOf=duration_as__valueOf,duration_prototype__proto._bubble=bubble,duration_prototype__proto.get=duration_get__get,duration_prototype__proto.milliseconds=milliseconds,duration_prototype__proto.seconds=seconds,duration_prototype__proto.minutes=minutes,duration_prototype__proto.hours=hours,duration_prototype__proto.days=days,duration_prototype__proto.weeks=weeks,duration_prototype__proto.months=months,duration_prototype__proto.years=years,duration_prototype__proto.humanize=humanize,duration_prototype__proto.toISOString=iso_string__toISOString,duration_prototype__proto.toString=iso_string__toISOString,duration_prototype__proto.toJSON=iso_string__toISOString,duration_prototype__proto.locale=locale,duration_prototype__proto.localeData=localeData,duration_prototype__proto.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",iso_string__toISOString),duration_prototype__proto.lang=lang,addFormatToken("X",0,0,"unix"),addFormatToken("x",0,0,"valueOf"),addRegexToken("x",matchSigned),addRegexToken("X",matchTimestamp),addParseToken("X",function(input,array,config){config._d=new Date(1e3*parseFloat(input,10))}),addParseToken("x",function(input,array,config){config._d=new Date(toInt(input))}),utils_hooks__hooks.version="2.15.1",setHookCallback(local__createLocal),utils_hooks__hooks.fn=momentPrototype,utils_hooks__hooks.min=min,utils_hooks__hooks.max=max,utils_hooks__hooks.now=now,utils_hooks__hooks.utc=create_utc__createUTC,utils_hooks__hooks.unix=moment__createUnix,utils_hooks__hooks.months=lists__listMonths,utils_hooks__hooks.isDate=isDate,utils_hooks__hooks.locale=locale_locales__getSetGlobalLocale,utils_hooks__hooks.invalid=valid__createInvalid,utils_hooks__hooks.duration=create__createDuration,utils_hooks__hooks.isMoment=isMoment,utils_hooks__hooks.weekdays=lists__listWeekdays,utils_hooks__hooks.parseZone=moment__createInZone,utils_hooks__hooks.localeData=locale_locales__getLocale,utils_hooks__hooks.isDuration=isDuration,utils_hooks__hooks.monthsShort=lists__listMonthsShort,utils_hooks__hooks.weekdaysMin=lists__listWeekdaysMin,utils_hooks__hooks.defineLocale=defineLocale,utils_hooks__hooks.updateLocale=updateLocale,utils_hooks__hooks.locales=locale_locales__listLocales,utils_hooks__hooks.weekdaysShort=lists__listWeekdaysShort,utils_hooks__hooks.normalizeUnits=normalizeUnits,utils_hooks__hooks.relativeTimeRounding=duration_humanize__getSetRelativeTimeRounding,utils_hooks__hooks.relativeTimeThreshold=duration_humanize__getSetRelativeTimeThreshold,utils_hooks__hooks.calendarFormat=getCalendarFormat,utils_hooks__hooks.prototype=momentPrototype;var _moment=utils_hooks__hooks;return _moment}),function(){window.API={},window.API.modelToParams={},window.API.responseToModel={},window.API.initEndpoint=function(configuration){var _delete,apiCall,attributes,basePath,create,get,modelClass,modelToParams,nested_relationships,onError,relationships,responseToModel,saveOrUpdate,type,update;return type=configuration.type||function(){throw"No type configuration provided"}(),basePath=configuration.basePath||"/"+type+"s",modelClass=configuration["class"]||function(){throw"No class provided"}(),relationships=configuration.relationships||{},nested_relationships=configuration.nested_relationships||{},attributes=configuration.attributes||[],responseToModel=function(response){var attribute,i,len,model;for(model=new modelClass,model.id=response.data.id,i=0,len=attributes.length;len>i;i++)attribute=attributes[i],response.data&&response.data.attributes&&void 0!==response.data.attributes[attribute]&&(model[attribute]=response.data.attributes[attribute]);return response.meta&&(model.meta=response.meta),model},window.API.responseToModel[type]=responseToModel,modelToParams=function(model){var attribute,i,j,k,l,len,len1,len2,len3,nested_attribute,nested_data,nested_obj,nested_obj_data,nested_obj_or_objs,nested_obj_ref,nested_relation,nested_relation_name,params,ref,ref1,relation,relation_name;for(params={data:{type:type,attributes:{},relationships:{}}},model.id&&(params.data.id=""+model.id),i=0,len=attributes.length;len>i;i++)attribute=attributes[i],void 0!==model[attribute]&&(params.data.attributes[attribute]=model[attribute]);for(relation_name in relationships)relation=relationships[relation_name],null!==model[relation_name+"_id"]&&void 0!==model[relation_name+"_id"]&&(params.data.relationships[relation_name]={data:{id:""+model[relation_name+"_id"],type:relation.type}});for(nested_relation_name in nested_relationships)if(nested_relation=nested_relationships[nested_relation_name],nested_obj_or_objs=model[nested_relation_name],null!==nested_obj_or_objs)if(nested_obj_or_objs instanceof Array){for(nested_data=[],j=0,len1=nested_obj_or_objs.length;len1>j;j++){for(nested_obj=nested_obj_or_objs[j],nested_obj_data={},ref=nested_relation.attributes,k=0,len2=ref.length;len2>k;k++)nested_attribute=ref[k],nested_obj_data[attribute]=nested_obj[attribute];nested_obj_ref={attributes:nested_obj_data,type:nested_relation.type},nested_data.push(nested_obj_ref)}params.data.relationships[nested_relation_name]={data:nested_data}}else{for(nested_obj_data={},ref1=nested_relation.attributes,l=0,len3=ref1.length;len3>l;l++)nested_attribute=ref1[l],nested_obj_data[attribute]=nested_obj_or_objs[attribute];params.data.relationships[nested_relation_name]={data:{attributes:nested_obj_data,type:nested_relation.type}}}return model.save=function(options){return null==options&&(options={}),model.id?update(model,options):create(model)},params},window.API.modelToParams[type]=modelToParams,window.API.parseErrors=function(errorData){var errors;return errorData?(errors=errorData.map(function(error){var attribute,attributeErrors,messages,ref;if(error.meta&&error.meta.attributes){attributeErrors=[],ref=error.meta.attributes;for(attribute in ref)messages=ref[attribute],"base"===attribute?attributeErrors.push(messages.join(", ")):attributeErrors.push(attribute+": "+messages.join(", "));return error.detail+" ("+error.title+"/"+error.status+"):\n"+attributeErrors.join("\n")}return error.detail+" ("+error.title+"/"+error.status+")"}),"Sorry, "+(1===errors.length?"an":"some")+" error"+(1===errors.length?"":"s")+" occured:\n"+errors.join("\n")+"."):"Sorry, an unknown error occured"},onError=function(data,textStatus,errorThrown,jqXHR){var message;return message=data&&data.errors?window.API.parseErrors(data.errors):"Sorry, an error occured.",alert(message)},window.API.defaultOnError=onError,apiCall=window.API.apiCall=function(path,settings,done,fail,always){var ajaxOpts;return ajaxOpts="POST"===settings.method||"PATCH"===settings.method?{headers:{"Content-Type":"application/vnd.api+json",Accept:"application/vnd.api+json"},method:settings.method,data:settings.hasOwnProperty("data")?JSON.stringify(settings.data):"",dataType:"json"}:null===settings.method||"GET"===settings.method?{headers:{Accept:"application/vnd.api+json"},method:"GET",data:settings.hasOwnProperty("data")?settings.data:"",timeout:3e4}:{headers:{Accept:"application/vnd.api+json"},method:settings.method,data:settings.hasOwnProperty("data")?settings.data:""},$.ajax("/api/v1"+path,ajaxOpts).done(done).fail(function(jqXHR,textStatus,errorThrown){return fail.call(window,jqXHR&&jqXHR.responseJSON,textStatus,errorThrown,jqXHR)}).always(always)},update=function(model,options){return null==options&&(options={}),saveOrUpdate(model,basePath+"/"+model.id,"PATCH",options)},_delete=function(model,options){return null==options&&(options={}),options.success||(options.success=function(){}),options.failure||(options.failure=onError),options.always||(options.always=function(){}),apiCall(basePath+"/"+model.id,{method:"DELETE"},function(data,textStatus,jqXHR){return options.success.call(window,model)},function(jqXHR,textStatus,errorThrown){return(options.failure||onError).call(window,jqXHR&&jqXHR.responseJSON,textStatus,errorThrown,jqXHR)},function(data,textStatus,jqXHR){return options.always.call(window)})},create=function(model,options){return null==options&&(options={}),saveOrUpdate(model,basePath,"POST",options)},get=function(id,options){return null==options&&(options={}),options.success||(options.success=function(){}),options.always||(options.always=function(){}),apiCall(basePath+"/"+id,{},function(data,textStatus,jqXHR){return options.success.call(window,responseToModel(data))},function(jqXHR,textStatus,errorThrown){return(options.failure||onError).call(window,jqXHR&&jqXHR.responseJSON,textStatus,errorThrown,jqXHR)},function(data,textStatus,jqXHR){return options.always.call(window)})},saveOrUpdate=function(model,path,method,options){var params;return options.success||(options.success=function(){}),options.failure||(options.failure=onError),options.always||(options.always=function(){}),params=modelToParams(model),apiCall(path,{data:params,method:method},function(data,textStatus,jqXHR){return options.success.call(window,data?responseToModel(data):model)},function(jqXHR,textStatus,errorThrown){return(options.failure||onError).call(window,jqXHR&&jqXHR.responseJSON,textStatus,errorThrown,jqXHR)},function(data,textStatus,jqXHR){return options.always.call(window)})},{get:get,create:create,"delete":_delete,update:update}}}.call(this),function(){var BillingContact;window.API.billingContacts=window.API.initEndpoint({type:"billing_contact","class":BillingContact=function(){function BillingContact(){}return BillingContact}(),attributes:["name","email","address_line1","address_line2","other_line1","other_line2"],relationships:{card:{type:"card"},user:{type:"user"}}})}.call(this),/**
* @version: 2.0.9
* @author: Dan Grossman http://www.dangrossman.info/
* @copyright: Copyright (c) 2012-2015 Dan Grossman. All rights reserved.
* @license: Licensed under the MIT license. See http://www.opensource.org/licenses/mit-license.php
* @website: https://www.improvely.com/
*/
function(root,factory){if("function"==typeof define&&define.amd)define(["moment","jquery","exports"],function(momentjs,$,exports){root.daterangepicker=factory(root,exports,momentjs,$)});else if("undefined"!=typeof exports){var momentjs=require("moment"),jQuery=window.jQuery;if(void 0===jQuery)try{jQuery=require("jquery")}catch(err){if(!jQuery)throw new Error("jQuery dependency not found")}factory(root,exports,momentjs,jQuery)}else root.daterangepicker=factory(root,{},root.moment||moment,root.jQuery||root.Zepto||root.ender||root.$)}(this,function(root,daterangepicker,moment,$){var DateRangePicker=function(element,options,cb){if(this.parentEl="body",this.element=$(element),this.startDate=moment().startOf("day"),this.endDate=moment().endOf("day"),this.timeZone=moment().utcOffset(),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.autoApply=!1,this.singleDatePicker=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.timePicker=!1,this.timePicker24Hour=!1,this.timePickerIncrement=1,this.timePickerSeconds=!1,this.linkedCalendars=!0,this.autoUpdateInput=!0,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses="btn btn-sm",this.applyClass="btn-primary",this.cancelClass="btn-default",this.locale={format:"MM/DD/YYYY",separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:moment.weekdaysMin(),monthNames:moment.monthsShort(),firstDay:moment.localeData().firstDayOfWeek()},this.callback=function(){},this.isShowing=!1,this.leftCalendar={},this.rightCalendar={},("object"!=typeof options||null===options)&&(options={}),options=$.extend(this.element.data(),options),"string"!=typeof options.template&&(options.template='<div class="daterangepicker dropdown-menu"><div class="calendar left"><div class="daterangepicker_input"><input class="input-mini" type="text" name="daterangepicker_start" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="calendar right"><div class="daterangepicker_input"><input class="input-mini" type="text" name="daterangepicker_end" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="ranges"><div class="range_inputs"><button class="applyBtn" disabled="disabled" type="button"></button> <button class="cancelBtn" type="button"></button></div></div></div>'),this.parentEl=$(options.parentEl&&$(options.parentEl).length?options.parentEl:this.parentEl),this.container=$(options.template).appendTo(this.parentEl),"object"==typeof options.locale&&("string"==typeof options.locale.format&&(this.locale.format=options.locale.format),"string"==typeof options.locale.separator&&(this.locale.separator=options.locale.separator),"object"==typeof options.locale.daysOfWeek&&(this.locale.daysOfWeek=options.locale.daysOfWeek.slice()),"object"==typeof options.locale.monthNames&&(this.locale.monthNames=options.locale.monthNames.slice()),"number"==typeof options.locale.firstDay&&(this.locale.firstDay=options.locale.firstDay),"string"==typeof options.locale.applyLabel&&(this.locale.applyLabel=options.locale.applyLabel),"string"==typeof options.locale.cancelLabel&&(this.locale.cancelLabel=options.locale.cancelLabel),"string"==typeof options.locale.weekLabel&&(this.locale.weekLabel=options.locale.weekLabel),"string"==typeof options.locale.customRangeLabel&&(this.locale.customRangeLabel=options.locale.customRangeLabel)),"string"==typeof options.startDate&&(this.startDate=moment(options.startDate,this.locale.format)),"string"==typeof options.endDate&&(this.endDate=moment(options.endDate,this.locale.format)),"string"==typeof options.minDate&&(this.minDate=moment(options.minDate,this.locale.format)),"string"==typeof options.maxDate&&(this.maxDate=moment(options.maxDate,this.locale.format)),"object"==typeof options.startDate&&(this.startDate=moment(options.startDate)),"object"==typeof options.endDate&&(this.endDate=moment(options.endDate)),"object"==typeof options.minDate&&(this.minDate=moment(options.minDate)),"object"==typeof options.maxDate&&(this.maxDate=moment(options.maxDate)),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),"string"==typeof options.applyClass&&(this.applyClass=options.applyClass),"string"==typeof options.cancelClass&&(this.cancelClass=options.cancelClass),"object"==typeof options.dateLimit&&(this.dateLimit=options.dateLimit),"string"==typeof options.opens&&(this.opens=options.opens),"string"==typeof options.drops&&(this.drops=options.drops),"boolean"==typeof options.showWeekNumbers&&(this.showWeekNumbers=options.showWeekNumbers),"string"==typeof options.buttonClasses&&(this.buttonClasses=options.buttonClasses),"object"==typeof options.buttonClasses&&(this.buttonClasses=options.buttonClasses.join(" ")),"boolean"==typeof options.showDropdowns&&(this.showDropdowns=options.showDropdowns),"boolean"==typeof options.singleDatePicker&&(this.singleDatePicker=options.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),"boolean"==typeof options.timePicker&&(this.timePicker=options.timePicker),"boolean"==typeof options.timePickerSeconds&&(this.timePickerSeconds=options.timePickerSeconds),"number"==typeof options.timePickerIncrement&&(this.timePickerIncrement=options.timePickerIncrement),"boolean"==typeof options.timePicker24Hour&&(this.timePicker24Hour=options.timePicker24Hour),"boolean"==typeof options.autoApply&&(this.autoApply=options.autoApply),"boolean"==typeof options.autoUpdateInput&&(this.autoUpdateInput=options.autoUpdateInput),"boolean"==typeof options.linkedCalendars&&(this.linkedCalendars=options.linkedCalendars),"function"==typeof options.isInvalidDate&&(this.isInvalidDate=options.isInvalidDate),0!=this.locale.firstDay)for(var iterator=this.locale.firstDay;iterator>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),iterator--;var start,end,range;if("undefined"==typeof options.startDate&&"undefined"==typeof options.endDate&&$(this.element).is("input[type=text]")){var val=$(this.element).val(),split=val.split(this.locale.separator);start=end=null,2==split.length?(start=moment(split[0],this.locale.format),end=moment(split[1],this.locale.format)):this.singleDatePicker&&""!==val&&(start=moment(val,this.locale.format),end=moment(val,this.locale.format)),null!==start&&null!==end&&(this.setStartDate(start),this.setEndDate(end))}if("string"==typeof options.timeZone||"number"==typeof options.timeZone?("string"==typeof options.timeZone&&"undefined"!=typeof moment.tz?this.timeZone=-1*moment.tz.zone(options.timeZone).parse(new Date):this.timeZone=options.timeZone,this.startDate.utcOffset(this.timeZone),this.endDate.utcOffset(this.timeZone)):this.timeZone=moment(this.startDate).utcOffset(),"object"==typeof options.ranges){for(range in options.ranges){start="string"==typeof options.ranges[range][0]?moment(options.ranges[range][0],this.locale.format):moment(options.ranges[range][0]),end="string"==typeof options.ranges[range][1]?moment(options.ranges[range][1],this.locale.format):moment(options.ranges[range][1]),this.minDate&&start.isBefore(this.minDate)&&(start=this.minDate.clone());var maxDate=this.maxDate;this.dateLimit&&start.clone().add(this.dateLimit).isAfter(maxDate)&&(maxDate=start.clone().add(this.dateLimit)),maxDate&&end.isAfter(maxDate)&&(end=maxDate.clone()),this.minDate&&end.isBefore(this.minDate)||maxDate&&start.isAfter(maxDate)||(this.ranges[range]=[start,end])}var list="<ul>";for(range in this.ranges)list+="<li>"+range+"</li>";list+="<li>"+this.locale.customRangeLabel+"</li>",list+="</ul>",this.container.find(".ranges ul").remove(),this.container.find(".ranges").prepend(list)}"function"==typeof cb&&(this.callback=cb),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide()),this.timePicker&&this.autoApply&&(this.autoApply=!1),this.autoApply&&"object"!=typeof options.ranges?this.container.find(".ranges").hide():this.autoApply&&this.container.find(".applyBtn, .cancelBtn").addClass("hide"),this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".calendar.left").addClass("single"),this.container.find(".calendar.left").show(),this.container.find(".calendar.right").hide(),this.container.find(".daterangepicker_input input, .daterangepicker_input i").hide(),this.timePicker||this.container.find(".ranges").hide()),"undefined"!=typeof options.ranges||this.singleDatePicker||this.container.addClass("show-calendar"),this.container.removeClass("opensleft opensright").addClass("opens"+this.opens),this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses),this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass),this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".calendar").on("click.daterangepicker",".prev",$.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",$.proxy(this.clickNext,this)).on("click.daterangepicker","td.available",$.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",$.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",$.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",$.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",$.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",$.proxy(this.timeChanged,this)).on("click.daterangepicker",".daterangepicker_input input",$.proxy(this.showCalendars,this)).on("change.daterangepicker",".daterangepicker_input input",$.proxy(this.formInputsChanged,this)),this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",$.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",$.proxy(this.clickCancel,this)).on("click.daterangepicker","li",$.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",$.proxy(this.hoverRange,this)).on("mouseleave.daterangepicker","li",$.proxy(this.updateFormInputs,this)),this.element.is("input")?this.element.on({"click.daterangepicker":$.proxy(this.show,this),"focus.daterangepicker":$.proxy(this.show,this),"keyup.daterangepicker":$.proxy(this.controlChanged,this),"keydown.daterangepicker":$.proxy(this.keydown,this)}):this.element.on("click.daterangepicker",$.proxy(this.toggle,this)),this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))};DateRangePicker.prototype={constructor:DateRangePicker,setStartDate:function(startDate){"string"==typeof startDate&&(this.startDate=moment(startDate,this.locale.format).utcOffset(this.timeZone)),"object"==typeof startDate&&(this.startDate=moment(startDate)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate),this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate),this.updateMonthsInView()},setEndDate:function(endDate){"string"==typeof endDate&&(this.endDate=moment(endDate,this.locale.format).utcOffset(this.timeZone)),"object"==typeof endDate&&(this.endDate=moment(endDate)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.endDate.isBefore(this.startDate)&&(this.endDate=this.startDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate),this.dateLimit&&this.startDate.clone().add(this.dateLimit).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.dateLimit)),this.updateMonthsInView()},isInvalidDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").removeAttr("disabled").removeClass("disabled"):this.container.find(".right .calendar-time select").attr("disabled","disabled").addClass("disabled")),this.endDate?(this.container.find('input[name="daterangepicker_end"]').removeClass("active"),this.container.find('input[name="daterangepicker_start"]').addClass("active")):(this.container.find('input[name="daterangepicker_end"]').addClass("active"),this.container.find('input[name="daterangepicker_start"]').removeClass("active")),this.updateMonthsInView(),this.updateCalendars(),this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;this.leftCalendar.month=this.startDate.clone().date(2),this.linkedCalendars||this.endDate.month()==this.startDate.month()&&this.endDate.year()==this.startDate.year()?this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"):this.rightCalendar.month=this.endDate.clone().date(2)}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"))},updateCalendars:function(){if(this.timePicker){var hour,minute,second;if(this.endDate){if(hour=parseInt(this.container.find(".left .hourselect").val(),10),minute=parseInt(this.container.find(".left .minuteselect").val(),10),second=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,!this.timePicker24Hour){var ampm=this.container.find(".left .ampmselect").val();"PM"===ampm&&12>hour&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}}else if(hour=parseInt(this.container.find(".right .hourselect").val(),10),minute=parseInt(this.container.find(".right .minuteselect").val(),10),second=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,!this.timePicker24Hour){var ampm=this.container.find(".left .ampmselect").val();"PM"===ampm&&12>hour&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}this.leftCalendar.month.hour(hour).minute(minute).second(second),this.rightCalendar.month.hour(hour).minute(minute).second(second)}if(this.renderCalendar("left"),this.renderCalendar("right"),this.container.find(".ranges li").removeClass("active"),null!=this.endDate){var customRange=!0,i=0;for(var range in this.ranges){if(this.timePicker){if(this.startDate.isSame(this.ranges[range][0])&&this.endDate.isSame(this.ranges[range][1])){customRange=!1,this.chosenLabel=this.container.find(".ranges li:eq("+i+")").addClass("active").html();break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[range][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[range][1].format("YYYY-MM-DD")){customRange=!1,this.chosenLabel=this.container.find(".ranges li:eq("+i+")").addClass("active").html();break}i++}customRange&&(this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html(),this.showCalendars())}},renderCalendar:function(side){var calendar="left"==side?this.leftCalendar:this.rightCalendar,month=calendar.month.month(),year=calendar.month.year(),hour=calendar.month.hour(),minute=calendar.month.minute(),second=calendar.month.second(),daysInMonth=moment([year,month]).daysInMonth(),firstDay=moment([year,month,1]),lastDay=moment([year,month,daysInMonth]),lastMonth=moment(firstDay).subtract(1,"month").month(),lastYear=moment(firstDay).subtract(1,"month").year(),daysInLastMonth=moment([lastYear,lastMonth]).daysInMonth(),dayOfWeek=firstDay.day(),calendar=[];calendar.firstDay=firstDay,calendar.lastDay=lastDay;for(var i=0;6>i;i++)calendar[i]=[];var startDay=daysInLastMonth-dayOfWeek+this.locale.firstDay+1;startDay>daysInLastMonth&&(startDay-=7),dayOfWeek==this.locale.firstDay&&(startDay=daysInLastMonth-6);for(var col,row,curDate=moment([lastYear,lastMonth,startDay,12,minute,second]).utcOffset(this.timeZone),i=0,col=0,row=0;42>i;i++,col++,curDate=moment(curDate).add(24,"hour"))i>0&&col%7===0&&(col=0,row++),calendar[row][col]=curDate.clone().hour(hour).minute(minute).second(second),curDate.hour(12),this.minDate&&calendar[row][col].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&calendar[row][col].isBefore(this.minDate)&&"left"==side&&(calendar[row][col]=this.minDate.clone()),this.maxDate&&calendar[row][col].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&calendar[row][col].isAfter(this.maxDate)&&"right"==side&&(calendar[row][col]=this.maxDate.clone());"left"==side?this.leftCalendar.calendar=calendar:this.rightCalendar.calendar=calendar;var minDate="left"==side?this.minDate:this.startDate,maxDate=this.maxDate,html=("left"==side?this.startDate:this.endDate,'<table class="table-condensed">');html+="<thead>",html+="<tr>",this.showWeekNumbers&&(html+="<th></th>"),html+=minDate&&!minDate.isBefore(calendar.firstDay)||this.linkedCalendars&&"left"!=side?"<th></th>":'<th class="prev available"><i class="fa fa-chevron-left glyphicon glyphicon-chevron-left"></i></th>';var dateHtml=this.locale.monthNames[calendar[1][1].month()]+calendar[1][1].format(" YYYY");if(this.showDropdowns){for(var currentMonth=calendar[1][1].month(),currentYear=calendar[1][1].year(),maxYear=maxDate&&maxDate.year()||currentYear+5,minYear=minDate&&minDate.year()||currentYear-50,inMinYear=currentYear==minYear,inMaxYear=currentYear==maxYear,monthHtml='<select class="monthselect">',m=0;12>m;m++)monthHtml+=(!inMinYear||m>=minDate.month())&&(!inMaxYear||m<=maxDate.month())?"<option value='"+m+"'"+(m===currentMonth?" selected='selected'":"")+">"+this.locale.monthNames[m]+"</option>":"<option value='"+m+"'"+(m===currentMonth?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[m]+"</option>";monthHtml+="</select>";for(var yearHtml='<select class="yearselect">',y=minYear;maxYear>=y;y++)yearHtml+='<option value="'+y+'"'+(y===currentYear?' selected="selected"':"")+">"+y+"</option>";yearHtml+="</select>",dateHtml=monthHtml+yearHtml}if(html+='<th colspan="5" class="month">'+dateHtml+"</th>",html+=maxDate&&!maxDate.isAfter(calendar.lastDay)||this.linkedCalendars&&"right"!=side&&!this.singleDatePicker?"<th></th>":'<th class="next available"><i class="fa fa-chevron-right glyphicon glyphicon-chevron-right"></i></th>',html+="</tr>",html+="<tr>",this.showWeekNumbers&&(html+='<th class="week">'+this.locale.weekLabel+"</th>"),$.each(this.locale.daysOfWeek,function(index,dayOfWeek){html+="<th>"+dayOfWeek+"</th>"}),html+="</tr>",html+="</thead>",html+="<tbody>",null==this.endDate&&this.dateLimit){var maxLimit=this.startDate.clone().add(this.dateLimit).endOf("day");(!maxDate||maxLimit.isBefore(maxDate))&&(maxDate=maxLimit)}for(var row=0;6>row;row++){html+="<tr>",this.showWeekNumbers&&(html+='<td class="week">'+calendar[row][0].week()+"</td>");for(var col=0;7>col;col++){var classes=[];calendar[row][col].isSame(new Date,"day")&&classes.push("today"),calendar[row][col].isoWeekday()>5&&classes.push("weekend"),calendar[row][col].month()!=calendar[1][1].month()&&classes.push("off"),this.minDate&&calendar[row][col].isBefore(this.minDate,"day")&&classes.push("off","disabled"),maxDate&&calendar[row][col].isAfter(maxDate,"day")&&classes.push("off","disabled"),this.isInvalidDate(calendar[row][col])&&classes.push("off","disabled"),calendar[row][col].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&classes.push("active","start-date"),null!=this.endDate&&calendar[row][col].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&classes.push("active","end-date"),null!=this.endDate&&calendar[row][col]>this.startDate&&calendar[row][col]<this.endDate&&classes.push("in-range");for(var cname="",disabled=!1,i=0;i<classes.length;i++)cname+=classes[i]+" ","disabled"==classes[i]&&(disabled=!0);disabled||(cname+="available"),html+='<td class="'+cname.replace(/^\s+|\s+$/g,"")+'" data-title="r'+row+"c"+col+'">'+calendar[row][col].date()+"</td>"}html+="</tr>"}html+="</tbody>",html+="</table>",this.container.find(".calendar."+side+" .calendar-table").html(html)},renderTimePicker:function(side){var selected,minDate,maxDate=this.maxDate;!this.dateLimit||this.maxDate&&!this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate)||(maxDate=this.startDate.clone().add(this.dateLimit)),"left"==side?(selected=this.startDate.clone(),minDate=this.minDate):"right"==side&&(selected=this.endDate?this.endDate.clone():this.startDate.clone(),minDate=this.startDate),html='<select class="hourselect">';for(var start=this.timePicker24Hour?0:1,end=this.timePicker24Hour?23:12,i=start;end>=i;i++){var i_in_24=i;this.timePicker24Hour||(i_in_24=selected.hour()>=12?12==i?12:i+12:12==i?0:i);var time=selected.clone().hour(i_in_24),disabled=!1;minDate&&time.minute(59).isBefore(minDate)&&(disabled=!0),maxDate&&time.minute(0).isAfter(maxDate)&&(disabled=!0),i_in_24!=selected.hour()||disabled?disabled?html+='<option value="'+i+'" disabled="disabled" class="disabled">'+i+"</option>":html+='<option value="'+i+'">'+i+"</option>":html+='<option value="'+i+'" selected="selected">'+i+"</option>"}html+="</select> ",html+=': <select class="minuteselect">';for(var i=0;60>i;i+=this.timePickerIncrement){var padded=10>i?"0"+i:i,time=selected.clone().minute(i),disabled=!1;minDate&&time.second(59).isBefore(minDate)&&(disabled=!0),maxDate&&time.second(0).isAfter(maxDate)&&(disabled=!0),selected.minute()!=i||disabled?disabled?html+='<option value="'+i+'" disabled="disabled" class="disabled">'+padded+"</option>":html+='<option value="'+i+'">'+padded+"</option>":html+='<option value="'+i+'" selected="selected">'+padded+"</option>"}if(html+="</select> ",this.timePickerSeconds){html+=': <select class="secondselect">';for(var i=0;60>i;i++){var padded=10>i?"0"+i:i,time=selected.clone().second(i),disabled=!1;minDate&&time.isBefore(minDate)&&(disabled=!0),maxDate&&time.isAfter(maxDate)&&(disabled=!0),selected.second()!=i||disabled?disabled?html+='<option value="'+i+'" disabled="disabled" class="disabled">'+padded+"</option>":html+='<option value="'+i+'">'+padded+"</option>":html+='<option value="'+i+'" selected="selected">'+padded+"</option>"}html+="</select> "}if(!this.timePicker24Hour){html+='<select class="ampmselect">';var am_html="",pm_html="";minDate&&selected.clone().hour(12).minute(0).second(0).isBefore(minDate)&&(am_html=' disabled="disabled" class="disabled"'),maxDate&&selected.clone().hour(0).minute(0).second(0).isAfter(maxDate)&&(pm_html=' disabled="disabled" class="disabled"'),selected.hour()>=12?html+='<option value="AM"'+am_html+'>AM</option><option value="PM" selected="selected"'+pm_html+">PM</option>":html+='<option value="AM" selected="selected"'+am_html+'>AM</option><option value="PM"'+pm_html+">PM</option>",html+="</select>"}this.container.find(".calendar."+side+" .calendar-time div").html(html)},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.locale.format)),this.endDate&&this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.locale.format)),this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled")},move:function(){var containerTop,parentOffset={top:0,left:0},parentRightEdge=$(window).width();this.parentEl.is("body")||(parentOffset={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},parentRightEdge=this.parentEl[0].clientWidth+this.parentEl.offset().left),containerTop="up"==this.drops?this.element.offset().top-this.container.outerHeight()-parentOffset.top:this.element.offset().top+this.element.outerHeight()-parentOffset.top,this.container["up"==this.drops?"addClass":"removeClass"]("dropup"),"left"==this.opens?(this.container.css({top:containerTop,right:parentRightEdge-this.element.offset().left-this.element.outerWidth(),left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):"center"==this.opens?(this.container.css({top:containerTop,left:this.element.offset().left-parentOffset.left+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:containerTop,left:this.element.offset().left-parentOffset.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>$(window).width()&&this.container.css({left:"auto",right:0}))},show:function(e){this.isShowing||(this._outsideClickProxy=$.proxy(function(e){this.outsideClick(e)},this),$(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.updateView(),this.container.show(),this.move(),this.element.trigger("show.daterangepicker",this),this.isShowing=!0)},hide:function(e){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate,this.endDate,this.chosenLabel),this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change")),$(document).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",this),this.isShowing=!1)},toggle:function(e){this.isShowing?this.hide():this.show()},outsideClick:function(e){var target=$(e.target);"focusin"==e.type||target.closest(this.element).length||target.closest(this.container).length||target.closest(".calendar-table").length||this.hide()},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},hoverRange:function(e){var label=e.target.innerHTML;if(label==this.locale.customRangeLabel)this.updateView();else{var dates=this.ranges[label];this.container.find("input[name=daterangepicker_start]").val(dates[0].format(this.locale.format)),this.container.find("input[name=daterangepicker_end]").val(dates[1].format(this.locale.format))}},clickRange:function(e){var label=e.target.innerHTML;if(this.chosenLabel=label,label==this.locale.customRangeLabel)this.showCalendars();else{var dates=this.ranges[label];this.startDate=dates[0],this.endDate=dates[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.hideCalendars(),this.clickApply()}},clickPrev:function(e){var cal=$(e.target).parents(".calendar");cal.hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,"month")):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(e){var cal=$(e.target).parents(".calendar");cal.hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month")),this.updateCalendars()},hoverDate:function(e){if($(e.target).hasClass("available")){var title=$(e.target).attr("data-title"),row=title.substr(1,1),col=title.substr(3,1),cal=$(e.target).parents(".calendar"),date=cal.hasClass("left")?this.leftCalendar.calendar[row][col]:this.rightCalendar.calendar[row][col];this.endDate?this.container.find("input[name=daterangepicker_start]").val(date.format(this.locale.format)):this.container.find("input[name=daterangepicker_end]").val(date.format(this.locale.format));var leftCalendar=this.leftCalendar,rightCalendar=this.rightCalendar,startDate=this.startDate;this.endDate||this.container.find(".calendar td").each(function(index,el){if(!$(el).hasClass("week")){var title=$(el).attr("data-title"),row=title.substr(1,1),col=title.substr(3,1),cal=$(el).parents(".calendar"),dt=cal.hasClass("left")?leftCalendar.calendar[row][col]:rightCalendar.calendar[row][col];dt.isAfter(startDate)&&dt.isBefore(date)?$(el).addClass("in-range"):$(el).removeClass("in-range")}})}},clickDate:function(e){if($(e.target).hasClass("available")){var title=$(e.target).attr("data-title"),row=title.substr(1,1),col=title.substr(3,1),cal=$(e.target).parents(".calendar"),date=cal.hasClass("left")?this.leftCalendar.calendar[row][col]:this.rightCalendar.calendar[row][col];if(this.endDate||date.isBefore(this.startDate)){if(this.timePicker){var hour=parseInt(this.container.find(".left .hourselect").val(),10);if(!this.timePicker24Hour){var ampm=cal.find(".ampmselect").val();"PM"===ampm&&12>hour&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}var minute=parseInt(this.container.find(".left .minuteselect").val(),10),second=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0;date=date.clone().hour(hour).minute(minute).second(second)}this.endDate=null,this.setStartDate(date.clone())}else{if(this.timePicker){var hour=parseInt(this.container.find(".right .hourselect").val(),10);if(!this.timePicker24Hour){var ampm=this.container.find(".right .ampmselect").val();"PM"===ampm&&12>hour&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}var minute=parseInt(this.container.find(".right .minuteselect").val(),10),second=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0;date=date.clone().hour(hour).minute(minute).second(second)}this.setEndDate(date.clone()),this.autoApply&&this.clickApply()}this.singleDatePicker&&(this.setEndDate(this.startDate),this.timePicker||this.clickApply()),this.updateView()}},clickApply:function(e){this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(e){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.hide(),this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(e){var isLeft=$(e.target).closest(".calendar").hasClass("left"),leftOrRight=isLeft?"left":"right",cal=this.container.find(".calendar."+leftOrRight),month=parseInt(cal.find(".monthselect").val(),10),year=cal.find(".yearselect").val();isLeft||(year<this.startDate.year()||year==this.startDate.year()&&month<this.startDate.month())&&(month=this.startDate.month(),year=this.startDate.year()),this.minDate&&(year<this.minDate.year()||year==this.minDate.year()&&month<this.minDate.month())&&(month=this.minDate.month(),year=this.minDate.year()),this.maxDate&&(year>this.maxDate.year()||year==this.maxDate.year()&&month>this.maxDate.month())&&(month=this.maxDate.month(),year=this.maxDate.year()),isLeft?(this.leftCalendar.month.month(month).year(year),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(month).year(year),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month"))),this.updateCalendars()},timeChanged:function(e){var cal=$(e.target).closest(".calendar"),isLeft=cal.hasClass("left"),hour=parseInt(cal.find(".hourselect").val(),10),minute=parseInt(cal.find(".minuteselect").val(),10),second=this.timePickerSeconds?parseInt(cal.find(".secondselect").val(),10):0;
if(!this.timePicker24Hour){var ampm=cal.find(".ampmselect").val();"PM"===ampm&&12>hour&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}if(isLeft){var start=this.startDate.clone();start.hour(hour),start.minute(minute),start.second(second),this.setStartDate(start),this.singleDatePicker&&(this.endDate=this.startDate.clone())}else if(this.endDate){var end=this.endDate.clone();end.hour(hour),end.minute(minute),end.second(second),this.setEndDate(end)}this.updateCalendars(),this.updateFormInputs(),this.renderTimePicker("left"),this.renderTimePicker("right")},formInputsChanged:function(e){var isRight=$(e.target).closest(".calendar").hasClass("right"),start=moment(this.container.find('input[name="daterangepicker_start"]').val(),this.locale.format).utcOffset(this.timeZone),end=moment(this.container.find('input[name="daterangepicker_end"]').val(),this.locale.format).utcOffset(this.timeZone);start.isValid()&&end.isValid()&&(isRight&&end.isBefore(start)&&(start=end.clone()),this.setStartDate(start),this.setEndDate(end),isRight?this.container.find('input[name="daterangepicker_start"]').val(this.startDate.format(this.locale.format)):this.container.find('input[name="daterangepicker_end"]').val(this.endDate.format(this.locale.format))),this.updateCalendars(),this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"))},controlChanged:function(){if(this.element.is("input")&&this.element.val().length){var dateString=this.element.val().split(this.locale.separator),start=null,end=null;2===dateString.length&&(start=moment(dateString[0],this.locale.format).utcOffset(this.timeZone),end=moment(dateString[1],this.locale.format).utcOffset(this.timeZone)),(this.singleDatePicker||null===start||null===end)&&(start=moment(this.element.val(),this.locale.format).utcOffset(this.timeZone),end=start),this.setStartDate(start),this.setEndDate(end),this.updateView()}},keydown:function(e){(9===e.keyCode||13===e.keyCode)&&this.hide()},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData()}},$.fn.daterangepicker=function(options,callback){return this.each(function(){var el=$(this);el.data("daterangepicker")&&el.data("daterangepicker").remove(),el.data("daterangepicker",new DateRangePicker(el,options,callback))}),this}}),/**
 * version 0.0.11
 * @license
 * =========================================================
 * bootstrap-datetimepicker.js
 * http://www.eyecon.ro/bootstrap-datepicker
 * =========================================================
 * Copyright 2012 Stefan Petre
 *
 * Contributions:
 *  - Andrew Rowls
 *  - Thiago de Arruda
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =========================================================
 */
function($){function escapeRegExp(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function padLeft(s,l,c){return l<s.length?s:Array(l-s.length+1).join(c||" ")+s}function getTemplate(timeIcon,pickDate,pickTime,is12Hours,showSeconds,collapse){return pickDate&&pickTime?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><ul><li'+(collapse?' class="collapse in"':"")+'><div class="datepicker">'+DPGlobal.template+'</div></li><li class="picker-switch accordion-toggle"><a><i class="'+timeIcon+'"></i></a></li><li'+(collapse?' class="collapse"':"")+'><div class="timepicker">'+TPGlobal.getTemplate(is12Hours,showSeconds)+"</div></li></ul></div>":pickTime?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+TPGlobal.getTemplate(is12Hours,showSeconds)+"</div></div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+DPGlobal.template+"</div></div>"}function UTCDate(){return new Date(Date.UTC.apply(Date,arguments))}var DateTimePicker=(void 0!=window.orientation,function(element,options){this.id=dpgId++,this.init(element,options)});DateTimePicker.prototype={constructor:DateTimePicker,init:function(element,options){var icon;if(!options.pickTime&&!options.pickDate)throw new Error("Must choose at least one picker");if(this.options=options,this.$element=$(element),this.language=options.language in dates?options.language:"en",this.pickDate=options.pickDate,this.pickTime=options.pickTime,this.isInput=this.$element.is("input"),this.component=!1,(this.$element.find(".input-append")||this.$element.find(".input-prepend"))&&(this.component=this.$element.find(".add-on")),this.format=options.format,this.format||(this.isInput?this.format=this.$element.data("format"):this.format=this.$element.find("input").data("format"),this.format||(this.format="MM/dd/yyyy")),this._compileFormat(),this.component&&(icon=this.component.find("i")),this.pickTime&&(icon&&icon.length&&(this.timeIcon=icon.data("time-icon")),this.timeIcon||(this.timeIcon="icon-time"),icon.addClass(this.timeIcon)),this.pickDate&&(icon&&icon.length&&(this.dateIcon=icon.data("date-icon")),this.dateIcon||(this.dateIcon="icon-calendar"),icon.removeClass(this.timeIcon),icon.addClass(this.dateIcon)),this.widget=$(getTemplate(this.timeIcon,options.pickDate,options.pickTime,options.pick12HourFormat,options.pickSeconds,options.collapse)).appendTo("body"),this.minViewMode=options.minViewMode||this.$element.data("date-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=options.viewMode||this.$element.data("date-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=options.weekStart||this.$element.data("date-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.setStartDate(options.startDate||this.$element.data("date-startdate")),this.setEndDate(options.endDate||this.$element.data("date-enddate")),this.fillDow(),this.fillMonths(),this.fillHours(),this.fillMinutes(),this.fillSeconds(),this.update(),this.showMode(),this._attachDatePickerEvents()},show:function(e){this.widget.show(),this.height=this.component?this.component.outerHeight():this.$element.outerHeight(),this.place(),this.$element.trigger({type:"show",date:this._date}),this._attachDatePickerGlobalEvents(),e&&(e.stopPropagation(),e.preventDefault())},disable:function(){this.$element.find("input").prop("disabled",!0),this._detachDatePickerEvents()},enable:function(){this.$element.find("input").prop("disabled",!1),this._attachDatePickerEvents()},hide:function(){for(var collapse=this.widget.find(".collapse"),i=0;i<collapse.length;i++){var collapseData=collapse.eq(i).data("collapse");if(collapseData&&collapseData.transitioning)return}this.widget.hide(),this.viewMode=this.startViewMode,this.showMode(),this.set(),this.$element.trigger({type:"hide",date:this._date}),this._detachDatePickerGlobalEvents()},set:function(){var formatted="";if(this._unset||(formatted=this.formatDate(this._date)),this.isInput)this.$element.val(formatted),this._resetMaskPos(this.$element);else{if(this.component){var input=this.$element.find("input");input.val(formatted),this._resetMaskPos(input)}this.$element.data("date",formatted)}},setValue:function(newDate){newDate?this._unset=!1:this._unset=!0,"string"==typeof newDate?this._date=this.parseDate(newDate):newDate&&(this._date=new Date(newDate)),this.set(),this.viewDate=UTCDate(this._date.getUTCFullYear(),this._date.getUTCMonth(),1,0,0,0,0),this.fillDate(),this.fillTime()},getDate:function(){return this._unset?null:new Date(this._date.valueOf())},setDate:function(date){date?this.setValue(date.valueOf()):this.setValue(null)},setStartDate:function(date){date instanceof Date?this.startDate=date:"string"==typeof date?(this.startDate=new UTCDate(date),this.startDate.getUTCFullYear()||(this.startDate=-(1/0))):this.startDate=-(1/0),this.viewDate&&this.update()},setEndDate:function(date){date instanceof Date?this.endDate=date:"string"==typeof date?(this.endDate=new UTCDate(date),this.endDate.getUTCFullYear()||(this.endDate=1/0)):this.endDate=1/0,this.viewDate&&this.update()},getLocalDate:function(){if(this._unset)return null;var d=this._date;return new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds())},setLocalDate:function(localDate){localDate?this.setValue(Date.UTC(localDate.getFullYear(),localDate.getMonth(),localDate.getDate(),localDate.getHours(),localDate.getMinutes(),localDate.getSeconds(),localDate.getMilliseconds())):this.setValue(null)},place:function(){var position="absolute",offset=this.component?this.component.offset():this.$element.offset();this.width=this.component?this.component.outerWidth():this.$element.outerWidth(),offset.top=offset.top+this.height;var $window=$(window);void 0!=this.options.width&&this.widget.width(this.options.width),"left"==this.options.orientation&&(this.widget.addClass("left-oriented"),offset.left=offset.left-this.widget.width()+20),this._isInFixed()&&(position="fixed",offset.top-=$window.scrollTop(),offset.left-=$window.scrollLeft()),$window.width()<offset.left+this.widget.outerWidth()?(offset.right=$window.width()-offset.left-this.width,offset.left="auto",this.widget.addClass("pull-right")):(offset.right="auto",this.widget.removeClass("pull-right")),this.widget.css({position:position,top:offset.top,left:offset.left,right:offset.right})},notifyChange:function(){this.$element.trigger({type:"changeDate",date:this.getDate(),localDate:this.getLocalDate()})},update:function(newDate){var dateStr=newDate;if(!dateStr&&(dateStr=this.isInput?this.$element.val():this.$element.find("input").val(),dateStr&&(this._date=this.parseDate(dateStr)),!this._date)){var tmp=new Date;this._date=UTCDate(tmp.getFullYear(),tmp.getMonth(),tmp.getDate(),tmp.getHours(),tmp.getMinutes(),tmp.getSeconds(),tmp.getMilliseconds())}this.viewDate=UTCDate(this._date.getUTCFullYear(),this._date.getUTCMonth(),1,0,0,0,0),this.fillDate(),this.fillTime()},fillDow:function(){for(var dowCnt=this.weekStart,html=$("<tr>");dowCnt<this.weekStart+7;)html.append('<th class="dow">'+dates[this.language].daysMin[dowCnt++%7]+"</th>");this.widget.find(".datepicker-days thead").append(html)},fillMonths:function(){for(var html="",i=0;12>i;)html+='<span class="month">'+dates[this.language].monthsShort[i++]+"</span>";this.widget.find(".datepicker-months td").append(html)},fillDate:function(){var year=this.viewDate.getUTCFullYear(),month=this.viewDate.getUTCMonth(),currentDate=UTCDate(this._date.getUTCFullYear(),this._date.getUTCMonth(),this._date.getUTCDate(),0,0,0,0),startYear="object"==typeof this.startDate?this.startDate.getUTCFullYear():-(1/0),startMonth="object"==typeof this.startDate?this.startDate.getUTCMonth():-1,endYear="object"==typeof this.endDate?this.endDate.getUTCFullYear():1/0,endMonth="object"==typeof this.endDate?this.endDate.getUTCMonth():12;this.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-days th:eq(1)").text(dates[this.language].months[month]+" "+year);var prevMonth=UTCDate(year,month-1,28,0,0,0,0),day=DPGlobal.getDaysInMonth(prevMonth.getUTCFullYear(),prevMonth.getUTCMonth());prevMonth.setUTCDate(day),prevMonth.setUTCDate(day-(prevMonth.getUTCDay()-this.weekStart+7)%7),(year==startYear&&startMonth>=month||startYear>year)&&this.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(year==endYear&&month>=endMonth||year>endYear)&&this.widget.find(".datepicker-days th:eq(2)").addClass("disabled");var nextMonth=new Date(prevMonth.valueOf());nextMonth.setUTCDate(nextMonth.getUTCDate()+42),nextMonth=nextMonth.valueOf();for(var row,clsName,html=[];prevMonth.valueOf()<nextMonth;)prevMonth.getUTCDay()===this.weekStart&&(row=$("<tr>"),html.push(row)),clsName="",prevMonth.getUTCFullYear()<year||prevMonth.getUTCFullYear()==year&&prevMonth.getUTCMonth()<month?clsName+=" old":(prevMonth.getUTCFullYear()>year||prevMonth.getUTCFullYear()==year&&prevMonth.getUTCMonth()>month)&&(clsName+=" new"),prevMonth.valueOf()===currentDate.valueOf()&&(clsName+=" active"),prevMonth.valueOf()+864e5<=this.startDate&&(clsName+=" disabled"),prevMonth.valueOf()>this.endDate&&(clsName+=" disabled"),row.append('<td class="day'+clsName+'">'+prevMonth.getUTCDate()+"</td>"),prevMonth.setUTCDate(prevMonth.getUTCDate()+1);this.widget.find(".datepicker-days tbody").empty().append(html);var currentYear=this._date.getUTCFullYear(),months=this.widget.find(".datepicker-months").find("th:eq(1)").text(year).end().find("span").removeClass("active");currentYear===year&&months.eq(this._date.getUTCMonth()).addClass("active"),startYear>currentYear-1&&this.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),currentYear+1>endYear&&this.widget.find(".datepicker-months th:eq(2)").addClass("disabled");for(var i=0;12>i;i++)year==startYear&&startMonth>i||startYear>year?$(months[i]).addClass("disabled"):(year==endYear&&i>endMonth||year>endYear)&&$(months[i]).addClass("disabled");html="",year=10*parseInt(year/10,10);var yearCont=this.widget.find(".datepicker-years").find("th:eq(1)").text(year+"-"+(year+9)).end().find("td");this.widget.find(".datepicker-years").find("th").removeClass("disabled"),startYear>year&&this.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),year+9>endYear&&this.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),year-=1;for(var i=-1;11>i;i++)html+='<span class="year'+(-1===i||10===i?" old":"")+(currentYear===year?" active":"")+(startYear>year||year>endYear?" disabled":"")+'">'+year+"</span>",year+=1;yearCont.html(html)},fillHours:function(){var table=this.widget.find(".timepicker .timepicker-hours table");table.parent().hide();var html="";if(this.options.pick12HourFormat)for(var current=1,i=0;3>i;i+=1){html+="<tr>";for(var j=0;4>j;j+=1){var c=current.toString();html+='<td class="hour">'+padLeft(c,2,"0")+"</td>",current++}html+="</tr>"}else for(var current=0,i=0;6>i;i+=1){html+="<tr>";for(var j=0;4>j;j+=1){var c=current.toString();html+='<td class="hour">'+padLeft(c,2,"0")+"</td>",current++}html+="</tr>"}table.html(html)},fillMinutes:function(){var table=this.widget.find(".timepicker .timepicker-minutes table");table.parent().hide();for(var html="",current=0,i=0;5>i;i++){html+="<tr>";for(var j=0;4>j;j+=1){var c=current.toString();html+='<td class="minute">'+padLeft(c,2,"0")+"</td>",current+=3}html+="</tr>"}table.html(html)},fillSeconds:function(){var table=this.widget.find(".timepicker .timepicker-seconds table");table.parent().hide();for(var html="",current=0,i=0;5>i;i++){html+="<tr>";for(var j=0;4>j;j+=1){var c=current.toString();html+='<td class="second">'+padLeft(c,2,"0")+"</td>",current+=3}html+="</tr>"}table.html(html)},fillTime:function(){if(this._date){var timeComponents=this.widget.find(".timepicker span[data-time-component]"),is12HourFormat=(timeComponents.closest("table"),this.options.pick12HourFormat),hour=this._date.getUTCHours(),period="AM";is12HourFormat&&(hour>=12&&(period="PM"),0===hour?hour=12:12!=hour&&(hour%=12),this.widget.find(".timepicker [data-action=togglePeriod]").text(period)),hour=padLeft(hour.toString(),2,"0");var minute=padLeft(this._date.getUTCMinutes().toString(),2,"0"),second=padLeft(this._date.getUTCSeconds().toString(),2,"0");timeComponents.filter("[data-time-component=hours]").text(hour),timeComponents.filter("[data-time-component=minutes]").text(minute),timeComponents.filter("[data-time-component=seconds]").text(second)}},click:function(e){e.stopPropagation(),e.preventDefault(),this._unset=!1;var target=$(e.target).closest("span, td, th");if(1===target.length&&!target.is(".disabled"))switch(target[0].nodeName.toLowerCase()){case"th":switch(target[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var vd=this.viewDate,navFnc=DPGlobal.modes[this.viewMode].navFnc,step=DPGlobal.modes[this.viewMode].navStep;"prev"===target[0].className&&(step=-1*step),vd["set"+navFnc](vd["get"+navFnc]()+step),this.fillDate(),this.set()}break;case"span":if(target.is(".month")){var month=target.parent().find("span").index(target);this.viewDate.setUTCMonth(month)}else{var year=parseInt(target.text(),10)||0;this.viewDate.setUTCFullYear(year)}0!==this.viewMode&&(this._date=UTCDate(this.viewDate.getUTCFullYear(),this.viewDate.getUTCMonth(),this.viewDate.getUTCDate(),this._date.getUTCHours(),this._date.getUTCMinutes(),this._date.getUTCSeconds(),this._date.getUTCMilliseconds()),this.notifyChange()),this.showMode(-1),this.fillDate(),this.set();break;case"td":if(target.is(".day")){var day=parseInt(target.text(),10)||1,month=this.viewDate.getUTCMonth(),year=this.viewDate.getUTCFullYear();target.is(".old")?0===month?(month=11,year-=1):month-=1:target.is(".new")&&(11==month?(month=0,year+=1):month+=1),this._date=UTCDate(year,month,day,this._date.getUTCHours(),this._date.getUTCMinutes(),this._date.getUTCSeconds(),this._date.getUTCMilliseconds()),this.viewDate=UTCDate(year,month,Math.min(28,day),0,0,0,0),this.fillDate(),this.set(),this.notifyChange()}}},actions:{incrementHours:function(e){this._date.setUTCHours(this._date.getUTCHours()+1)},incrementMinutes:function(e){this._date.setUTCMinutes(this._date.getUTCMinutes()+1)},incrementSeconds:function(e){this._date.setUTCSeconds(this._date.getUTCSeconds()+1)},decrementHours:function(e){this._date.setUTCHours(this._date.getUTCHours()-1)},decrementMinutes:function(e){this._date.setUTCMinutes(this._date.getUTCMinutes()-1)},decrementSeconds:function(e){this._date.setUTCSeconds(this._date.getUTCSeconds()-1)},togglePeriod:function(e){var hour=this._date.getUTCHours();hour>=12?hour-=12:hour+=12,this._date.setUTCHours(hour)},showPicker:function(){this.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),this.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){this.widget.find(".timepicker .timepicker-picker").hide(),this.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){this.widget.find(".timepicker .timepicker-picker").hide(),this.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){this.widget.find(".timepicker .timepicker-picker").hide(),this.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(e){var tgt=$(e.target),value=parseInt(tgt.text(),10);if(this.options.pick12HourFormat){var current=this._date.getUTCHours();current>=12?12!=value&&(value=(value+12)%24):12===value?value=0:value%=12}this._date.setUTCHours(value),this.actions.showPicker.call(this)},selectMinute:function(e){var tgt=$(e.target),value=parseInt(tgt.text(),10);this._date.setUTCMinutes(value),this.actions.showPicker.call(this)},selectSecond:function(e){var tgt=$(e.target),value=parseInt(tgt.text(),10);this._date.setUTCSeconds(value),this.actions.showPicker.call(this)}},doAction:function(e){e.stopPropagation(),e.preventDefault(),this._date||(this._date=UTCDate(1970,0,0,0,0,0,0));var action=$(e.currentTarget).data("action"),rv=this.actions[action].apply(this,arguments);return this.set(),this.fillTime(),this.notifyChange(),rv},stopEvent:function(e){e.stopPropagation(),e.preventDefault()},keydown:function(e){var self=this,k=e.which,input=$(e.target);(8==k||46==k)&&setTimeout(function(){self._resetMaskPos(input)})},keypress:function(e){var k=e.which;if(8!=k&&46!=k){var input=$(e.target),c=String.fromCharCode(k),val=input.val()||"";val+=c;var mask=this._mask[this._maskPos];if(!mask)return!1;if(mask.end==val.length){if(!mask.pattern.test(val.slice(mask.start))){for(val=val.slice(0,val.length-1);(mask=this._mask[this._maskPos])&&mask.character;)val+=mask.character,this._maskPos++;return val+=c,mask.end!=val.length?(input.val(val),!1):mask.pattern.test(val.slice(mask.start))?(input.val(val),this._maskPos++,!1):(input.val(val.slice(0,mask.start)),!1)}this._maskPos++}}},change:function(e){var input=$(e.target),val=input.val();this._formatPattern.test(val)?(this.update(),this.setValue(this._date.getTime()),this.notifyChange(),this.set()):val&&val.trim()?(this.setValue(this._date.getTime()),this._date?this.set():input.val("")):this._date&&(this.setValue(null),this.notifyChange(),this._unset=!0),this._resetMaskPos(input)},showMode:function(dir){dir&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+dir))),this.widget.find(".datepicker > div").hide().filter(".datepicker-"+DPGlobal.modes[this.viewMode].clsName).show()},destroy:function(){this._detachDatePickerEvents(),this._detachDatePickerGlobalEvents(),this.widget.remove(),this.$element.removeData("datetimepicker"),this.component.removeData("datetimepicker")},formatDate:function(d){return this.format.replace(formatReplacer,function(match){var methodName,property,rv,len=match.length;if("ms"===match&&(len=1),property=dateFormatComponents[match].property,"Hours12"===property)rv=d.getUTCHours(),0===rv?rv=12:12!==rv&&(rv%=12);else{if("Period12"===property)return d.getUTCHours()>=12?"PM":"AM";methodName="get"+property,rv=d[methodName]()}return"getUTCMonth"===methodName&&(rv+=1),"getUTCYear"===methodName&&(rv=rv+1900-2e3),padLeft(rv.toString(),len,"0")})},parseDate:function(str){var match,i,property,value,parsed={};if(!(match=this._formatPattern.exec(str)))return null;for(i=1;i<match.length;i++)property=this._propertiesByIndex[i],property&&(value=match[i],/^\d+$/.test(value)&&(value=parseInt(value,10)),parsed[property]=value);return this._finishParsingDate(parsed)},_resetMaskPos:function(input){for(var val=input.val(),i=0;i<this._mask.length;i++){if(this._mask[i].end>val.length){this._maskPos=i;break}if(this._mask[i].end===val.length){this._maskPos=i+1;break}}},_finishParsingDate:function(parsed){var year,month,date,hours,minutes,seconds,milliseconds;return year=parsed.UTCFullYear,parsed.UTCYear&&(year=2e3+parsed.UTCYear),year||(year=1970),month=parsed.UTCMonth?parsed.UTCMonth-1:0,date=parsed.UTCDate||1,hours=parsed.UTCHours||0,minutes=parsed.UTCMinutes||0,seconds=parsed.UTCSeconds||0,milliseconds=parsed.UTCMilliseconds||0,parsed.Hours12&&(hours=parsed.Hours12),parsed.Period12&&(/pm/i.test(parsed.Period12)?12!=hours&&(hours=(hours+12)%24):hours%=12),UTCDate(year,month,date,hours,minutes,seconds,milliseconds)},_compileFormat:function(){for(var match,component,components=[],mask=[],str=this.format,propertiesByIndex={},i=0,pos=0;match=formatComponent.exec(str);)component=match[0],component in dateFormatComponents?(i++,propertiesByIndex[i]=dateFormatComponents[component].property,components.push("\\s*"+dateFormatComponents[component].getPattern(this)+"\\s*"),mask.push({pattern:new RegExp(dateFormatComponents[component].getPattern(this)),property:dateFormatComponents[component].property,start:pos,end:pos+=component.length})):(components.push(escapeRegExp(component)),mask.push({pattern:new RegExp(escapeRegExp(component)),character:component,start:pos,end:++pos})),str=str.slice(component.length);this._mask=mask,this._maskPos=0,this._formatPattern=new RegExp("^\\s*"+components.join("")+"\\s*$"),this._propertiesByIndex=propertiesByIndex},_attachDatePickerEvents:function(){var self=this;this.widget.on("click",".datepicker *",$.proxy(this.click,this)),this.widget.on("click","[data-action]",$.proxy(this.doAction,this)),this.widget.on("mousedown",$.proxy(this.stopEvent,this)),this.pickDate&&this.pickTime&&this.widget.on("click.togglePicker",".accordion-toggle",function(e){e.stopPropagation();var $this=$(this),$parent=$this.closest("ul"),expanded=$parent.find(".collapse.in"),closed=$parent.find(".collapse:not(.in)");if(expanded&&expanded.length){var collapseData=expanded.data("collapse");if(collapseData&&collapseData.transitioning)return;expanded.collapse("hide"),closed.collapse("show"),$this.find("i").toggleClass(self.timeIcon+" "+self.dateIcon),self.$element.find(".add-on i").toggleClass(self.timeIcon+" "+self.dateIcon)}}),this.isInput?(this.$element.on({focus:$.proxy(this.show,this),change:$.proxy(this.change,this)}),this.options.maskInput&&this.$element.on({keydown:$.proxy(this.keydown,this),keypress:$.proxy(this.keypress,this)})):(this.$element.on({change:$.proxy(this.change,this)},"input"),this.options.maskInput&&this.$element.on({keydown:$.proxy(this.keydown,this),keypress:$.proxy(this.keypress,this)},"input"),this.component?this.component.on("click",$.proxy(this.show,this)):this.$element.on("click",$.proxy(this.show,this)))},_attachDatePickerGlobalEvents:function(){$(window).on("resize.datetimepicker"+this.id,$.proxy(this.place,this)),this.isInput||$(document).on("mousedown.datetimepicker"+this.id,$.proxy(this.hide,this))},_detachDatePickerEvents:function(){this.widget.off("click",".datepicker *",this.click),this.widget.off("click","[data-action]"),this.widget.off("mousedown",this.stopEvent),this.pickDate&&this.pickTime&&this.widget.off("click.togglePicker"),this.isInput?(this.$element.off({focus:this.show,change:this.change}),this.options.maskInput&&this.$element.off({keydown:this.keydown,keypress:this.keypress})):(this.$element.off({change:this.change},"input"),this.options.maskInput&&this.$element.off({keydown:this.keydown,keypress:this.keypress},"input"),this.component?this.component.off("click",this.show):this.$element.off("click",this.show))},_detachDatePickerGlobalEvents:function(){$(window).off("resize.datetimepicker"+this.id),this.isInput||$(document).off("mousedown.datetimepicker"+this.id)},_isInFixed:function(){if(this.$element){for(var parents=this.$element.parents(),inFixed=!1,i=0;i<parents.length;i++)if("fixed"==$(parents[i]).css("position")){inFixed=!0;break}return inFixed}return!1}},$.fn.datetimepicker=function(option,val){return this.each(function(){var $this=$(this),data=$this.data("datetimepicker"),options="object"==typeof option&&option;data||$this.data("datetimepicker",data=new DateTimePicker(this,$.extend({},$.fn.datetimepicker.defaults,options))),"string"==typeof option&&data[option](val)})},$.fn.datetimepicker.defaults={maskInput:!1,pickDate:!0,pickTime:!0,pick12HourFormat:!1,pickSeconds:!0,startDate:-(1/0),endDate:1/0,collapse:!0},$.fn.datetimepicker.Constructor=DateTimePicker;var dpgId=0,dates=$.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},dateFormatComponents={dd:{property:"UTCDate",getPattern:function(){return"(0?[1-9]|[1-2][0-9]|3[0-1])\\b"}},MM:{property:"UTCMonth",getPattern:function(){return"(0?[1-9]|1[0-2])\\b"}},yy:{property:"UTCYear",getPattern:function(){return"(\\d{2})\\b"}},yyyy:{property:"UTCFullYear",getPattern:function(){return"(\\d{4})\\b"}},hh:{property:"UTCHours",getPattern:function(){return"(0?[0-9]|1[0-9]|2[0-3])\\b"}},mm:{property:"UTCMinutes",getPattern:function(){return"(0?[0-9]|[1-5][0-9])\\b"}},ss:{property:"UTCSeconds",getPattern:function(){return"(0?[0-9]|[1-5][0-9])\\b"}},ms:{property:"UTCMilliseconds",getPattern:function(){return"([0-9]{1,3})\\b"}},HH:{property:"Hours12",getPattern:function(){return"(0?[1-9]|1[0-2])\\b"}},PP:{property:"Period12",getPattern:function(){return"(AM|PM|am|pm|Am|aM|Pm|pM)\\b"}}},keys=[];for(var k in dateFormatComponents)keys.push(k);keys[keys.length-1]+="\\b",keys.push(".");var formatComponent=new RegExp(keys.join("\\b|"));keys.pop();var formatReplacer=new RegExp(keys.join("\\b|"),"g"),DPGlobal={modes:[{clsName:"days",navFnc:"UTCMonth",navStep:1},{clsName:"months",navFnc:"UTCFullYear",navStep:1},{clsName:"years",navFnc:"UTCFullYear",navStep:10}],isLeapYear:function(year){return year%4===0&&year%100!==0||year%400===0},getDaysInMonth:function(year,month){return[31,DPGlobal.isLeapYear(year)?29:28,31,30,31,30,31,31,30,31,30,31][month]},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};DPGlobal.template='<div class="datepicker-days"><table class="table-condensed">'+DPGlobal.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+"</table></div>";var TPGlobal={hourTemplate:'<span data-action="showHours" data-time-component="hours" class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds" data-time-component="seconds" class="timepicker-second"></span>'};TPGlobal.getTemplate=function(is12Hours,showSeconds){return'<div class="timepicker-picker"><table class="table-condensed"'+(is12Hours?' data-hour-format="12"':"")+'><tr><td><a href="#" class="btn" data-action="incrementHours"><i class="icon-chevron-up"></i></a></td><td class="separator"></td><td><a href="#" class="btn" data-action="incrementMinutes"><i class="icon-chevron-up"></i></a></td>'+(showSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><i class="icon-chevron-up"></i></a></td>':"")+(is12Hours?'<td class="separator"></td>':"")+"</tr><tr><td>"+TPGlobal.hourTemplate+'</td> <td class="separator">:</td><td>'+TPGlobal.minuteTemplate+"</td> "+(showSeconds?'<td class="separator">:</td><td>'+TPGlobal.secondTemplate+"</td>":"")+(is12Hours?'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>':"")+'</tr><tr><td><a href="#" class="btn" data-action="decrementHours"><i class="icon-chevron-down"></i></a></td><td class="separator"></td><td><a href="#" class="btn" data-action="decrementMinutes"><i class="icon-chevron-down"></i></a></td>'+(showSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><i class="icon-chevron-down"></i></a></td>':"")+(is12Hours?'<td class="separator"></td>':"")+'</tr></table></div><div class="timepicker-hours" data-action="selectHour"><table class="table-condensed"></table></div><div class="timepicker-minutes" data-action="selectMinute"><table class="table-condensed"></table></div>'+(showSeconds?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")}}(window.jQuery),function($){"use strict";var Iconpicker=function(element,options){this.$element=$(element),this.options=$.extend({},Iconpicker.DEFAULTS,this.$element.data()),this.options=$.extend({},this.options,options)};Iconpicker.ICONSET_EMPTY={iconClass:"",iconClassFix:"",icons:[]},Iconpicker.ICONSET={_custom:null,elusiveicon:$.iconset_elusiveicon||Iconpicker.ICONSET_EMPTY,fontawesome:$.iconset_fontawesome||Iconpicker.ICONSET_EMPTY,gleam:$.iconset_gleam||Iconpicker.ICONSET_EMPTY,ionicon:$.iconset_ionicon||Iconpicker.ICONSET_EMPTY,glyphicon:$.iconset_glyphicon||Iconpicker.ICONSET_EMPTY,mapicon:$.iconset_mapicon||Iconpicker.ICONSET_EMPTY,octicon:$.iconset_octicon||Iconpicker.ICONSET_EMPTY,typicon:$.iconset_typicon||Iconpicker.ICONSET_EMPTY,weathericon:$.iconset_weathericon||Iconpicker.ICONSET_EMPTY},Iconpicker.DEFAULTS={arrowClass:"btn-primary",arrowNextIconClass:"fa fa-arrow-right",arrowPrevIconClass:"fa fa-arrow-left",cols:4,icon:"",iconset:"gleam",labelHeader:"{0} / {1}",labelFooter:"{0} - {1} of {2}",placement:"bottom",rows:4,search:!0,searchText:"Search icon",selectedClass:"btn-warning",unselectedClass:"btn-default"},Iconpicker.prototype.bindEvents=function(){var op=this.options,el=this;op.table.find(".btn-previous, .btn-next").off("click").on("click",function(){var inc=parseInt($(this).val(),10);el.changeList(op.page+inc)}),op.table.find(".btn-icon").off("click").on("click",function(){el.select($(this).val()),el.$element.popover("destroy")}),op.table.find(".search-control").off("keydown").on("keydown",function(event){event.stopPropagation()}),op.table.find(".search-control").off("keyup").on("keyup",function(){el.changeList(1)})},Iconpicker.prototype.changeList=function(page){this.filterIcons(),this.updateLabels(page),this.updateIcons(page),this.options.page=page,this.bindEvents()},Iconpicker.prototype.filterIcons=function(){var op=this.options,search=op.table.find(".search-control").val();if(""===search)op.icons=Iconpicker.ICONSET[op.iconset].icons;else{var result=[];$.each(Iconpicker.ICONSET[op.iconset].icons,function(i,v){v.indexOf(search)>-1&&result.push(v)}),op.icons=result}},Iconpicker.prototype.removeAddClass=function(target,remove,add){return this.options.table.find(target).removeClass(remove).addClass(add),add},Iconpicker.prototype.reset=function(){this.updatePicker(),this.changeList(1)},Iconpicker.prototype.select=function(icon){var op=this.options,el=this.$element;op.selected=$.inArray(icon.replace(op.iconClassFix,""),op.icons),-1===op.selected&&(op.selected=0,icon=op.iconClassFix+op.icons[op.selected]),""!==icon&&op.selected>=0&&(op.icon=icon,el.find("input").val(icon),el.find("i").attr("class","").addClass(op.iconClass).addClass(icon),el.trigger({type:"change",icon:icon}),op.table.find("button."+op.selectedClass).removeClass(op.selectedClass))},Iconpicker.prototype.switchPage=function(icon){var op=this.options;if(op.selected=$.inArray(icon.replace(op.iconClassFix,""),op.icons),""!==icon&&op.selected>=0){var page=Math.ceil((op.selected+1)/this.totalIconsPerPage());this.changeList(page)}icon&&op.table.find("i."+icon).parent().addClass(op.selectedClass)},Iconpicker.prototype.totalPages=function(){return Math.ceil(this.totalIcons()/this.totalIconsPerPage())},Iconpicker.prototype.totalIcons=function(){return this.options.icons.length},Iconpicker.prototype.totalIconsPerPage=function(){return this.options.cols*this.options.rows},Iconpicker.prototype.updateArrows=function(page){var op=this.options,total_pages=this.totalPages();1===page?op.table.find(".btn-previous").addClass("disabled"):op.table.find(".btn-previous").removeClass("disabled"),page===total_pages||0===total_pages?op.table.find(".btn-next").addClass("disabled"):op.table.find(".btn-next").removeClass("disabled")},Iconpicker.prototype.updateIcons=function(page){for(var op=this.options,tbody=op.table.find("tbody").empty(),offset=(page-1)*this.totalIconsPerPage(),i=0;i<op.rows;i++){for(var tr=$("<tr></tr>"),j=0;j<op.cols;j++){var pos=offset+i*op.cols+j,btn=$('<button class="btn '+op.unselectedClass+' btn-icon"></button>').hide();if(pos<op.icons.length){var v=op.iconClassFix+op.icons[pos];btn.val(v).attr("title",v).append('<i class="'+op.iconClass+" "+v+'"></i>').show(),op.icon===v&&btn.addClass(op.selectedClass).addClass("btn-icon-selected")}tr.append($("<td></td>").append(btn))}tbody.append(tr)}},Iconpicker.prototype.updateIconsCount=function(){var op=this.options,icons_count=["<tr>",'   <td colspan="'+op.cols+'" class="text-center">','       <span class="icons-count"></span>',"   </td>","</tr>"];op.table.find("tfoot").empty().append(icons_count.join(""))},Iconpicker.prototype.updateLabels=function(page){var op=this.options,total_icons=this.totalIcons(),total_pages=this.totalPages();op.table.find(".page-count").html(op.labelHeader.replace("{0}",0===total_pages?0:page).replace("{1}",total_pages));var offset=(page-1)*this.totalIconsPerPage(),total=page*this.totalIconsPerPage();
op.table.find(".icons-count").html(op.labelFooter.replace("{0}",offset+1).replace("{1}",total_icons>total?total:total_icons).replace("{2}",total_icons)),this.updateArrows(page)},Iconpicker.prototype.updatePagesCount=function(){for(var op=this.options,tr=$("<tr></tr>"),i=0;i<op.cols;i++){var td=$('<td class="text-center"></td>');if(0===i||i===op.cols-1){var arrow=['<button class="btn btn-arrow '+(0===i?"btn-previous":"btn-next")+" "+op.arrowClass+'" value="'+(0===i?-1:1)+'">','<span class="'+(0===i?op.arrowPrevIconClass:op.arrowNextIconClass)+'"></span>',"</button>"];td.append(arrow.join("")),tr.append(td)}else 0===tr.find(".page-count").length&&(td.attr("colspan",op.cols-2).append('<span class="page-count"></span>'),tr.append(td))}op.table.find("thead").empty().append(tr)},Iconpicker.prototype.updatePicker=function(){var op=this.options;if(op.cols<4)throw"Iconpicker => The number of columns must be greater than or equal to 4. [option.cols = "+op.cols+"]";if(op.rows<1)throw"Iconpicker => The number of rows must be greater than or equal to 1. [option.rows = "+op.rows+"]";this.updatePagesCount(),this.updateSearch(),this.updateIconsCount()},Iconpicker.prototype.updateSearch=function(){var op=this.options,search=["<tr>",'   <td colspan="'+op.cols+'">','       <input type="text" class="form-control search-control" style="width: '+39*op.cols+'px;" placeholder="'+op.searchText+'">',"   </td>","</tr>"];search=$(search.join("")),op.search===!0?search.show():search.hide(),op.table.find("thead").append(search)},Iconpicker.prototype.setArrowClass=function(value){this.options.arrowClass=this.removeAddClass(".btn-arrow",this.options.arrowClass,value)},Iconpicker.prototype.setArrowNextIconClass=function(value){this.options.arrowNextIconClass=this.removeAddClass(".btn-next > span",this.options.arrowNextIconClass,value)},Iconpicker.prototype.setArrowPrevIconClass=function(value){this.options.arrowPrevIconClass=this.removeAddClass(".btn-previous > span",this.options.arrowPrevIconClass,value)},Iconpicker.prototype.setCols=function(value){this.options.cols=value,this.reset()},Iconpicker.prototype.setIcon=function(value){this.select(value)},Iconpicker.prototype.setIconset=function(value){var op=this.options;$.isPlainObject(value)?(Iconpicker.ICONSET._custom=$.extend(Iconpicker.ICONSET_EMPTY,value),op.iconset="_custom"):Iconpicker.ICONSET.hasOwnProperty(value)?op.iconset=value:op.iconset=Iconpicker.DEFAULTS.iconset,op=$.extend(op,Iconpicker.ICONSET[op.iconset]),this.reset(),this.select(op.icon)},Iconpicker.prototype.setLabelHeader=function(value){this.options.labelHeader=value,this.updateLabels(this.options.page)},Iconpicker.prototype.setLabelFooter=function(value){this.options.labelFooter=value,this.updateLabels(this.options.page)},Iconpicker.prototype.setPlacement=function(value){this.options.placement=value},Iconpicker.prototype.setRows=function(value){this.options.rows=value,this.reset()},Iconpicker.prototype.setSearch=function(value){var search=this.options.table.find(".search-control");value===!0?search.show():search.hide(),search.val(""),this.changeList(1),this.options.search=value},Iconpicker.prototype.setSearchText=function(value){this.options.table.find(".search-control").attr("placeholder",value),this.options.searchText=value},Iconpicker.prototype.setSelectedClass=function(value){this.options.selectedClass=this.removeAddClass(".btn-icon-selected",this.options.selectedClass,value)},Iconpicker.prototype.setUnselectedClass=function(value){this.options.unselectedClass=this.removeAddClass(".btn-icon",this.options.unselectedClass,value)};var old=$.fn.iconpicker;$.fn.iconpicker=function(option,params){return this.each(function(){var $this=$(this),data=$this.data("bs.iconpicker"),options="object"==typeof option&&option;if(data||$this.data("bs.iconpicker",data=new Iconpicker(this,options)),"string"==typeof option){if("undefined"==typeof data[option])throw'Iconpicker => The "'+option+'" method does not exists.';data[option](params)}else{var op=data.options;op=$.extend(op,{page:1,selected:-1,table:$('<table class="table-icons"><thead></thead><tbody></tbody><tfoot></tfoot></table>')});var name="undefined"!=typeof $this.attr("name")?'name="'+$this.attr("name")+'"':"";$this.empty().append("<i></i>").append('<input type="hidden" '+name+"></input>").append('<span class="caret"></span>'),$this.addClass("iconpicker"),data.setIconset(op.iconset),$this.on("click",function(e){e.preventDefault(),$this.popover({animation:!1,trigger:"manual",html:!0,content:op.table,container:"body",placement:function(tip,element){var that=this,reposition=function(){var actualHeight=tip.offsetHeight,pos=that.getPosition(),tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width+10};that.applyPlacement(tp,"right")};return setTimeout(reposition,350),setTimeout(reposition,500),"right"}}).on("shown.bs.popover",function(){data.switchPage(op.icon),data.bindEvents()}),$this.popover("show"),this.iconPickerVisible=!0})}})},$.fn.iconpicker.Constructor=Iconpicker,$.fn.iconpicker.noConflict=function(){return $.fn.iconpicker=old,this},$(document).on("click","body",function(e){var $popovers=$(".popover");$(".iconpicker").each(function(){this.iconPickerVisible&&!$(this).is(e.target)&&0===$(this).has(e.target).length&&0===$popovers.has(e.target).length&&($(this).popover("destroy"),this.iconPickerVisible=!1)})}),$('button[role="iconpicker"]').iconpicker()}(jQuery),!function($){"use strict";$.fn.bootstrapSwitch=function(method){var methods={init:function(){return this.each(function(){var $div,$switchLeft,$switchRight,$label,color,moving,$element=$(this),myClasses="",classes=$element.attr("class"),onLabel="ON",offLabel="OFF",icon=!1;$.each(["switch-mini","switch-small","switch-large"],function(i,el){classes.indexOf(el)>=0&&(myClasses=el)}),$element.addClass("has-switch"),void 0!==$element.data("on")&&(color="switch-"+$element.data("on")),void 0!==$element.data("on-label")&&(onLabel=$element.data("on-label")),void 0!==$element.data("off-label")&&(offLabel=$element.data("off-label")),void 0!==$element.data("icon")&&(icon=$element.data("icon")),$switchLeft=$("<span>").addClass("switch-left").addClass(myClasses).addClass(color).html(onLabel),color="",void 0!==$element.data("off")&&(color="switch-"+$element.data("off")),$switchRight=$("<span>").addClass("switch-right").addClass(myClasses).addClass(color).html(offLabel),$label=$("<label>").html("&nbsp;").addClass(myClasses).attr("for",$element.find("input").attr("id")),icon&&$label.html('<i class="'+icon+'"></i>'),$div=$element.find(":checkbox").wrap($("<div>")).parent().data("animated",!1),$element.data("animated")!==!1&&$div.addClass("switch-animate").data("animated",!0),$div.append($switchLeft).append($label).append($switchRight),$element.find(">div").addClass($element.find("input").is(":checked")?"switch-on":"switch-off"),$element.find("input").is(":disabled")&&$(this).addClass("deactivate");var changeStatus=function($this){$this.siblings("label").trigger("mousedown").trigger("mouseup").trigger("click")};$element.on("keydown",function(e){32===e.keyCode&&(e.stopImmediatePropagation(),e.preventDefault(),changeStatus($(e.target).find("span:first")))}),$switchLeft.on("click",function(e){changeStatus($(this))}),$switchRight.on("click",function(e){changeStatus($(this))}),$element.find("input").on("change",function(e){var $this=$(this),$element=$this.parent(),thisState=$this.is(":checked"),state=$element.is(".switch-off");e.preventDefault(),$element.css("left",""),state===thisState&&(thisState?$element.removeClass("switch-off").addClass("switch-on"):$element.removeClass("switch-on").addClass("switch-off"),$element.data("animated")!==!1&&$element.addClass("switch-animate"),$this.trigger("switch-change",{status:thisState}))}),$element.find("label").on("mousedown touchstart",function(e){var $this=$(this);moving=!1,e.preventDefault(),e.stopImmediatePropagation(),$this.closest("div").removeClass("switch-animate"),$this.closest(".has-switch").is(".deactivate")?$this.unbind("click"):($this.on("mousemove touchmove",function(e){var $element=$(this).closest(".switch"),relativeX=(e.pageX||e.originalEvent.targetTouches[0].pageX)-$element.offset().left,percent=relativeX/$element.width()*100,left=25,right=75;moving=!0,left>percent?percent=left:percent>right&&(percent=right),$element.find(">div").css("left",percent-right+"%")}),$this.on("click touchend",function(e){var $this=$(this),$target=$(e.target),$myCheckBox=$target.siblings("input");e.stopImmediatePropagation(),e.preventDefault(),$this.unbind("mouseleave"),moving?$myCheckBox.prop("checked",!(parseInt($this.parent().css("left"))<-25)):$myCheckBox.prop("checked",!$myCheckBox.is(":checked")),moving=!1,$myCheckBox.trigger("change")}),$this.on("mouseleave",function(e){var $this=$(this),$myCheckBox=$this.siblings("input");e.preventDefault(),e.stopImmediatePropagation(),$this.unbind("mouseleave"),$this.trigger("mouseup"),$myCheckBox.prop("checked",!(parseInt($this.parent().css("left"))<-25)).trigger("change")}),$this.on("mouseup",function(e){e.stopImmediatePropagation(),e.preventDefault(),$(this).unbind("mousemove")}))})})},toggleActivation:function(){$(this).toggleClass("deactivate")},isActive:function(){return!$(this).hasClass("deactivate")},setActive:function(active){active?$(this).removeClass("deactivate"):$(this).addClass("deactivate")},toggleState:function(skipOnChange){var $input=$(this).find("input:checkbox");$input.prop("checked",!$input.is(":checked")).trigger("change",skipOnChange)},setState:function(value,skipOnChange){$(this).find("input:checkbox").prop("checked",value).trigger("change",skipOnChange)},setStateSilent:function(value){$(this).prop("checked",value);var $this=$(this),$element=$this.parent(),thisState=$this.is(":checked"),state=$element.is(".switch-off");$element.css("left",""),state===thisState&&(thisState?$element.removeClass("switch-off").addClass("switch-on"):$element.removeClass("switch-on").addClass("switch-off"),$element.data("animated")!==!1&&$element.addClass("switch-animate"),$this.trigger("switch-change",{status:thisState}))},status:function(){return $(this).find("input:checkbox").is(":checked")},destroy:function(){var $checkbox,$div=$(this).find("div");return $div.find(":not(input:checkbox)").remove(),$checkbox=$div.children(),$checkbox.unwrap().unwrap(),$checkbox.unbind("change"),$checkbox}};return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error("Method "+method+" does not exist!"):methods.init.apply(this,arguments)}}(jQuery),function($){initBulkActions=function(){var bulkForm=$("form.bulk-form")[0],bulkToggleAllLink=$(".bulk-toggle-all"),formItems=$(bulkForm).data("form-items");$("[data-bulk-action]").on("click",function(){var bulkAction=$(this).data("bulk-action"),confirmText=$(this).data("bulk-confirm"),entriesSelected=$(bulkForm).serializeJSON()[formItems];0===$(".bulk-checkbox:checked").size()&&alert("Please select some rows using the checkboxes"),!entriesSelected||confirmText&&!confirm(confirmText)||(bulkForm.elements.bulk_action.value=bulkAction,$(bulkForm).submit())}),bulkToggleAllLink.on("change",function(){var checked=$(this).prop("checked");$(".bulk-checkbox").prop("checked",checked)})},window.initBulkActions=initBulkActions}(jQuery),function(){var Campaigns;window.API.campaigns=window.API.initEndpoint({type:"campaigns",basePath:"/campaigns","class":Campaigns=function(){function Campaigns(){}return Campaigns}(),attributes:["disabled"]}),window.API.campaigns.winnerData=function(campaignId,options){var from,params,to;return null==options&&(options={}),options.success||(options.success=function(){}),options.failure||(options.failure=window.API.defaultOnError),options.always||(options.always=function(){}),from=options.from,to=options.to,params={per_page:"none"},(from||to)&&(params["filter[entries.created_at]"]=from?to?from.toISOString()+"..."+to.toISOString():from.toISOString()+"...":to?"..."+to.toISOString():void 0),params.count="entries.prizes_remaining",options.hasOwnProperty("repeatedWinners")&&(options.repeatedWinners?params.sum="entries.repeated_potential_winners":params.count="entries.prizes_remaining,entries.unique_potential_winners"),window.API.apiCall("/campaigns/"+campaignId+"/entries",{data:params},options.success,options.failure,options.always)}}.call(this),function(){var checkToggle;checkToggle=function(){return $($(this).data("toggle-area")).toggle($(this).is(":checked"))},$(document).on("click",'[href="#gleam"], [href="/#gleam"]',function(e){return e.preventDefault(),Gleam.openPopupCampaign()}).on("click","input[data-toggle-area]",checkToggle).on("click",".removable .remove",function(e){var $removable;return e.preventDefault(),$removable=$(this).closest(".removable"),$removable.find('[name$="[_destroy]"]').val("true"),"AutoEnter"===$removable.data("generated")?($removable.scope().campaign.auto_enter=!1,$("#campaign_auto_enter").prop("checked",!1).trigger("update").closest("label").removeClass("checked"),$removable.addClass("removed").addClass("removable")):($removable.parent().prepend($removable),$removable.replaceWith(function(){return $("<div class='removed removable' />").append($(this).contents())})),$(".sortable, .unsortable").trigger("reorder")}).on("reorder",".sortable, .unsortable",function(){var $groupSorted,targetElements,visibleIndex;return $(this).data("group-sortable")?($groupSorted=$(this).parents($(this).data("group-sortable")).find("[data-group-sort-element]"),visibleIndex=1,$groupSorted.each(function(index){return $(this).find("[data-group-sort-index]").val(index),$(this).is(":visible")?($(this).find("[data-group-sorted-index-text]").text(visibleIndex),visibleIndex+=1):void 0}),targetElements=$groupSorted.find("> .sortable > *, > .unsortable > *")):targetElements=$(this).children(),targetElements.each(function(index){return $("[name]",this).each(function(){return $(this).attr("name",$(this).attr("name").replace(/\[\d+\]/,"["+index+"]"))}),$(".removable",this).each(function(subIndex){return $("[name]",this).each(function(){return $(this).attr("name",$(this).attr("name").replace(/\[\d+\](.+)\[\d+\]/,"["+index+"]$1["+subIndex+"]"))})}),$("[id]",this).each(function(){return $(this).attr("id",$(this).attr("id").replace(/(\[|_)\d+(\]|_)/,"$1"+index+"$2"))}),$("[for]",this).each(function(){return $(this).attr("for",$(this).attr("for").replace(/(\[|_)\d+(\]|_)/,"$1"+index+"$2"))}),$('[name*="[position]"]',this).each(function(){return $(this).val(index)})})}).on("click",".sortable .handle, .unsortable .handle",function(){var $element;return $element=$(this).closest(".sortable > *, .unsortable > *"),$element.hasClass("closed")?($element.removeClass("displaynone"),setTimeout(function(){return $element.removeClass("closed")},10)):($element.addClass("closed"),setTimeout(function(){return $element.addClass("displaynone")},400))}).on("reorder",".apply-order",function(){return $(this).closest("[ng-controller]").scope().reorder()}),$(document).on("turbolinks:load",function(){return $("input[data-toggle-area]").each(checkToggle),$("[data-behaviour=toggle-area] select").trigger("change")})}.call(this),/*!
Chosen, a Select Box Enhancer for jQuery and Prototype
by Patrick Filler for Harvest, http://getharvest.com

Version 1.2.0
Full source at https://github.com/harvesthq/chosen
Copyright (c) 2011-2015 Harvest http://getharvest.com

MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md
This file is generated by `grunt build`, do not edit it by hand.
*/
function(){function safeHtmlOption(str){var safe=$("<b></b>").text(str).html();return safe.replace?safe.replace(/&lt;(\/?)em&gt;/gi,"<$1em>"):safe}var $,AbstractChosen,Chosen,SelectParser,_ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};SelectParser=function(){function SelectParser(){this.options_index=0,this.parsed=[]}return SelectParser.prototype.add_node=function(child){return"OPTGROUP"===child.nodeName.toUpperCase()?this.add_group(child):this.add_option(child)},SelectParser.prototype.add_group=function(group){var group_position,option,_i,_len,_ref,_results;for(group_position=this.parsed.length,this.parsed.push({array_index:group_position,group:!0,label:this.escapeExpression(group.label),children:0,disabled:group.disabled}),_ref=group.childNodes,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)option=_ref[_i],_results.push(this.add_option(option,group_position,group.disabled));return _results},SelectParser.prototype.add_option=function(option,group_position,group_disabled){return"OPTION"===option.nodeName.toUpperCase()?(""!==option.text?(null!=group_position&&(this.parsed[group_position].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:option.value,text:option.text,html:option.innerHTML,selected:option.selected,disabled:group_disabled===!0?group_disabled:option.disabled,group_array_index:group_position,classes:option.className,style:option.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},SelectParser.prototype.escapeExpression=function(text){var map,unsafe_chars;return null==text||text===!1?"":/[\&\<\>\"\'\`]/.test(text)?(map={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},unsafe_chars=/&(?!\w+;)|[\<\>\"\'\`]/g,text.replace(unsafe_chars,function(chr){return map[chr]||"&amp;"})):text},SelectParser}(),SelectParser.select_to_array=function(select){var child,parser,_i,_len,_ref;for(parser=new SelectParser,_ref=select.childNodes,_i=0,_len=_ref.length;_len>_i;_i++)child=_ref[_i],parser.add_node(child);return parser.parsed},AbstractChosen=function(){function AbstractChosen(form_field,options){this.form_field=form_field,this.options=null!=options?options:{},AbstractChosen.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return AbstractChosen.prototype.set_default_values=function(){var _this=this;return this.click_test_action=function(evt){return _this.test_active_click(evt)},this.activate_action=function(evt){return _this.activate_field(evt)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0,this.create_option=this.options.create_option||!1,this.persistent_create_option=this.options.persistent_create_option||!1,this.skip_no_results=this.options.skip_no_results||!1},AbstractChosen.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||AbstractChosen.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||AbstractChosen.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||AbstractChosen.default_no_result_text,this.create_option_text=this.form_field.getAttribute("data-create_option_text")||this.options.create_option_text||AbstractChosen.default_create_option_text},AbstractChosen.prototype.mouse_enter=function(){return this.mouse_on_container=!0},AbstractChosen.prototype.mouse_leave=function(){return this.mouse_on_container=!1},AbstractChosen.prototype.input_focus=function(evt){var _this=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return _this.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},AbstractChosen.prototype.input_blur=function(evt){var _this=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return _this.blur_test()},100))},AbstractChosen.prototype.results_option_build=function(options){var content,data,_i,_len,_ref;for(content="",_ref=this.results_data,_i=0,_len=_ref.length;_len>_i;_i++)data=_ref[_i],content+=data.group?this.result_add_group(data):this.result_add_option(data),(null!=options?options.first:void 0)&&(data.selected&&this.is_multiple?this.choice_build(data):data.selected&&!this.is_multiple&&this.single_set_selected_text(data.text));return content},AbstractChosen.prototype.result_add_option=function(option){var classes,option_el;return option.search_match&&this.include_option_in_results(option)?(classes=[],option.disabled||option.selected&&this.is_multiple||classes.push("active-result"),!option.disabled||option.selected&&this.is_multiple||classes.push("disabled-result"),option.selected&&classes.push("result-selected"),null!=option.group_array_index&&classes.push("group-option"),""!==option.classes&&classes.push(option.classes),option_el=document.createElement("li"),option_el.className=classes.join(" "),option_el.style.cssText=option.style,option_el.setAttribute("data-option-array-index",option.array_index),option_el.innerHTML=safeHtmlOption(option.search_text),this.outerHTML(option_el)):""},AbstractChosen.prototype.result_add_group=function(group){var group_el;return(group.search_match||group.group_match)&&group.active_options>0?(group_el=document.createElement("li"),group_el.className="group-result",group_el.innerHTML=group.search_text,this.outerHTML(group_el)):""},AbstractChosen.prototype.append_option=function(option){return this.select_append_option(option)},AbstractChosen.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},AbstractChosen.prototype.reset_single_select_options=function(){var result,_i,_len,_ref,_results;for(_ref=this.results_data,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)result=_ref[_i],result.selected?_results.push(result.selected=!1):_results.push(void 0);return _results},AbstractChosen.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},AbstractChosen.prototype.results_search=function(evt){return this.results_showing?this.winnow_results():this.results_show()},AbstractChosen.prototype.winnow_results=function(){var eregex,escapedSearchText,exact_result,option,regex,results,results_group,searchText,startpos,text,zregex,_i,_len,_ref;for(this.no_results_clear(),results=0,exact_result=!1,searchText=this.get_search_text(),escapedSearchText=searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),zregex=new RegExp(escapedSearchText,"i"),regex=this.get_search_regex(escapedSearchText),eregex=new RegExp("^"+escapedSearchText+"$","i"),_ref=this.results_data,_i=0,_len=_ref.length;_len>_i;_i++)option=_ref[_i],option.search_match=!1,results_group=null,this.include_option_in_results(option)&&(option.group&&(option.group_match=!1,option.active_options=0),null!=option.group_array_index&&this.results_data[option.group_array_index]&&(results_group=this.results_data[option.group_array_index],0===results_group.active_options&&results_group.search_match&&(results+=1),results_group.active_options+=1),(!option.group||this.group_search)&&(option.search_text=option.group?option.label:option.text,option.search_match=this.search_string_match(option.search_text,regex),option.search_match&&!option.group&&(results+=1),exact_result=eregex.test(option.html),option.search_match?(searchText.length&&(startpos=option.search_text.search(zregex),text=option.search_text.substr(0,startpos+searchText.length)+"</em>"+option.search_text.substr(startpos+searchText.length),option.search_text=text.substr(0,startpos)+"<em>"+text.substr(startpos)),null!=results_group&&(results_group.group_match=!0)):null!=option.group_array_index&&this.results_data[option.group_array_index].search_match&&(option.search_match=!0)));return this.result_clear_highlight(),1>results&&searchText.length?(this.update_results_content(""),this.create_option&&this.skip_no_results||this.no_results(searchText)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight()),this.create_option&&(1>results||!exact_result&&this.persistent_create_option)&&searchText.length?this.show_create_option(searchText):void 0},AbstractChosen.prototype.get_search_regex=function(escaped_search_string){var regex_anchor;return regex_anchor=this.search_contains?"":"^",new RegExp(regex_anchor+escaped_search_string,"i")},AbstractChosen.prototype.search_string_match=function(search_string,regex){var part,parts,_i,_len;if(regex.test(search_string))return!0;if(this.enable_split_word_search&&(search_string.indexOf(" ")>=0||0===search_string.indexOf("["))&&(parts=search_string.replace(/\[|\]/g,"").split(" "),parts.length))for(_i=0,_len=parts.length;_len>_i;_i++)if(part=parts[_i],regex.test(part))return!0},AbstractChosen.prototype.choices_count=function(){var option,_i,_len,_ref;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,_ref=this.form_field.options,_i=0,_len=_ref.length;_len>_i;_i++)option=_ref[_i],option.selected&&(this.selected_option_count+=1);return this.selected_option_count},AbstractChosen.prototype.choices_click=function(evt){return evt.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},AbstractChosen.prototype.keyup_checker=function(evt){var stroke,_ref;switch(stroke=null!=(_ref=evt.which)?_ref:evt.keyCode,this.search_field_scale(),stroke){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(evt.preventDefault(),this.results_showing)return this.result_select(evt);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},AbstractChosen.prototype.clipboard_event_checker=function(evt){var _this=this;return setTimeout(function(){return _this.results_search()},50)},AbstractChosen.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},AbstractChosen.prototype.include_option_in_results=function(option){return this.is_multiple&&!this.display_selected_options&&option.selected?!1:!this.display_disabled_options&&option.disabled?!1:option.empty?!1:!0},AbstractChosen.prototype.search_results_touchstart=function(evt){return this.touch_started=!0,this.search_results_mouseover(evt)},AbstractChosen.prototype.search_results_touchmove=function(evt){return this.touch_started=!1,this.search_results_mouseout(evt)},AbstractChosen.prototype.search_results_touchend=function(evt){return this.touch_started?this.search_results_mouseup(evt):void 0},AbstractChosen.prototype.outerHTML=function(element){var tmp;return element.outerHTML?element.outerHTML:(tmp=document.createElement("div"),tmp.appendChild(element),tmp.innerHTML)},AbstractChosen.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},AbstractChosen.default_multiple_text="Select Some Options",AbstractChosen.default_single_text="Select an Option",AbstractChosen.default_no_result_text="No results match",AbstractChosen.default_create_option_text="Add Option",AbstractChosen}(),$=jQuery,$.fn.extend({chosen:function(options){return AbstractChosen.browser_is_supported()?this.each(function(input_field){var $this,chosen;$this=$(this),chosen=$this.data("chosen"),"destroy"===options&&chosen instanceof Chosen?chosen.destroy():chosen instanceof Chosen||$this.data("chosen",new Chosen(this,options))}):this}}),Chosen=function(_super){function Chosen(){return _ref=Chosen.__super__.constructor.apply(this,arguments)}return __extends(Chosen,_super),Chosen.prototype.setup=function(){return this.form_field_jq=$(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},Chosen.prototype.set_up_html=function(){var container_classes,container_props;return container_classes=["chosen-container"],container_classes.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&container_classes.push(this.form_field.className),this.is_rtl&&container_classes.push("chosen-rtl"),container_props={"class":container_classes.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(container_props.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=$("<div />",container_props),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},Chosen.prototype.register_observers=function(){var _this=this;return this.container.bind("touchstart.chosen",function(evt){_this.container_mousedown(evt)}),this.container.bind("touchend.chosen",function(evt){_this.container_mouseup(evt)}),this.container.bind("mousedown.chosen",function(evt){_this.container_mousedown(evt)}),this.container.bind("mouseup.chosen",function(evt){_this.container_mouseup(evt)}),this.container.bind("mouseenter.chosen",function(evt){_this.mouse_enter(evt)}),this.container.bind("mouseleave.chosen",function(evt){_this.mouse_leave(evt)}),this.search_results.bind("mouseup.chosen",function(evt){_this.search_results_mouseup(evt)}),this.search_results.bind("mouseover.chosen",function(evt){_this.search_results_mouseover(evt)}),this.search_results.bind("mouseout.chosen",function(evt){_this.search_results_mouseout(evt)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(evt){_this.search_results_mousewheel(evt)}),this.search_results.bind("touchstart.chosen",function(evt){_this.search_results_touchstart(evt)}),this.search_results.bind("touchmove.chosen",function(evt){_this.search_results_touchmove(evt)}),this.search_results.bind("touchend.chosen",function(evt){_this.search_results_touchend(evt)}),this.form_field_jq.bind("chosen:updated.chosen",function(evt){_this.results_update_field(evt)}),this.form_field_jq.bind("chosen:activate.chosen",function(evt){_this.activate_field(evt)}),this.form_field_jq.bind("chosen:open.chosen",function(evt){_this.container_mousedown(evt)}),this.form_field_jq.bind("chosen:close.chosen",function(evt){_this.input_blur(evt)}),this.search_field.bind("blur.chosen",function(evt){_this.input_blur(evt)}),this.search_field.bind("keyup.chosen",function(evt){_this.keyup_checker(evt)}),this.search_field.bind("keydown.chosen",function(evt){_this.keydown_checker(evt)}),this.search_field.bind("focus.chosen",function(evt){_this.input_focus(evt)}),this.search_field.bind("cut.chosen",function(evt){_this.clipboard_event_checker(evt)}),this.search_field.bind("paste.chosen",function(evt){_this.clipboard_event_checker(evt)}),this.is_multiple?this.search_choices.bind("click.chosen",function(evt){_this.choices_click(evt)}):this.container.bind("click.chosen",function(evt){evt.preventDefault()})},Chosen.prototype.destroy=function(){return $(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},Chosen.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},Chosen.prototype.container_mousedown=function(evt){return this.is_disabled||(evt&&"mousedown"===evt.type&&!this.results_showing&&evt.preventDefault(),null!=evt&&$(evt.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!evt||$(evt.target)[0]!==this.selected_item[0]&&!$(evt.target).parents("a.chosen-single").length||(evt.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),$(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},Chosen.prototype.container_mouseup=function(evt){return"ABBR"!==evt.target.nodeName||this.is_disabled?void 0:this.results_reset(evt)},Chosen.prototype.search_results_mousewheel=function(evt){var delta;return evt.originalEvent&&(delta=evt.originalEvent.deltaY||-evt.originalEvent.wheelDelta||evt.originalEvent.detail),null!=delta?(evt.preventDefault(),"DOMMouseScroll"===evt.type&&(delta=40*delta),this.search_results.scrollTop(delta+this.search_results.scrollTop())):void 0},Chosen.prototype.blur_test=function(evt){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},Chosen.prototype.close_field=function(){return $(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},Chosen.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},Chosen.prototype.test_active_click=function(evt){var active_container;return active_container=$(evt.target).closest(".chosen-container"),active_container.length&&this.container[0]===active_container[0]?this.active_field=!0:this.close_field()},Chosen.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=SelectParser.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold&&!this.create_option?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},Chosen.prototype.result_do_highlight=function(el){var high_bottom,high_top,maxHeight,visible_bottom,visible_top;if(el.length){if(this.result_clear_highlight(),this.result_highlight=el,this.result_highlight.addClass("highlighted"),maxHeight=parseInt(this.search_results.css("maxHeight"),10),visible_top=this.search_results.scrollTop(),visible_bottom=maxHeight+visible_top,high_top=this.result_highlight.position().top+this.search_results.scrollTop(),high_bottom=high_top+this.result_highlight.outerHeight(),high_bottom>=visible_bottom)return this.search_results.scrollTop(high_bottom-maxHeight>0?high_bottom-maxHeight:0);if(visible_top>high_top)return this.search_results.scrollTop(high_top)}},Chosen.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},Chosen.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},Chosen.prototype.update_results_content=function(content){return this.search_results.html(content)},Chosen.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},Chosen.prototype.set_tab_index=function(el){var ti;return this.form_field.tabIndex?(ti=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=ti):void 0},Chosen.prototype.set_label_behavior=function(){var _this=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=$("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(evt){return _this.is_multiple?_this.container_mousedown(evt):_this.activate_field()}):void 0},Chosen.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},Chosen.prototype.search_results_mouseup=function(evt){var target;return target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first(),target.length?(this.result_highlight=target,this.result_select(evt),this.search_field.focus()):void 0},Chosen.prototype.search_results_mouseover=function(evt){var target;return target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first(),target?this.result_do_highlight(target):void 0},Chosen.prototype.search_results_mouseout=function(evt){return $(evt.target).hasClass("active-result")?this.result_clear_highlight():void 0},Chosen.prototype.choice_build=function(item){var choice,close_link,_this=this;return choice=$("<li />",{"class":"search-choice"}).html("<span>"+item.html+"</span>"),item.disabled?choice.addClass("search-choice-disabled"):(close_link=$("<a />",{"class":"search-choice-close","data-option-array-index":item.array_index}),close_link.bind("click.chosen",function(evt){return _this.choice_destroy_link_click(evt)}),choice.append(close_link)),this.search_container.before(choice)},Chosen.prototype.choice_destroy_link_click=function(evt){return evt.preventDefault(),evt.stopPropagation(),this.is_disabled?void 0:this.choice_destroy($(evt.target))},Chosen.prototype.choice_destroy=function(link){return this.result_deselect(link[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),link.parents("li").first().remove(),this.search_field_scale()):void 0},Chosen.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},Chosen.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},Chosen.prototype.result_select=function(evt){var high,item;return this.result_highlight?(high=this.result_highlight,high.hasClass("create-option")?(this.select_create_option(this.search_field.val()),this.results_hide()):(this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?high.removeClass("active-result"):this.reset_single_select_options(),item=this.results_data[high[0].getAttribute("data-option-array-index")],item.selected=!0,this.form_field.options[item.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(item):this.single_set_selected_text(item.text),(evt.metaKey||evt.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[item.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale()))):void 0},Chosen.prototype.single_set_selected_text=function(text){return null==text&&(text=this.default_text),text===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(text)},Chosen.prototype.result_deselect=function(pos){var result_data;return result_data=this.results_data[pos],this.form_field.options[result_data.options_index].disabled?!1:(result_data.selected=!1,this.form_field.options[result_data.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[result_data.options_index].value}),this.search_field_scale(),!0)},Chosen.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},Chosen.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":$("<div/>").text($.trim(this.search_field.val())).html()},Chosen.prototype.winnow_results_set_highlight=function(){var do_high,selected_results;return selected_results=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),do_high=selected_results.length?selected_results.first():this.search_results.find(".active-result").first(),null!=do_high?this.result_do_highlight(do_high):void 0},Chosen.prototype.no_results=function(terms){var no_results_html;return no_results_html=$('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),no_results_html.find("span").first().html(terms),this.search_results.append(no_results_html),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},Chosen.prototype.show_create_option=function(terms){var create_option_html;return create_option_html=$('<li class="create-option active-result"><a>'+this.create_option_text+'</a>: "'+terms+'"</li>'),this.search_results.append(create_option_html),this.winnow_results_set_highlight()},Chosen.prototype.create_option_clear=function(){return this.search_results.find(".create-option").remove()},Chosen.prototype.select_create_option=function(terms){return $.isFunction(this.create_option)?this.create_option.call(this,terms):this.select_append_option({value:terms,text:terms})},Chosen.prototype.select_append_option=function(options){var option;return option=$("<option />",options).attr("selected","selected"),this.form_field_jq.append(option),this.form_field_jq.trigger("chosen:updated"),this.form_field_jq.trigger("change"),this.search_field.trigger("focus")},Chosen.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},Chosen.prototype.keydown_arrow=function(){var next_sib;return this.results_showing&&this.result_highlight?(next_sib=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(next_sib):void 0:this.results_showing&&this.create_option?this.result_do_highlight(this.search_results.find(".create-option")):this.results_show()},Chosen.prototype.keyup_arrow=function(){var prev_sibs;return this.results_showing||this.is_multiple?this.result_highlight?(prev_sibs=this.result_highlight.prevAll("li.active-result"),prev_sibs.length?this.result_do_highlight(prev_sibs.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},Chosen.prototype.keydown_backstroke=function(){var next_available_destroy;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(next_available_destroy=this.search_container.siblings("li.search-choice").last(),next_available_destroy.length&&!next_available_destroy.hasClass("search-choice-disabled")?(this.pending_backstroke=next_available_destroy,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},Chosen.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},Chosen.prototype.keydown_checker=function(evt){var stroke,_ref1;switch(stroke=null!=(_ref1=evt.which)?_ref1:evt.keyCode,this.search_field_scale(),8!==stroke&&this.pending_backstroke&&this.clear_backstroke(),stroke){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(evt),this.mouse_on_container=!1;break;case 13:this.results_showing&&evt.preventDefault();break;case 32:this.disable_search&&evt.preventDefault();break;case 38:evt.preventDefault(),this.keyup_arrow();break;case 40:evt.preventDefault(),this.keydown_arrow()}},Chosen.prototype.search_field_scale=function(){var div,f_width,h,style,style_block,styles,w,_i,_len;if(this.is_multiple){for(h=0,w=0,style_block="position:absolute; left: -1000px; top: -1000px; display:none;",styles=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],_i=0,_len=styles.length;_len>_i;_i++)style=styles[_i],style_block+=style+":"+this.search_field.css(style)+";";return div=$("<div />",{style:style_block}),div.text(this.search_field.val()),$("body").append(div),w=div.width()+25,div.remove(),f_width=this.container.outerWidth(),w>f_width-10&&(w=f_width-10),this.search_field.css({width:w+"px"})}},Chosen}(AbstractChosen)}.call(this),Date.isLeapYear=function(year){return year%4===0&&year%100!==0||year%400===0;
},Date.getDaysInMonth=function(year,month){return[31,Date.isLeapYear(year)?29:28,31,30,31,30,31,31,30,31,30,31][month]},Date.prototype.isLeapYear=function(){return Date.isLeapYear(this.getFullYear())},Date.prototype.getDaysInMonth=function(){return Date.getDaysInMonth(this.getFullYear(),this.getMonth())},Date.prototype.addMonths=function(value){var n=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+value),this.setDate(Math.min(n,this.getDaysInMonth())),this},function(){var DaterangeFilter,DaterangeFormFilter,allTimeStart,pastRanges,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;pastRanges={Today:[moment(),moment()],Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Previous Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},allTimeStart=moment("2013-03-09"),DaterangeFilter=function(){function DaterangeFilter(element,loader,options){var base,range;this.element=element,this.loader=loader,this.options=null!=options?options:{},this.cb=$(".range-line",this.element),this.options.ranges={},(base=this.options).maxDate||(base.maxDate=moment()),this.options.minDate&&this.options.maxDate?this.options.ranges["All Time"]=[this.options.minDate,this.options.maxDate]:this.options.ranges["All Time"]=[allTimeStart,moment()];for(range in pastRanges)this.options.ranges[range]=pastRanges[range];this.bindPicker()}return DaterangeFilter.prototype.renderRangeLine=function(start,end){return $(this.cb).html(start.format("MMMM D, YYYY")+" - "+end.format("MMMM D, YYYY"))},DaterangeFilter.prototype.bindPicker=function(){return $(this.element).daterangepicker(this.options,this.load.bind(this)),this.picker=$(this.element).data("daterangepicker")},DaterangeFilter.prototype.load=function(start,end,label){return"All Time"===label?($(this.cb).html(""),this.loader.load({})):(this.renderRangeLine(start,end),this.loader.load({starts_at:start.format("YYYY-MM-DD")+" 00:00:00",ends_at:end.format("YYYY-MM-DD")+" 23:59:59"}))},DaterangeFilter.prototype.setPickerDates=function(start,end){return this.picker.setStartDate(start),this.picker.setEndDate(end),this.picker.updateCalendars(),this.picker.hideCalendars(),this.picker.callback(this.picker.startDate,this.picker.endDate,this.picker.chosenLabel)},DaterangeFilter.prototype.setPickerAllTime=function(){return this.picker.setStartDate(this.picker.ranges["All Time"][0]),this.picker.setEndDate(this.picker.ranges["All Time"][1]),this.picker.updateCalendars(),this.picker.hideCalendars(),this.picker.callback(this.picker.startDate,this.picker.endDate,this.picker.chosenLabel)},DaterangeFilter.prototype.isAllTime=function(){return this.picker.startDate.format("YYYY-MM-DD")===this.picker.ranges["All Time"][0].format("YYYY-MM-DD")&&this.picker.endDate.format("YYYY-MM-DD")===this.picker.ranges["All Time"][1].format("YYYY-MM-DD")},DaterangeFilter}(),DaterangeFormFilter=function(superClass){function DaterangeFormFilter($form,element,loader,options){this.$form=$form,this.element=element,this.loader=loader,this.options=null!=options?options:{},this.$startsAt=$("[name=starts_at]",this.$form),this.$endsAt=$("[name=ends_at]",this.$form),this.options.startDate=this.$startsAt.val()?moment(this.$startsAt.val()):allTimeStart,this.options.endDate=this.$endsAt.val()?moment(this.$endsAt.val()):moment(),DaterangeFormFilter.__super__.constructor.call(this,this.element,this.loader,this.options),this.$startsAt.val()&&this.$endsAt.val()&&this.renderRangeLine(moment(this.$startsAt.val()),moment(this.$endsAt.val()))}return extend(DaterangeFormFilter,superClass),DaterangeFormFilter}(DaterangeFilter),window.DaterangeFilter=DaterangeFilter,window.DaterangeFormFilter=DaterangeFormFilter}.call(this),function(global){function dom(query,attrs,childs){var key,match=query.match(/^([^#.]*)#?([^.$]*).?(\S*)/),type=match[1]||"div",id=match[2],classes=match[3].replace(/\./g," "),element=document.createElement(type);if(attrs&&attrs.constructor===Array&&(childs=attrs,attrs=null),void 0!==attrs)if("string"==typeof attrs||"number"==typeof attrs)element.innerHTML=attrs;else for(key in attrs)attrs.hasOwnProperty(key)&&("id"===key||"innerHTML"===key||"value"===key||"src"===key||"className"===key?element[key]=attrs[key]:element.setAttribute(key,attrs[key]));return id&&element.setAttribute("id",id),classes&&element.setAttribute("class",classes),childs&&childs.forEach(function(child){element.appendChild(child)}),element}global.dom=dom}(window),/*
  Copyright (C) 2012 Ariya Hidayat <ariya.hidayat@gmail.com>
  Copyright (C) 2012 Mathias Bynens <mathias@qiwi.be>
  Copyright (C) 2012 Joost-Wim Boekesteijn <joost-wim@boekesteijn.nl>
  Copyright (C) 2012 Kris Kowal <kris.kowal@cixar.com>
  Copyright (C) 2012 Yusuke Suzuki <utatane.tea@gmail.com>
  Copyright (C) 2012 Arpad Borsos <arpad.borsos@googlemail.com>
  Copyright (C) 2011 Ariya Hidayat <ariya.hidayat@gmail.com>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
function(root,factory){"use strict";"function"==typeof define&&define.amd?define(["exports"],factory):factory("undefined"!=typeof exports?exports:root.esprima={})}(this,function(exports){"use strict";function assert(condition,message){if(!condition)throw new Error("ASSERT: "+message)}function sliceSource(from,to){return source.slice(from,to)}function isDecimalDigit(ch){return"0123456789".indexOf(ch)>=0}function isHexDigit(ch){return"0123456789abcdefABCDEF".indexOf(ch)>=0}function isOctalDigit(ch){return"01234567".indexOf(ch)>=0}function isWhiteSpace(ch){return" "===ch||"	"===ch||""===ch||"\f"===ch||"\xa0"===ch||ch.charCodeAt(0)>=5760&&"\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\ufeff".indexOf(ch)>=0}function isLineTerminator(ch){return"\n"===ch||"\r"===ch||"\u2028"===ch||"\u2029"===ch}function isIdentifierStart(ch){return"$"===ch||"_"===ch||"\\"===ch||ch>="a"&&"z">=ch||ch>="A"&&"Z">=ch||ch.charCodeAt(0)>=128&&Regex.NonAsciiIdentifierStart.test(ch)}function isIdentifierPart(ch){return"$"===ch||"_"===ch||"\\"===ch||ch>="a"&&"z">=ch||ch>="A"&&"Z">=ch||ch>="0"&&"9">=ch||ch.charCodeAt(0)>=128&&Regex.NonAsciiIdentifierPart.test(ch)}function isFutureReservedWord(id){switch(id){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0}return!1}function isStrictModeReservedWord(id){switch(id){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0}return!1}function isRestrictedWord(id){return"eval"===id||"arguments"===id}function isKeyword(id){var keyword=!1;switch(id.length){case 2:keyword="if"===id||"in"===id||"do"===id;break;case 3:keyword="var"===id||"for"===id||"new"===id||"try"===id;break;case 4:keyword="this"===id||"else"===id||"case"===id||"void"===id||"with"===id;break;case 5:keyword="while"===id||"break"===id||"catch"===id||"throw"===id;break;case 6:keyword="return"===id||"typeof"===id||"delete"===id||"switch"===id;break;case 7:keyword="default"===id||"finally"===id;break;case 8:keyword="function"===id||"continue"===id||"debugger"===id;break;case 10:keyword="instanceof"===id}if(keyword)return!0;switch(id){case"const":return!0;case"yield":case"let":return!0}return strict&&isStrictModeReservedWord(id)?!0:isFutureReservedWord(id)}function skipComment(){var ch,blockComment,lineComment;for(blockComment=!1,lineComment=!1;length>index;)if(ch=source[index],lineComment)ch=source[index++],isLineTerminator(ch)&&(lineComment=!1,"\r"===ch&&"\n"===source[index]&&++index,++lineNumber,lineStart=index);else if(blockComment)isLineTerminator(ch)?("\r"===ch&&"\n"===source[index+1]&&++index,++lineNumber,++index,lineStart=index,index>=length&&throwError({},Messages.UnexpectedToken,"ILLEGAL")):(ch=source[index++],index>=length&&throwError({},Messages.UnexpectedToken,"ILLEGAL"),"*"===ch&&(ch=source[index],"/"===ch&&(++index,blockComment=!1)));else if("/"===ch)if(ch=source[index+1],"/"===ch)index+=2,lineComment=!0;else{if("*"!==ch)break;index+=2,blockComment=!0,index>=length&&throwError({},Messages.UnexpectedToken,"ILLEGAL")}else if(isWhiteSpace(ch))++index;else{if(!isLineTerminator(ch))break;++index,"\r"===ch&&"\n"===source[index]&&++index,++lineNumber,lineStart=index}}function scanHexEscape(prefix){var i,len,ch,code=0;for(len="u"===prefix?4:2,i=0;len>i;++i){if(!(length>index&&isHexDigit(source[index])))return"";ch=source[index++],code=16*code+"0123456789abcdef".indexOf(ch.toLowerCase())}return String.fromCharCode(code)}function scanIdentifier(){var ch,start,id,restore;if(ch=source[index],isIdentifierStart(ch)){if(start=index,"\\"===ch){if(++index,"u"!==source[index])return;if(++index,restore=index,ch=scanHexEscape("u")){if("\\"===ch||!isIdentifierStart(ch))return;id=ch}else index=restore,id="u"}else id=source[index++];for(;length>index&&(ch=source[index],isIdentifierPart(ch));)if("\\"===ch){if(++index,"u"!==source[index])return;if(++index,restore=index,ch=scanHexEscape("u")){if("\\"===ch||!isIdentifierPart(ch))return;id+=ch}else index=restore,id+="u"}else id+=source[index++];return 1===id.length?{type:Token.Identifier,value:id,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}:isKeyword(id)?{type:Token.Keyword,value:id,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}:"null"===id?{type:Token.NullLiteral,value:id,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}:"true"===id||"false"===id?{type:Token.BooleanLiteral,value:id,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}:{type:Token.Identifier,value:id,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}}function scanPunctuator(){var ch2,ch3,ch4,start=index,ch1=source[index];return";"===ch1||"{"===ch1||"}"===ch1?(++index,{type:Token.Punctuator,value:ch1,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}):","===ch1||"("===ch1||")"===ch1?(++index,{type:Token.Punctuator,value:ch1,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}):(ch2=source[index+1],"."!==ch1||isDecimalDigit(ch2)?(ch3=source[index+2],ch4=source[index+3],">"===ch1&&">"===ch2&&">"===ch3&&"="===ch4?(index+=4,{type:Token.Punctuator,value:">>>=",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}):"="===ch1&&"="===ch2&&"="===ch3?(index+=3,{type:Token.Punctuator,value:"===",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}):"!"===ch1&&"="===ch2&&"="===ch3?(index+=3,{type:Token.Punctuator,value:"!==",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}):">"===ch1&&">"===ch2&&">"===ch3?(index+=3,{type:Token.Punctuator,value:">>>",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}):"<"===ch1&&"<"===ch2&&"="===ch3?(index+=3,{type:Token.Punctuator,value:"<<=",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}):">"===ch1&&">"===ch2&&"="===ch3?(index+=3,{type:Token.Punctuator,value:">>=",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}):"="===ch2&&"<>=!+-*%&|^/".indexOf(ch1)>=0?(index+=2,{type:Token.Punctuator,value:ch1+ch2,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}):ch1===ch2&&"+-<>&|".indexOf(ch1)>=0&&"+-<>&|".indexOf(ch2)>=0?(index+=2,{type:Token.Punctuator,value:ch1+ch2,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}):"[]<>+-*%&|^!~?:=/".indexOf(ch1)>=0?{type:Token.Punctuator,value:source[index++],lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}:void 0):{type:Token.Punctuator,value:source[index++],lineNumber:lineNumber,lineStart:lineStart,range:[start,index]})}function scanNumericLiteral(){var number,start,ch;if(ch=source[index],assert(isDecimalDigit(ch)||"."===ch,"Numeric literal must start with a decimal digit or a decimal point"),start=index,number="","."!==ch){if(number=source[index++],ch=source[index],"0"===number){if("x"===ch||"X"===ch){for(number+=source[index++];length>index&&(ch=source[index],isHexDigit(ch));)number+=source[index++];return number.length<=2&&throwError({},Messages.UnexpectedToken,"ILLEGAL"),length>index&&(ch=source[index],isIdentifierStart(ch)&&throwError({},Messages.UnexpectedToken,"ILLEGAL")),{type:Token.NumericLiteral,value:parseInt(number,16),lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}if(isOctalDigit(ch)){for(number+=source[index++];length>index&&(ch=source[index],isOctalDigit(ch));)number+=source[index++];return length>index&&(ch=source[index],(isIdentifierStart(ch)||isDecimalDigit(ch))&&throwError({},Messages.UnexpectedToken,"ILLEGAL")),{type:Token.NumericLiteral,value:parseInt(number,8),octal:!0,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}isDecimalDigit(ch)&&throwError({},Messages.UnexpectedToken,"ILLEGAL")}for(;length>index&&(ch=source[index],isDecimalDigit(ch));)number+=source[index++]}if("."===ch)for(number+=source[index++];length>index&&(ch=source[index],isDecimalDigit(ch));)number+=source[index++];if("e"===ch||"E"===ch)if(number+=source[index++],ch=source[index],("+"===ch||"-"===ch)&&(number+=source[index++]),ch=source[index],isDecimalDigit(ch))for(number+=source[index++];length>index&&(ch=source[index],isDecimalDigit(ch));)number+=source[index++];else ch="character "+ch,index>=length&&(ch="<end>"),throwError({},Messages.UnexpectedToken,"ILLEGAL");return length>index&&(ch=source[index],isIdentifierStart(ch)&&throwError({},Messages.UnexpectedToken,"ILLEGAL")),{type:Token.NumericLiteral,value:parseFloat(number),lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}function scanStringLiteral(){var quote,start,ch,code,unescaped,restore,str="",octal=!1;for(quote=source[index],assert("'"===quote||'"'===quote,"String literal must starts with a quote"),start=index,++index;length>index;){if(ch=source[index++],ch===quote){quote="";break}if("\\"===ch)if(ch=source[index++],isLineTerminator(ch))++lineNumber,"\r"===ch&&"\n"===source[index]&&++index;else switch(ch){case"n":str+="\n";break;case"r":str+="\r";break;case"t":str+="	";break;case"u":case"x":restore=index,unescaped=scanHexEscape(ch),unescaped?str+=unescaped:(index=restore,str+=ch);break;case"b":str+="\b";break;case"f":str+="\f";break;case"v":str+="";break;default:isOctalDigit(ch)?(code="01234567".indexOf(ch),0!==code&&(octal=!0),length>index&&isOctalDigit(source[index])&&(octal=!0,code=8*code+"01234567".indexOf(source[index++]),"0123".indexOf(ch)>=0&&length>index&&isOctalDigit(source[index])&&(code=8*code+"01234567".indexOf(source[index++]))),str+=String.fromCharCode(code)):str+=ch}else{if(isLineTerminator(ch))break;str+=ch}}return""!==quote&&throwError({},Messages.UnexpectedToken,"ILLEGAL"),{type:Token.StringLiteral,value:str,octal:octal,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}function scanRegExp(){var str,ch,start,pattern,flags,value,restore,classMarker=!1,terminated=!1;for(buffer=null,skipComment(),start=index,ch=source[index],assert("/"===ch,"Regular expression literal must start with a slash"),str=source[index++];length>index;)if(ch=source[index++],str+=ch,"\\"===ch)ch=source[index++],isLineTerminator(ch)&&throwError({},Messages.UnterminatedRegExp),str+=ch;else if(classMarker)"]"===ch&&(classMarker=!1);else{if("/"===ch){terminated=!0;break}"["===ch?classMarker=!0:isLineTerminator(ch)&&throwError({},Messages.UnterminatedRegExp)}for(terminated||throwError({},Messages.UnterminatedRegExp),pattern=str.substr(1,str.length-2),flags="";length>index&&(ch=source[index],isIdentifierPart(ch));)if(++index,"\\"===ch&&length>index)if(ch=source[index],"u"===ch)if(++index,restore=index,ch=scanHexEscape("u"))for(flags+=ch,str+="\\u";index>restore;++restore)str+=source[restore];else index=restore,flags+="u",str+="\\u";else str+="\\";else flags+=ch,str+=ch;try{value=new RegExp(pattern,flags)}catch(e){throwError({},Messages.InvalidRegExp)}return{literal:str,value:value,range:[start,index]}}function isIdentifierName(token){return token.type===Token.Identifier||token.type===Token.Keyword||token.type===Token.BooleanLiteral||token.type===Token.NullLiteral}function advance(){var ch,token;return skipComment(),index>=length?{type:Token.EOF,lineNumber:lineNumber,lineStart:lineStart,range:[index,index]}:(token=scanPunctuator(),"undefined"!=typeof token?token:(ch=source[index],"'"===ch||'"'===ch?scanStringLiteral():"."===ch||isDecimalDigit(ch)?scanNumericLiteral():(token=scanIdentifier(),"undefined"!=typeof token?token:void throwError({},Messages.UnexpectedToken,"ILLEGAL"))))}function lex(){var token;return buffer?(index=buffer.range[1],lineNumber=buffer.lineNumber,lineStart=buffer.lineStart,token=buffer,buffer=null,token):(buffer=null,advance())}function lookahead(){var pos,line,start;return null!==buffer?buffer:(pos=index,line=lineNumber,start=lineStart,buffer=advance(),index=pos,lineNumber=line,lineStart=start,buffer)}function peekLineTerminator(){var pos,line,start,found;return pos=index,line=lineNumber,start=lineStart,skipComment(),found=lineNumber!==line,index=pos,lineNumber=line,lineStart=start,found}function throwError(token,messageFormat){var error,args=Array.prototype.slice.call(arguments,2),msg=messageFormat.replace(/%(\d)/g,function(whole,index){return args[index]||""});throw"number"==typeof token.lineNumber?(error=new Error("Line "+token.lineNumber+": "+msg),error.index=token.range[0],error.lineNumber=token.lineNumber,error.column=token.range[0]-lineStart+1):(error=new Error("Line "+lineNumber+": "+msg),error.index=index,error.lineNumber=lineNumber,error.column=index-lineStart+1),error}function throwErrorTolerant(){try{throwError.apply(null,arguments)}catch(e){if(!extra.errors)throw e;extra.errors.push(e)}}function throwUnexpected(token){if(token.type===Token.EOF&&throwError(token,Messages.UnexpectedEOS),token.type===Token.NumericLiteral&&throwError(token,Messages.UnexpectedNumber),token.type===Token.StringLiteral&&throwError(token,Messages.UnexpectedString),token.type===Token.Identifier&&throwError(token,Messages.UnexpectedIdentifier),token.type===Token.Keyword){if(isFutureReservedWord(token.value))throwError(token,Messages.UnexpectedReserved);else if(strict&&isStrictModeReservedWord(token.value))return void throwErrorTolerant(token,Messages.StrictReservedWord);throwError(token,Messages.UnexpectedToken,token.value)}throwError(token,Messages.UnexpectedToken,token.value)}function expect(value){var token=lex();(token.type!==Token.Punctuator||token.value!==value)&&throwUnexpected(token)}function expectKeyword(keyword){var token=lex();(token.type!==Token.Keyword||token.value!==keyword)&&throwUnexpected(token)}function match(value){var token=lookahead();return token.type===Token.Punctuator&&token.value===value}function matchKeyword(keyword){var token=lookahead();return token.type===Token.Keyword&&token.value===keyword}function matchAssign(){var token=lookahead(),op=token.value;return token.type!==Token.Punctuator?!1:"="===op||"*="===op||"/="===op||"%="===op||"+="===op||"-="===op||"<<="===op||">>="===op||">>>="===op||"&="===op||"^="===op||"|="===op}function consumeSemicolon(){var token,line;if(";"===source[index])return void lex();if(line=lineNumber,skipComment(),lineNumber===line){if(match(";"))return void lex();token=lookahead(),token.type===Token.EOF||match("}")||throwUnexpected(token)}}function isLeftHandSide(expr){return expr.type===Syntax.Identifier||expr.type===Syntax.MemberExpression}function parseArrayInitialiser(){var elements=[];for(expect("[");!match("]");)match(",")?(lex(),elements.push(null)):(elements.push(parseAssignmentExpression()),match("]")||expect(","));return expect("]"),{type:Syntax.ArrayExpression,elements:elements}}function parsePropertyFunction(param,first){var previousStrict,body;return previousStrict=strict,body=parseFunctionSourceElements(),first&&strict&&isRestrictedWord(param[0].name)&&throwErrorTolerant(first,Messages.StrictParamName),strict=previousStrict,{type:Syntax.FunctionExpression,id:null,params:param,defaults:[],body:body,rest:null,generator:!1,expression:!1}}function parseObjectPropertyKey(){var token=lex();return token.type===Token.StringLiteral||token.type===Token.NumericLiteral?(strict&&token.octal&&throwErrorTolerant(token,Messages.StrictOctalLiteral),createLiteral(token)):{type:Syntax.Identifier,name:token.value}}function parseObjectProperty(){var token,key,id,param;return token=lookahead(),token.type===Token.Identifier?(id=parseObjectPropertyKey(),"get"!==token.value||match(":")?"set"!==token.value||match(":")?(expect(":"),{type:Syntax.Property,key:id,value:parseAssignmentExpression(),kind:"init"}):(key=parseObjectPropertyKey(),expect("("),token=lookahead(),token.type!==Token.Identifier?(expect(")"),throwErrorTolerant(token,Messages.UnexpectedToken,token.value),{type:Syntax.Property,key:key,value:parsePropertyFunction([]),kind:"set"}):(param=[parseVariableIdentifier()],expect(")"),{type:Syntax.Property,key:key,value:parsePropertyFunction(param,token),kind:"set"})):(key=parseObjectPropertyKey(),expect("("),expect(")"),{type:Syntax.Property,key:key,value:parsePropertyFunction([]),kind:"get"})):token.type!==Token.EOF&&token.type!==Token.Punctuator?(key=parseObjectPropertyKey(),expect(":"),{type:Syntax.Property,key:key,value:parseAssignmentExpression(),kind:"init"}):void throwUnexpected(token)}function parseObjectInitialiser(){var property,name,kind,properties=[],map={},toString=String;for(expect("{");!match("}");)property=parseObjectProperty(),name=property.key.type===Syntax.Identifier?property.key.name:toString(property.key.value),kind="init"===property.kind?PropertyKind.Data:"get"===property.kind?PropertyKind.Get:PropertyKind.Set,Object.prototype.hasOwnProperty.call(map,name)?(map[name]===PropertyKind.Data?strict&&kind===PropertyKind.Data?throwErrorTolerant({},Messages.StrictDuplicateProperty):kind!==PropertyKind.Data&&throwErrorTolerant({},Messages.AccessorDataProperty):kind===PropertyKind.Data?throwErrorTolerant({},Messages.AccessorDataProperty):map[name]&kind&&throwErrorTolerant({},Messages.AccessorGetSet),map[name]|=kind):map[name]=kind,properties.push(property),match("}")||expect(",");return expect("}"),{type:Syntax.ObjectExpression,properties:properties}}function parseGroupExpression(){var expr;return expect("("),expr=parseExpression(),expect(")"),expr}function parsePrimaryExpression(){var token=lookahead(),type=token.type;if(type===Token.Identifier)return{type:Syntax.Identifier,name:lex().value};if(type===Token.StringLiteral||type===Token.NumericLiteral)return strict&&token.octal&&throwErrorTolerant(token,Messages.StrictOctalLiteral),createLiteral(lex());if(type===Token.Keyword){if(matchKeyword("this"))return lex(),{type:Syntax.ThisExpression};if(matchKeyword("function"))return parseFunctionExpression()}return type===Token.BooleanLiteral?(lex(),token.value="true"===token.value,createLiteral(token)):type===Token.NullLiteral?(lex(),token.value=null,createLiteral(token)):match("[")?parseArrayInitialiser():match("{")?parseObjectInitialiser():match("(")?parseGroupExpression():match("/")||match("/=")?createLiteral(scanRegExp()):throwUnexpected(lex())}function parseArguments(){var args=[];if(expect("("),!match(")"))for(;length>index&&(args.push(parseAssignmentExpression()),!match(")"));)expect(",");return expect(")"),args}function parseNonComputedProperty(){var token=lex();return isIdentifierName(token)||throwUnexpected(token),{type:Syntax.Identifier,name:token.value}}function parseNonComputedMember(){return expect("."),parseNonComputedProperty()}function parseComputedMember(){var expr;return expect("["),expr=parseExpression(),expect("]"),expr}function parseNewExpression(){var expr;return expectKeyword("new"),expr={type:Syntax.NewExpression,callee:parseLeftHandSideExpression(),arguments:[]},match("(")&&(expr.arguments=parseArguments()),expr}function parseLeftHandSideExpressionAllowCall(){var expr;for(expr=matchKeyword("new")?parseNewExpression():parsePrimaryExpression();match(".")||match("[")||match("(");)expr=match("(")?{type:Syntax.CallExpression,callee:expr,arguments:parseArguments()}:match("[")?{type:Syntax.MemberExpression,computed:!0,object:expr,property:parseComputedMember()}:{type:Syntax.MemberExpression,computed:!1,object:expr,property:parseNonComputedMember()};return expr}function parseLeftHandSideExpression(){var expr;for(expr=matchKeyword("new")?parseNewExpression():parsePrimaryExpression();match(".")||match("[");)expr=match("[")?{type:Syntax.MemberExpression,computed:!0,object:expr,property:parseComputedMember()}:{type:Syntax.MemberExpression,computed:!1,object:expr,property:parseNonComputedMember()};return expr}function parsePostfixExpression(){var token,expr=parseLeftHandSideExpressionAllowCall();return token=lookahead(),token.type!==Token.Punctuator?expr:(!match("++")&&!match("--")||peekLineTerminator()||(strict&&expr.type===Syntax.Identifier&&isRestrictedWord(expr.name)&&throwErrorTolerant({},Messages.StrictLHSPostfix),isLeftHandSide(expr)||throwErrorTolerant({},Messages.InvalidLHSInAssignment),expr={type:Syntax.UpdateExpression,operator:lex().value,argument:expr,prefix:!1}),expr)}function parseUnaryExpression(){var token,expr;return token=lookahead(),token.type!==Token.Punctuator&&token.type!==Token.Keyword?parsePostfixExpression():match("++")||match("--")?(token=lex(),expr=parseUnaryExpression(),strict&&expr.type===Syntax.Identifier&&isRestrictedWord(expr.name)&&throwErrorTolerant({},Messages.StrictLHSPrefix),isLeftHandSide(expr)||throwErrorTolerant({},Messages.InvalidLHSInAssignment),expr={type:Syntax.UpdateExpression,operator:token.value,argument:expr,prefix:!0}):match("+")||match("-")||match("~")||match("!")?expr={type:Syntax.UnaryExpression,operator:lex().value,argument:parseUnaryExpression(),prefix:!0}:matchKeyword("delete")||matchKeyword("void")||matchKeyword("typeof")?(expr={type:Syntax.UnaryExpression,operator:lex().value,argument:parseUnaryExpression(),prefix:!0},strict&&"delete"===expr.operator&&expr.argument.type===Syntax.Identifier&&throwErrorTolerant({},Messages.StrictDelete),expr):parsePostfixExpression()}function parseMultiplicativeExpression(){for(var expr=parseUnaryExpression();match("*")||match("/")||match("%");)expr={type:Syntax.BinaryExpression,operator:lex().value,left:expr,right:parseUnaryExpression()};return expr}function parseAdditiveExpression(){for(var expr=parseMultiplicativeExpression();match("+")||match("-");)expr={type:Syntax.BinaryExpression,operator:lex().value,left:expr,right:parseMultiplicativeExpression()};return expr}function parseShiftExpression(){for(var expr=parseAdditiveExpression();match("<<")||match(">>")||match(">>>");)expr={type:Syntax.BinaryExpression,operator:lex().value,left:expr,right:parseAdditiveExpression()};return expr}function parseRelationalExpression(){var expr,previousAllowIn;for(previousAllowIn=state.allowIn,state.allowIn=!0,expr=parseShiftExpression();match("<")||match(">")||match("<=")||match(">=")||previousAllowIn&&matchKeyword("in")||matchKeyword("instanceof");)expr={type:Syntax.BinaryExpression,operator:lex().value,left:expr,right:parseShiftExpression()};return state.allowIn=previousAllowIn,expr}function parseEqualityExpression(){for(var expr=parseRelationalExpression();match("==")||match("!=")||match("===")||match("!==");)expr={type:Syntax.BinaryExpression,operator:lex().value,left:expr,right:parseRelationalExpression()};return expr}function parseBitwiseANDExpression(){for(var expr=parseEqualityExpression();match("&");)lex(),expr={type:Syntax.BinaryExpression,operator:"&",left:expr,right:parseEqualityExpression()};return expr}function parseBitwiseXORExpression(){for(var expr=parseBitwiseANDExpression();match("^");)lex(),expr={type:Syntax.BinaryExpression,operator:"^",left:expr,right:parseBitwiseANDExpression()};return expr}function parseBitwiseORExpression(){for(var expr=parseBitwiseXORExpression();match("|");)lex(),expr={type:Syntax.BinaryExpression,operator:"|",left:expr,right:parseBitwiseXORExpression()};return expr}function parseLogicalANDExpression(){for(var expr=parseBitwiseORExpression();match("&&");)lex(),expr={type:Syntax.LogicalExpression,operator:"&&",left:expr,right:parseBitwiseORExpression()};return expr}function parseLogicalORExpression(){for(var expr=parseLogicalANDExpression();match("||");)lex(),expr={type:Syntax.LogicalExpression,operator:"||",left:expr,right:parseLogicalANDExpression()};return expr}function parseConditionalExpression(){var expr,previousAllowIn,consequent;return expr=parseLogicalORExpression(),match("?")&&(lex(),previousAllowIn=state.allowIn,state.allowIn=!0,consequent=parseAssignmentExpression(),state.allowIn=previousAllowIn,expect(":"),expr={type:Syntax.ConditionalExpression,test:expr,consequent:consequent,alternate:parseAssignmentExpression()}),expr}function parseAssignmentExpression(){var token,expr;return token=lookahead(),expr=parseConditionalExpression(),matchAssign()&&(isLeftHandSide(expr)||throwErrorTolerant({},Messages.InvalidLHSInAssignment),strict&&expr.type===Syntax.Identifier&&isRestrictedWord(expr.name)&&throwErrorTolerant(token,Messages.StrictLHSAssignment),expr={type:Syntax.AssignmentExpression,operator:lex().value,left:expr,right:parseAssignmentExpression()}),expr}function parseExpression(){var expr=parseAssignmentExpression();if(match(","))for(expr={type:Syntax.SequenceExpression,expressions:[expr]};length>index&&match(",");)lex(),expr.expressions.push(parseAssignmentExpression());return expr}function parseStatementList(){for(var statement,list=[];length>index&&!match("}")&&(statement=parseSourceElement(),"undefined"!=typeof statement);)list.push(statement);return list}function parseBlock(){var block;return expect("{"),block=parseStatementList(),expect("}"),{type:Syntax.BlockStatement,body:block}}function parseVariableIdentifier(){var token=lex();return token.type!==Token.Identifier&&throwUnexpected(token),{type:Syntax.Identifier,name:token.value}}function parseVariableDeclaration(kind){var id=parseVariableIdentifier(),init=null;return strict&&isRestrictedWord(id.name)&&throwErrorTolerant({},Messages.StrictVarName),"const"===kind?(expect("="),init=parseAssignmentExpression()):match("=")&&(lex(),init=parseAssignmentExpression()),{type:Syntax.VariableDeclarator,id:id,init:init}}function parseVariableDeclarationList(kind){var list=[];do{if(list.push(parseVariableDeclaration(kind)),!match(","))break;lex()}while(length>index);return list}function parseVariableStatement(){var declarations;return expectKeyword("var"),declarations=parseVariableDeclarationList(),consumeSemicolon(),{type:Syntax.VariableDeclaration,declarations:declarations,kind:"var"}}function parseConstLetDeclaration(kind){var declarations;return expectKeyword(kind),declarations=parseVariableDeclarationList(kind),consumeSemicolon(),{type:Syntax.VariableDeclaration,declarations:declarations,kind:kind}}function parseEmptyStatement(){return expect(";"),{type:Syntax.EmptyStatement}}function parseExpressionStatement(){var expr=parseExpression();return consumeSemicolon(),{type:Syntax.ExpressionStatement,expression:expr}}function parseIfStatement(){var test,consequent,alternate;return expectKeyword("if"),expect("("),test=parseExpression(),expect(")"),consequent=parseStatement(),matchKeyword("else")?(lex(),alternate=parseStatement()):alternate=null,{type:Syntax.IfStatement,test:test,consequent:consequent,alternate:alternate}}function parseDoWhileStatement(){var body,test,oldInIteration;return expectKeyword("do"),oldInIteration=state.inIteration,state.inIteration=!0,body=parseStatement(),state.inIteration=oldInIteration,expectKeyword("while"),expect("("),test=parseExpression(),expect(")"),match(";")&&lex(),{type:Syntax.DoWhileStatement,body:body,test:test}}function parseWhileStatement(){var test,body,oldInIteration;return expectKeyword("while"),expect("("),test=parseExpression(),expect(")"),oldInIteration=state.inIteration,state.inIteration=!0,body=parseStatement(),state.inIteration=oldInIteration,{type:Syntax.WhileStatement,test:test,body:body}}function parseForVariableDeclaration(){var token=lex();return{type:Syntax.VariableDeclaration,declarations:parseVariableDeclarationList(),kind:token.value}}function parseForStatement(){var init,test,update,left,right,body,oldInIteration;return init=test=update=null,expectKeyword("for"),expect("("),match(";")?lex():(matchKeyword("var")||matchKeyword("let")?(state.allowIn=!1,init=parseForVariableDeclaration(),state.allowIn=!0,1===init.declarations.length&&matchKeyword("in")&&(lex(),left=init,right=parseExpression(),init=null)):(state.allowIn=!1,init=parseExpression(),state.allowIn=!0,matchKeyword("in")&&(isLeftHandSide(init)||throwErrorTolerant({},Messages.InvalidLHSInForIn),lex(),left=init,right=parseExpression(),init=null)),"undefined"==typeof left&&expect(";")),"undefined"==typeof left&&(match(";")||(test=parseExpression()),expect(";"),match(")")||(update=parseExpression())),expect(")"),oldInIteration=state.inIteration,state.inIteration=!0,body=parseStatement(),state.inIteration=oldInIteration,"undefined"==typeof left?{type:Syntax.ForStatement,init:init,test:test,update:update,body:body}:{type:Syntax.ForInStatement,left:left,right:right,body:body,each:!1}}function parseContinueStatement(){var token,label=null;return expectKeyword("continue"),";"===source[index]?(lex(),state.inIteration||throwError({},Messages.IllegalContinue),{type:Syntax.ContinueStatement,label:null}):peekLineTerminator()?(state.inIteration||throwError({},Messages.IllegalContinue),{type:Syntax.ContinueStatement,label:null}):(token=lookahead(),token.type===Token.Identifier&&(label=parseVariableIdentifier(),Object.prototype.hasOwnProperty.call(state.labelSet,label.name)||throwError({},Messages.UnknownLabel,label.name)),consumeSemicolon(),null!==label||state.inIteration||throwError({},Messages.IllegalContinue),{type:Syntax.ContinueStatement,label:label})}function parseBreakStatement(){var token,label=null;return expectKeyword("break"),";"===source[index]?(lex(),state.inIteration||state.inSwitch||throwError({},Messages.IllegalBreak),{type:Syntax.BreakStatement,label:null}):peekLineTerminator()?(state.inIteration||state.inSwitch||throwError({},Messages.IllegalBreak),{type:Syntax.BreakStatement,label:null}):(token=lookahead(),token.type===Token.Identifier&&(label=parseVariableIdentifier(),Object.prototype.hasOwnProperty.call(state.labelSet,label.name)||throwError({},Messages.UnknownLabel,label.name)),consumeSemicolon(),null!==label||state.inIteration||state.inSwitch||throwError({},Messages.IllegalBreak),{type:Syntax.BreakStatement,label:label})}function parseReturnStatement(){var token,argument=null;return expectKeyword("return"),state.inFunctionBody||throwErrorTolerant({},Messages.IllegalReturn)," "===source[index]&&isIdentifierStart(source[index+1])?(argument=parseExpression(),consumeSemicolon(),{type:Syntax.ReturnStatement,argument:argument}):peekLineTerminator()?{type:Syntax.ReturnStatement,argument:null}:(match(";")||(token=lookahead(),match("}")||token.type===Token.EOF||(argument=parseExpression())),consumeSemicolon(),{type:Syntax.ReturnStatement,argument:argument})}function parseWithStatement(){var object,body;return strict&&throwErrorTolerant({},Messages.StrictModeWith),expectKeyword("with"),expect("("),object=parseExpression(),expect(")"),body=parseStatement(),{type:Syntax.WithStatement,object:object,body:body}}function parseSwitchCase(){var test,statement,consequent=[];for(matchKeyword("default")?(lex(),test=null):(expectKeyword("case"),test=parseExpression()),expect(":");length>index&&!(match("}")||matchKeyword("default")||matchKeyword("case"))&&(statement=parseStatement(),"undefined"!=typeof statement);)consequent.push(statement);return{type:Syntax.SwitchCase,test:test,consequent:consequent}}function parseSwitchStatement(){var discriminant,cases,clause,oldInSwitch,defaultFound;if(expectKeyword("switch"),expect("("),discriminant=parseExpression(),expect(")"),expect("{"),cases=[],match("}"))return lex(),{type:Syntax.SwitchStatement,discriminant:discriminant,cases:cases};for(oldInSwitch=state.inSwitch,state.inSwitch=!0,defaultFound=!1;length>index&&!match("}");)clause=parseSwitchCase(),null===clause.test&&(defaultFound&&throwError({},Messages.MultipleDefaultsInSwitch),defaultFound=!0),cases.push(clause);return state.inSwitch=oldInSwitch,expect("}"),{type:Syntax.SwitchStatement,discriminant:discriminant,cases:cases}}function parseThrowStatement(){var argument;return expectKeyword("throw"),peekLineTerminator()&&throwError({},Messages.NewlineAfterThrow),argument=parseExpression(),consumeSemicolon(),{type:Syntax.ThrowStatement,argument:argument}}function parseCatchClause(){var param;return expectKeyword("catch"),expect("("),match(")")&&throwUnexpected(lookahead()),param=parseVariableIdentifier(),strict&&isRestrictedWord(param.name)&&throwErrorTolerant({},Messages.StrictCatchVariable),expect(")"),{type:Syntax.CatchClause,param:param,body:parseBlock()}}function parseTryStatement(){var block,handlers=[],finalizer=null;return expectKeyword("try"),block=parseBlock(),matchKeyword("catch")&&handlers.push(parseCatchClause()),matchKeyword("finally")&&(lex(),finalizer=parseBlock()),0!==handlers.length||finalizer||throwError({},Messages.NoCatchOrFinally),{type:Syntax.TryStatement,block:block,guardedHandlers:[],handlers:handlers,finalizer:finalizer}}function parseDebuggerStatement(){return expectKeyword("debugger"),consumeSemicolon(),{type:Syntax.DebuggerStatement}}function parseStatement(){var expr,labeledBody,token=lookahead();if(token.type===Token.EOF&&throwUnexpected(token),token.type===Token.Punctuator)switch(token.value){case";":return parseEmptyStatement();case"{":return parseBlock();case"(":return parseExpressionStatement()}if(token.type===Token.Keyword)switch(token.value){case"break":return parseBreakStatement();case"continue":return parseContinueStatement();case"debugger":return parseDebuggerStatement();case"do":return parseDoWhileStatement();case"for":return parseForStatement();case"function":return parseFunctionDeclaration();
case"if":return parseIfStatement();case"return":return parseReturnStatement();case"switch":return parseSwitchStatement();case"throw":return parseThrowStatement();case"try":return parseTryStatement();case"var":return parseVariableStatement();case"while":return parseWhileStatement();case"with":return parseWithStatement()}return expr=parseExpression(),expr.type===Syntax.Identifier&&match(":")?(lex(),Object.prototype.hasOwnProperty.call(state.labelSet,expr.name)&&throwError({},Messages.Redeclaration,"Label",expr.name),state.labelSet[expr.name]=!0,labeledBody=parseStatement(),delete state.labelSet[expr.name],{type:Syntax.LabeledStatement,label:expr,body:labeledBody}):(consumeSemicolon(),{type:Syntax.ExpressionStatement,expression:expr})}function parseFunctionSourceElements(){var sourceElement,token,directive,firstRestricted,oldLabelSet,oldInIteration,oldInSwitch,oldInFunctionBody,sourceElements=[];for(expect("{");length>index&&(token=lookahead(),token.type===Token.StringLiteral)&&(sourceElement=parseSourceElement(),sourceElements.push(sourceElement),sourceElement.expression.type===Syntax.Literal);)directive=sliceSource(token.range[0]+1,token.range[1]-1),"use strict"===directive?(strict=!0,firstRestricted&&throwErrorTolerant(firstRestricted,Messages.StrictOctalLiteral)):!firstRestricted&&token.octal&&(firstRestricted=token);for(oldLabelSet=state.labelSet,oldInIteration=state.inIteration,oldInSwitch=state.inSwitch,oldInFunctionBody=state.inFunctionBody,state.labelSet={},state.inIteration=!1,state.inSwitch=!1,state.inFunctionBody=!0;length>index&&!match("}")&&(sourceElement=parseSourceElement(),"undefined"!=typeof sourceElement);)sourceElements.push(sourceElement);return expect("}"),state.labelSet=oldLabelSet,state.inIteration=oldInIteration,state.inSwitch=oldInSwitch,state.inFunctionBody=oldInFunctionBody,{type:Syntax.BlockStatement,body:sourceElements}}function parseFunctionDeclaration(){var id,param,body,token,stricted,firstRestricted,message,previousStrict,paramSet,params=[];if(expectKeyword("function"),token=lookahead(),id=parseVariableIdentifier(),strict?isRestrictedWord(token.value)&&throwErrorTolerant(token,Messages.StrictFunctionName):isRestrictedWord(token.value)?(firstRestricted=token,message=Messages.StrictFunctionName):isStrictModeReservedWord(token.value)&&(firstRestricted=token,message=Messages.StrictReservedWord),expect("("),!match(")"))for(paramSet={};length>index&&(token=lookahead(),param=parseVariableIdentifier(),strict?(isRestrictedWord(token.value)&&(stricted=token,message=Messages.StrictParamName),Object.prototype.hasOwnProperty.call(paramSet,token.value)&&(stricted=token,message=Messages.StrictParamDupe)):firstRestricted||(isRestrictedWord(token.value)?(firstRestricted=token,message=Messages.StrictParamName):isStrictModeReservedWord(token.value)?(firstRestricted=token,message=Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(paramSet,token.value)&&(firstRestricted=token,message=Messages.StrictParamDupe)),params.push(param),paramSet[param.name]=!0,!match(")"));)expect(",");return expect(")"),previousStrict=strict,body=parseFunctionSourceElements(),strict&&firstRestricted&&throwError(firstRestricted,message),strict&&stricted&&throwErrorTolerant(stricted,message),strict=previousStrict,{type:Syntax.FunctionDeclaration,id:id,params:params,defaults:[],body:body,rest:null,generator:!1,expression:!1}}function parseFunctionExpression(){var token,stricted,firstRestricted,message,param,body,previousStrict,paramSet,id=null,params=[];if(expectKeyword("function"),match("(")||(token=lookahead(),id=parseVariableIdentifier(),strict?isRestrictedWord(token.value)&&throwErrorTolerant(token,Messages.StrictFunctionName):isRestrictedWord(token.value)?(firstRestricted=token,message=Messages.StrictFunctionName):isStrictModeReservedWord(token.value)&&(firstRestricted=token,message=Messages.StrictReservedWord)),expect("("),!match(")"))for(paramSet={};length>index&&(token=lookahead(),param=parseVariableIdentifier(),strict?(isRestrictedWord(token.value)&&(stricted=token,message=Messages.StrictParamName),Object.prototype.hasOwnProperty.call(paramSet,token.value)&&(stricted=token,message=Messages.StrictParamDupe)):firstRestricted||(isRestrictedWord(token.value)?(firstRestricted=token,message=Messages.StrictParamName):isStrictModeReservedWord(token.value)?(firstRestricted=token,message=Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(paramSet,token.value)&&(firstRestricted=token,message=Messages.StrictParamDupe)),params.push(param),paramSet[param.name]=!0,!match(")"));)expect(",");return expect(")"),previousStrict=strict,body=parseFunctionSourceElements(),strict&&firstRestricted&&throwError(firstRestricted,message),strict&&stricted&&throwErrorTolerant(stricted,message),strict=previousStrict,{type:Syntax.FunctionExpression,id:id,params:params,defaults:[],body:body,rest:null,generator:!1,expression:!1}}function parseSourceElement(){var token=lookahead();if(token.type===Token.Keyword)switch(token.value){case"const":case"let":return parseConstLetDeclaration(token.value);case"function":return parseFunctionDeclaration();default:return parseStatement()}return token.type!==Token.EOF?parseStatement():void 0}function parseSourceElements(){for(var sourceElement,token,directive,firstRestricted,sourceElements=[];length>index&&(token=lookahead(),token.type===Token.StringLiteral)&&(sourceElement=parseSourceElement(),sourceElements.push(sourceElement),sourceElement.expression.type===Syntax.Literal);)directive=sliceSource(token.range[0]+1,token.range[1]-1),"use strict"===directive?(strict=!0,firstRestricted&&throwErrorTolerant(firstRestricted,Messages.StrictOctalLiteral)):!firstRestricted&&token.octal&&(firstRestricted=token);for(;length>index&&(sourceElement=parseSourceElement(),"undefined"!=typeof sourceElement);)sourceElements.push(sourceElement);return sourceElements}function parseProgram(){var program;return strict=!1,program={type:Syntax.Program,body:parseSourceElements()}}function addComment(type,value,start,end,loc){assert("number"==typeof start,"Comment must have valid position"),extra.comments.length>0&&extra.comments[extra.comments.length-1].range[1]>start||extra.comments.push({type:type,value:value,range:[start,end],loc:loc})}function scanComment(){var comment,ch,loc,start,blockComment,lineComment;for(comment="",blockComment=!1,lineComment=!1;length>index;)if(ch=source[index],lineComment)ch=source[index++],isLineTerminator(ch)?(loc.end={line:lineNumber,column:index-lineStart-1},lineComment=!1,addComment("Line",comment,start,index-1,loc),"\r"===ch&&"\n"===source[index]&&++index,++lineNumber,lineStart=index,comment=""):index>=length?(lineComment=!1,comment+=ch,loc.end={line:lineNumber,column:length-lineStart},addComment("Line",comment,start,length,loc)):comment+=ch;else if(blockComment)isLineTerminator(ch)?("\r"===ch&&"\n"===source[index+1]?(++index,comment+="\r\n"):comment+=ch,++lineNumber,++index,lineStart=index,index>=length&&throwError({},Messages.UnexpectedToken,"ILLEGAL")):(ch=source[index++],index>=length&&throwError({},Messages.UnexpectedToken,"ILLEGAL"),comment+=ch,"*"===ch&&(ch=source[index],"/"===ch&&(comment=comment.substr(0,comment.length-1),blockComment=!1,++index,loc.end={line:lineNumber,column:index-lineStart},addComment("Block",comment,start,index,loc),comment="")));else if("/"===ch)if(ch=source[index+1],"/"===ch)loc={start:{line:lineNumber,column:index-lineStart}},start=index,index+=2,lineComment=!0,index>=length&&(loc.end={line:lineNumber,column:index-lineStart},lineComment=!1,addComment("Line",comment,start,index,loc));else{if("*"!==ch)break;start=index,index+=2,blockComment=!0,loc={start:{line:lineNumber,column:index-lineStart-2}},index>=length&&throwError({},Messages.UnexpectedToken,"ILLEGAL")}else if(isWhiteSpace(ch))++index;else{if(!isLineTerminator(ch))break;++index,"\r"===ch&&"\n"===source[index]&&++index,++lineNumber,lineStart=index}}function filterCommentLocation(){var i,entry,comment,comments=[];for(i=0;i<extra.comments.length;++i)entry=extra.comments[i],comment={type:entry.type,value:entry.value},extra.range&&(comment.range=entry.range),extra.loc&&(comment.loc=entry.loc),comments.push(comment);extra.comments=comments}function collectToken(){var start,loc,token,range,value;return skipComment(),start=index,loc={start:{line:lineNumber,column:index-lineStart}},token=extra.advance(),loc.end={line:lineNumber,column:index-lineStart},token.type!==Token.EOF&&(range=[token.range[0],token.range[1]],value=sliceSource(token.range[0],token.range[1]),extra.tokens.push({type:TokenName[token.type],value:value,range:range,loc:loc})),token}function collectRegex(){var pos,loc,regex,token;return skipComment(),pos=index,loc={start:{line:lineNumber,column:index-lineStart}},regex=extra.scanRegExp(),loc.end={line:lineNumber,column:index-lineStart},extra.tokens.length>0&&(token=extra.tokens[extra.tokens.length-1],token.range[0]===pos&&"Punctuator"===token.type&&("/"===token.value||"/="===token.value)&&extra.tokens.pop()),extra.tokens.push({type:"RegularExpression",value:regex.literal,range:[pos,index],loc:loc}),regex}function filterTokenLocation(){var i,entry,token,tokens=[];for(i=0;i<extra.tokens.length;++i)entry=extra.tokens[i],token={type:entry.type,value:entry.value},extra.range&&(token.range=entry.range),extra.loc&&(token.loc=entry.loc),tokens.push(token);extra.tokens=tokens}function createLiteral(token){return{type:Syntax.Literal,value:token.value}}function createRawLiteral(token){return{type:Syntax.Literal,value:token.value,raw:sliceSource(token.range[0],token.range[1])}}function createLocationMarker(){var marker={};return marker.range=[index,index],marker.loc={start:{line:lineNumber,column:index-lineStart},end:{line:lineNumber,column:index-lineStart}},marker.end=function(){this.range[1]=index,this.loc.end.line=lineNumber,this.loc.end.column=index-lineStart},marker.applyGroup=function(node){extra.range&&(node.groupRange=[this.range[0],this.range[1]]),extra.loc&&(node.groupLoc={start:{line:this.loc.start.line,column:this.loc.start.column},end:{line:this.loc.end.line,column:this.loc.end.column}})},marker.apply=function(node){extra.range&&(node.range=[this.range[0],this.range[1]]),extra.loc&&(node.loc={start:{line:this.loc.start.line,column:this.loc.start.column},end:{line:this.loc.end.line,column:this.loc.end.column}})},marker}function trackGroupExpression(){var marker,expr;return skipComment(),marker=createLocationMarker(),expect("("),expr=parseExpression(),expect(")"),marker.end(),marker.applyGroup(expr),expr}function trackLeftHandSideExpression(){var marker,expr;for(skipComment(),marker=createLocationMarker(),expr=matchKeyword("new")?parseNewExpression():parsePrimaryExpression();match(".")||match("[");)match("[")?(expr={type:Syntax.MemberExpression,computed:!0,object:expr,property:parseComputedMember()},marker.end(),marker.apply(expr)):(expr={type:Syntax.MemberExpression,computed:!1,object:expr,property:parseNonComputedMember()},marker.end(),marker.apply(expr));return expr}function trackLeftHandSideExpressionAllowCall(){var marker,expr;for(skipComment(),marker=createLocationMarker(),expr=matchKeyword("new")?parseNewExpression():parsePrimaryExpression();match(".")||match("[")||match("(");)match("(")?(expr={type:Syntax.CallExpression,callee:expr,arguments:parseArguments()},marker.end(),marker.apply(expr)):match("[")?(expr={type:Syntax.MemberExpression,computed:!0,object:expr,property:parseComputedMember()},marker.end(),marker.apply(expr)):(expr={type:Syntax.MemberExpression,computed:!1,object:expr,property:parseNonComputedMember()},marker.end(),marker.apply(expr));return expr}function filterGroup(node){var n,i,entry;n="[object Array]"===Object.prototype.toString.apply(node)?[]:{};for(i in node)node.hasOwnProperty(i)&&"groupRange"!==i&&"groupLoc"!==i&&(entry=node[i],null===entry||"object"!=typeof entry||entry instanceof RegExp?n[i]=entry:n[i]=filterGroup(entry));return n}function wrapTrackingFunction(range,loc){return function(parseFunction){function isBinary(node){return node.type===Syntax.LogicalExpression||node.type===Syntax.BinaryExpression}function visit(node){var start,end;isBinary(node.left)&&visit(node.left),isBinary(node.right)&&visit(node.right),range&&(node.left.groupRange||node.right.groupRange?(start=node.left.groupRange?node.left.groupRange[0]:node.left.range[0],end=node.right.groupRange?node.right.groupRange[1]:node.right.range[1],node.range=[start,end]):"undefined"==typeof node.range&&(start=node.left.range[0],end=node.right.range[1],node.range=[start,end])),loc&&(node.left.groupLoc||node.right.groupLoc?(start=node.left.groupLoc?node.left.groupLoc.start:node.left.loc.start,end=node.right.groupLoc?node.right.groupLoc.end:node.right.loc.end,node.loc={start:start,end:end}):"undefined"==typeof node.loc&&(node.loc={start:node.left.loc.start,end:node.right.loc.end}))}return function(){var marker,node;return skipComment(),marker=createLocationMarker(),node=parseFunction.apply(null,arguments),marker.end(),range&&"undefined"==typeof node.range&&marker.apply(node),loc&&"undefined"==typeof node.loc&&marker.apply(node),isBinary(node)&&visit(node),node}}}function patch(){var wrapTracking;extra.comments&&(extra.skipComment=skipComment,skipComment=scanComment),extra.raw&&(extra.createLiteral=createLiteral,createLiteral=createRawLiteral),(extra.range||extra.loc)&&(extra.parseGroupExpression=parseGroupExpression,extra.parseLeftHandSideExpression=parseLeftHandSideExpression,extra.parseLeftHandSideExpressionAllowCall=parseLeftHandSideExpressionAllowCall,parseGroupExpression=trackGroupExpression,parseLeftHandSideExpression=trackLeftHandSideExpression,parseLeftHandSideExpressionAllowCall=trackLeftHandSideExpressionAllowCall,wrapTracking=wrapTrackingFunction(extra.range,extra.loc),extra.parseAdditiveExpression=parseAdditiveExpression,extra.parseAssignmentExpression=parseAssignmentExpression,extra.parseBitwiseANDExpression=parseBitwiseANDExpression,extra.parseBitwiseORExpression=parseBitwiseORExpression,extra.parseBitwiseXORExpression=parseBitwiseXORExpression,extra.parseBlock=parseBlock,extra.parseFunctionSourceElements=parseFunctionSourceElements,extra.parseCatchClause=parseCatchClause,extra.parseComputedMember=parseComputedMember,extra.parseConditionalExpression=parseConditionalExpression,extra.parseConstLetDeclaration=parseConstLetDeclaration,extra.parseEqualityExpression=parseEqualityExpression,extra.parseExpression=parseExpression,extra.parseForVariableDeclaration=parseForVariableDeclaration,extra.parseFunctionDeclaration=parseFunctionDeclaration,extra.parseFunctionExpression=parseFunctionExpression,extra.parseLogicalANDExpression=parseLogicalANDExpression,extra.parseLogicalORExpression=parseLogicalORExpression,extra.parseMultiplicativeExpression=parseMultiplicativeExpression,extra.parseNewExpression=parseNewExpression,extra.parseNonComputedProperty=parseNonComputedProperty,extra.parseObjectProperty=parseObjectProperty,extra.parseObjectPropertyKey=parseObjectPropertyKey,extra.parsePostfixExpression=parsePostfixExpression,extra.parsePrimaryExpression=parsePrimaryExpression,extra.parseProgram=parseProgram,extra.parsePropertyFunction=parsePropertyFunction,extra.parseRelationalExpression=parseRelationalExpression,extra.parseStatement=parseStatement,extra.parseShiftExpression=parseShiftExpression,extra.parseSwitchCase=parseSwitchCase,extra.parseUnaryExpression=parseUnaryExpression,extra.parseVariableDeclaration=parseVariableDeclaration,extra.parseVariableIdentifier=parseVariableIdentifier,parseAdditiveExpression=wrapTracking(extra.parseAdditiveExpression),parseAssignmentExpression=wrapTracking(extra.parseAssignmentExpression),parseBitwiseANDExpression=wrapTracking(extra.parseBitwiseANDExpression),parseBitwiseORExpression=wrapTracking(extra.parseBitwiseORExpression),parseBitwiseXORExpression=wrapTracking(extra.parseBitwiseXORExpression),parseBlock=wrapTracking(extra.parseBlock),parseFunctionSourceElements=wrapTracking(extra.parseFunctionSourceElements),parseCatchClause=wrapTracking(extra.parseCatchClause),parseComputedMember=wrapTracking(extra.parseComputedMember),parseConditionalExpression=wrapTracking(extra.parseConditionalExpression),parseConstLetDeclaration=wrapTracking(extra.parseConstLetDeclaration),parseEqualityExpression=wrapTracking(extra.parseEqualityExpression),parseExpression=wrapTracking(extra.parseExpression),parseForVariableDeclaration=wrapTracking(extra.parseForVariableDeclaration),parseFunctionDeclaration=wrapTracking(extra.parseFunctionDeclaration),parseFunctionExpression=wrapTracking(extra.parseFunctionExpression),parseLeftHandSideExpression=wrapTracking(parseLeftHandSideExpression),parseLogicalANDExpression=wrapTracking(extra.parseLogicalANDExpression),parseLogicalORExpression=wrapTracking(extra.parseLogicalORExpression),parseMultiplicativeExpression=wrapTracking(extra.parseMultiplicativeExpression),parseNewExpression=wrapTracking(extra.parseNewExpression),parseNonComputedProperty=wrapTracking(extra.parseNonComputedProperty),parseObjectProperty=wrapTracking(extra.parseObjectProperty),parseObjectPropertyKey=wrapTracking(extra.parseObjectPropertyKey),parsePostfixExpression=wrapTracking(extra.parsePostfixExpression),parsePrimaryExpression=wrapTracking(extra.parsePrimaryExpression),parseProgram=wrapTracking(extra.parseProgram),parsePropertyFunction=wrapTracking(extra.parsePropertyFunction),parseRelationalExpression=wrapTracking(extra.parseRelationalExpression),parseStatement=wrapTracking(extra.parseStatement),parseShiftExpression=wrapTracking(extra.parseShiftExpression),parseSwitchCase=wrapTracking(extra.parseSwitchCase),parseUnaryExpression=wrapTracking(extra.parseUnaryExpression),parseVariableDeclaration=wrapTracking(extra.parseVariableDeclaration),parseVariableIdentifier=wrapTracking(extra.parseVariableIdentifier)),"undefined"!=typeof extra.tokens&&(extra.advance=advance,extra.scanRegExp=scanRegExp,advance=collectToken,scanRegExp=collectRegex)}function unpatch(){"function"==typeof extra.skipComment&&(skipComment=extra.skipComment),extra.raw&&(createLiteral=extra.createLiteral),(extra.range||extra.loc)&&(parseAdditiveExpression=extra.parseAdditiveExpression,parseAssignmentExpression=extra.parseAssignmentExpression,parseBitwiseANDExpression=extra.parseBitwiseANDExpression,parseBitwiseORExpression=extra.parseBitwiseORExpression,parseBitwiseXORExpression=extra.parseBitwiseXORExpression,parseBlock=extra.parseBlock,parseFunctionSourceElements=extra.parseFunctionSourceElements,parseCatchClause=extra.parseCatchClause,parseComputedMember=extra.parseComputedMember,parseConditionalExpression=extra.parseConditionalExpression,parseConstLetDeclaration=extra.parseConstLetDeclaration,parseEqualityExpression=extra.parseEqualityExpression,parseExpression=extra.parseExpression,parseForVariableDeclaration=extra.parseForVariableDeclaration,parseFunctionDeclaration=extra.parseFunctionDeclaration,parseFunctionExpression=extra.parseFunctionExpression,parseGroupExpression=extra.parseGroupExpression,parseLeftHandSideExpression=extra.parseLeftHandSideExpression,parseLeftHandSideExpressionAllowCall=extra.parseLeftHandSideExpressionAllowCall,parseLogicalANDExpression=extra.parseLogicalANDExpression,parseLogicalORExpression=extra.parseLogicalORExpression,parseMultiplicativeExpression=extra.parseMultiplicativeExpression,parseNewExpression=extra.parseNewExpression,parseNonComputedProperty=extra.parseNonComputedProperty,parseObjectProperty=extra.parseObjectProperty,parseObjectPropertyKey=extra.parseObjectPropertyKey,parsePrimaryExpression=extra.parsePrimaryExpression,parsePostfixExpression=extra.parsePostfixExpression,parseProgram=extra.parseProgram,parsePropertyFunction=extra.parsePropertyFunction,parseRelationalExpression=extra.parseRelationalExpression,parseStatement=extra.parseStatement,parseShiftExpression=extra.parseShiftExpression,parseSwitchCase=extra.parseSwitchCase,parseUnaryExpression=extra.parseUnaryExpression,parseVariableDeclaration=extra.parseVariableDeclaration,parseVariableIdentifier=extra.parseVariableIdentifier),"function"==typeof extra.scanRegExp&&(advance=extra.advance,scanRegExp=extra.scanRegExp)}function stringToArray(str){var i,length=str.length,result=[];for(i=0;length>i;++i)result[i]=str.charAt(i);return result}function parse(code,options){var program,toString;toString=String,"string"==typeof code||code instanceof String||(code=toString(code)),source=code,index=0,lineNumber=source.length>0?1:0,lineStart=0,length=source.length,buffer=null,state={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1},extra={},"undefined"!=typeof options&&(extra.range="boolean"==typeof options.range&&options.range,extra.loc="boolean"==typeof options.loc&&options.loc,extra.raw="boolean"==typeof options.raw&&options.raw,"boolean"==typeof options.tokens&&options.tokens&&(extra.tokens=[]),"boolean"==typeof options.comment&&options.comment&&(extra.comments=[]),"boolean"==typeof options.tolerant&&options.tolerant&&(extra.errors=[])),length>0&&"undefined"==typeof source[0]&&(code instanceof String&&(source=code.valueOf()),"undefined"==typeof source[0]&&(source=stringToArray(code))),patch();try{program=parseProgram(),"undefined"!=typeof extra.comments&&(filterCommentLocation(),program.comments=extra.comments),"undefined"!=typeof extra.tokens&&(filterTokenLocation(),program.tokens=extra.tokens),"undefined"!=typeof extra.errors&&(program.errors=extra.errors),(extra.range||extra.loc)&&(program.body=filterGroup(program.body))}catch(e){throw e}finally{unpatch(),extra={}}return program}var Token,TokenName,Syntax,PropertyKind,Messages,Regex,source,strict,index,lineNumber,lineStart,length,buffer,state,extra;Token={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8},TokenName={},TokenName[Token.BooleanLiteral]="Boolean",TokenName[Token.EOF]="<end>",TokenName[Token.Identifier]="Identifier",TokenName[Token.Keyword]="Keyword",TokenName[Token.NullLiteral]="Null",TokenName[Token.NumericLiteral]="Numeric",TokenName[Token.Punctuator]="Punctuator",TokenName[Token.StringLiteral]="String",Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},PropertyKind={Data:1,Get:2,Set:4},Messages={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},Regex={NonAsciiIdentifierStart:new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),NonAsciiIdentifierPart:new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0\u08a2-\u08ac\u08e4-\u08fe\u0900-\u0963\u0966-\u096f\u0971-\u0977\u0979-\u097f\u0981-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d02\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191c\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1d00-\u1de6\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua697\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a\uaa7b\uaa80-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]")
},"undefined"==typeof"esprima"[0]&&(sliceSource=function(from,to){return source.slice(from,to).join("")}),exports.version="1.0.4",exports.parse=parse,exports.Syntax=function(){var name,types={};"function"==typeof Object.create&&(types=Object.create(null));for(name in Syntax)Syntax.hasOwnProperty(name)&&(types[name]=Syntax[name]);return"function"==typeof Object.freeze&&Object.freeze(types),types}()}),function(){var Gallery;window.API.galleries=window.API.initEndpoint({type:"gallery",basePath:"/galleries","class":Gallery=function(){function Gallery(){}return Gallery}(),attributes:["disabled"]})}.call(this),function(){$(document).on("change","#gallery-import-campaigns",function(e){var customTimeSelect,dk;if(customTimeSelect=$("#gallery_custom_time_input select"),e.target.value.length>0){if($(this).parents("#import-tab").find("#pollings .remove").click(),$("#gallery_custom_time_input li[data-value=false]").click(),$("#gallery_custom_time_input li[data-value=false]").click(),angular.element(this).scope()&&(angular.element(this).scope().campaignsSelected=!0),customTimeSelect.length>0)return dk=Dropkick(customTimeSelect[0]),dk.disable(),setTimeout(function(){return Dropkick(customTimeSelect[0]).close()},500)}else if(angular.element(this).scope()&&(angular.element(this).scope().campaignsSelected=!1),customTimeSelect.length>0)return Dropkick(customTimeSelect[0]).disable(!1)}).on("change","#gallery-import-custom-time",function(e){var scope;return scope=angular.element(this).scope(),scope.customTime="true"===e.target.value,scope.$apply()}),$(document).on("turbolinks:load",function(){return $("#gallery-import-campaigns").trigger("change"),$("#gallery-import-campaigns.chzn-select").chosen({}).change(function(e,info){var allSelected,chosen,lastSelected,removed,selected;return chosen=$(this),info.selected?(allSelected=chosen.find("option[selected]"),lastSelected=allSelected[allSelected.length-1],selected=chosen.find("option[value='"+info.selected+"']"),selected.attr("selected",""),selected.insertAfter(lastSelected)):(removed=chosen.find("option[value='"+info.deselected+"']"),removed.attr("selected",!1),removed.removeAttr("selected")),chosen.trigger("chosen:updated")})})}.call(this),!function(e){"undefined"!=typeof exports?e(exports):(window.hljs=e({}),"function"==typeof define&&define.amd&&define("hljs",[],function(){return window.hljs}))}(function(e){function n(e){return e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function t(e){return e.nodeName.toLowerCase()}function r(e,n){var t=e&&e.exec(n);return t&&0==t.index}function a(e){return/^(no-?highlight|plain|text)$/i.test(e)}function i(e){var n,t,r,i=e.className+" ";if(i+=e.parentNode?e.parentNode.className:"",t=/\blang(?:uage)?-([\w-]+)\b/i.exec(i))return w(t[1])?t[1]:"no-highlight";for(i=i.split(/\s+/),n=0,r=i.length;r>n;n++)if(w(i[n])||a(i[n]))return i[n]}function o(e,n){var t,r={};for(t in e)r[t]=e[t];if(n)for(t in n)r[t]=n[t];return r}function u(e){var n=[];return function r(e,a){for(var i=e.firstChild;i;i=i.nextSibling)3==i.nodeType?a+=i.nodeValue.length:1==i.nodeType&&(n.push({event:"start",offset:a,node:i}),a=r(i,a),t(i).match(/br|hr|img|input/)||n.push({event:"stop",offset:a,node:i}));return a}(e,0),n}function c(e,r,a){function i(){return e.length&&r.length?e[0].offset!=r[0].offset?e[0].offset<r[0].offset?e:r:"start"==r[0].event?e:r:e.length?e:r}function o(e){function r(e){return" "+e.nodeName+'="'+n(e.value)+'"'}l+="<"+t(e)+Array.prototype.map.call(e.attributes,r).join("")+">"}function u(e){l+="</"+t(e)+">"}function c(e){("start"==e.event?o:u)(e.node)}for(var s=0,l="",f=[];e.length||r.length;){var g=i();if(l+=n(a.substr(s,g[0].offset-s)),s=g[0].offset,g==e){f.reverse().forEach(u);do c(g.splice(0,1)[0]),g=i();while(g==e&&g.length&&g[0].offset==s);f.reverse().forEach(o)}else"start"==g[0].event?f.push(g[0].node):f.pop(),c(g.splice(0,1)[0])}return l+n(a.substr(s))}function s(e){function n(e){return e&&e.source||e}function t(t,r){return new RegExp(n(t),"m"+(e.cI?"i":"")+(r?"g":""))}function r(a,i){if(!a.compiled){if(a.compiled=!0,a.k=a.k||a.bK,a.k){var u={},c=function(n,t){e.cI&&(t=t.toLowerCase()),t.split(" ").forEach(function(e){var t=e.split("|");u[t[0]]=[n,t[1]?Number(t[1]):1]})};"string"==typeof a.k?c("keyword",a.k):Object.keys(a.k).forEach(function(e){c(e,a.k[e])}),a.k=u}a.lR=t(a.l||/\b\w+\b/,!0),i&&(a.bK&&(a.b="\\b("+a.bK.split(" ").join("|")+")\\b"),a.b||(a.b=/\B|\b/),a.bR=t(a.b),a.e||a.eW||(a.e=/\B|\b/),a.e&&(a.eR=t(a.e)),a.tE=n(a.e)||"",a.eW&&i.tE&&(a.tE+=(a.e?"|":"")+i.tE)),a.i&&(a.iR=t(a.i)),void 0===a.r&&(a.r=1),a.c||(a.c=[]);var s=[];a.c.forEach(function(e){e.v?e.v.forEach(function(n){s.push(o(e,n))}):s.push("self"==e?a:e)}),a.c=s,a.c.forEach(function(e){r(e,a)}),a.starts&&r(a.starts,i);var l=a.c.map(function(e){return e.bK?"\\.?("+e.b+")\\.?":e.b}).concat([a.tE,a.i]).map(n).filter(Boolean);a.t=l.length?t(l.join("|"),!0):{exec:function(){return null}}}}r(e)}function l(e,t,a,i){function o(e,n){for(var t=0;t<n.c.length;t++)if(r(n.c[t].bR,e))return n.c[t]}function u(e,n){if(r(e.eR,n)){for(;e.endsParent&&e.parent;)e=e.parent;return e}return e.eW?u(e.parent,n):void 0}function c(e,n){return!a&&r(n.iR,e)}function g(e,n){var t=N.cI?n[0].toLowerCase():n[0];return e.k.hasOwnProperty(t)&&e.k[t]}function h(e,n,t,r){var a=r?"":E.classPrefix,i='<span class="'+a,o=t?"":"</span>";return i+=e+'">',i+n+o}function p(){if(!L.k)return n(M);var e="",t=0;L.lR.lastIndex=0;for(var r=L.lR.exec(M);r;){e+=n(M.substr(t,r.index-t));var a=g(L,r);a?(B+=a[1],e+=h(a[0],n(r[0]))):e+=n(r[0]),t=L.lR.lastIndex,r=L.lR.exec(M)}return e+n(M.substr(t))}function d(){var e="string"==typeof L.sL;if(e&&!x[L.sL])return n(M);var t=e?l(L.sL,M,!0,y[L.sL]):f(M,L.sL.length?L.sL:void 0);return L.r>0&&(B+=t.r),e&&(y[L.sL]=t.top),h(t.language,t.value,!1,!0)}function b(){return void 0!==L.sL?d():p()}function v(e,t){var r=e.cN?h(e.cN,"",!0):"";e.rB?(k+=r,M=""):e.eB?(k+=n(t)+r,M=""):(k+=r,M=t),L=Object.create(e,{parent:{value:L}})}function m(e,t){if(M+=e,void 0===t)return k+=b(),0;var r=o(t,L);if(r)return k+=b(),v(r,t),r.rB?0:t.length;var a=u(L,t);if(a){var i=L;i.rE||i.eE||(M+=t),k+=b();do L.cN&&(k+="</span>"),B+=L.r,L=L.parent;while(L!=a.parent);return i.eE&&(k+=n(t)),M="",a.starts&&v(a.starts,""),i.rE?0:t.length}if(c(t,L))throw new Error('Illegal lexeme "'+t+'" for mode "'+(L.cN||"<unnamed>")+'"');return M+=t,t.length||1}var N=w(e);if(!N)throw new Error('Unknown language: "'+e+'"');s(N);var R,L=i||N,y={},k="";for(R=L;R!=N;R=R.parent)R.cN&&(k=h(R.cN,"",!0)+k);var M="",B=0;try{for(var C,j,I=0;L.t.lastIndex=I,C=L.t.exec(t),C;)j=m(t.substr(I,C.index-I),C[0]),I=C.index+j;for(m(t.substr(I)),R=L;R.parent;R=R.parent)R.cN&&(k+="</span>");return{r:B,value:k,language:e,top:L}}catch(O){if(-1!=O.message.indexOf("Illegal"))return{r:0,value:n(t)};throw O}}function f(e,t){t=t||E.languages||Object.keys(x);var r={r:0,value:n(e)},a=r;return t.forEach(function(n){if(w(n)){var t=l(n,e,!1);t.language=n,t.r>a.r&&(a=t),t.r>r.r&&(a=r,r=t)}}),a.language&&(r.second_best=a),r}function g(e){return E.tabReplace&&(e=e.replace(/^((<[^>]+>|\t)+)/gm,function(e,n){return n.replace(/\t/g,E.tabReplace)})),E.useBR&&(e=e.replace(/\n/g,"<br>")),e}function h(e,n,t){var r=n?R[n]:t,a=[e.trim()];return e.match(/\bhljs\b/)||a.push("hljs"),-1===e.indexOf(r)&&a.push(r),a.join(" ").trim()}function p(e){var n=i(e);if(!a(n)){var t;E.useBR?(t=document.createElementNS("http://www.w3.org/1999/xhtml","div"),t.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n")):t=e;var r=t.textContent,o=n?l(n,r,!0):f(r),s=u(t);if(s.length){var p=document.createElementNS("http://www.w3.org/1999/xhtml","div");p.innerHTML=o.value,o.value=c(s,u(p),r)}o.value=g(o.value),e.innerHTML=o.value,e.className=h(e.className,n,o.language),e.result={language:o.language,re:o.r},o.second_best&&(e.second_best={language:o.second_best.language,re:o.second_best.r})}}function d(e){E=o(E,e)}function b(){if(!b.called){b.called=!0;var e=document.querySelectorAll("pre code");Array.prototype.forEach.call(e,p)}}function v(){addEventListener("DOMContentLoaded",b,!1),addEventListener("load",b,!1)}function m(n,t){var r=x[n]=t(e);r.aliases&&r.aliases.forEach(function(e){R[e]=n})}function N(){return Object.keys(x)}function w(e){return e=(e||"").toLowerCase(),x[e]||x[R[e]]}var E={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},x={},R={};return e.highlight=l,e.highlightAuto=f,e.fixMarkup=g,e.highlightBlock=p,e.configure=d,e.initHighlighting=b,e.initHighlightingOnLoad=v,e.registerLanguage=m,e.listLanguages=N,e.getLanguage=w,e.inherit=o,e.IR="[a-zA-Z]\\w*",e.UIR="[a-zA-Z_]\\w*",e.NR="\\b\\d+(\\.\\d+)?",e.CNR="(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",e.BNR="\\b(0b[01]+)",e.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",e.BE={b:"\\\\[\\s\\S]",r:0},e.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[e.BE]},e.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[e.BE]},e.PWM={b:/\b(a|an|the|are|I|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|like)\b/},e.C=function(n,t,r){var a=e.inherit({cN:"comment",b:n,e:t,c:[]},r||{});return a.c.push(e.PWM),a.c.push({cN:"doctag",b:"(?:TODO|FIXME|NOTE|BUG|XXX):",r:0}),a},e.CLCM=e.C("//","$"),e.CBCM=e.C("/\\*","\\*/"),e.HCM=e.C("#","$"),e.NM={cN:"number",b:e.NR,r:0},e.CNM={cN:"number",b:e.CNR,r:0},e.BNM={cN:"number",b:e.BNR,r:0},e.CSSNM={cN:"number",b:e.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",r:0},e.RM={cN:"regexp",b:/\//,e:/\/[gimuy]*/,i:/\n/,c:[e.BE,{b:/\[/,e:/\]/,r:0,c:[e.BE]}]},e.TM={cN:"title",b:e.IR,r:0},e.UTM={cN:"title",b:e.UIR,r:0},e}),hljs.registerLanguage("bash",function(e){var t={cN:"variable",v:[{b:/\$[\w\d#@][\w\d_]*/},{b:/\$\{(.*?)}/}]},s={cN:"string",b:/"/,e:/"/,c:[e.BE,t,{cN:"variable",b:/\$\(/,e:/\)/,c:[e.BE]}]},a={cN:"string",b:/'/,e:/'/};return{aliases:["sh","zsh"],l:/-?[a-z\.]+/,k:{keyword:"if then else elif fi for while in do done case esac function",literal:"true false",built_in:"break cd continue eval exec exit export getopts hash pwd readonly return shift test times trap umask unset alias bind builtin caller command declare echo enable help let local logout mapfile printf read readarray source type typeset ulimit unalias set shopt autoload bg bindkey bye cap chdir clone comparguments compcall compctl compdescribe compfiles compgroups compquote comptags comptry compvalues dirs disable disown echotc echoti emulate fc fg float functions getcap getln history integer jobs kill limit log noglob popd print pushd pushln rehash sched setcap setopt stat suspend ttyctl unfunction unhash unlimit unsetopt vared wait whence where which zcompile zformat zftp zle zmodload zparseopts zprof zpty zregexparse zsocket zstyle ztcp",operator:"-ne -eq -lt -gt -f -d -e -s -l -a"},c:[{cN:"shebang",b:/^#![^\n]+sh\s*$/,r:10},{cN:"function",b:/\w[\w\d_]*\s*\(\s*\)\s*\{/,rB:!0,c:[e.inherit(e.TM,{b:/\w[\w\d_]*/})],r:0},e.HCM,e.NM,s,a,t]}}),hljs.registerLanguage("sql",function(e){var t=e.C("--","$");return{cI:!0,i:/[<>{}*]/,c:[{cN:"operator",bK:"begin end start commit rollback savepoint lock alter create drop rename call delete do handler insert load replace select truncate update set show pragma grant merge describe use explain help declare prepare execute deallocate release unlock purge reset change stop analyze cache flush optimize repair kill install uninstall checksum restore check backup revoke",e:/;/,eW:!0,k:{keyword:"abort abs absolute acc acce accep accept access accessed accessible account acos action activate add addtime admin administer advanced advise aes_decrypt aes_encrypt after agent aggregate ali alia alias allocate allow alter always analyze ancillary and any anydata anydataset anyschema anytype apply archive archived archivelog are as asc ascii asin assembly assertion associate asynchronous at atan atn2 attr attri attrib attribu attribut attribute attributes audit authenticated authentication authid authors auto autoallocate autodblink autoextend automatic availability avg backup badfile basicfile before begin beginning benchmark between bfile bfile_base big bigfile bin binary_double binary_float binlog bit_and bit_count bit_length bit_or bit_xor bitmap blob_base block blocksize body both bound buffer_cache buffer_pool build bulk by byte byteordermark bytes c cache caching call calling cancel capacity cascade cascaded case cast catalog category ceil ceiling chain change changed char_base char_length character_length characters characterset charindex charset charsetform charsetid check checksum checksum_agg child choose chr chunk class cleanup clear client clob clob_base clone close cluster_id cluster_probability cluster_set clustering coalesce coercibility col collate collation collect colu colum column column_value columns columns_updated comment commit compact compatibility compiled complete composite_limit compound compress compute concat concat_ws concurrent confirm conn connec connect connect_by_iscycle connect_by_isleaf connect_by_root connect_time connection consider consistent constant constraint constraints constructor container content contents context contributors controlfile conv convert convert_tz corr corr_k corr_s corresponding corruption cos cost count count_big counted covar_pop covar_samp cpu_per_call cpu_per_session crc32 create creation critical cross cube cume_dist curdate current current_date current_time current_timestamp current_user cursor curtime customdatum cycle d data database databases datafile datafiles datalength date_add date_cache date_format date_sub dateadd datediff datefromparts datename datepart datetime2fromparts day day_to_second dayname dayofmonth dayofweek dayofyear days db_role_change dbtimezone ddl deallocate declare decode decompose decrement decrypt deduplicate def defa defau defaul default defaults deferred defi defin define degrees delayed delegate delete delete_all delimited demand dense_rank depth dequeue des_decrypt des_encrypt des_key_file desc descr descri describ describe descriptor deterministic diagnostics difference dimension direct_load directory disable disable_all disallow disassociate discardfile disconnect diskgroup distinct distinctrow distribute distributed div do document domain dotnet double downgrade drop dumpfile duplicate duration e each edition editionable editions element ellipsis else elsif elt empty enable enable_all enclosed encode encoding encrypt end end-exec endian enforced engine engines enqueue enterprise entityescaping eomonth error errors escaped evalname evaluate event eventdata events except exception exceptions exchange exclude excluding execu execut execute exempt exists exit exp expire explain export export_set extended extent external external_1 external_2 externally extract f failed failed_login_attempts failover failure far fast feature_set feature_value fetch field fields file file_name_convert filesystem_like_logging final finish first first_value fixed flash_cache flashback floor flush following follows for forall force form forma format found found_rows freelist freelists freepools fresh from from_base64 from_days ftp full function g general generated get get_format get_lock getdate getutcdate global global_name globally go goto grant grants greatest group group_concat group_id grouping grouping_id groups gtid_subtract guarantee guard handler hash hashkeys having hea head headi headin heading heap help hex hierarchy high high_priority hosts hour http i id ident_current ident_incr ident_seed identified identity idle_time if ifnull ignore iif ilike ilm immediate import in include including increment index indexes indexing indextype indicator indices inet6_aton inet6_ntoa inet_aton inet_ntoa infile initial initialized initially initrans inmemory inner innodb input insert install instance instantiable instr interface interleaved intersect into invalidate invisible is is_free_lock is_ipv4 is_ipv4_compat is_not is_not_null is_used_lock isdate isnull isolation iterate java join json json_exists k keep keep_duplicates key keys kill l language large last last_day last_insert_id last_value lax lcase lead leading least leaves left len lenght length less level levels library like like2 like4 likec limit lines link list listagg little ln load load_file lob lobs local localtime localtimestamp locate locator lock locked log log10 log2 logfile logfiles logging logical logical_reads_per_call logoff logon logs long loop low low_priority lower lpad lrtrim ltrim m main make_set makedate maketime managed management manual map mapping mask master master_pos_wait match matched materialized max maxextents maximize maxinstances maxlen maxlogfiles maxloghistory maxlogmembers maxsize maxtrans md5 measures median medium member memcompress memory merge microsecond mid migration min minextents minimum mining minus minute minvalue missing mod mode model modification modify module monitoring month months mount move movement multiset mutex n name name_const names nan national native natural nav nchar nclob nested never new newline next nextval no no_write_to_binlog noarchivelog noaudit nobadfile nocheck nocompress nocopy nocycle nodelay nodiscardfile noentityescaping noguarantee nokeep nologfile nomapping nomaxvalue nominimize nominvalue nomonitoring none noneditionable nonschema noorder nopr nopro noprom nopromp noprompt norely noresetlogs noreverse normal norowdependencies noschemacheck noswitch not nothing notice notrim novalidate now nowait nth_value nullif nulls num numb numbe nvarchar nvarchar2 object ocicoll ocidate ocidatetime ociduration ociinterval ociloblocator ocinumber ociref ocirefcursor ocirowid ocistring ocitype oct octet_length of off offline offset oid oidindex old on online only opaque open operations operator optimal optimize option optionally or oracle oracle_date oradata ord ordaudio orddicom orddoc order ordimage ordinality ordvideo organization orlany orlvary out outer outfile outline output over overflow overriding p package pad parallel parallel_enable parameters parent parse partial partition partitions pascal passing password password_grace_time password_lock_time password_reuse_max password_reuse_time password_verify_function patch path patindex pctincrease pctthreshold pctused pctversion percent percent_rank percentile_cont percentile_disc performance period period_add period_diff permanent physical pi pipe pipelined pivot pluggable plugin policy position post_transaction pow power pragma prebuilt precedes preceding precision prediction prediction_cost prediction_details prediction_probability prediction_set prepare present preserve prior priority private private_sga privileges procedural procedure procedure_analyze processlist profiles project prompt protection public publishingservername purge quarter query quick quiesce quota quotename radians raise rand range rank raw read reads readsize rebuild record records recover recovery recursive recycle redo reduced ref reference referenced references referencing refresh regexp_like register regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy reject rekey relational relative relaylog release release_lock relies_on relocate rely rem remainder rename repair repeat replace replicate replication required reset resetlogs resize resource respect restore restricted result result_cache resumable resume retention return returning returns reuse reverse revoke right rlike role roles rollback rolling rollup round row row_count rowdependencies rowid rownum rows rtrim rules safe salt sample save savepoint sb1 sb2 sb4 scan schema schemacheck scn scope scroll sdo_georaster sdo_topo_geometry search sec_to_time second section securefile security seed segment select self sequence sequential serializable server servererror session session_user sessions_per_user set sets settings sha sha1 sha2 share shared shared_pool short show shrink shutdown si_averagecolor si_colorhistogram si_featurelist si_positionalcolor si_stillimage si_texture siblings sid sign sin size size_t sizes skip slave sleep smalldatetimefromparts smallfile snapshot some soname sort soundex source space sparse spfile split sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_small_result sql_variant_property sqlcode sqldata sqlerror sqlname sqlstate sqrt square standalone standby start starting startup statement static statistics stats_binomial_test stats_crosstab stats_ks_test stats_mode stats_mw_test stats_one_way_anova stats_t_test_ stats_t_test_indep stats_t_test_one stats_t_test_paired stats_wsr_test status std stddev stddev_pop stddev_samp stdev stop storage store stored str str_to_date straight_join strcmp strict string struct stuff style subdate subpartition subpartitions substitutable substr substring subtime subtring_index subtype success sum suspend switch switchoffset switchover sync synchronous synonym sys sys_xmlagg sysasm sysaux sysdate sysdatetimeoffset sysdba sysoper system system_user sysutcdatetime t table tables tablespace tan tdo template temporary terminated tertiary_weights test than then thread through tier ties time time_format time_zone timediff timefromparts timeout timestamp timestampadd timestampdiff timezone_abbr timezone_minute timezone_region to to_base64 to_date to_days to_seconds todatetimeoffset trace tracking transaction transactional translate translation treat trigger trigger_nestlevel triggers trim truncate try_cast try_convert try_parse type ub1 ub2 ub4 ucase unarchived unbounded uncompress under undo unhex unicode uniform uninstall union unique unix_timestamp unknown unlimited unlock unpivot unrecoverable unsafe unsigned until untrusted unusable unused update updated upgrade upped upper upsert url urowid usable usage use use_stored_outlines user user_data user_resources users using utc_date utc_timestamp uuid uuid_short validate validate_password_strength validation valist value values var var_samp varcharc vari varia variab variabl variable variables variance varp varraw varrawc varray verify version versions view virtual visible void wait wallet warning warnings week weekday weekofyear wellformed when whene whenev wheneve whenever where while whitespace with within without work wrapped xdb xml xmlagg xmlattributes xmlcast xmlcolattval xmlelement xmlexists xmlforest xmlindex xmlnamespaces xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltype xor year year_to_month years yearweek",literal:"true false null",built_in:"array bigint binary bit blob boolean char character date dec decimal float int int8 integer interval number numeric real record serial serial8 smallint text varchar varying void"},c:[{cN:"string",b:"'",e:"'",c:[e.BE,{b:"''"}]},{cN:"string",b:'"',e:'"',c:[e.BE,{b:'""'}]},{cN:"string",b:"`",e:"`",c:[e.BE]},e.CNM,e.CBCM,t]},e.CBCM,t]}}),hljs.registerLanguage("ruby",function(e){var c="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?",r="and false then defined module in return redo if BEGIN retry end for true self when next until do begin unless END rescue nil else break undef not super class case require yield alias while ensure elsif or include attr_reader attr_writer attr_accessor",b={cN:"doctag",b:"@[A-Za-z]+"},a={cN:"value",b:"#<",e:">"},n=[e.C("#","$",{c:[b]}),e.C("^\\=begin","^\\=end",{c:[b],r:10}),e.C("^__END__","\\n$")],s={cN:"subst",b:"#\\{",e:"}",k:r},t={cN:"string",c:[e.BE,s],v:[{b:/'/,e:/'/},{b:/"/,e:/"/},{b:/`/,e:/`/},{b:"%[qQwWx]?\\(",e:"\\)"},{b:"%[qQwWx]?\\[",e:"\\]"},{b:"%[qQwWx]?{",e:"}"},{b:"%[qQwWx]?<",e:">"},{b:"%[qQwWx]?/",e:"/"},{b:"%[qQwWx]?%",e:"%"},{b:"%[qQwWx]?-",e:"-"},{b:"%[qQwWx]?\\|",e:"\\|"},{b:/\B\?(\\\d{1,3}|\\x[A-Fa-f0-9]{1,2}|\\u[A-Fa-f0-9]{4}|\\?\S)\b/}]},i={cN:"params",b:"\\(",e:"\\)",k:r},d=[t,a,{cN:"class",bK:"class module",e:"$|;",i:/=/,c:[e.inherit(e.TM,{b:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?"}),{cN:"inheritance",b:"<\\s*",c:[{cN:"parent",b:"("+e.IR+"::)?"+e.IR}]}].concat(n)},{cN:"function",bK:"def",e:"$|;",c:[e.inherit(e.TM,{b:c}),i].concat(n)},{cN:"constant",b:"(::)?(\\b[A-Z]\\w*(::)?)+",r:0},{cN:"symbol",b:e.UIR+"(\\!|\\?)?:",r:0},{cN:"symbol",b:":",c:[t,{b:c}],r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{cN:"variable",b:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},{b:"("+e.RSR+")\\s*",c:[a,{cN:"regexp",c:[e.BE,s],i:/\n/,v:[{b:"/",e:"/[a-z]*"},{b:"%r{",e:"}[a-z]*"},{b:"%r\\(",e:"\\)[a-z]*"},{b:"%r!",e:"![a-z]*"},{b:"%r\\[",e:"\\][a-z]*"}]}].concat(n),r:0}].concat(n);s.c=d,i.c=d;var o="[>?]>",l="[\\w#]+\\(\\w+\\):\\d+:\\d+>",u="(\\w+-)?\\d+\\.\\d+\\.\\d(p\\d+)?[^>]+>",N=[{b:/^\s*=>/,cN:"status",starts:{e:"$",c:d}},{cN:"prompt",b:"^("+o+"|"+l+"|"+u+")",starts:{e:"$",c:d}}];return{aliases:["rb","gemspec","podspec","thor","irb"],k:r,i:/\/\*/,c:n.concat(N).concat(d)}}),hljs.registerLanguage("apache",function(e){var r={cN:"number",b:"[\\$%]\\d+"};return{aliases:["apacheconf"],cI:!0,c:[e.HCM,{cN:"tag",b:"</?",e:">"},{cN:"keyword",b:/\w+/,r:0,k:{common:"order deny allow setenv rewriterule rewriteengine rewritecond documentroot sethandler errordocument loadmodule options header listen serverroot servername"},starts:{e:/$/,r:0,k:{literal:"on off all"},c:[{cN:"sqbracket",b:"\\s\\[",e:"\\]$"},{cN:"cbracket",b:"[\\$%]\\{",e:"\\}",c:["self",r]},r,e.QSM]}}],i:/\S/}}),hljs.registerLanguage("markdown",function(e){return{aliases:["md","mkdown","mkd"],c:[{cN:"header",v:[{b:"^#{1,6}",e:"$"},{b:"^.+?\\n[=-]{2,}$"}]},{b:"<",e:">",sL:"xml",r:0},{cN:"bullet",b:"^([*+-]|(\\d+\\.))\\s+"},{cN:"strong",b:"[*_]{2}.+?[*_]{2}"},{cN:"emphasis",v:[{b:"\\*.+?\\*"},{b:"_.+?_",r:0}]},{cN:"blockquote",b:"^>\\s+",e:"$"},{cN:"code",v:[{b:"`.+?`"},{b:"^( {4}|  )",e:"$",r:0}]},{cN:"horizontal_rule",b:"^[-\\*]{3,}",e:"$"},{b:"\\[.+?\\][\\(\\[].*?[\\)\\]]",rB:!0,c:[{cN:"link_label",b:"\\[",e:"\\]",eB:!0,rE:!0,r:0},{cN:"link_url",b:"\\]\\(",e:"\\)",eB:!0,eE:!0},{cN:"link_reference",b:"\\]\\[",e:"\\]",eB:!0,eE:!0}],r:10},{b:"^\\[.+\\]:",rB:!0,c:[{cN:"link_reference",b:"\\[",e:"\\]:",eB:!0,eE:!0,starts:{cN:"link_url",e:"$"}}]}]}}),hljs.registerLanguage("http",function(t){return{aliases:["https"],i:"\\S",c:[{cN:"status",b:"^HTTP/[0-9\\.]+",e:"$",c:[{cN:"number",b:"\\b\\d{3}\\b"}]},{cN:"request",b:"^[A-Z]+ (.*?) HTTP/[0-9\\.]+$",rB:!0,e:"$",c:[{cN:"string",b:" ",e:" ",eB:!0,eE:!0}]},{cN:"attribute",b:"^\\w",e:": ",eE:!0,i:"\\n|\\s|=",starts:{cN:"string",e:"$"}},{b:"\\n\\n",starts:{sL:[],eW:!0}}]}}),hljs.registerLanguage("json",function(e){var t={literal:"true false null"},i=[e.QSM,e.CNM],l={cN:"value",e:",",eW:!0,eE:!0,c:i,k:t},c={b:"{",e:"}",c:[{cN:"attribute",b:'\\s*"',e:'"\\s*:\\s*',eB:!0,eE:!0,c:[e.BE],i:"\\n",starts:l}],i:"\\S"},n={b:"\\[",e:"\\]",c:[e.inherit(l,{cN:null})],i:"\\S"};return i.splice(i.length,0,c,n),{c:i,k:t,i:"\\S"}}),hljs.registerLanguage("coffeescript",function(e){var c={keyword:"in if for while finally new do return else break catch instanceof throw try this switch continue typeof delete debugger super then unless until loop of by when and or is isnt not",literal:"true false null undefined yes no on off",built_in:"npm require console print module global window document"},n="[A-Za-z$_][0-9A-Za-z$_]*",r={cN:"subst",b:/#\{/,e:/}/,k:c},t=[e.BNM,e.inherit(e.CNM,{starts:{e:"(\\s*/)?",r:0}}),{cN:"string",v:[{b:/'''/,e:/'''/,c:[e.BE]},{b:/'/,e:/'/,c:[e.BE]},{b:/"""/,e:/"""/,c:[e.BE,r]},{b:/"/,e:/"/,c:[e.BE,r]}]},{cN:"regexp",v:[{b:"///",e:"///",c:[r,e.HCM]},{b:"//[gim]*",r:0},{b:/\/(?![ *])(\\\/|.)*?\/[gim]*(?=\W|$)/}]},{cN:"property",b:"@"+n},{b:"`",e:"`",eB:!0,eE:!0,sL:"javascript"}];r.c=t;var s=e.inherit(e.TM,{b:n}),i="(\\(.*\\))?\\s*\\B[-=]>",o={cN:"params",b:"\\([^\\(]",rB:!0,c:[{b:/\(/,e:/\)/,k:c,c:["self"].concat(t)}]};return{aliases:["coffee","cson","iced"],k:c,i:/\/\*/,c:t.concat([e.C("###","###"),e.HCM,{cN:"function",b:"^\\s*"+n+"\\s*=\\s*"+i,e:"[-=]>",rB:!0,c:[s,o]},{b:/[:\(,=]\s*/,r:0,c:[{cN:"function",b:i,e:"[-=]>",rB:!0,c:[o]}]},{cN:"class",bK:"class",e:"$",i:/[:="\[\]]/,c:[{bK:"extends",eW:!0,i:/[:="\[\]]/,c:[s]},s]},{cN:"attribute",b:n+":",e:":",rB:!0,rE:!0,r:0}])}}),hljs.registerLanguage("xml",function(t){var s="[A-Za-z0-9\\._:-]+",c={b:/<\?(php)?(?!\w)/,e:/\?>/,sL:"php"},e={eW:!0,i:/</,r:0,c:[c,{cN:"attribute",b:s,r:0},{b:"=",r:0,c:[{cN:"value",c:[c],v:[{b:/"/,e:/"/},{b:/'/,e:/'/},{b:/[^\s\/>]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xsl","plist"],cI:!0,c:[{cN:"doctype",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},t.C("<!--","-->",{r:10}),{cN:"cdata",b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{title:"style"},c:[e],starts:{e:"</style>",rE:!0,sL:"css"}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{title:"script"},c:[e],starts:{e:"</script>",rE:!0,sL:["actionscript","javascript","handlebars"]}},c,{cN:"pi",b:/<\?\w+/,e:/\?>/,r:10},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"title",b:/[^ \/><\n\t]+/,r:0},e]}]}}),hljs.registerLanguage("css",function(e){var c="[a-zA-Z-][a-zA-Z0-9_-]*",a={cN:"function",b:c+"\\(",rB:!0,eE:!0,e:"\\("},r={cN:"rule",b:/[A-Z\_\.\-]+\s*:/,rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:/\S/,e:":",eE:!0,starts:{cN:"value",eW:!0,eE:!0,c:[a,e.CSSNM,e.QSM,e.ASM,e.CBCM,{cN:"hexcolor",b:"#[0-9A-Fa-f]+"},{cN:"important",b:"!important"}]}}]};return{cI:!0,i:/[=\/|'\$]/,c:[e.CBCM,{cN:"id",b:/\#[A-Za-z0-9_-]+/},{cN:"class",b:/\.[A-Za-z0-9_-]+/},{cN:"attr_selector",b:/\[/,e:/\]/,i:"$"},{cN:"pseudo",b:/:(:)?[a-zA-Z0-9\_\-\+\(\)"']+/},{cN:"at_rule",b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{cN:"at_rule",b:"@",e:"[{;]",c:[{cN:"keyword",b:/\S+/},{b:/\s/,eW:!0,eE:!0,r:0,c:[a,e.ASM,e.QSM,e.CSSNM]}]},{cN:"tag",b:c,r:0},{cN:"rules",b:"{",e:"}",i:/\S/,c:[e.CBCM,r]}]}}),hljs.registerLanguage("javascript",function(e){return{aliases:["js"],k:{keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},c:[{cN:"pi",r:10,b:/^\s*['"]use (strict|asm)['"]/},e.ASM,e.QSM,{cN:"string",b:"`",e:"`",c:[e.BE,{cN:"subst",b:"\\$\\{",e:"\\}"}]},e.CLCM,e.CBCM,{cN:"number",v:[{b:"\\b(0[bB][01]+)"},{b:"\\b(0[oO][0-7]+)"},{b:e.CNR}],r:0},{b:"("+e.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[e.CLCM,e.CBCM,e.RM,{b:/</,e:/>\s*[);\]]/,r:0,sL:"xml"}],r:0},{cN:"function",bK:"function",e:/\{/,eE:!0,c:[e.inherit(e.TM,{b:/[A-Za-z$_][0-9A-Za-z$_]*/}),{cN:"params",b:/\(/,e:/\)/,eB:!0,eE:!0,c:[e.CLCM,e.CBCM]}],i:/\[|%/},{b:/\$[(.]/},{b:"\\."+e.IR,r:0},{bK:"import",e:"[;$]",k:"import from as",c:[e.ASM,e.QSM]},{cN:"class",bK:"class",e:/[{;=]/,eE:!0,i:/[:"\[\]]/,c:[{bK:"extends"},e.UTM]}],i:/#/}}),function(){window.inits={datePicker:function($e){return $(".datetime-picker",$e).each(function(){var $dp,dt_opts,e,earliest,latest;if($dp=$(this),!$dp.data("datepicker-parsed")){$dp.data("datepicker-parsed",!0),$dp.find(".controls").addClass("input-append"),$dp.find(":input").after('<span class="add-on"><i data-time-icon="fa fa-clock-o" data-date-icon="fa fa-calendar"></i></span>'),earliest=$dp.data("datepicker-earliest"),latest=$dp.data("datepicker-latest"),dt_opts={pick12HourFormat:!0},null!=earliest&&(dt_opts.startDate=new Date(earliest)),null!=latest&&(dt_opts.endDate=new Date(latest));try{return $dp.datetimepicker(dt_opts)}catch(error){return e=error,console&&console.log&&console.log("Error: Could not parse datepicker",e)}}})},adjustKnownHeightElements:function(elem){var setDimensions;return setDimensions=function($t,w,h){var c;return c=parseFloat($t.attr("width"))||$t.parent().width(),!(w>0&&h>0&&c>0)||$t.attr("height")||$t.attr("style")&&$t.attr("style").match(/(width|height):/)?void 0:c>w?$t.height(h).width(w):$t.height(h*(c/w)).width(c)},$("[data-known-width]").each(function(){var $t,h,w;return $t=$(this),w=parseFloat($t.data("known-width")),h=parseFloat($t.data("known-height")),setDimensions($t,w,h)}),$(".github-md img").each(function(){var match;return!$(this).data("known-width")&&(match=($(this).attr("src")||"").match(/\/asset\/(\d+)x(\d+)\//))?setDimensions($(this),parseFloat(match[1]),parseFloat(match[2])):void 0})}},window.initFragment=function(elem){var $e,$errorTabs,path;return $e=$(elem),
$("a[rel=popover], [data-toggle=popover]",$e).popover(),$(".tooltip, a[rel=tooltip], [data-toggle=tooltip]",$e).tooltip(),setTimeout(function(){return $("select",$e).not(".chzn-select, .chzn-select-dynamic, .no-dropkick, [data-dkcacheid]").dropkick()},0),window.inits.datePicker($e),window.inits.adjustKnownHeightElements(),$(".sortable",$e).sortable({handle:".handle",opacity:.9,tolerance:"pointer",update:function(event,ui){return ui.item.parent().trigger("reorder")}}),$(".apply-order",$e).sortable({opacity:.9,tolerance:"pointer",update:function(event,ui){return ui.item.parent().trigger("reorder")}}),$("[data-image-failure]").each(function(){return this.onerror=function(e){return this.onerror=null,$(this).attr("src",$(this).data("image-failure"))}}),$(".chzn-select",$e).chosen().parents(".control-group").addClass("chzn-control-group"),$(".chzn-select-dynamic").chosen({create_option:!0,persistent_create_option:!0,skip_no_results:!0,create_option_text:"Add",placeholder_text_multiple:"Click to add",width:"100%"}).parents(".control-group").addClass("chzn-control-group"),$(".sortable .handle",$e).disableSelection(),$errorTabs=$("form .controls .error",$e).closest(".tab-pane"),$errorTabs.size()>0&&$('[data-toggle=tab][href="#'+$errorTabs.attr("id")+'"]',$e).trigger("click"),window.location.hash&&(path=window.location.hash.replace(/^#\/?/,""),$('[data-toggle=tab][href="#'+path+'"]',$e).trigger("click")),window.initBulkActions&&initBulkActions()},$(document).on("turbolinks:load",function(){return window.initFragment($("body"))}),$(document).on("click","[data-trigger-switch]",function(){var $s;return $s=$(this).parent().find(".switch"),$s.find("label").trigger("mousedown").trigger("mouseup").trigger("click")}).on("click","a[data-video]",function(e){var $source,$this;return e.preventDefault(),$this=$(this),$source=$("<source/>").attr("src","https:"+$this.data("video").replace(/^https?:/,"")).attr("type",$this.data("content-type")),$this.replaceWith($("<video height=200 width=320 controls autoplay/>").append($source))}).on("click","a[data-iframe]",function(e){var $this;return e.preventDefault(),$this=$(this),$this.replaceWith($("<iframe frameborder=0 height=200 width=320/>").attr("src",$(this).data("iframe")))}),$(document).on("turbolinks:load",function(){var sideNavSearch,xhr;return $('[action="/preview"]').submit(function(e){var host,key,url;return e.preventDefault(),url=$(this).find("input[name=url]").val(),key=$(this).find("input[name=key]").val(),host=url.match(/^https/)?"https://gleam.io":"http://assets.out.sh",window.open(host+"/preview.html?url="+encodeURIComponent(url)+(key?"&key="+encodeURIComponent(key):""),"","menubar=no,toolbar=no,resizable=no,location=no,scrollbars=yes,height=800,width=1000")}),sideNavSearch=null,xhr=null,$(".side-nav .search-query").typeahead({source:function(query,process){return xhr&&xhr.abort(),$(".side-nav .search-box").addClass("search-box--searching"),sideNavSearch&&clearTimeout(sideNavSearch),sideNavSearch=setTimeout(function(){return xhr=$.get("/admin/search",{query:query},function(data){return process(data.results),$(".side-nav .search-box").removeClass("search-box--searching")})},200),null},minLength:2,updater:function(item){return window.location.href="/admin/to-search?query="+encodeURIComponent(item),item},matcher:function(item){return!0}})}),$(document).on("turbolinks:load",function(){return Cookies.get("fpr")?void 0:new Fingerprint2({excludeJsFonts:!0,excludeFlashFonts:!0,detectScreenOrientation:!1}).get(function(result,components){return Cookies.set("fpr",result)})})}.call(this),function(){$(document).on("click",".protected-field .add-on",function(e){var $input,$this;return $this=$(this),$input=$this.parent().find("input"),$input.removeAttr("disabled"),$input.removeAttr("placeholder"),$input.removeAttr("data-force-disabled"),$this.closest(".input-append").removeClass("input-append"),$this.remove(),$input.focus()})}.call(this),/*! jQuery UI - v1.10.2 - 2013-04-30
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.selectable.js, jquery.ui.sortable.js
* Copyright 2013 jQuery Foundation and other contributors Licensed MIT */
function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,t.href&&i&&"map"===r.nodeName.toLowerCase()?(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o)):!1):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,r){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,s,r=e(this[0]);r.length&&r[0]!==document;){if(i=r.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(r.css("zIndex"),10),!isNaN(s)&&0!==s))return s;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i="Width"===r?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return"number"!=typeof t?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(i&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var r=n&&"left"===n?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)}})}(jQuery),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var r,n=0;null!=(r=t[n]);n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){return e.isFunction(r)?void(a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var s,t=this._super,n=this._superApply;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()):void(a[t]=r)}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){for(var u,a,i=r.call(arguments,1),s=0,o=i.length;o>s;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u="string"==typeof o,a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);return i?e.isFunction(i[o])&&"_"!==o.charAt(0)?(r=i[o].apply(i,a),r!==i&&r!==t?(f=r&&r.jquery?f.pushStack(r.get()):r,!1):void 0):e.error("no such method '"+o+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var s,o,u,i=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(i={},s=n.split("."),n=s.shift(),s.length){for(o=i[n]=e.widget.extend({},this.options[n]),u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];if(n=s.pop(),r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;"boolean"!=typeof t&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){return t||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?s[o]:o).apply(s,arguments):void 0}"string"!=typeof o&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];if(r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){"string"==typeof i&&(i={effect:i});var o,u=i?i===!0||"number"==typeof i?n:i.effect||n:t;i=i||{},"number"==typeof i&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}})}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.10.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!n){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=1===t.which,s="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return i&&!s&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){function h(e,t,n){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}function d(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,s="scroll"===r||"auto"===r&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:i?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,v,m,g,y,b=e(t.of),w=e.position.getWithinInfo(t.within),E=e.position.getScrollInfo(w),S=(t.collision||"flip").split(" "),x={};return y=d(b),b[0].preventDefault&&(t.at="left top"),l=y.width,v=y.height,m=y.offset,g=e.extend({},m),e.each(["my","at"],function(){var n,r,e=(t[this]||"").split(" ");1===e.length&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),x[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),1===S.length&&(S[1]=S[0]),"right"===t.at[0]?g.left+=l:"center"===t.at[0]&&(g.left+=l/2),"bottom"===t.at[1]?g.top+=v:"center"===t.at[1]&&(g.top+=v/2),n=h(x.at,l,v),g.left+=n[0],g.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),d=p(this,"marginLeft"),y=p(this,"marginTop"),T=f+d+p(this,"marginRight")+E.width,N=c+y+p(this,"marginBottom")+E.height,C=e.extend({},g),k=h(x.my,a.outerWidth(),a.outerHeight());"right"===t.my[0]?C.left-=f:"center"===t.my[0]&&(C.left-=f/2),"bottom"===t.my[1]?C.top-=c:"center"===t.my[1]&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:d,marginTop:y},e.each(["left","top"],function(r,i){e.ui.position[S[r]]&&e.ui.position[S[r]][i](C,{targetWidth:l,targetHeight:v,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:w,elem:a})}),t.using&&(u=function(e){var n=m.left-C.left,s=n+l-f,o=m.top-C.top,u=o+v-c,h={target:{element:b,left:m.left,top:m.top,width:l,height:v},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:0>s?"left":n>0?"right":"center",vertical:0>u?"top":o>0?"bottom":"middle"};f>l&&i(n+s)<l&&(h.horizontal="center"),c>v&&i(o+u)<v&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var f,n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i;t.collisionWidth>s?u>0&&0>=a?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&0>=u?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var f,n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i;t.collisionHeight>s?u>0&&0>=a?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&0>=u?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var p,d,n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,c="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,h=-2*t.offset[0];0>a?(p=e.left+l+c+h+t.collisionWidth-s-r,(0>p||p<i(a))&&(e.left+=l+c+h)):f>0&&(d=e.left-t.collisionPosition.marginLeft+l+c+h-o,(d>0||i(d)<f)&&(e.left+=l+c+h))},top:function(e,t){var d,v,n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l="top"===t.my[1],c=l?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,h="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,p=-2*t.offset[1];0>a?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(0>v||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&11>i,t.innerHTML="",n.removeChild(t)}()}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n,r=this,i=!1,s=!1;for(e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),n=this.element[0];n&&(n=n.parentNode);)n===document&&(i=!0);return i||"original"!==this.options.helper?("invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;if("parent"===i.containment&&(i.containment=this.helper[0].parentNode),("document"===i.containment||"window"===i.containment)&&(this.containment=["document"===i.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"===i.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"===i.containment?0:e(window).scrollLeft())+e("document"===i.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"===i.containment?0:e(window).scrollTop())+(e("document"===i.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||i.containment.constructor===Array)i.containment.constructor===Array&&(this.containment=i.containment);else{if(n=e(i.containment),r=n[0],!r)return;t="hidden"!==e(r).css("overflow"),this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderRightWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderBottomWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}},_convertPositionTo:function(t,n){n||(n=this.position);var r="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i,s,o=this.options,u="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName),f=t.pageX,l=t.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(r=this.relative_container.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(f=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(l=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(f=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(l=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,f=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("ui-draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"ui-sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("ui-draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===r.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("ui-draggable"),i=this;e.each(r.sortables,function(){var s=!1,o=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("ui-draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;
t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("ui-draggable"),r=n.options,i=!1;n.scrollParent[0]!==document&&"HTML"!==n.scrollParent[0].tagName?(r.axis&&"x"===r.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-n.overflowOffset.top<r.scrollSensitivity&&(n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-n.overflowOffset.left<r.scrollSensitivity&&(n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(t.pageY-e(document).scrollTop()<r.scrollSensitivity?i=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(i=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(t.pageX-e(document).scrollLeft()<r.scrollSensitivity?i=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(i=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed)))),i!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=e(this),r=n.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:r.top,left:r.left})})},drag:function(t,n){var r,i,s,o,u,a,f,l,c,h,p=e(this).data("ui-draggable"),d=p.options,v=d.snapTolerance,m=n.offset.left,g=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--)u=p.snapElements[c].left,a=u+p.snapElements[c].width,f=p.snapElements[c].top,l=f+p.snapElements[c].height,m>u-v&&a+v>m&&y>f-v&&l+v>y||m>u-v&&a+v>m&&b>f-v&&l+v>b||g>u-v&&a+v>g&&y>f-v&&l+v>y||g>u-v&&a+v>g&&b>f-v&&l+v>b?("inner"!==d.snapMode&&(r=Math.abs(f-b)<=v,i=Math.abs(l-y)<=v,s=Math.abs(u-g)<=v,o=Math.abs(a-m)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f-p.helperProportions.height,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u-p.helperProportions.width}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left)),h=r||i||s||o,"outer"!==d.snapMode&&(r=Math.abs(f-y)<=v,i=Math.abs(l-b)<=v,s=Math.abs(u-m)<=v,o=Math.abs(a-g)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(r||i||s||o||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=r||i||s||o||h):(p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,n=this.data("ui-draggable").options,r=e.makeArray(e(n.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});r.length&&(t=parseInt(e(r[0]).css("zIndex"),10)||0,e(r).each(function(n){e(this).css("zIndex",t+n)}),this.css("zIndex",t+r.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(e,t){function n(e,t,n){return e>t&&t+n>e}e.widget("ui.droppable",{version:"1.10.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,n=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,n=e.ui.ddmanager.droppables[this.options.scope];t<n.length;t++)n[t]===this&&n.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){"accept"===t&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current,i=!1;return r&&(r.currentItem||r.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope===r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(i=!0,!1):void 0}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,t,r){if(!t.offset)return!1;var i,s,o=(e.positionAbs||e.position.absolute).left,u=o+e.helperProportions.width,a=(e.positionAbs||e.position.absolute).top,f=a+e.helperProportions.height,l=t.offset.left,c=l+t.proportions.width,h=t.offset.top,p=h+t.proportions.height;switch(r){case"fit":return o>=l&&c>=u&&a>=h&&p>=f;case"intersect":return l<o+e.helperProportions.width/2&&u-e.helperProportions.width/2<c&&h<a+e.helperProportions.height/2&&f-e.helperProportions.height/2<p;case"pointer":return i=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,s=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,n(s,h,t.proportions.height)&&n(i,l,t.proportions.width);case"touch":return(a>=h&&p>=a||f>=h&&p>=f||h>a&&f>p)&&(o>=l&&c>=o||u>=l&&c>=u||l>o&&u>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,u=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(r=0;r<s.length;r++)if(!(s[r].options.disabled||t&&!s[r].accept.call(s[r].element[0],t.currentItem||t.element))){for(i=0;i<u.length;i++)if(u[i]===s[r].element[0]){s[r].proportions.height=0;continue e}s[r].visible="none"!==s[r].element.css("display"),s[r].visible&&("mousedown"===o&&s[r]._activate.call(s[r],n),s[r].offset=s[r].element.offset(),s[r].proportions={width:s[r].element[0].offsetWidth,height:s[r].element[0].offsetHeight})}},drop:function(t,n){var r=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var r,i,s,o=e.ui.intersect(t,this,this.options.tolerance),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;u&&(this.options.greedy&&(i=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===i}),s.length&&(r=e.data(s[0],"ui-droppable"),r.greedyChild="isover"===u)),r&&"isover"===u&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[u]=!0,this["isout"===u?"isover":"isout"]=!1,this["isover"===u?"_over":"_out"].call(this,n),r&&"isout"===u&&(r.isout=!1,r.isover=!0,r._over.call(r,n)))}})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,r=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,t.metaKey||t.ctrlKey||(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().addBack().each(function(){var r,i=e.data(this,"selectable-item");return i?(r=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),i.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),i.unselecting=!r,i.selecting=r,i.selected=r,r?n._trigger("selecting",t,{selecting:i.element}):n._trigger("unselecting",t,{unselecting:i.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var n,r=this,i=this.options,s=this.opos[0],o=this.opos[1],u=t.pageX,a=t.pageY;return s>u&&(n=u,u=s,s=n),o>a&&(n=a,a=o,o=n),this.helper.css({left:s,top:o,width:u-s,height:a-o}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),f=!1;n&&n.element!==r.element[0]&&("touch"===i.tolerance?f=!(n.left>u||n.right<s||n.top>a||n.bottom<o):"fit"===i.tolerance&&(f=n.left>s&&n.right<u&&n.top>o&&n.bottom<a),f?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,r._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),r._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&(t.metaKey||t.ctrlKey||n.startselected||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,r._trigger("unselecting",t,{unselecting:n.element})))))}),!1}},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e,t){function n(e,t,n){return e>t&&t+n>e}function r(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||r(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=null,i=!1,s=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,s.widgetName+"-item")===s?(r=e(this),!1):void 0}),e.data(t.target,s.widgetName+"-item")===s&&(r=e(t.target)),r&&(!this.options.handle||n||(e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)}),i))?(this.currentItem=r,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,n,r){var i,s,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(s)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,s,o=this.options,u=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?u=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(u=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?u=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(u=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),u!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(r=this.items[n],i=r.item[0],s=this._intersectsWithPointer(r),s&&r.instance===this.currentContainer&&i!==this.currentItem[0]&&this.placeholder[1===s?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],i):!0)){if(this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var r=this,i=this.placeholder.offset(),s=this.options.axis,o={};s&&"x"!==s||(o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),s&&"y"!==s||(o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&a>r+f&&t+l>s&&o>t+l;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(e){var t="x"===this.options.axis||n(this.positionAbs.top+this.offset.click.top,e.top,e.height),r="y"===this.options.axis||n(this.positionAbs.left+this.offset.click.left,e.left,e.width),i=t&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&"right"===o||"down"===s?2:1:s&&("down"===s?2:1):!1},_intersectsWithSides:function(e){var t=n(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),r=n(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"===s&&r||"left"===s&&!r:i&&("down"===i&&t||"up"===i&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,r,i,s,o=[],u=[],a=this._connectWith();if(a&&t)for(n=a.length-1;n>=0;n--)for(i=e(a[n]),r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&u.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(u.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=u.length-1;n>=0;n--)u[n][0].each(function(){o.push(this)});return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,s,o,u,a,f,l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--)for(i=e(h[n]),r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s));for(n=c.length-1;n>=0;n--)for(o=c[n][1],u=c[n][0],r=0,f=u.length;f>r;r++)a=e(u[r]),a.data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,s;for(n=this.items.length-1;n>=0;n--)r=this.items[n],r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),s=i.offset(),r.left=s.left,r.top=s.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;r.placeholder&&r.placeholder.constructor!==String||(n=r.placeholder,r.placeholder={element:function(){var r=t.currentItem[0].nodeName.toLowerCase(),i=e(t.document[0].createElement(r)).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===r?i.append("<td colspan='99'>&#160;</td>"):"img"===r&&i.attr("src",t.currentItem.attr("src")),n||i.css("visibility","hidden"),i},update:function(e,i){(!n||r.forcePlaceholderSize)&&(i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var i,s,o,u,a,f,l,c,h,p,d=null,v=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(d&&e.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],v=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[v].containerCache.over||(this.containers[v]._trigger("over",t,this._uiHash(this)),this.containers[v].containerCache.over=1);else{for(o=1e4,u=null,p=d.floating||r(this.currentItem),a=p?"left":"top",f=p?"width":"height",l=this.positionAbs[a]+this.offset.click[a],s=this.items.length-1;s>=0;s--)e.contains(this.containers[v].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(!p||n(this.positionAbs.top+this.offset.click.top,this.items[s].top,this.items[s].height))&&(c=this.items[s].item.offset()[a],h=!1,Math.abs(c-l)>Math.abs(c+this.items[s][f]-l)&&(h=!0,c+=this.items[s][f]),Math.abs(c-l)<o&&(o=Math.abs(c-l),u=this.items[s],this.direction=h?"up":"down"));if(!u&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[v])return;u?this._rearrange(t,u,null,!0):this._rearrange(t,null,this.containers[v].element,!0),this._trigger("change",t,this._uiHash()),this.containers[v]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[v],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[v]._trigger("over",t,this._uiHash(this)),this.containers[v].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return r.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),("document"===i.containment||"window"===i.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===i.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===i.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]);
},_convertPositionTo:function(t,n){n||(n=this.position);var r="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,s=t.pageX,o=t.pageY,u="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(e,t){this.reverting=!1;var n,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),/*!
 * jQuery Plugin: Are-You-Sure (Dirty Form Detection)
 * https://github.com/codedance/jquery.AreYouSure/
 *
 * Copyright (c) 2012-2014, Chris Dance and PaperCut Software http://www.papercut.com/
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Author:  chris.dance@papercut.com
 * Version: 1.9.0
 * Date:    13th August 2014
 */
function($){$.fn.areYouSure=function(options){var settings=$.extend({message:"You have unsaved changes!",dirtyClass:"dirty",change:null,silent:!1,addRemoveFieldsMarksDirty:!1,fieldEvents:"change keyup propertychange input",fieldSelector:":input:not(input[type=submit]):not(input[type=button])"},options),getValue=function($field){if($field.hasClass("ays-ignore")||$field.hasClass("aysIgnore")||$field.attr("data-ays-ignore")||void 0===$field.attr("name"))return null;if($field.is(":disabled"))return"ays-disabled";var val,type=$field.attr("type");switch($field.is("select")&&(type="select"),type){case"checkbox":case"radio":val=$field.is(":checked");break;case"select":val="",$field.find("option").each(function(o){var $option=$(this);$option.is(":selected")&&(val+=$option.val())});break;default:val=$field.val()}return val},storeOrigValue=function($field){$field.data("ays-orig",getValue($field))},checkForm=function(evt){var isFieldDirty=function($field){var origValue=$field.data("ays-orig");return void 0===origValue?!1:getValue($field)!=origValue},$form=$(this).is("form")?$(this):$(this).parents("form");if(isFieldDirty($(evt.target)))return void setDirtyStatus($form,!0);if($fields=$form.find(settings.fieldSelector),settings.addRemoveFieldsMarksDirty){var origCount=$form.data("ays-orig-field-count");if(origCount!=$fields.length)return void setDirtyStatus($form,!0)}var isDirty=!1;$fields.each(function(){return $field=$(this),isFieldDirty($field)?(isDirty=!0,!1):void 0}),setDirtyStatus($form,isDirty)},initForm=function($form){var fields=$form.find(settings.fieldSelector);$(fields).each(function(){storeOrigValue($(this))}),$(fields).unbind(settings.fieldEvents,checkForm),$(fields).bind(settings.fieldEvents,checkForm),$form.data("ays-orig-field-count",$(fields).length),setDirtyStatus($form,!1)},setDirtyStatus=function($form,isDirty){var changed=isDirty!=$form.hasClass(settings.dirtyClass);$form.toggleClass(settings.dirtyClass,isDirty),changed&&(settings.change&&settings.change.call($form,$form),isDirty&&$form.trigger("dirty.areYouSure",[$form]),isDirty||$form.trigger("clean.areYouSure",[$form]),$form.trigger("change.areYouSure",[$form]))},rescan=function(){var $form=$(this),fields=$form.find(settings.fieldSelector);$(fields).each(function(){var $field=$(this);$field.data("ays-orig")||(storeOrigValue($field),$field.bind(settings.fieldEvents,checkForm))}),$form.trigger("checkform.areYouSure")},reinitialize=function(){initForm($(this))};if(!settings.silent&&!window.aysUnloadSet){window.aysUnloadSet=!0;var handler=function(){if($dirtyForms=$("form").filter("."+settings.dirtyClass),0!=$dirtyForms.length){if(navigator.userAgent.toLowerCase().match(/msie|chrome/)){if(window.aysHasPrompted)return;window.aysHasPrompted=!0,window.setTimeout(function(){window.aysHasPrompted=!1},900)}return settings.message}};$(window).bind("beforeunload",handler),$(document).on("turbolinks:click",function(){var message=handler();return message?confirm(message):void 0})}return this.each(function(elem){if($(this).is("form")){var $form=$(this);$form.submit(function(){$form.removeClass(settings.dirtyClass)}),$form.bind("reset",function(){setDirtyStatus($form,!1)}),$form.bind("rescan.areYouSure",rescan),$form.bind("reinitialize.areYouSure",reinitialize),$form.bind("checkform.areYouSure",checkForm),initForm($form)}})}}(jQuery),function(factory){var jQuery;if("object"==typeof exports){try{jQuery=require("jquery")}catch(e){}module.exports=factory(window,document,jQuery)}else"function"==typeof define&&define.amd?define([],function(){return factory(window,document,window.jQuery)}):window.Dropkick=factory(window,document,window.jQuery)}(function(window,document,jQuery,undefined){var _docListener,isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isIframe=window.parent!==window.self,isIE=-1!==navigator.appVersion.indexOf("MSIE"),Dropkick=function(sel,opts){var i,dk;if(this===window)return new Dropkick(sel,opts);for("string"==typeof sel&&"#"===sel[0]&&(sel=document.getElementById(sel.substr(1))),i=0;i<Dropkick.uid;i++)if(dk=Dropkick.cache[i],dk instanceof Dropkick&&dk.data.select===sel)return _.extend(dk.data.settings,opts),dk;return sel?sel.length<1?(console.error("You must have options inside your <select>: ",sel),!1):"SELECT"===sel.nodeName?this.init(sel,opts):void 0:(console.error("You must pass a select to DropKick"),!1)},noop=function(){},defaults={initialize:noop,mobile:!1,change:noop,open:noop,close:noop,search:"strict",bubble:!0},_={hasClass:function(elem,classname){var reg=new RegExp("(^|\\s+)"+classname+"(\\s+|$)");return elem&&reg.test(elem.className)},addClass:function(elem,classname){elem&&!_.hasClass(elem,classname)&&(elem.className+=" "+classname)},removeClass:function(elem,classname){var reg=new RegExp("(^|\\s+)"+classname+"(\\s+|$)");elem&&(elem.className=elem.className.replace(reg," "))},toggleClass:function(elem,classname){var fn=_.hasClass(elem,classname)?"remove":"add";_[fn+"Class"](elem,classname)},extend:function(obj){return Array.prototype.slice.call(arguments,1).forEach(function(source){if(source)for(var prop in source)obj[prop]=source[prop]}),obj},offset:function(elem){var box=elem.getBoundingClientRect()||{top:0,left:0},docElem=document.documentElement,offsetTop=isIE?docElem.scrollTop:window.pageYOffset,offsetLeft=isIE?docElem.scrollLeft:window.pageXOffset;return{top:box.top+offsetTop-docElem.clientTop,left:box.left+offsetLeft-docElem.clientLeft}},position:function(elem,relative){for(var pos={top:0,left:0};elem&&elem!==relative;)pos.top+=elem.offsetTop,pos.left+=elem.offsetLeft,elem=elem.parentNode;return pos},closest:function(child,ancestor){for(;child;){if(child===ancestor)return child;child=child.parentNode}return!1},create:function(name,attrs){var a,node=document.createElement(name);attrs||(attrs={});for(a in attrs)attrs.hasOwnProperty(a)&&("innerHTML"===a?node.innerHTML=attrs[a]:node.setAttribute(a,attrs[a]));return node},deferred:function(fn){return function(){var args=arguments,ctx=this;window.setTimeout(function(){fn.apply(ctx,args)},1)}}};return Dropkick.cache={},Dropkick.uid=0,Dropkick.prototype={add:function(elem,before){var text,option,i;"string"==typeof elem&&(text=elem,elem=document.createElement("option"),elem.text=text),"OPTION"===elem.nodeName&&(option=_.create("li",{"class":"dk-option","data-value":elem.value,text:elem.text,innerHTML:elem.innerHTML,role:"option","aria-selected":"false",id:"dk"+this.data.cacheID+"-"+(elem.id||elem.value.replace(" ","-"))}),_.addClass(option,elem.className),this.length+=1,elem.disabled&&(_.addClass(option,"dk-option-disabled"),option.setAttribute("aria-disabled","true")),elem.hidden&&(_.addClass(option,"dk-option-hidden"),option.setAttribute("aria-hidden","true")),this.data.select.add(elem,before),"number"==typeof before&&(before=this.item(before)),i=this.options.indexOf(before),i>-1?(before.parentNode.insertBefore(option,before),this.options.splice(i,0,option)):(this.data.elem.lastChild.appendChild(option),this.options.push(option)),option.addEventListener("mouseover",this),elem.selected&&this.select(i))},item:function(index){return index=0>index?this.options.length+index:index,this.options[index]||null},remove:function(index){var dkOption=this.item(index);dkOption.parentNode.removeChild(dkOption),this.options.splice(index,1),this.data.select.remove(index),this.select(this.data.select.selectedIndex),this.length-=1},init:function(sel,opts){var i,dk=Dropkick.build(sel,"dk"+Dropkick.uid);if(this.data={},this.data.select=sel,this.data.elem=dk.elem,this.data.settings=_.extend({},defaults,opts),this.disabled=sel.disabled,this.form=sel.form,this.length=sel.length,this.multiple=sel.multiple,this.options=dk.options.slice(0),this.selectedIndex=sel.selectedIndex,this.selectedOptions=dk.selected.slice(0),this.value=sel.value,this.data.cacheID=Dropkick.uid,Dropkick.cache[this.data.cacheID]=this,this.data.settings.initialize.call(this),Dropkick.uid+=1,this._changeListener||(sel.addEventListener("change",this),this._changeListener=!0),!isMobile||this.data.settings.mobile){if(sel.parentNode.insertBefore(this.data.elem,sel),sel.setAttribute("data-dkCacheId",this.data.cacheID),this.data.elem.addEventListener("click",this),this.data.elem.addEventListener("keydown",this),this.data.elem.addEventListener("keypress",this),this.form&&this.form.addEventListener("reset",this),!this.multiple)for(i=0;i<this.options.length;i++)this.options[i].addEventListener("mouseover",this);if(!_docListener){if(document.addEventListener("click",Dropkick.onDocClick),isIframe)try{parent.document.addEventListener("click",Dropkick.onDocClick)}catch(e){console&&console.log("Error attaching dropkick listener",e)}_docListener=!0}}return this},close:function(){var i,dk=this.data.elem;if(!this.isOpen||this.multiple)return!1;for(i=0;i<this.options.length;i++)_.removeClass(this.options[i],"dk-option-highlight");dk.lastChild.setAttribute("aria-expanded","false"),_.removeClass(dk.lastChild,"dk-select-options-highlight"),_.removeClass(dk,"dk-select-open-(up|down)"),this.isOpen=!1,this.data.settings.close.call(this)},open:_.deferred(function(){var dropHeight,above,below,direction,dkTop,dkBottom,dk=this.data.elem,dkOptsList=dk.lastChild,supportPageOffset=window.pageXOffset!==undefined,isCSS1Compat="CSS1Compat"===(document.compatMode||""),scrollY=supportPageOffset?window.pageYOffset:isCSS1Compat?document.documentElement.scrollTop:document.body.scrollTop;return dkTop=_.offset(dk).top-scrollY,dkBottom=window.innerHeight-(dkTop+dk.offsetHeight),this.isOpen||this.multiple?!1:(dkOptsList.style.display="block",dropHeight=dkOptsList.offsetHeight,dkOptsList.style.display="",above=dkTop>dropHeight,below=dkBottom>dropHeight,direction=above&&!below?"-up":"-down",this.isOpen=!0,_.addClass(dk,"dk-select-open"+direction),dkOptsList.setAttribute("aria-expanded","true"),this._scrollTo(this.options.length-1),this._scrollTo(this.selectedIndex),void this.data.settings.open.call(this))}),disable:function(elem,disabled){var disabledClass="dk-option-disabled";(0===arguments.length||"boolean"==typeof elem)&&(disabled=elem===undefined?!0:!1,elem=this.data.elem,disabledClass="dk-select-disabled",this.disabled=disabled),disabled===undefined&&(disabled=!0),"number"==typeof elem&&(elem=this.item(elem)),disabled?(elem.setAttribute("aria-disabled",!0),_.addClass(elem,disabledClass)):(elem.setAttribute("aria-disabled",!1),_.removeClass(elem,disabledClass))},hide:function(elem,hidden){var hiddenClass="dk-option-hidden";hidden===undefined&&(hidden=!0),elem=this.item(elem),hidden?(elem.setAttribute("aria-hidden",!0),_.addClass(elem,hiddenClass)):(elem.setAttribute("aria-hidden",!1),_.removeClass(elem,hiddenClass))},select:function(elem,disabled){var i,index,option,combobox,select=this.data.select;if("number"==typeof elem&&(elem=this.item(elem)),"string"==typeof elem)for(i=0;i<this.length;i++)this.options[i].getAttribute("data-value")===elem&&(elem=this.options[i]);if(!elem||"string"==typeof elem||!disabled&&_.hasClass(elem,"dk-option-disabled"))return!1;if(_.hasClass(elem,"dk-option")){if(index=this.options.indexOf(elem),option=select.options[index],this.multiple?(_.toggleClass(elem,"dk-option-selected"),option.selected=!option.selected,_.hasClass(elem,"dk-option-selected")?(elem.setAttribute("aria-selected","true"),this.selectedOptions.push(elem)):(elem.setAttribute("aria-selected","false"),index=this.selectedOptions.indexOf(elem),this.selectedOptions.splice(index,1))):(combobox=this.data.elem.firstChild,this.selectedOptions.length&&(_.removeClass(this.selectedOptions[0],"dk-option-selected"),this.selectedOptions[0].setAttribute("aria-selected","false")),_.addClass(elem,"dk-option-selected"),elem.setAttribute("aria-selected","true"),combobox.setAttribute("aria-activedescendant",elem.id),combobox.className="dk-selected "+option.className,combobox.innerHTML=option.innerHTML,this.selectedOptions[0]=elem,option.selected=!0),this.selectedIndex=select.selectedIndex,this.value=select.value,!disabled){var evt=document.createEvent("HTMLEvents");evt.initEvent("change",this.data.settings.bubble,!0),this.data.select.dispatchEvent(evt)}return elem}},selectOne:function(elem,disabled){return this.reset(!0),this._scrollTo(elem),this.select(elem,disabled)},search:function(pattern,mode){var i,tokens,str,tIndex,sIndex,cScore,tScore,reg,options=this.data.select.options,matches=[];if(!pattern)return this.options;for(mode=mode?mode.toLowerCase():"strict",mode="fuzzy"===mode?2:"partial"===mode?1:0,reg=new RegExp((mode?"":"^")+pattern,"i"),i=0;i<options.length;i++)if(str=options[i].text.toLowerCase(),2==mode){for(tokens=pattern.toLowerCase().split(""),tIndex=sIndex=cScore=tScore=0;sIndex<str.length;)str[sIndex]===tokens[tIndex]?(cScore+=1+cScore,tIndex++):cScore=0,tScore+=cScore,sIndex++;tIndex===tokens.length&&matches.push({e:this.options[i],s:tScore,i:i})}else reg.test(str)&&matches.push(this.options[i]);return 2===mode&&(matches=matches.sort(function(a,b){return b.s-a.s||a.i-b.i}).reduce(function(p,o){return p[p.length]=o.e,p},[])),matches},focus:function(){this.disabled||(this.multiple?this.data.elem:this.data.elem.children[0]).focus()},reset:function(clear){var i,select=this.data.select;for(this.selectedOptions.length=0,i=0;i<select.options.length;i++)select.options[i].selected=!1,_.removeClass(this.options[i],"dk-option-selected"),this.options[i].setAttribute("aria-selected","false"),!clear&&select.options[i].defaultSelected&&this.select(i,!0);this.selectedOptions.length||this.multiple||this.select(0,!0)},refresh:function(){Object.keys(this).length>0&&(!isMobile||this.data.settings.mobile)&&this.dispose().init(this.data.select,this.data.settings)},dispose:function(){return Object.keys(this).length>0&&(!isMobile||this.data.settings.mobile)&&(delete Dropkick.cache[this.data.cacheID],this.data.elem.parentNode.removeChild(this.data.elem),this.data.select.removeAttribute("data-dkCacheId")),this},handleEvent:function(event){if(!this.disabled)switch(event.type){case"click":this._delegate(event);break;case"keydown":this._keyHandler(event);break;case"keypress":this._searchOptions(event);break;case"mouseover":this._highlight(event);break;case"reset":this.reset();break;case"change":this.data.settings.change.call(this)}},_delegate:function(event){var selection,index,firstIndex,lastIndex,target=event.target;if(_.hasClass(target,"dk-option-disabled"))return!1;if(this.multiple){if(_.hasClass(target,"dk-option"))if(selection=window.getSelection(),"Range"===selection.type&&selection.collapseToStart(),event.shiftKey)if(firstIndex=this.options.indexOf(this.selectedOptions[0]),lastIndex=this.options.indexOf(this.selectedOptions[this.selectedOptions.length-1]),index=this.options.indexOf(target),index>firstIndex&&lastIndex>index&&(index=firstIndex),index>lastIndex&&lastIndex>firstIndex&&(lastIndex=firstIndex),this.reset(!0),lastIndex>index)for(;lastIndex+1>index;)this.select(index++);else for(;index>lastIndex-1;)this.select(index--);else event.ctrlKey||event.metaKey?this.select(target):(this.reset(!0),this.select(target))}else this[this.isOpen?"close":"open"](),_.hasClass(target,"dk-option")&&this.select(target)},_highlight:function(event){var i,option=event.target;if(!this.multiple){for(i=0;i<this.options.length;i++)_.removeClass(this.options[i],"dk-option-highlight");_.addClass(this.data.elem.lastChild,"dk-select-options-highlight"),_.addClass(option,"dk-option-highlight")}},_keyHandler:function(event){var lastSelected,j,selected=this.selectedOptions,options=this.options,i=1,keys={tab:9,enter:13,esc:27,space:32,up:38,down:40};switch(event.keyCode){case keys.up:i=-1;case keys.down:if(event.preventDefault(),lastSelected=selected[selected.length-1],_.hasClass(this.data.elem.lastChild,"dk-select-options-highlight"))for(_.removeClass(this.data.elem.lastChild,"dk-select-options-highlight"),j=0;j<options.length;j++)_.hasClass(options[j],"dk-option-highlight")&&(_.removeClass(options[j],"dk-option-highlight"),lastSelected=options[j]);i=options.indexOf(lastSelected)+i,i>options.length-1?i=options.length-1:0>i&&(i=0),this.data.select.options[i].disabled||(this.reset(!0),this.select(i),this._scrollTo(i));break;case keys.space:if(!this.isOpen){event.preventDefault(),this.open();break}case keys.tab:case keys.enter:for(i=0;i<options.length;i++)_.hasClass(options[i],"dk-option-highlight")&&this.select(i);case keys.esc:this.isOpen&&(event.preventDefault(),this.close())}},_searchOptions:function(event){var results,self=this,keyChar=String.fromCharCode(event.keyCode||event.which),waitToReset=function(){self.data.searchTimeout&&clearTimeout(self.data.searchTimeout),self.data.searchTimeout=setTimeout(function(){self.data.searchString=""},1e3)};this.data.searchString===undefined&&(this.data.searchString=""),waitToReset(),this.data.searchString+=keyChar,results=this.search(this.data.searchString,this.data.settings.search),results.length&&(_.hasClass(results[0],"dk-option-disabled")||this.selectOne(results[0]))},_scrollTo:function(option){var optPos,optTop,optBottom,marginTop,marginBottom;return dkOpts=this.data.elem.lastChild,-1===option||"number"!=typeof option&&!option||!this.isOpen&&!this.multiple?!1:("number"==typeof option&&(option=this.item(option)),marginTop=parseInt(getComputedStyle(option).marginTop),marginBottom=parseInt(getComputedStyle(option).marginBottom),optPos=_.position(option,dkOpts).top-marginTop,optTop=optPos-dkOpts.scrollTop,optBottom=optTop+option.offsetHeight+marginTop+marginBottom,void(optBottom>dkOpts.offsetHeight?(optPos=optPos+option.offsetHeight+marginTop+marginBottom,dkOpts.scrollTop=optPos-dkOpts.offsetHeight):0>optTop&&(dkOpts.scrollTop=optPos)))}},Dropkick.build=function(sel,idpre){var selOpt,optList,i,options=[],ret={elem:null,options:[],selected:[]},addOption=function(node){var option,optgroup,optgroupList,i,children=[];switch(node.nodeName){case"OPTION":option=_.create("li",{"class":"dk-option ","data-value":node.value,text:node.text,innerHTML:node.innerHTML,role:"option","aria-selected":"false",id:idpre+"-"+(node.id||node.value.replace(" ","-"))}),_.addClass(option,node.className),node.disabled&&(_.addClass(option,"dk-option-disabled"),option.setAttribute("aria-disabled","true")),node.hidden&&(_.addClass(option,"dk-option-hidden"),option.setAttribute("aria-hidden","true")),node.selected&&(_.addClass(option,"dk-option-selected"),option.setAttribute("aria-selected","true"),ret.selected.push(option)),ret.options.push(this.appendChild(option));break;case"OPTGROUP":for(optgroup=_.create("li",{"class":"dk-optgroup"}),node.label&&optgroup.appendChild(_.create("div",{"class":"dk-optgroup-label",innerHTML:node.label})),optgroupList=_.create("ul",{"class":"dk-optgroup-options"}),i=node.children.length;i--;children.unshift(node.children[i]));children.forEach(addOption,optgroupList),this.appendChild(optgroup).appendChild(optgroupList)}};for(ret.elem=_.create("div",{"class":"dk-select"+(sel.multiple?"-multi":"")}),optList=_.create("ul",{"class":"dk-select-options",id:idpre+"-listbox",role:"listbox"}),sel.disabled&&(_.addClass(ret.elem,"dk-select-disabled"),ret.elem.setAttribute("aria-disabled",!0)),ret.elem.id=idpre+(sel.id?"-"+sel.id:""),_.addClass(ret.elem,sel.className),sel.multiple?(ret.elem.setAttribute("tabindex",sel.getAttribute("tabindex")||"0"),optList.setAttribute("aria-multiselectable","true")):(selOpt=sel.options[sel.selectedIndex],ret.elem.appendChild(_.create("div",{"class":"dk-selected "+selOpt.className,tabindex:sel.tabindex||0,innerHTML:selOpt?selOpt.text:"&nbsp;",id:idpre+"-combobox","aria-live":"assertive","aria-owns":optList.id,role:"combobox"})),optList.setAttribute("aria-expanded","false")),i=sel.children.length;i--;options.unshift(sel.children[i]));return options.forEach(addOption,ret.elem.appendChild(optList)),ret},Dropkick.onDocClick=function(event){var tId,i;if(1!==event.target.nodeType)return!1;null!==(tId=event.target.getAttribute("data-dkcacheid"))&&Dropkick.cache[tId].focus();for(i in Dropkick.cache)_.closest(event.target,Dropkick.cache[i].data.elem)||i===tId||Dropkick.cache[i].disabled||Dropkick.cache[i].close()},jQuery!==undefined&&(jQuery.fn.dropkick=function(){var args=Array.prototype.slice.call(arguments);return jQuery(this).each(function(){args[0]&&"object"!=typeof args[0]?"string"==typeof args[0]&&Dropkick.prototype[args[0]].apply(new Dropkick(this),args.slice(1)):new Dropkick(this,args[0]||{})})}),Dropkick}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.jsyaml=e()}}(function(){return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return r(n?n:e)},l,l.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t){"use strict";function n(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}var i=e("./js-yaml/loader"),r=e("./js-yaml/dumper");t.exports.Type=e("./js-yaml/type"),t.exports.Schema=e("./js-yaml/schema"),t.exports.FAILSAFE_SCHEMA=e("./js-yaml/schema/failsafe"),t.exports.JSON_SCHEMA=e("./js-yaml/schema/json"),t.exports.CORE_SCHEMA=e("./js-yaml/schema/core"),t.exports.DEFAULT_SAFE_SCHEMA=e("./js-yaml/schema/default_safe"),t.exports.DEFAULT_FULL_SCHEMA=e("./js-yaml/schema/default_full"),t.exports.load=i.load,t.exports.loadAll=i.loadAll,t.exports.safeLoad=i.safeLoad,t.exports.safeLoadAll=i.safeLoadAll,t.exports.dump=r.dump,t.exports.safeDump=r.safeDump,t.exports.YAMLException=e("./js-yaml/exception"),t.exports.MINIMAL_SCHEMA=e("./js-yaml/schema/failsafe"),t.exports.SAFE_SCHEMA=e("./js-yaml/schema/default_safe"),t.exports.DEFAULT_SCHEMA=e("./js-yaml/schema/default_full"),t.exports.scan=n("scan"),t.exports.parse=n("parse"),t.exports.compose=n("compose"),t.exports.addConstructor=n("addConstructor")},{"./js-yaml/dumper":3,"./js-yaml/exception":4,"./js-yaml/loader":5,"./js-yaml/schema":7,"./js-yaml/schema/core":8,"./js-yaml/schema/default_full":9,"./js-yaml/schema/default_safe":10,"./js-yaml/schema/failsafe":11,"./js-yaml/schema/json":12,"./js-yaml/type":13}],2:[function(e,t){"use strict";function n(e){return void 0===e||null===e}function i(e){return"object"==typeof e&&null!==e}function r(e){return Array.isArray(e)?e:n(e)?[]:[e]}function o(e,t){var n,i,r,o;if(t)for(o=Object.keys(t),n=0,i=o.length;i>n;n+=1)r=o[n],e[r]=t[r];return e}function a(e,t){var n,i="";for(n=0;t>n;n+=1)i+=e;return i}function s(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e}t.exports.isNothing=n,t.exports.isObject=i,t.exports.toArray=r,t.exports.repeat=a,t.exports.isNegativeZero=s,t.exports.extend=o},{}],3:[function(e,t){"use strict";function n(e,t){var n,i,r,o,a,s,u;if(null===t)return{};for(n={},i=Object.keys(t),r=0,o=i.length;o>r;r+=1)a=i[r],s=String(t[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),u=e.compiledTypeMap[a],u&&C.call(u.styleAliases,s)&&(s=u.styleAliases[s]),n[a]=s;return n}function i(e){var t,n,i;if(t=e.toString(16).toUpperCase(),255>=e)n="x",i=2;else if(65535>=e)n="u",i=4;else{if(!(4294967295>=e))throw new v("code point within a string may not be greater than 0xFFFFFFFF");n="U",i=8}return"\\"+n+x.repeat("0",i-t.length)+t}function r(e){this.schema=e.schema||A,this.indent=Math.max(1,e.indent||2),this.skipInvalid=e.skipInvalid||!1,this.flowLevel=x.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=n(this.schema,e.styles||null),this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function o(e,t){return"\n"+x.repeat(" ",e.indent*t)}function a(e,t){var n,i,r;for(n=0,i=e.implicitTypes.length;i>n;n+=1)if(r=e.implicitTypes[n],r.resolve(t))return!0;return!1}function s(e,t){var n,r,o,s,u,c;for(e.dump="",n=!1,r=0,c=t.charCodeAt(0)||0,-1!==Z.indexOf(t)?n=!0:0===t.length?n=!0:S===c||S===t.charCodeAt(t.length-1)?n=!0:(D===c||q===c)&&(n=!0),o=0,s=t.length;s>o;o+=1)u=t.charCodeAt(o),n||(k===u||j===u||I===u||L===u||R===u||H===u||B===u||V===u||F===u||_===u||M===u||O===u||G===u||Y===u||T===u||E===u||N===u||P===u||U===u||$===u)&&(n=!0),(W[u]||!(u>=32&&126>=u||133===u||u>=160&&55295>=u||u>=57344&&65533>=u||u>=65536&&1114111>=u))&&(e.dump+=t.slice(r,o),e.dump+=W[u]||i(u),r=o+1,n=!0);o>r&&(e.dump+=t.slice(r,o)),!n&&a(e,e.dump)&&(n=!0),n&&(e.dump='"'+e.dump+'"')}function u(e,t,n){var i,r,o="",a=e.tag;for(i=0,r=n.length;r>i;i+=1)d(e,t,n[i],!1,!1)&&(0!==i&&(o+=", "),o+=e.dump);e.tag=a,e.dump="["+o+"]"}function c(e,t,n,i){var r,a,s="",u=e.tag;for(r=0,a=n.length;a>r;r+=1)d(e,t+1,n[r],!0,!0)&&(i&&0===r||(s+=o(e,t)),s+="- "+e.dump);e.tag=u,e.dump=s||"[]"}function l(e,t,n){var i,r,o,a,s,u="",c=e.tag,l=Object.keys(n);for(i=0,r=l.length;r>i;i+=1)s="",0!==i&&(s+=", "),o=l[i],a=n[o],d(e,t,o,!1,!1)&&(e.dump.length>1024&&(s+="? "),s+=e.dump+": ",d(e,t,a,!1,!1)&&(s+=e.dump,u+=s));e.tag=c,e.dump="{"+u+"}"}function p(e,t,n,i){var r,a,s,u,c,l,p="",f=e.tag,h=Object.keys(n);for(r=0,a=h.length;a>r;r+=1)l="",i&&0===r||(l+=o(e,t)),s=h[r],u=n[s],d(e,t+1,s,!0,!0)&&(c=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024,c&&(l+=e.dump&&j===e.dump.charCodeAt(0)?"?":"? "),l+=e.dump,c&&(l+=o(e,t)),d(e,t+1,u,!0,c)&&(l+=e.dump&&j===e.dump.charCodeAt(0)?":":": ",l+=e.dump,p+=l));e.tag=f,e.dump=p||"{}"}function f(e,t,n){var i,r,o,a,s,u;for(r=n?e.explicitTypes:e.implicitTypes,o=0,a=r.length;a>o;o+=1)if(s=r[o],(s.instanceOf||s.predicate)&&(!s.instanceOf||"object"==typeof t&&t instanceof s.instanceOf)&&(!s.predicate||s.predicate(t))){if(e.tag=n?s.tag:"?",s.represent){if(u=e.styleMap[s.tag]||s.defaultStyle,"[object Function]"===w.call(s.represent))i=s.represent(t,u);else{if(!C.call(s.represent,u))throw new v("!<"+s.tag+'> tag resolver accepts not "'+u+'" style');i=s.represent[u](t,u)}e.dump=i}return!0}return!1}function d(e,t,n,i,r){e.tag=null,e.dump=n,f(e,n,!1)||f(e,n,!0);var o=w.call(e.dump);i&&(i=0>e.flowLevel||e.flowLevel>t),(null!==e.tag&&"?"!==e.tag||2!==e.indent&&t>0)&&(r=!1);var a,d,h="[object Object]"===o||"[object Array]"===o;if(h&&(a=e.duplicates.indexOf(n),d=-1!==a),d&&e.usedDuplicates[a])e.dump="*ref_"+a;else{if(h&&d&&!e.usedDuplicates[a]&&(e.usedDuplicates[a]=!0),"[object Object]"===o)i&&0!==Object.keys(e.dump).length?(p(e,t,e.dump,r),d&&(e.dump="&ref_"+a+(0===t?"\n":"")+e.dump)):(l(e,t,e.dump),d&&(e.dump="&ref_"+a+" "+e.dump));else if("[object Array]"===o)i&&0!==e.dump.length?(c(e,t,e.dump,r),d&&(e.dump="&ref_"+a+(0===t?"\n":"")+e.dump)):(u(e,t,e.dump),d&&(e.dump="&ref_"+a+" "+e.dump));else{if("[object String]"!==o){if(e.skipInvalid)return!1;throw new v("unacceptable kind of an object to dump "+o)}"?"!==e.tag&&s(e,e.dump)}null!==e.tag&&"?"!==e.tag&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function h(e,t){var n,i,r=[],o=[];for(m(e,r,o),n=0,i=o.length;i>n;n+=1)t.duplicates.push(r[o[n]]);t.usedDuplicates=new Array(i)}function m(e,t,n){var i,r,o;if(w.call(e),null!==e&&"object"==typeof e)if(r=t.indexOf(e),-1!==r)-1===n.indexOf(r)&&n.push(r);else if(t.push(e),Array.isArray(e))for(r=0,o=e.length;o>r;r+=1)m(e[r],t,n);else for(i=Object.keys(e),r=0,o=i.length;o>r;r+=1)m(e[i[r]],t,n)}function g(e,t){t=t||{};var n=new r(t);return h(e,n),d(n,0,e,!0,!0)?n.dump+"\n":""}function y(e,t){return g(e,x.extend({schema:b},t))}var x=e("./common"),v=e("./exception"),A=e("./schema/default_full"),b=e("./schema/default_safe"),w=Object.prototype.toString,C=Object.prototype.hasOwnProperty,k=9,j=10,I=13,S=32,O=33,E=34,F=35,N=37,_=38,T=39,M=42,L=44,D=45,U=58,Y=62,q=63,P=64,R=91,H=93,$=96,B=123,G=124,V=125,W={};W[0]="\\0",W[7]="\\a",W[8]="\\b",W[9]="\\t",W[10]="\\n",W[11]="\\v",W[12]="\\f",W[13]="\\r",W[27]="\\e",W[34]='\\"',W[92]="\\\\",W[133]="\\N",W[160]="\\_",W[8232]="\\L",W[8233]="\\P";var Z=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];t.exports.dump=g,t.exports.safeDump=y},{"./common":2,"./exception":4,"./schema/default_full":9,"./schema/default_safe":10}],4:[function(e,t){"use strict";function n(e,t){this.name="YAMLException",this.reason=e,this.mark=t,this.message=this.toString(!1)}n.prototype.toString=function(e){var t;return t="JS-YAML: "+(this.reason||"(unknown reason)"),!e&&this.mark&&(t+=" "+this.mark.toString()),t},t.exports=n},{}],5:[function(e,t){"use strict";function n(e){return 10===e||13===e}function i(e){return 9===e||32===e}function r(e){return 9===e||32===e||10===e||13===e}function o(e){return 44===e||91===e||93===e||123===e||125===e}function a(e){var t;return e>=48&&57>=e?e-48:(t=32|e,t>=97&&102>=t?t-97+10:-1)}function s(e){return 120===e?2:117===e?4:85===e?8:0}function u(e){return e>=48&&57>=e?e-48:-1}function c(e){return 48===e?"\x00":97===e?"":98===e?"\b":116===e?" ":9===e?" ":110===e?"\n":118===e?"":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"\x85":95===e?" ":76===e?"\u2028":80===e?"\u2029":""}function l(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||H,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function p(e,t){return new q(t,new P(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function f(e,t){throw p(e,t)}function d(e,t){var n=p(e,t);if(!e.onWarning)throw n;e.onWarning.call(null,n)}function h(e,t,n,i){var r,o,a,s;if(n>t){if(s=e.input.slice(t,n),i)for(r=0,o=s.length;o>r;r+=1)a=s.charCodeAt(r),9===a||a>=32&&1114111>=a||f(e,"expected valid JSON character");e.result+=s}}function m(e,t,n){var i,r,o,a;for(Y.isObject(n)||f(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),o=0,a=i.length;a>o;o+=1)r=i[o],$.call(t,r)||(t[r]=n[r])}function g(e,t,n,i,r){var o,a;if(i=String(i),null===t&&(t={}),"tag:yaml.org,2002:merge"===n)if(Array.isArray(r))for(o=0,a=r.length;a>o;o+=1)m(e,t,r[o]);else m(e,t,r);else t[i]=r;return t}function y(e){var t;t=e.input.charCodeAt(e.position),10===t?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):f(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function x(e,t,r){for(var o=0,a=e.input.charCodeAt(e.position);0!==a;){for(;i(a);)a=e.input.charCodeAt(++e.position);if(t&&35===a)do a=e.input.charCodeAt(++e.position);while(10!==a&&13!==a&&0!==a);if(!n(a))break;for(y(e),a=e.input.charCodeAt(e.position),o++,e.lineIndent=0;32===a;)e.lineIndent++,a=e.input.charCodeAt(++e.position)}return-1!==r&&0!==o&&e.lineIndent<r&&d(e,"deficient indentation"),o}function v(e){var t,n=e.position;return t=e.input.charCodeAt(n),45!==t&&46!==t||e.input.charCodeAt(n+1)!==t||e.input.charCodeAt(n+2)!==t||(n+=3,t=e.input.charCodeAt(n),0!==t&&!r(t))?!1:!0}function A(e,t){1===t?e.result+=" ":t>1&&(e.result+=Y.repeat("\n",t-1))}function b(e,t,a){var s,u,c,l,p,f,d,m,g,y=e.kind,b=e.result;if(g=e.input.charCodeAt(e.position),r(g)||o(g)||35===g||38===g||42===g||33===g||124===g||62===g||39===g||34===g||37===g||64===g||96===g)return!1;if((63===g||45===g)&&(u=e.input.charCodeAt(e.position+1),r(u)||a&&o(u)))return!1;for(e.kind="scalar",e.result="",c=l=e.position,p=!1;0!==g;){if(58===g){if(u=e.input.charCodeAt(e.position+1),r(u)||a&&o(u))break}else if(35===g){if(s=e.input.charCodeAt(e.position-1),r(s))break}else{if(e.position===e.lineStart&&v(e)||a&&o(g))break;if(n(g)){if(f=e.line,d=e.lineStart,m=e.lineIndent,x(e,!1,-1),e.lineIndent>=t){p=!0,g=e.input.charCodeAt(e.position);continue}e.position=l,e.line=f,e.lineStart=d,e.lineIndent=m;break}}p&&(h(e,c,l,!1),A(e,e.line-f),c=l=e.position,p=!1),i(g)||(l=e.position+1),g=e.input.charCodeAt(++e.position)}return h(e,c,l,!1),e.result?!0:(e.kind=y,e.result=b,!1)}function w(e,t){var i,r,o;if(i=e.input.charCodeAt(e.position),39!==i)return!1;for(e.kind="scalar",e.result="",e.position++,r=o=e.position;0!==(i=e.input.charCodeAt(e.position));)if(39===i){if(h(e,r,e.position,!0),i=e.input.charCodeAt(++e.position),39!==i)return!0;r=o=e.position,e.position++}else n(i)?(h(e,r,o,!0),A(e,x(e,!1,t)),r=o=e.position):e.position===e.lineStart&&v(e)?f(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);f(e,"unexpected end of the stream within a single quoted scalar")}function C(e,t){var i,r,o,u,c,l;if(l=e.input.charCodeAt(e.position),34!==l)return!1;for(e.kind="scalar",e.result="",e.position++,i=r=e.position;0!==(l=e.input.charCodeAt(e.position));){if(34===l)return h(e,i,e.position,!0),
e.position++,!0;if(92===l){if(h(e,i,e.position,!0),l=e.input.charCodeAt(++e.position),n(l))x(e,!1,t);else if(256>l&&nt[l])e.result+=it[l],e.position++;else if((c=s(l))>0){for(o=c,u=0;o>0;o--)l=e.input.charCodeAt(++e.position),(c=a(l))>=0?u=(u<<4)+c:f(e,"expected hexadecimal character");e.result+=String.fromCharCode(u),e.position++}else f(e,"unknown escape sequence");i=r=e.position}else n(l)?(h(e,i,r,!0),A(e,x(e,!1,t)),i=r=e.position):e.position===e.lineStart&&v(e)?f(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}f(e,"unexpected end of the stream within a double quoted scalar")}function k(e,t){var n,i,o,a,s,u,c,l,p,d,h,m=!0,y=e.tag,v=e.anchor;if(h=e.input.charCodeAt(e.position),91===h)a=93,c=!1,i=[];else{if(123!==h)return!1;a=125,c=!0,i={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=i),h=e.input.charCodeAt(++e.position);0!==h;){if(x(e,!0,t),h=e.input.charCodeAt(e.position),h===a)return e.position++,e.tag=y,e.anchor=v,e.kind=c?"mapping":"sequence",e.result=i,!0;m||f(e,"missed comma between flow collection entries"),p=l=d=null,s=u=!1,63===h&&(o=e.input.charCodeAt(e.position+1),r(o)&&(s=u=!0,e.position++,x(e,!0,t))),n=e.line,N(e,t,B,!1,!0),p=e.tag,l=e.result,x(e,!0,t),h=e.input.charCodeAt(e.position),!u&&e.line!==n||58!==h||(s=!0,h=e.input.charCodeAt(++e.position),x(e,!0,t),N(e,t,B,!1,!0),d=e.result),c?g(e,i,p,l,d):i.push(s?g(e,null,p,l,d):l),x(e,!0,t),h=e.input.charCodeAt(e.position),44===h?(m=!0,h=e.input.charCodeAt(++e.position)):m=!1}f(e,"unexpected end of the stream within a flow collection")}function j(e,t){var r,o,a,s,c=Z,l=!1,p=t,d=0,m=!1;if(s=e.input.charCodeAt(e.position),124===s)o=!1;else{if(62!==s)return!1;o=!0}for(e.kind="scalar",e.result="";0!==s;)if(s=e.input.charCodeAt(++e.position),43===s||45===s)Z===c?c=43===s?z:J:f(e,"repeat of a chomping mode identifier");else{if(!((a=u(s))>=0))break;0===a?f(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?f(e,"repeat of an indentation width identifier"):(p=t+a-1,l=!0)}if(i(s)){do s=e.input.charCodeAt(++e.position);while(i(s));if(35===s)do s=e.input.charCodeAt(++e.position);while(!n(s)&&0!==s)}for(;0!==s;){for(y(e),e.lineIndent=0,s=e.input.charCodeAt(e.position);(!l||e.lineIndent<p)&&32===s;)e.lineIndent++,s=e.input.charCodeAt(++e.position);if(!l&&e.lineIndent>p&&(p=e.lineIndent),n(s))d++;else{if(e.lineIndent<p){c===z?e.result+=Y.repeat("\n",d):c===Z&&l&&(e.result+="\n");break}for(o?i(s)?(m=!0,e.result+=Y.repeat("\n",d+1)):m?(m=!1,e.result+=Y.repeat("\n",d+1)):0===d?l&&(e.result+=" "):e.result+=Y.repeat("\n",d):e.result+=l?Y.repeat("\n",d+1):Y.repeat("\n",d),l=!0,d=0,r=e.position;!n(s)&&0!==s;)s=e.input.charCodeAt(++e.position);h(e,r,e.position,!1)}}return!0}function I(e,t){var n,i,o,a=e.tag,s=e.anchor,u=[],c=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=u),o=e.input.charCodeAt(e.position);0!==o&&45===o&&(i=e.input.charCodeAt(e.position+1),r(i));)if(c=!0,e.position++,x(e,!0,-1)&&e.lineIndent<=t)u.push(null),o=e.input.charCodeAt(e.position);else if(n=e.line,N(e,t,V,!1,!0),u.push(e.result),x(e,!0,-1),o=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==o)f(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return c?(e.tag=a,e.anchor=s,e.kind="sequence",e.result=u,!0):!1}function S(e,t,n){var o,a,s,u,c=e.tag,l=e.anchor,p={},d=null,h=null,m=null,y=!1,v=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=p),u=e.input.charCodeAt(e.position);0!==u;){if(o=e.input.charCodeAt(e.position+1),s=e.line,63!==u&&58!==u||!r(o)){if(!N(e,n,G,!1,!0))break;if(e.line===s){for(u=e.input.charCodeAt(e.position);i(u);)u=e.input.charCodeAt(++e.position);if(58===u)u=e.input.charCodeAt(++e.position),r(u)||f(e,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(g(e,p,d,h,null),d=h=m=null),v=!0,y=!1,a=!1,d=e.tag,h=e.result;else{if(!v)return e.tag=c,e.anchor=l,!0;f(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!v)return e.tag=c,e.anchor=l,!0;f(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===u?(y&&(g(e,p,d,h,null),d=h=m=null),v=!0,y=!0,a=!0):y?(y=!1,a=!0):f(e,"incomplete explicit mapping pair; a key node is missed"),e.position+=1,u=o;if((e.line===s||e.lineIndent>t)&&(N(e,t,W,!0,a)&&(y?h=e.result:m=e.result),y||(g(e,p,d,h,m),d=h=m=null),x(e,!0,-1),u=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==u)f(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return y&&g(e,p,d,h,null),v&&(e.tag=c,e.anchor=l,e.kind="mapping",e.result=p),v}function O(e){var t,n,i,o,a=!1,s=!1;if(o=e.input.charCodeAt(e.position),33!==o)return!1;if(null!==e.tag&&f(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),60===o?(a=!0,o=e.input.charCodeAt(++e.position)):33===o?(s=!0,n="!!",o=e.input.charCodeAt(++e.position)):n="!",t=e.position,a){do o=e.input.charCodeAt(++e.position);while(0!==o&&62!==o);e.position<e.length?(i=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):f(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==o&&!r(o);)33===o&&(s?f(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),et.test(n)||f(e,"named tag handle cannot contain such characters"),s=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);i=e.input.slice(t,e.position),X.test(i)&&f(e,"tag suffix cannot contain flow indicator characters")}return i&&!tt.test(i)&&f(e,"tag name cannot contain such characters: "+i),a?e.tag=i:$.call(e.tagMap,n)?e.tag=e.tagMap[n]+i:"!"===n?e.tag="!"+i:"!!"===n?e.tag="tag:yaml.org,2002:"+i:f(e,'undeclared tag handle "'+n+'"'),!0}function E(e){var t,n;if(n=e.input.charCodeAt(e.position),38!==n)return!1;for(null!==e.anchor&&f(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!r(n)&&!o(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&f(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function F(e){var t,n,i;if(e.length,e.input,i=e.input.charCodeAt(e.position),42!==i)return!1;for(i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!r(i)&&!o(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&f(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),e.anchorMap.hasOwnProperty(n)||f(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],x(e,!0,-1),!0}function N(e,t,n,i,r){var o,a,s,u,c,l,p,h,m=1,g=!1,y=!1;if(e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=a=s=W===n||V===n,i&&x(e,!0,-1)&&(g=!0,e.lineIndent>t?m=1:e.lineIndent===t?m=0:e.lineIndent<t&&(m=-1)),1===m)for(;O(e)||E(e);)x(e,!0,-1)?(g=!0,s=o,e.lineIndent>t?m=1:e.lineIndent===t?m=0:e.lineIndent<t&&(m=-1)):s=!1;if(s&&(s=g||r),(1===m||W===n)&&(p=B===n||G===n?t:t+1,h=e.position-e.lineStart,1===m?s&&(I(e,h)||S(e,h,p))||k(e,p)?y=!0:(a&&j(e,p)||w(e,p)||C(e,p)?y=!0:F(e)?(y=!0,(null!==e.tag||null!==e.anchor)&&f(e,"alias node should not have any properties")):b(e,p,B===n)&&(y=!0,null===e.tag&&(e.tag="?")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===m&&(y=s&&I(e,h))),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(u=0,c=e.implicitTypes.length;c>u;u+=1)if(l=e.implicitTypes[u],l.resolve(e.result)){e.result=l.construct(e.result),e.tag=l.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else $.call(e.typeMap,e.tag)?(l=e.typeMap[e.tag],null!==e.result&&l.kind!==e.kind&&f(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+l.kind+'", not "'+e.kind+'"'),l.resolve(e.result)?(e.result=l.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):f(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):d(e,"unknown tag !<"+e.tag+">");return null!==e.tag||null!==e.anchor||y}function _(e){var t,o,a,s,u=e.position,c=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(s=e.input.charCodeAt(e.position))&&(x(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==s));){for(c=!0,s=e.input.charCodeAt(++e.position),t=e.position;0!==s&&!r(s);)s=e.input.charCodeAt(++e.position);for(o=e.input.slice(t,e.position),a=[],o.length<1&&f(e,"directive name must not be less than one character in length");0!==s;){for(;i(s);)s=e.input.charCodeAt(++e.position);if(35===s){do s=e.input.charCodeAt(++e.position);while(0!==s&&!n(s));break}if(n(s))break;for(t=e.position;0!==s&&!r(s);)s=e.input.charCodeAt(++e.position);a.push(e.input.slice(t,e.position))}0!==s&&y(e),$.call(ot,o)?ot[o](e,o,a):d(e,'unknown document directive "'+o+'"')}return x(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,x(e,!0,-1)):c&&f(e,"directives end mark is expected"),N(e,e.lineIndent-1,W,!1,!0),x(e,!0,-1),e.checkLineBreaks&&Q.test(e.input.slice(u,e.position))&&d(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&v(e)?void(46===e.input.charCodeAt(e.position)&&(e.position+=3,x(e,!0,-1))):void(e.position<e.length-1&&f(e,"end of the stream or a document separator is expected"))}function T(e,t){e=String(e),t=t||{},0!==e.length&&10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n");var n=new l(e,t);for(K.test(n.input)&&f(n,"the stream contains non-printable characters"),n.input+="\x00";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)_(n);return n.documents}function M(e,t,n){var i,r,o=T(e,n);for(i=0,r=o.length;r>i;i+=1)t(o[i])}function L(e,t){var n=T(e,t);if(0===n.length)return void 0;if(1===n.length)return n[0];throw new q("expected a single document in the stream, but found more")}function D(e,t,n){M(e,t,Y.extend({schema:R},n))}function U(e,t){return L(e,Y.extend({schema:R},t))}for(var Y=e("./common"),q=e("./exception"),P=e("./mark"),R=e("./schema/default_safe"),H=e("./schema/default_full"),$=Object.prototype.hasOwnProperty,B=1,G=2,V=3,W=4,Z=1,J=2,z=3,K=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uD800-\uDFFF\uFFFE\uFFFF]/,Q=/[\x85\u2028\u2029]/,X=/[,\[\]\{\}]/,et=/^(?:!|!!|![a-z\-]+!)$/i,tt=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i,nt=new Array(256),it=new Array(256),rt=0;256>rt;rt++)nt[rt]=c(rt)?1:0,it[rt]=c(rt);var ot={YAML:function(e,t,n){var i,r,o;null!==e.version&&f(e,"duplication of %YAML directive"),1!==n.length&&f(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),null===i&&f(e,"ill-formed argument of the YAML directive"),r=parseInt(i[1],10),o=parseInt(i[2],10),1!==r&&f(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=2>o,1!==o&&2!==o&&d(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var i,r;2!==n.length&&f(e,"TAG directive accepts exactly two arguments"),i=n[0],r=n[1],et.test(i)||f(e,"ill-formed tag handle (first argument) of the TAG directive"),$.call(e.tagMap,i)&&f(e,'there is a previously declared suffix for "'+i+'" tag handle'),tt.test(r)||f(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[i]=r}};t.exports.loadAll=M,t.exports.load=L,t.exports.safeLoadAll=D,t.exports.safeLoad=U},{"./common":2,"./exception":4,"./mark":6,"./schema/default_full":9,"./schema/default_safe":10}],6:[function(e,t){"use strict";function n(e,t,n,i,r){this.name=e,this.buffer=t,this.position=n,this.line=i,this.column=r}var i=e("./common");n.prototype.getSnippet=function(e,t){var n,r,o,a,s;if(!this.buffer)return null;for(e=e||4,t=t||75,n="",r=this.position;r>0&&-1==="\x00\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(r-1));)if(r-=1,this.position-r>t/2-1){n=" ... ",r+=5;break}for(o="",a=this.position;a<this.buffer.length&&-1==="\x00\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(a));)if(a+=1,a-this.position>t/2-1){o=" ... ",a-=5;break}return s=this.buffer.slice(r,a),i.repeat(" ",e)+n+s+o+"\n"+i.repeat(" ",e+this.position-r+n.length)+"^"},n.prototype.toString=function(e){var t,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet(),t&&(n+=":\n"+t)),n},t.exports=n},{"./common":2}],7:[function(e,t){"use strict";function n(e,t,i){var r=[];return e.include.forEach(function(e){i=n(e,t,i)}),e[t].forEach(function(e){i.forEach(function(t,n){t.tag===e.tag&&r.push(n)}),i.push(e)}),i.filter(function(e,t){return-1===r.indexOf(t)})}function i(){function e(e){i[e.tag]=e}var t,n,i={};for(t=0,n=arguments.length;n>t;t+=1)arguments[t].forEach(e);return i}function r(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach(function(e){if(e.loadKind&&"scalar"!==e.loadKind)throw new a("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=n(this,"implicit",[]),this.compiledExplicit=n(this,"explicit",[]),this.compiledTypeMap=i(this.compiledImplicit,this.compiledExplicit)}var o=e("./common"),a=e("./exception"),s=e("./type");r.DEFAULT=null,r.create=function(){var e,t;switch(arguments.length){case 1:e=r.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new a("Wrong number of arguments for Schema.create function")}if(e=o.toArray(e),t=o.toArray(t),!e.every(function(e){return e instanceof r}))throw new a("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every(function(e){return e instanceof s}))throw new a("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new r({include:e,explicit:t})},t.exports=r},{"./common":2,"./exception":4,"./type":13}],8:[function(e,t){"use strict";var n=e("../schema");t.exports=new n({include:[e("./json")]})},{"../schema":7,"./json":12}],9:[function(e,t){"use strict";var n=e("../schema");t.exports=n.DEFAULT=new n({include:[e("./default_safe")],explicit:[e("../type/js/undefined"),e("../type/js/regexp"),e("../type/js/function")]})},{"../schema":7,"../type/js/function":18,"../type/js/regexp":19,"../type/js/undefined":20,"./default_safe":10}],10:[function(e,t){"use strict";var n=e("../schema");t.exports=new n({include:[e("./core")],implicit:[e("../type/timestamp"),e("../type/merge")],explicit:[e("../type/binary"),e("../type/omap"),e("../type/pairs"),e("../type/set")]})},{"../schema":7,"../type/binary":14,"../type/merge":22,"../type/omap":24,"../type/pairs":25,"../type/set":27,"../type/timestamp":29,"./core":8}],11:[function(e,t){"use strict";var n=e("../schema");t.exports=new n({explicit:[e("../type/str"),e("../type/seq"),e("../type/map")]})},{"../schema":7,"../type/map":21,"../type/seq":26,"../type/str":28}],12:[function(e,t){"use strict";var n=e("../schema");t.exports=new n({include:[e("./failsafe")],implicit:[e("../type/null"),e("../type/bool"),e("../type/int"),e("../type/float")]})},{"../schema":7,"../type/bool":15,"../type/float":16,"../type/int":17,"../type/null":23,"./failsafe":11}],13:[function(e,t){"use strict";function n(e){var t={};return null!==e&&Object.keys(e).forEach(function(n){e[n].forEach(function(e){t[String(e)]=n})}),t}function i(e,t){if(t=t||{},Object.keys(t).forEach(function(t){if(-1===o.indexOf(t))throw new r('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=n(t.styleAliases||null),-1===a.indexOf(this.kind))throw new r('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var r=e("./exception"),o=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],a=["scalar","sequence","mapping"];t.exports=i},{"./exception":4}],14:[function(e,t){"use strict";function n(e){if(null===e)return!1;var t,n,i=0,r=e.length,o=u;for(n=0;r>n;n++)if(t=o.indexOf(e.charAt(n)),!(t>64)){if(0>t)return!1;i+=6}return i%8===0}function i(e){var t,n,i=e.replace(/[\r\n=]/g,""),r=i.length,o=u,s=0,c=[];for(t=0;r>t;t++)t%4===0&&t&&(c.push(s>>16&255),c.push(s>>8&255),c.push(255&s)),s=s<<6|o.indexOf(i.charAt(t));return n=r%4*6,0===n?(c.push(s>>16&255),c.push(s>>8&255),c.push(255&s)):18===n?(c.push(s>>10&255),c.push(s>>2&255)):12===n&&c.push(s>>4&255),a?new a(c):c}function r(e){var t,n,i="",r=0,o=e.length,a=u;for(t=0;o>t;t++)t%3===0&&t&&(i+=a[r>>18&63],i+=a[r>>12&63],i+=a[r>>6&63],i+=a[63&r]),r=(r<<8)+e[t];return n=o%3,0===n?(i+=a[r>>18&63],i+=a[r>>12&63],i+=a[r>>6&63],i+=a[63&r]):2===n?(i+=a[r>>10&63],i+=a[r>>4&63],i+=a[r<<2&63],i+=a[64]):1===n&&(i+=a[r>>2&63],i+=a[r<<4&63],i+=a[64],i+=a[64]),i}function o(e){return a&&a.isBuffer(e)}var a=e("buffer").Buffer,s=e("../type"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";t.exports=new s("tag:yaml.org,2002:binary",{kind:"scalar",resolve:n,construct:i,predicate:o,represent:r})},{"../type":13,buffer:30}],15:[function(e,t){"use strict";function n(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)}function i(e){return"true"===e||"True"===e||"TRUE"===e}function r(e){return"[object Boolean]"===Object.prototype.toString.call(e)}var o=e("../type");t.exports=new o("tag:yaml.org,2002:bool",{kind:"scalar",resolve:n,construct:i,predicate:r,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})},{"../type":13}],16:[function(e,t){"use strict";function n(e){return null===e?!1:u.test(e)?!0:!1}function i(e){var t,n,i,r;return t=e.replace(/_/g,"").toLowerCase(),n="-"===t[0]?-1:1,r=[],0<="+-".indexOf(t[0])&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:0<=t.indexOf(":")?(t.split(":").forEach(function(e){r.unshift(parseFloat(e,10))}),t=0,i=1,r.forEach(function(e){t+=e*i,i*=60}),n*t):n*parseFloat(t,10)}function r(e,t){if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else{if(Number.NEGATIVE_INFINITY!==e)return a.isNegativeZero(e)?"-0.0":e.toString(10);switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}}}function o(e){return"[object Number]"===Object.prototype.toString.call(e)&&(0!==e%1||a.isNegativeZero(e))}var a=e("../common"),s=e("../type"),u=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)\\.[0-9_]*(?:[eE][-+][0-9]+)?|\\.[0-9_]+(?:[eE][-+][0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");t.exports=new s("tag:yaml.org,2002:float",{kind:"scalar",resolve:n,construct:i,predicate:o,represent:r,defaultStyle:"lowercase"})},{"../common":2,"../type":13}],17:[function(e,t){"use strict";function n(e){return e>=48&&57>=e||e>=65&&70>=e||e>=97&&102>=e}function i(e){return e>=48&&55>=e}function r(e){return e>=48&&57>=e}function o(e){if(null===e)return!1;var t,o=e.length,a=0,s=!1;if(!o)return!1;if(t=e[a],("-"===t||"+"===t)&&(t=e[++a]),"0"===t){if(a+1===o)return!0;if(t=e[++a],"b"===t){for(a++;o>a;a++)if(t=e[a],"_"!==t){if("0"!==t&&"1"!==t)return!1;s=!0}return s}if("x"===t){for(a++;o>a;a++)if(t=e[a],"_"!==t){if(!n(e.charCodeAt(a)))return!1;s=!0}return s}for(;o>a;a++)if(t=e[a],"_"!==t){if(!i(e.charCodeAt(a)))return!1;s=!0}return s}for(;o>a;a++)if(t=e[a],"_"!==t){if(":"===t)break;if(!r(e.charCodeAt(a)))return!1;s=!0}return s?":"!==t?!0:/^(:[0-5]?[0-9])+$/.test(e.slice(a)):!1}function a(e){var t,n,i=e,r=1,o=[];return-1!==i.indexOf("_")&&(i=i.replace(/_/g,"")),t=i[0],("-"===t||"+"===t)&&("-"===t&&(r=-1),i=i.slice(1),t=i[0]),"0"===i?0:"0"===t?"b"===i[1]?r*parseInt(i.slice(2),2):"x"===i[1]?r*parseInt(i,16):r*parseInt(i,8):-1!==i.indexOf(":")?(i.split(":").forEach(function(e){o.unshift(parseInt(e,10))}),i=0,n=1,o.forEach(function(e){i+=e*n,n*=60}),r*i):r*parseInt(i,10)}function s(e){return"[object Number]"===Object.prototype.toString.call(e)&&0===e%1&&!u.isNegativeZero(e)}var u=e("../common"),c=e("../type");t.exports=new c("tag:yaml.org,2002:int",{kind:"scalar",resolve:o,construct:a,predicate:s,represent:{binary:function(e){return"0b"+e.toString(2)},octal:function(e){return"0"+e.toString(8)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return"0x"+e.toString(16).toUpperCase()}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},{"../common":2,"../type":13}],18:[function(e,t){"use strict";function n(e){if(null===e)return!1;try{var t="("+e+")",n=a.parse(t,{range:!0});return"Program"!==n.type||1!==n.body.length||"ExpressionStatement"!==n.body[0].type||"FunctionExpression"!==n.body[0].expression.type?!1:!0}catch(i){return!1}}function i(e){var t,n="("+e+")",i=a.parse(n,{range:!0}),r=[];if("Program"!==i.type||1!==i.body.length||"ExpressionStatement"!==i.body[0].type||"FunctionExpression"!==i.body[0].expression.type)throw new Error("Failed to resolve function");return i.body[0].expression.params.forEach(function(e){r.push(e.name)}),t=i.body[0].expression.body.range,new Function(r,n.slice(t[0]+1,t[1]-1))}function r(e){return e.toString()}function o(e){return"[object Function]"===Object.prototype.toString.call(e)}var a;try{a=e("esprima")}catch(s){"undefined"!=typeof window&&(a=window.esprima)}var u=e("../../type");t.exports=new u("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:n,construct:i,predicate:o,represent:r})},{"../../type":13,esprima:"esprima"}],19:[function(e,t){"use strict";function n(e){if(null===e)return!1;if(0===e.length)return!1;var t=e,n=/\/([gim]*)$/.exec(e),i="";if("/"===t[0]){if(n&&(i=n[1]),i.length>3)return!1;if("/"!==t[t.length-i.length-1])return!1;t=t.slice(1,t.length-i.length-1)}try{return new RegExp(t,i),!0}catch(r){return!1}}function i(e){var t=e,n=/\/([gim]*)$/.exec(e),i="";return"/"===t[0]&&(n&&(i=n[1]),t=t.slice(1,t.length-i.length-1)),new RegExp(t,i)}function r(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}function o(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var a=e("../../type");t.exports=new a("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:n,construct:i,predicate:o,represent:r})},{"../../type":13}],20:[function(e,t){"use strict";function n(){return!0}function i(){return void 0}function r(){return""}function o(e){return"undefined"==typeof e}var a=e("../../type");t.exports=new a("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:n,construct:i,predicate:o,represent:r})},{"../../type":13}],21:[function(e,t){"use strict";var n=e("../type");t.exports=new n("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})},{"../type":13}],22:[function(e,t){"use strict";function n(e){return"<<"===e||null===e}var i=e("../type");t.exports=new i("tag:yaml.org,2002:merge",{kind:"scalar",resolve:n})},{"../type":13}],23:[function(e,t){"use strict";function n(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)}function i(){return null}function r(e){return null===e}var o=e("../type");t.exports=new o("tag:yaml.org,2002:null",{kind:"scalar",resolve:n,construct:i,predicate:r,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},{"../type":13}],24:[function(e,t){"use strict";function n(e){if(null===e)return!0;var t,n,i,r,s,u=[],c=e;for(t=0,n=c.length;n>t;t+=1){if(i=c[t],s=!1,"[object Object]"!==a.call(i))return!1;for(r in i)if(o.call(i,r)){if(s)return!1;s=!0}if(!s)return!1;if(-1!==u.indexOf(r))return!1;u.push(r)}return!0}function i(e){return null!==e?e:[]}var r=e("../type"),o=Object.prototype.hasOwnProperty,a=Object.prototype.toString;t.exports=new r("tag:yaml.org,2002:omap",{kind:"sequence",resolve:n,construct:i})},{"../type":13}],25:[function(e,t){"use strict";function n(e){if(null===e)return!0;var t,n,i,r,a,s=e;for(a=new Array(s.length),t=0,n=s.length;n>t;t+=1){if(i=s[t],"[object Object]"!==o.call(i))return!1;if(r=Object.keys(i),1!==r.length)return!1;a[t]=[r[0],i[r[0]]]}return!0}function i(e){if(null===e)return[];var t,n,i,r,o,a=e;for(o=new Array(a.length),t=0,n=a.length;n>t;t+=1)i=a[t],r=Object.keys(i),o[t]=[r[0],i[r[0]]];return o}var r=e("../type"),o=Object.prototype.toString;t.exports=new r("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:n,construct:i})},{"../type":13}],26:[function(e,t){"use strict";var n=e("../type");t.exports=new n("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}})},{"../type":13}],27:[function(e,t){"use strict";function n(e){if(null===e)return!0;var t,n=e;for(t in n)if(o.call(n,t)&&null!==n[t])return!1;return!0}function i(e){return null!==e?e:{}}var r=e("../type"),o=Object.prototype.hasOwnProperty;t.exports=new r("tag:yaml.org,2002:set",{kind:"mapping",resolve:n,construct:i})},{"../type":13}],28:[function(e,t){"use strict";var n=e("../type");t.exports=new n("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}})},{"../type":13}],29:[function(e,t){"use strict";function n(e){if(null===e)return!1;var t;return t=a.exec(e),null===t?!1:!0}function i(e){var t,n,i,r,o,s,u,c,l,p,f=0,d=null;if(t=a.exec(e),null===t)throw new Error("Date resolve error");if(n=+t[1],i=+t[2]-1,r=+t[3],!t[4])return new Date(Date.UTC(n,i,r));if(o=+t[4],s=+t[5],u=+t[6],t[7]){for(f=t[7].slice(0,3);f.length<3;)f+="0";f=+f}return t[9]&&(c=+t[10],l=+(t[11]||0),d=6e4*(60*c+l),"-"===t[9]&&(d=-d)),p=new Date(Date.UTC(n,i,r,o,s,u,f)),d&&p.setTime(p.getTime()-d),p}function r(e){return e.toISOString()}var o=e("../type"),a=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?)?$");t.exports=new o("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:n,construct:i,instanceOf:Date,represent:r})},{"../type":13}],30:[function(){},{}],"/":[function(e,t){"use strict";var n=e("./lib/js-yaml.js");t.exports=n},{"./lib/js-yaml.js":1}]},{},[])("/")}),function(){$(document).on("change keyup paste","[data-lookup]",function(){var $input,$value,performLookup,value;return $input=$(this),$value=$input.closest("[data-lookup-container]").find("[data-lookup-value]"),value=$input.val(),value&&$input.data("lookup-last")===value||($input.data("lookup-last",value),$input.data("lookup-timeout")&&clearTimeout($input.data("lookup-timeout")),$input.data("lookup-request")&&($input.data("lookup-request").abort(),$input.data("lookup-request",null)),$value.val(""),!$input.val())?void 0:(performLookup=function(){var request;return request=$.get("/lookup",{type:$input.data("lookup"),value:$input.val()}).done(function(data){return $input.val()===data.value?$value.val(JSON.stringify(data)):void 0}).fail(function(data){return data.responseJSON&&$input.val()===data.responseJSON.value&&data.responseJSON.errors?$value.val(data.responseText):void 0}),$input.data("lookup-request",request)},$input.data("lookup-timeout",setTimeout(performLookup,500)))})}.call(this),
//! moment-timezone.js
//! version : 0.5.5
//! author : Tim Wood
//! license : MIT
//! github.com/moment/moment-timezone
function(root,factory){"use strict";"function"==typeof define&&define.amd?define(["moment"],factory):"object"==typeof module&&module.exports?module.exports=factory(require("moment")):factory(root.moment)}(this,function(moment){"use strict";function charCodeToInt(charCode){return charCode>96?charCode-87:charCode>64?charCode-29:charCode-48}function unpackBase60(string){var num,i=0,parts=string.split("."),whole=parts[0],fractional=parts[1]||"",multiplier=1,out=0,sign=1;for(45===string.charCodeAt(0)&&(i=1,sign=-1),i;i<whole.length;i++)num=charCodeToInt(whole.charCodeAt(i)),out=60*out+num;for(i=0;i<fractional.length;i++)multiplier/=60,num=charCodeToInt(fractional.charCodeAt(i)),out+=num*multiplier;return out*sign}function arrayToInt(array){for(var i=0;i<array.length;i++)array[i]=unpackBase60(array[i])}function intToUntil(array,length){for(var i=0;length>i;i++)array[i]=Math.round((array[i-1]||0)+6e4*array[i]);array[length-1]=1/0}function mapIndices(source,indices){var i,out=[];for(i=0;i<indices.length;i++)out[i]=source[indices[i]];return out}function unpack(string){var data=string.split("|"),offsets=data[2].split(" "),indices=data[3].split(""),untils=data[4].split(" ");return arrayToInt(offsets),arrayToInt(indices),arrayToInt(untils),intToUntil(untils,indices.length),{name:data[0],abbrs:mapIndices(data[1].split(" "),indices),offsets:mapIndices(offsets,indices),untils:untils,population:0|data[5]}}function Zone(packedString){packedString&&this._set(unpack(packedString))}function OffsetAt(at){var timeString=at.toTimeString(),abbr=timeString.match(/\([a-z ]+\)/i);abbr&&abbr[0]?(abbr=abbr[0].match(/[A-Z]/g),abbr=abbr?abbr.join(""):void 0):(abbr=timeString.match(/[A-Z]{3,5}/g),abbr=abbr?abbr[0]:void 0),"GMT"===abbr&&(abbr=void 0),this.at=+at,this.abbr=abbr,this.offset=at.getTimezoneOffset()}function ZoneScore(zone){this.zone=zone,this.offsetScore=0,this.abbrScore=0}function findChange(low,high){for(var mid,diff;diff=6e4*((high.at-low.at)/12e4|0);)mid=new OffsetAt(new Date(low.at+diff)),mid.offset===low.offset?low=mid:high=mid;return low}function userOffsets(){var change,next,i,startYear=(new Date).getFullYear()-2,last=new OffsetAt(new Date(startYear,0,1)),offsets=[last];for(i=1;48>i;i++)next=new OffsetAt(new Date(startYear,i,1)),next.offset!==last.offset&&(change=findChange(last,next),offsets.push(change),offsets.push(new OffsetAt(new Date(change.at+6e4)))),last=next;for(i=0;4>i;i++)offsets.push(new OffsetAt(new Date(startYear+i,0,1))),offsets.push(new OffsetAt(new Date(startYear+i,6,1)));return offsets}function sortZoneScores(a,b){return a.offsetScore!==b.offsetScore?a.offsetScore-b.offsetScore:a.abbrScore!==b.abbrScore?a.abbrScore-b.abbrScore:b.zone.population-a.zone.population}function addToGuesses(name,offsets){var i,offset;for(arrayToInt(offsets),i=0;i<offsets.length;i++)offset=offsets[i],guesses[offset]=guesses[offset]||{},guesses[offset][name]=!0}function guessesForUserOffsets(offsets){var i,j,guessesOffset,offsetsLength=offsets.length,filteredGuesses={},out=[];for(i=0;offsetsLength>i;i++){guessesOffset=guesses[offsets[i].offset]||{};for(j in guessesOffset)guessesOffset.hasOwnProperty(j)&&(filteredGuesses[j]=!0)}for(i in filteredGuesses)filteredGuesses.hasOwnProperty(i)&&out.push(names[i]);return out}function rebuildGuess(){try{var intlName=Intl.DateTimeFormat().resolvedOptions().timeZone;if(intlName){var name=names[normalizeName(intlName)];if(name)return name;logError("Moment Timezone found "+intlName+" from the Intl api, but did not have that data loaded.")}}catch(e){}var zoneScore,i,j,offsets=userOffsets(),offsetsLength=offsets.length,guesses=guessesForUserOffsets(offsets),zoneScores=[];for(i=0;i<guesses.length;i++){for(zoneScore=new ZoneScore(getZone(guesses[i]),offsetsLength),j=0;offsetsLength>j;j++)zoneScore.scoreOffsetAt(offsets[j]);zoneScores.push(zoneScore)}return zoneScores.sort(sortZoneScores),zoneScores.length>0?zoneScores[0].zone.name:void 0}function guess(ignoreCache){return(!cachedGuess||ignoreCache)&&(cachedGuess=rebuildGuess()),cachedGuess}function normalizeName(name){return(name||"").toLowerCase().replace(/\//g,"_")}function addZone(packed){var i,name,split,normalized;for("string"==typeof packed&&(packed=[packed]),i=0;i<packed.length;i++)split=packed[i].split("|"),name=split[0],normalized=normalizeName(name),zones[normalized]=packed[i],names[normalized]=name,split[5]&&addToGuesses(normalized,split[2].split(" "))}function getZone(name,caller){name=normalizeName(name);var link,zone=zones[name];return zone instanceof Zone?zone:"string"==typeof zone?(zone=new Zone(zone),zones[name]=zone,zone):links[name]&&caller!==getZone&&(link=getZone(links[name],getZone))?(zone=zones[name]=new Zone,zone._set(link),zone.name=names[name],zone):null}function getNames(){var i,out=[];for(i in names)names.hasOwnProperty(i)&&(zones[i]||zones[links[i]])&&names[i]&&out.push(names[i]);return out.sort()}function addLink(aliases){var i,alias,normal0,normal1;for("string"==typeof aliases&&(aliases=[aliases]),i=0;i<aliases.length;i++)alias=aliases[i].split("|"),normal0=normalizeName(alias[0]),normal1=normalizeName(alias[1]),links[normal0]=normal1,names[normal0]=alias[0],links[normal1]=normal0,names[normal1]=alias[1]}function loadData(data){addZone(data.zones),addLink(data.links),tz.dataVersion=data.version}function zoneExists(name){return zoneExists.didShowError||(zoneExists.didShowError=!0,logError("moment.tz.zoneExists('"+name+"') has been deprecated in favor of !moment.tz.zone('"+name+"')")),!!getZone(name)}function needsOffset(m){return!(!m._a||void 0!==m._tzm)}function logError(message){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(message)}function tz(input){var args=Array.prototype.slice.call(arguments,0,-1),name=arguments[arguments.length-1],zone=getZone(name),out=moment.utc.apply(null,args);return zone&&!moment.isMoment(input)&&needsOffset(out)&&out.add(zone.parse(out),"minutes"),out.tz(name),out}function abbrWrap(old){return function(){return this._z?this._z.abbr(this):old.call(this)}}function resetZoneWrap(old){return function(){return this._z=null,old.apply(this,arguments)}}if(void 0!==moment.tz)return logError("Moment Timezone "+moment.tz.version+" was already loaded "+(moment.tz.dataVersion?"with data from ":"without any data")+moment.tz.dataVersion),moment;var cachedGuess,VERSION="0.5.5",zones={},links={},names={},guesses={},momentVersion=moment.version.split("."),major=+momentVersion[0],minor=+momentVersion[1];(2>major||2===major&&6>minor)&&logError("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+moment.version+". See momentjs.com"),Zone.prototype={_set:function(unpacked){this.name=unpacked.name,this.abbrs=unpacked.abbrs,this.untils=unpacked.untils,this.offsets=unpacked.offsets,this.population=unpacked.population},_index:function(timestamp){var i,target=+timestamp,untils=this.untils;for(i=0;i<untils.length;i++)if(target<untils[i])return i},parse:function(timestamp){var offset,offsetNext,offsetPrev,i,target=+timestamp,offsets=this.offsets,untils=this.untils,max=untils.length-1;for(i=0;max>i;i++)if(offset=offsets[i],offsetNext=offsets[i+1],offsetPrev=offsets[i?i-1:i],offsetNext>offset&&tz.moveAmbiguousForward?offset=offsetNext:offset>offsetPrev&&tz.moveInvalidForward&&(offset=offsetPrev),target<untils[i]-6e4*offset)return offsets[i];return offsets[max]},abbr:function(mom){return this.abbrs[this._index(mom)]},offset:function(mom){return this.offsets[this._index(mom)]}},ZoneScore.prototype.scoreOffsetAt=function(offsetAt){this.offsetScore+=Math.abs(this.zone.offset(offsetAt.at)-offsetAt.offset),this.zone.abbr(offsetAt.at).replace(/[^A-Z]/g,"")!==offsetAt.abbr&&this.abbrScore++},tz.version=VERSION,tz.dataVersion="",tz._zones=zones,tz._links=links,tz._names=names,tz.add=addZone,tz.link=addLink,tz.load=loadData,tz.zone=getZone,tz.zoneExists=zoneExists,tz.guess=guess,tz.names=getNames,tz.Zone=Zone,tz.unpack=unpack,tz.unpackBase60=unpackBase60,tz.needsOffset=needsOffset,tz.moveInvalidForward=!0,tz.moveAmbiguousForward=!1;var fn=moment.fn;moment.tz=tz,moment.defaultZone=null,moment.updateOffset=function(mom,keepTime){var offset,zone=moment.defaultZone;void 0===mom._z&&(zone&&needsOffset(mom)&&!mom._isUTC&&(mom._d=moment.utc(mom._a)._d,mom.utc().add(zone.parse(mom),"minutes")),mom._z=zone),mom._z&&(offset=mom._z.offset(mom),Math.abs(offset)<16&&(offset/=60),void 0!==mom.utcOffset?mom.utcOffset(-offset,keepTime):mom.zone(offset,keepTime))},fn.tz=function(name){return name?(this._z=getZone(name),this._z?moment.updateOffset(this):logError("Moment Timezone has no data for "+name+". See http://momentjs.com/timezone/docs/#/data-loading/."),this):this._z?this._z.name:void 0},fn.zoneName=abbrWrap(fn.zoneName),fn.zoneAbbr=abbrWrap(fn.zoneAbbr),fn.utc=resetZoneWrap(fn.utc),moment.tz.setDefault=function(name){return(2>major||2===major&&9>minor)&&logError("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+moment.version+"."),moment.defaultZone=name?getZone(name):null,moment};var momentProperties=moment.momentProperties;return"[object Array]"===Object.prototype.toString.call(momentProperties)?(momentProperties.push("_z"),momentProperties.push("_a")):momentProperties&&(momentProperties._z=null),loadData({version:"2016f",zones:["Africa/Abidjan|GMT|0|0||48e5","Africa/Khartoum|EAT|-30|0||51e5","Africa/Algiers|CET|-10|0||26e5","Africa/Lagos|WAT|-10|0||17e6","Africa/Maputo|CAT|-20|0||26e5","Africa/Cairo|EET EEST|-20 -30|010101010|1Cby0 Fb0 c10 8n0 8Nd0 gL0 e10 mn0|15e6","Africa/Casablanca|WET WEST|0 -10|01010101010101010101010101010101010101010|1Cco0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uM0 e00 Dc0 11A0 s00 e00 IM0 WM0 mo0 gM0 LA0 WM0 jA0 e00 Rc0 11A0 e00 e00 U00 11A0 8o0 e00 11A0|32e5","Europe/Paris|CET CEST|-10 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|11e6","Africa/Johannesburg|SAST|-20|0||84e5","Africa/Tripoli|EET CET CEST|-20 -10 -20|0120|1IlA0 TA0 1o00|11e5","Africa/Windhoek|WAST WAT|-20 -10|01010101010101010101010|1C1c0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0|32e4","America/Adak|HST HDT|a0 90|01010101010101010101010|1BR00 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|326","America/Anchorage|AKST AKDT|90 80|01010101010101010101010|1BQX0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|30e4","America/Santo_Domingo|AST|40|0||29e5","America/Araguaina|BRT BRST|30 20|010|1IdD0 Lz0|14e4","America/Argentina/Buenos_Aires|ART|30|0|","America/Asuncion|PYST PYT|30 40|01010101010101010101010|1C430 1a10 1fz0 1a10 1fz0 1cN0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0|28e5","America/Panama|EST|50|0||15e5","America/Bahia|BRT BRST|30 20|010|1FJf0 Rb0|27e5","America/Bahia_Banderas|MST CDT CST|70 50 60|01212121212121212121212|1C1l0 1nW0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0|84e3","America/Fortaleza|BRT|30|0||34e5","America/Managua|CST|60|0||22e5","America/Manaus|AMT|40|0||19e5","America/Bogota|COT|50|0||90e5","America/Denver|MST MDT|70 60|01010101010101010101010|1BQV0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|26e5","America/Campo_Grande|AMST AMT|30 40|01010101010101010101010|1BIr0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10|77e4","America/Cancun|CST CDT EST|60 50 50|010101010102|1C1k0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 Dd0|63e4","America/Caracas|VET VET|4u 40|01|1QMT0|29e5","America/Cayenne|GFT|30|0||58e3","America/Chicago|CST CDT|60 50|01010101010101010101010|1BQU0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|92e5","America/Chihuahua|MST MDT|70 60|01010101010101010101010|1C1l0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0|81e4","America/Phoenix|MST|70|0||42e5","America/Los_Angeles|PST PDT|80 70|01010101010101010101010|1BQW0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|15e6","America/New_York|EST EDT|50 40|01010101010101010101010|1BQT0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|21e6","America/Rio_Branco|AMT ACT|40 50|01|1KLE0|31e4","America/Fort_Nelson|PST PDT MST|80 70 70|010101010102|1BQW0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0|39e2","America/Halifax|AST ADT|40 30|01010101010101010101010|1BQS0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|39e4","America/Godthab|WGT WGST|30 20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|17e3","America/Goose_Bay|AST ADT|40 30|01010101010101010101010|1BQQ1 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|76e2","America/Grand_Turk|EST EDT AST|50 40 40|0101010101012|1BQT0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|37e2","America/Guayaquil|ECT|50|0||27e5","America/Guyana|GYT|40|0||80e4","America/Havana|CST CDT|50 40|01010101010101010101010|1BQR0 1wo0 U00 1zc0 U00 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0|21e5","America/La_Paz|BOT|40|0||19e5","America/Lima|PET|50|0||11e6","America/Mexico_City|CST CDT|60 50|01010101010101010101010|1C1k0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0|20e6","America/Metlakatla|PST AKST AKDT|80 90 80|012121212121|1PAa0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|14e2","America/Miquelon|PMST PMDT|30 20|01010101010101010101010|1BQR0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|61e2","America/Montevideo|UYST UYT|20 30|010101010101|1BQQ0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 11z0|17e5","America/Noronha|FNT|20|0||30e2","America/North_Dakota/Beulah|MST MDT CST CDT|70 60 60 50|01232323232323232323232|1BQV0 1zb0 Oo0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Paramaribo|SRT|30|0||24e4","America/Port-au-Prince|EST EDT|50 40|010101010|1GI70 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e5","America/Santiago|CLST CLT|30 40|010101010101010101010|1C1f0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0|62e5","America/Sao_Paulo|BRST BRT|20 30|01010101010101010101010|1BIq0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10|20e6","America/Scoresbysund|EGT EGST|10 0|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|452","America/St_Johns|NST NDT|3u 2u|01010101010101010101010|1BQPv 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|11e4","Antarctica/Casey|CAST AWST|-b0 -80|0101|1BN30 40P0 KL0|10","Antarctica/Davis|DAVT DAVT|-50 -70|0101|1BPw0 3Wn0 KN0|70","Antarctica/DumontDUrville|DDUT|-a0|0||80","Antarctica/Macquarie|AEDT MIST|-b0 -b0|01|1C140|1","Antarctica/Mawson|MAWT|-50|0||60","Pacific/Auckland|NZDT NZST|-d0 -c0|01010101010101010101010|1C120 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00|14e5","Antarctica/Rothera|ROTT|30|0||130","Antarctica/Syowa|SYOT|-30|0||20","Antarctica/Troll|UTC CEST|0 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|40","Antarctica/Vostok|VOST|-60|0||25","Asia/Baghdad|AST|-30|0||66e5","Asia/Almaty|+06|-60|0||15e5","Asia/Amman|EET EEST|-20 -30|010101010101010101010|1BVy0 1qM0 11A0 1o00 11A0 4bX0 Dd0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0|25e5","Asia/Anadyr|ANAT ANAST ANAT|-c0 -c0 -b0|0120|1BWe0 1qN0 WM0|13e3","Asia/Aqtobe|+05|-50|0||27e4","Asia/Ashgabat|TMT|-50|0||41e4","Asia/Baku|AZT AZST|-40 -50|0101010101010|1BWo0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00|27e5","Asia/Bangkok|ICT|-70|0||15e6","Asia/Barnaul|+06 +07|-60 -70|010101|1BWk0 1qM0 WM0 8Hz0 3rd0","Asia/Beirut|EET EEST|-20 -30|01010101010101010101010|1BWm0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0|22e5","Asia/Bishkek|KGT|-60|0||87e4","Asia/Brunei|BNT|-80|0||42e4","Asia/Kolkata|IST|-5u|0||15e6","Asia/Chita|YAKT YAKST YAKT IRKT|-90 -a0 -a0 -80|010230|1BWh0 1qM0 WM0 8Hz0 3re0|33e4","Asia/Choibalsan|CHOT CHOST|-80 -90|0101010101010|1O8G0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0|38e3","Asia/Shanghai|CST|-80|0||23e6","Asia/Dhaka|BDT|-60|0||16e6","Asia/Damascus|EET EEST|-20 -30|01010101010101010101010|1C0m0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0|26e5","Asia/Dili|TLT|-90|0||19e4","Asia/Dubai|GST|-40|0||39e5","Asia/Dushanbe|TJT|-50|0||76e4","Asia/Gaza|EET EEST|-20 -30|01010101010101010101010|1BVW1 SKX 1xd1 MKX 1AN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1220 1ny0 1220 1qm0 1220 1ny0 1220 1ny0 1220 1ny0|18e5","Asia/Hebron|EET EEST|-20 -30|0101010101010101010101010|1BVy0 Tb0 1xd1 MKX bB0 cn0 1cN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1220 1ny0 1220 1qm0 1220 1ny0 1220 1ny0 1220 1ny0|25e4","Asia/Hong_Kong|HKT|-80|0||73e5","Asia/Hovd|HOVT HOVST|-70 -80|0101010101010|1O8H0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0|81e3","Asia/Irkutsk|IRKT IRKST IRKT|-80 -90 -90|01020|1BWi0 1qM0 WM0 8Hz0|60e4","Europe/Istanbul|EET EEST|-20 -30|01010101010101010101010|1BWp0 1qM0 Xc0 1qo0 WM0 1qM0 11A0 1o00 1200 1nA0 11A0 1tA0 U00 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|13e6","Asia/Jakarta|WIB|-70|0||31e6","Asia/Jayapura|WIT|-90|0||26e4","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010|1BVA0 17X0 1kp0 1dz0 1c10 1aL0 1eN0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0|81e4","Asia/Kabul|AFT|-4u|0||46e5","Asia/Kamchatka|PETT PETST PETT|-c0 -c0 -b0|0120|1BWe0 1qN0 WM0|18e4","Asia/Karachi|PKT|-50|0||24e6","Asia/Urumqi|XJT|-60|0||32e5","Asia/Kathmandu|NPT|-5J|0||12e5","Asia/Khandyga|VLAT VLAST VLAT YAKT YAKT|-a0 -b0 -b0 -a0 -90|010234|1BWg0 1qM0 WM0 17V0 7zD0|66e2","Asia/Krasnoyarsk|KRAT KRAST KRAT|-70 -80 -80|01020|1BWj0 1qM0 WM0 8Hz0|10e5","Asia/Kuala_Lumpur|MYT|-80|0||71e5","Asia/Magadan|MAGT MAGST MAGT MAGT|-b0 -c0 -c0 -a0|010230|1BWf0 1qM0 WM0 8Hz0 3Cq0|95e3","Asia/Makassar|WITA|-80|0||15e5","Asia/Manila|PHT|-80|0||24e6","Europe/Athens|EET EEST|-20 -30|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|35e5","Asia/Novokuznetsk|+07 +06|-70 -60|010|1Dp80 WM0|55e4","Asia/Novosibirsk|+06 +07|-60 -70|010101|1BWk0 1qM0 WM0 8Hz0 4eN0|15e5","Asia/Omsk|OMST OMSST OMST|-60 -70 -70|01020|1BWk0 1qM0 WM0 8Hz0|12e5","Asia/Pyongyang|KST KST|-90 -8u|01|1P4D0|29e5","Asia/Rangoon|MMT|-6u|0||48e5","Asia/Sakhalin|SAKT SAKST SAKT|-a0 -b0 -b0|010202|1BWg0 1qM0 WM0 8Hz0 3rd0|58e4","Asia/Tashkent|UZT|-50|0||23e5","Asia/Seoul|KST|-90|0||23e6","Asia/Singapore|SGT|-80|0||56e5","Asia/Srednekolymsk|MAGT MAGST MAGT SRET|-b0 -c0 -c0 -b0|01023|1BWf0 1qM0 WM0 8Hz0|35e2","Asia/Tbilisi|GET|-40|0||11e5","Asia/Tehran|IRST IRDT|-3u -4u|01010101010101010101010|1BTUu 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0|14e6","Asia/Thimphu|BTT|-60|0||79e3","Asia/Tokyo|JST|-90|0||38e6","Asia/Tomsk|+06 +07|-60 -70|010101|1BWk0 1qM0 WM0 8Hz0 3Qp0|10e5","Asia/Ulaanbaatar|ULAT ULAST|-80 -90|0101010101010|1O8G0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0|12e5","Asia/Ust-Nera|MAGT MAGST MAGT VLAT VLAT|-b0 -c0 -c0 -b0 -a0|010234|1BWf0 1qM0 WM0 17V0 7zD0|65e2","Asia/Vladivostok|VLAT VLAST VLAT|-a0 -b0 -b0|01020|1BWg0 1qM0 WM0 8Hz0|60e4","Asia/Yakutsk|YAKT YAKST YAKT|-90 -a0 -a0|01020|1BWh0 1qM0 WM0 8Hz0|28e4","Asia/Yekaterinburg|YEKT YEKST YEKT|-50 -60 -60|01020|1BWl0 1qM0 WM0 8Hz0|14e5","Asia/Yerevan|AMT AMST|-40 -50|01010|1BWm0 1qM0 WM0 1qM0|13e5","Atlantic/Azores|AZOT AZOST|10 0|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|25e4","Europe/Lisbon|WET WEST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|27e5","Atlantic/Cape_Verde|CVT|10|0||50e4","Atlantic/South_Georgia|GST|20|0||30","Atlantic/Stanley|FKST FKT|30 40|010|1C6R0 U10|21e2","Australia/Sydney|AEDT AEST|-b0 -a0|01010101010101010101010|1C140 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0|40e5","Australia/Adelaide|ACDT ACST|-au -9u|01010101010101010101010|1C14u 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0|11e5","Australia/Brisbane|AEST|-a0|0||20e5","Australia/Darwin|ACST|-9u|0||12e4","Australia/Eucla|ACWST|-8J|0||368","Australia/Lord_Howe|LHDT LHST|-b0 -au|01010101010101010101010|1C130 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu|347","Australia/Perth|AWST|-80|0||18e5","Pacific/Easter|EASST EAST|50 60|010101010101010101010|1C1f0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0|30e2","Europe/Dublin|GMT IST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|12e5","Etc/GMT+1|GMT+1|10|0|","Etc/GMT+10|GMT+10|a0|0|","Etc/GMT+11|GMT+11|b0|0|","Etc/GMT+12|GMT+12|c0|0|","Etc/GMT+2|GMT+2|20|0|","Etc/GMT+3|GMT+3|30|0|","Etc/GMT+4|GMT+4|40|0|","Etc/GMT+5|GMT+5|50|0|","Etc/GMT+6|GMT+6|60|0|","Etc/GMT+7|GMT+7|70|0|","Etc/GMT+8|GMT+8|80|0|","Etc/GMT+9|GMT+9|90|0|","Etc/GMT-1|GMT-1|-10|0|","Etc/GMT-10|GMT-10|-a0|0|","Etc/GMT-11|GMT-11|-b0|0|","Etc/GMT-12|GMT-12|-c0|0|","Etc/GMT-13|GMT-13|-d0|0|","Etc/GMT-14|GMT-14|-e0|0|","Etc/GMT-2|GMT-2|-20|0|","Etc/GMT-3|GMT-3|-30|0|","Etc/GMT-4|GMT-4|-40|0|","Etc/GMT-5|GMT-5|-50|0|","Etc/GMT-6|GMT-6|-60|0|","Etc/GMT-7|GMT-7|-70|0|","Etc/GMT-8|GMT-8|-80|0|","Etc/GMT-9|GMT-9|-90|0|","Etc/UCT|UCT|0|0|","Etc/UTC|UTC|0|0|","Europe/Astrakhan|+03 +04|-30 -40|010101|1BWn0 1qM0 WM0 8Hz0 3rd0","Europe/London|GMT BST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|10e6","Europe/Chisinau|EET EEST|-20 -30|01010101010101010101010|1BWo0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|67e4","Europe/Kaliningrad|EET EEST FET|-20 -30 -30|01020|1BWo0 1qM0 WM0 8Hz0|44e4","Europe/Kirov|+03 +04|-30 -40|01010|1BWn0 1qM0 WM0 8Hz0|48e4","Europe/Minsk|EET EEST FET MSK|-20 -30 -30 -30|01023|1BWo0 1qM0 WM0 8Hy0|19e5","Europe/Moscow|MSK MSD MSK|-30 -40 -40|01020|1BWn0 1qM0 WM0 8Hz0|16e6","Europe/Samara|SAMT SAMST SAMT|-40 -40 -30|0120|1BWm0 1qN0 WM0|12e5","Europe/Simferopol|EET EEST MSK MSK|-20 -30 -40 -30|01010101023|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11z0 1nW0|33e4","Pacific/Honolulu|HST|a0|0||37e4","Indian/Chagos|IOT|-60|0||30e2","Indian/Christmas|CXT|-70|0||21e2","Indian/Cocos|CCT|-6u|0||596","Indian/Kerguelen|TFT|-50|0||130","Indian/Mahe|SCT|-40|0||79e3","Indian/Maldives|MVT|-50|0||35e4","Indian/Mauritius|MUT|-40|0||15e4","Indian/Reunion|RET|-40|0||84e4","Pacific/Majuro|MHT|-c0|0||28e3","MET|MET MEST|-10 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Pacific/Chatham|CHADT CHAST|-dJ -cJ|01010101010101010101010|1C120 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00|600","Pacific/Apia|SST SDT WSDT WSST|b0 a0 -e0 -d0|01012323232323232323232|1Dbn0 1ff0 1a00 CI0 AQ0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00|37e3","Pacific/Bougainville|PGT BST|-a0 -b0|01|1NwE0|18e4","Pacific/Chuuk|CHUT|-a0|0||49e3","Pacific/Efate|VUT|-b0|0||66e3","Pacific/Enderbury|PHOT|-d0|0||1","Pacific/Fakaofo|TKT TKT|b0 -d0|01|1Gfn0|483","Pacific/Fiji|FJST FJT|-d0 -c0|01010101010101010101010|1BWe0 1o00 Rc0 1wo0 Ao0 1Nc0 Ao0 1Q00 xz0 1SN0 uM0 1SM0 uM0 1VA0 s00 1VA0 uM0 1SM0 uM0 1SM0 uM0 1SM0|88e4","Pacific/Funafuti|TVT|-c0|0||45e2","Pacific/Galapagos|GALT|60|0||25e3","Pacific/Gambier|GAMT|90|0||125","Pacific/Guadalcanal|SBT|-b0|0||11e4","Pacific/Guam|ChST|-a0|0||17e4","Pacific/Kiritimati|LINT|-e0|0||51e2","Pacific/Kosrae|KOST|-b0|0||66e2","Pacific/Marquesas|MART|9u|0||86e2","Pacific/Pago_Pago|SST|b0|0||37e2","Pacific/Nauru|NRT|-c0|0||10e3","Pacific/Niue|NUT|b0|0||12e2","Pacific/Norfolk|NFT NFT|-bu -b0|01|1PoCu|25e4","Pacific/Noumea|NCT|-b0|0||98e3","Pacific/Palau|PWT|-90|0||21e3","Pacific/Pitcairn|PST|80|0||56","Pacific/Pohnpei|PONT|-b0|0||34e3","Pacific/Port_Moresby|PGT|-a0|0||25e4","Pacific/Rarotonga|CKT|a0|0||13e3","Pacific/Tahiti|TAHT|a0|0||18e4","Pacific/Tarawa|GILT|-c0|0||29e3","Pacific/Tongatapu|TOT|-d0|0||75e3","Pacific/Wake|WAKT|-c0|0||16e3","Pacific/Wallis|WFT|-c0|0||94"],links:["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Bissau","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Monrovia","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Sao_Tome","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|America/Danmarkshavn","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Algiers|Africa/Tunis","Africa/Cairo|Egypt","Africa/Casablanca|Africa/El_Aaiun","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Khartoum|Africa/Addis_Ababa","Africa/Khartoum|Africa/Asmara","Africa/Khartoum|Africa/Asmera","Africa/Khartoum|Africa/Dar_es_Salaam","Africa/Khartoum|Africa/Djibouti","Africa/Khartoum|Africa/Juba","Africa/Khartoum|Africa/Kampala","Africa/Khartoum|Africa/Mogadishu","Africa/Khartoum|Africa/Nairobi","Africa/Khartoum|Indian/Antananarivo","Africa/Khartoum|Indian/Comoro","Africa/Khartoum|Indian/Mayotte","Africa/Lagos|Africa/Bangui","Africa/Lagos|Africa/Brazzaville","Africa/Lagos|Africa/Douala","Africa/Lagos|Africa/Kinshasa","Africa/Lagos|Africa/Libreville","Africa/Lagos|Africa/Luanda","Africa/Lagos|Africa/Malabo","Africa/Lagos|Africa/Ndjamena","Africa/Lagos|Africa/Niamey","Africa/Lagos|Africa/Porto-Novo","Africa/Maputo|Africa/Blantyre","Africa/Maputo|Africa/Bujumbura","Africa/Maputo|Africa/Gaborone","Africa/Maputo|Africa/Harare","Africa/Maputo|Africa/Kigali","Africa/Maputo|Africa/Lubumbashi","Africa/Maputo|Africa/Lusaka","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|America/Juneau","America/Anchorage|America/Nome","America/Anchorage|America/Sitka","America/Anchorage|America/Yakutat","America/Anchorage|US/Alaska","America/Argentina/Buenos_Aires|America/Argentina/Catamarca","America/Argentina/Buenos_Aires|America/Argentina/ComodRivadavia","America/Argentina/Buenos_Aires|America/Argentina/Cordoba","America/Argentina/Buenos_Aires|America/Argentina/Jujuy","America/Argentina/Buenos_Aires|America/Argentina/La_Rioja","America/Argentina/Buenos_Aires|America/Argentina/Mendoza","America/Argentina/Buenos_Aires|America/Argentina/Rio_Gallegos","America/Argentina/Buenos_Aires|America/Argentina/Salta","America/Argentina/Buenos_Aires|America/Argentina/San_Juan","America/Argentina/Buenos_Aires|America/Argentina/San_Luis","America/Argentina/Buenos_Aires|America/Argentina/Tucuman","America/Argentina/Buenos_Aires|America/Argentina/Ushuaia","America/Argentina/Buenos_Aires|America/Buenos_Aires","America/Argentina/Buenos_Aires|America/Catamarca","America/Argentina/Buenos_Aires|America/Cordoba","America/Argentina/Buenos_Aires|America/Jujuy","America/Argentina/Buenos_Aires|America/Mendoza","America/Argentina/Buenos_Aires|America/Rosario","America/Campo_Grande|America/Cuiaba","America/Chicago|America/Indiana/Knox","America/Chicago|America/Indiana/Tell_City","America/Chicago|America/Knox_IN","America/Chicago|America/Matamoros","America/Chicago|America/Menominee","America/Chicago|America/North_Dakota/Center","America/Chicago|America/North_Dakota/New_Salem","America/Chicago|America/Rainy_River","America/Chicago|America/Rankin_Inlet","America/Chicago|America/Resolute","America/Chicago|America/Winnipeg","America/Chicago|CST6CDT","America/Chicago|Canada/Central","America/Chicago|US/Central","America/Chicago|US/Indiana-Starke","America/Chihuahua|America/Mazatlan","America/Chihuahua|Mexico/BajaSur","America/Denver|America/Boise","America/Denver|America/Cambridge_Bay","America/Denver|America/Edmonton","America/Denver|America/Inuvik","America/Denver|America/Ojinaga","America/Denver|America/Shiprock","America/Denver|America/Yellowknife","America/Denver|Canada/Mountain","America/Denver|MST7MDT","America/Denver|Navajo","America/Denver|US/Mountain","America/Fortaleza|America/Belem","America/Fortaleza|America/Maceio","America/Fortaleza|America/Recife","America/Fortaleza|America/Santarem","America/Halifax|America/Glace_Bay","America/Halifax|America/Moncton","America/Halifax|America/Thule","America/Halifax|Atlantic/Bermuda","America/Halifax|Canada/Atlantic","America/Havana|Cuba","America/Los_Angeles|America/Dawson","America/Los_Angeles|America/Ensenada","America/Los_Angeles|America/Santa_Isabel","America/Los_Angeles|America/Tijuana","America/Los_Angeles|America/Vancouver","America/Los_Angeles|America/Whitehorse","America/Los_Angeles|Canada/Pacific","America/Los_Angeles|Canada/Yukon","America/Los_Angeles|Mexico/BajaNorte","America/Los_Angeles|PST8PDT","America/Los_Angeles|US/Pacific","America/Los_Angeles|US/Pacific-New","America/Managua|America/Belize","America/Managua|America/Costa_Rica","America/Managua|America/El_Salvador","America/Managua|America/Guatemala","America/Managua|America/Regina","America/Managua|America/Swift_Current","America/Managua|America/Tegucigalpa","America/Managua|Canada/East-Saskatchewan","America/Managua|Canada/Saskatchewan","America/Manaus|America/Boa_Vista","America/Manaus|America/Porto_Velho","America/Manaus|Brazil/West","America/Mexico_City|America/Merida","America/Mexico_City|America/Monterrey","America/Mexico_City|Mexico/General","America/New_York|America/Detroit","America/New_York|America/Fort_Wayne","America/New_York|America/Indiana/Indianapolis","America/New_York|America/Indiana/Marengo","America/New_York|America/Indiana/Petersburg","America/New_York|America/Indiana/Vevay","America/New_York|America/Indiana/Vincennes","America/New_York|America/Indiana/Winamac","America/New_York|America/Indianapolis","America/New_York|America/Iqaluit","America/New_York|America/Kentucky/Louisville","America/New_York|America/Kentucky/Monticello","America/New_York|America/Louisville","America/New_York|America/Montreal","America/New_York|America/Nassau","America/New_York|America/Nipigon","America/New_York|America/Pangnirtung","America/New_York|America/Thunder_Bay","America/New_York|America/Toronto","America/New_York|Canada/Eastern","America/New_York|EST5EDT","America/New_York|US/East-Indiana","America/New_York|US/Eastern","America/New_York|US/Michigan","America/Noronha|Brazil/DeNoronha","America/Panama|America/Atikokan","America/Panama|America/Cayman","America/Panama|America/Coral_Harbour","America/Panama|America/Jamaica","America/Panama|EST","America/Panama|Jamaica","America/Phoenix|America/Creston","America/Phoenix|America/Dawson_Creek","America/Phoenix|America/Hermosillo","America/Phoenix|MST","America/Phoenix|US/Arizona","America/Rio_Branco|America/Eirunepe","America/Rio_Branco|America/Porto_Acre","America/Rio_Branco|Brazil/Acre","America/Santiago|Antarctica/Palmer","America/Santiago|Chile/Continental","America/Santo_Domingo|America/Anguilla","America/Santo_Domingo|America/Antigua","America/Santo_Domingo|America/Aruba","America/Santo_Domingo|America/Barbados","America/Santo_Domingo|America/Blanc-Sablon","America/Santo_Domingo|America/Curacao","America/Santo_Domingo|America/Dominica","America/Santo_Domingo|America/Grenada","America/Santo_Domingo|America/Guadeloupe","America/Santo_Domingo|America/Kralendijk","America/Santo_Domingo|America/Lower_Princes","America/Santo_Domingo|America/Marigot","America/Santo_Domingo|America/Martinique","America/Santo_Domingo|America/Montserrat","America/Santo_Domingo|America/Port_of_Spain","America/Santo_Domingo|America/Puerto_Rico","America/Santo_Domingo|America/St_Barthelemy","America/Santo_Domingo|America/St_Kitts","America/Santo_Domingo|America/St_Lucia","America/Santo_Domingo|America/St_Thomas","America/Santo_Domingo|America/St_Vincent","America/Santo_Domingo|America/Tortola","America/Santo_Domingo|America/Virgin","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","Asia/Almaty|Asia/Qyzylorda","Asia/Aqtobe|Asia/Aqtau","Asia/Aqtobe|Asia/Oral","Asia/Ashgabat|Asia/Ashkhabad","Asia/Baghdad|Asia/Aden","Asia/Baghdad|Asia/Bahrain","Asia/Baghdad|Asia/Kuwait","Asia/Baghdad|Asia/Qatar","Asia/Baghdad|Asia/Riyadh","Asia/Bangkok|Asia/Ho_Chi_Minh","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Saigon","Asia/Bangkok|Asia/Vientiane","Asia/Dhaka|Asia/Dacca","Asia/Dubai|Asia/Muscat","Asia/Hong_Kong|Hongkong","Asia/Jakarta|Asia/Pontianak","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kathmandu|Asia/Katmandu","Asia/Kolkata|Asia/Calcutta","Asia/Kolkata|Asia/Colombo","Asia/Kuala_Lumpur|Asia/Kuching","Asia/Makassar|Asia/Ujung_Pandang","Asia/Seoul|ROK","Asia/Shanghai|Asia/Chongqing","Asia/Shanghai|Asia/Chungking","Asia/Shanghai|Asia/Harbin","Asia/Shanghai|Asia/Macao","Asia/Shanghai|Asia/Macau","Asia/Shanghai|Asia/Taipei","Asia/Shanghai|PRC","Asia/Shanghai|ROC","Asia/Singapore|Singapore","Asia/Tashkent|Asia/Samarkand","Asia/Tehran|Iran","Asia/Thimphu|Asia/Thimbu","Asia/Tokyo|Japan","Asia/Ulaanbaatar|Asia/Ulan_Bator","Asia/Urumqi|Asia/Kashgar","Australia/Adelaide|Australia/Broken_Hill","Australia/Adelaide|Australia/South","Australia/Adelaide|Australia/Yancowinna","Australia/Brisbane|Australia/Lindeman","Australia/Brisbane|Australia/Queensland","Australia/Darwin|Australia/North","Australia/Lord_Howe|Australia/LHI","Australia/Perth|Australia/West","Australia/Sydney|Australia/ACT","Australia/Sydney|Australia/Canberra","Australia/Sydney|Australia/Currie","Australia/Sydney|Australia/Hobart","Australia/Sydney|Australia/Melbourne","Australia/Sydney|Australia/NSW","Australia/Sydney|Australia/Tasmania","Australia/Sydney|Australia/Victoria","Etc/UCT|UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Astrakhan|Europe/Ulyanovsk","Europe/Athens|Asia/Nicosia","Europe/Athens|EET","Europe/Athens|Europe/Bucharest","Europe/Athens|Europe/Helsinki","Europe/Athens|Europe/Kiev","Europe/Athens|Europe/Mariehamn","Europe/Athens|Europe/Nicosia","Europe/Athens|Europe/Riga","Europe/Athens|Europe/Sofia","Europe/Athens|Europe/Tallinn","Europe/Athens|Europe/Uzhgorod","Europe/Athens|Europe/Vilnius","Europe/Athens|Europe/Zaporozhye","Europe/Chisinau|Europe/Tiraspol","Europe/Dublin|Eire","Europe/Istanbul|Asia/Istanbul","Europe/Istanbul|Turkey","Europe/Lisbon|Atlantic/Canary","Europe/Lisbon|Atlantic/Faeroe","Europe/Lisbon|Atlantic/Faroe","Europe/Lisbon|Atlantic/Madeira","Europe/Lisbon|Portugal","Europe/Lisbon|WET","Europe/London|Europe/Belfast","Europe/London|Europe/Guernsey","Europe/London|Europe/Isle_of_Man","Europe/London|Europe/Jersey","Europe/London|GB","Europe/London|GB-Eire","Europe/Moscow|Europe/Volgograd","Europe/Moscow|W-SU","Europe/Paris|Africa/Ceuta","Europe/Paris|Arctic/Longyearbyen","Europe/Paris|Atlantic/Jan_Mayen","Europe/Paris|CET","Europe/Paris|Europe/Amsterdam","Europe/Paris|Europe/Andorra","Europe/Paris|Europe/Belgrade","Europe/Paris|Europe/Berlin","Europe/Paris|Europe/Bratislava","Europe/Paris|Europe/Brussels","Europe/Paris|Europe/Budapest","Europe/Paris|Europe/Busingen","Europe/Paris|Europe/Copenhagen","Europe/Paris|Europe/Gibraltar","Europe/Paris|Europe/Ljubljana","Europe/Paris|Europe/Luxembourg","Europe/Paris|Europe/Madrid","Europe/Paris|Europe/Malta","Europe/Paris|Europe/Monaco","Europe/Paris|Europe/Oslo","Europe/Paris|Europe/Podgorica","Europe/Paris|Europe/Prague","Europe/Paris|Europe/Rome","Europe/Paris|Europe/San_Marino","Europe/Paris|Europe/Sarajevo","Europe/Paris|Europe/Skopje","Europe/Paris|Europe/Stockholm","Europe/Paris|Europe/Tirane","Europe/Paris|Europe/Vaduz","Europe/Paris|Europe/Vatican","Europe/Paris|Europe/Vienna","Europe/Paris|Europe/Warsaw","Europe/Paris|Europe/Zagreb","Europe/Paris|Europe/Zurich","Europe/Paris|Poland","Pacific/Auckland|Antarctica/McMurdo","Pacific/Auckland|Antarctica/South_Pole","Pacific/Auckland|NZ","Pacific/Chatham|NZ-CHAT","Pacific/Chuuk|Pacific/Truk","Pacific/Chuuk|Pacific/Yap","Pacific/Easter|Chile/EasterIsland","Pacific/Guam|Pacific/Saipan","Pacific/Honolulu|HST","Pacific/Honolulu|Pacific/Johnston","Pacific/Honolulu|US/Hawaii","Pacific/Majuro|Kwajalein","Pacific/Majuro|Pacific/Kwajalein","Pacific/Pago_Pago|Pacific/Midway","Pacific/Pago_Pago|Pacific/Samoa","Pacific/Pago_Pago|US/Samoa","Pacific/Pohnpei|Pacific/Ponape"]
}),moment}),/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
function(global,factory){"object"==typeof exports&&exports?factory(exports):"function"==typeof define&&define.amd?define(["exports"],factory):factory(global.Mustache={})}(this,function(mustache){function isFunction(object){return"function"==typeof object}function escapeRegExp(string){return string.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function testRegExp(re,string){return RegExp_test.call(re,string)}function isWhitespace(string){return!testRegExp(nonSpaceRe,string)}function escapeHtml(string){return String(string).replace(/[&<>"'\/]/g,function(s){return entityMap[s]})}function parseTemplate(template,tags){function stripSpace(){if(hasTag&&!nonSpace)for(;spaces.length;)delete tokens[spaces.pop()];else spaces=[];hasTag=!1,nonSpace=!1}function compileTags(tags){if("string"==typeof tags&&(tags=tags.split(spaceRe,2)),!isArray(tags)||2!==tags.length)throw new Error("Invalid tags: "+tags);openingTagRe=new RegExp(escapeRegExp(tags[0])+"\\s*"),closingTagRe=new RegExp("\\s*"+escapeRegExp(tags[1])),closingCurlyRe=new RegExp("\\s*"+escapeRegExp("}"+tags[1]))}if(!template)return[];var openingTagRe,closingTagRe,closingCurlyRe,sections=[],tokens=[],spaces=[],hasTag=!1,nonSpace=!1;compileTags(tags||mustache.tags);for(var start,type,value,chr,token,openSection,scanner=new Scanner(template);!scanner.eos();){if(start=scanner.pos,value=scanner.scanUntil(openingTagRe))for(var i=0,valueLength=value.length;valueLength>i;++i)chr=value.charAt(i),isWhitespace(chr)?spaces.push(tokens.length):nonSpace=!0,tokens.push(["text",chr,start,start+1]),start+=1,"\n"===chr&&stripSpace();if(!scanner.scan(openingTagRe))break;if(hasTag=!0,type=scanner.scan(tagRe)||"name",scanner.scan(whiteRe),"="===type?(value=scanner.scanUntil(equalsRe),scanner.scan(equalsRe),scanner.scanUntil(closingTagRe)):"{"===type?(value=scanner.scanUntil(closingCurlyRe),scanner.scan(curlyRe),scanner.scanUntil(closingTagRe),type="&"):value=scanner.scanUntil(closingTagRe),!scanner.scan(closingTagRe))throw new Error("Unclosed tag at "+scanner.pos);if(token=[type,value,start,scanner.pos],tokens.push(token),"#"===type||"^"===type)sections.push(token);else if("/"===type){if(openSection=sections.pop(),!openSection)throw new Error('Unopened section "'+value+'" at '+start);if(openSection[1]!==value)throw new Error('Unclosed section "'+openSection[1]+'" at '+start)}else"name"===type||"{"===type||"&"===type?nonSpace=!0:"="===type&&compileTags(value)}if(openSection=sections.pop())throw new Error('Unclosed section "'+openSection[1]+'" at '+scanner.pos);return nestTokens(squashTokens(tokens))}function squashTokens(tokens){for(var token,lastToken,squashedTokens=[],i=0,numTokens=tokens.length;numTokens>i;++i)token=tokens[i],token&&("text"===token[0]&&lastToken&&"text"===lastToken[0]?(lastToken[1]+=token[1],lastToken[3]=token[3]):(squashedTokens.push(token),lastToken=token));return squashedTokens}function nestTokens(tokens){for(var token,section,nestedTokens=[],collector=nestedTokens,sections=[],i=0,numTokens=tokens.length;numTokens>i;++i)switch(token=tokens[i],token[0]){case"#":case"^":collector.push(token),sections.push(token),collector=token[4]=[];break;case"/":section=sections.pop(),section[5]=token[2],collector=sections.length>0?sections[sections.length-1][4]:nestedTokens;break;default:collector.push(token)}return nestedTokens}function Scanner(string){this.string=string,this.tail=string,this.pos=0}function Context(view,parentContext){this.view=view,this.cache={".":this.view},this.parent=parentContext}function Writer(){this.cache={}}var Object_toString=Object.prototype.toString,isArray=Array.isArray||function(object){return"[object Array]"===Object_toString.call(object)},RegExp_test=RegExp.prototype.test,nonSpaceRe=/\S/,entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},whiteRe=/\s*/,spaceRe=/\s+/,equalsRe=/\s*=/,curlyRe=/\s*\}/,tagRe=/#|\^|\/|>|\{|&|=|!/;Scanner.prototype.eos=function(){return""===this.tail},Scanner.prototype.scan=function(re){var match=this.tail.match(re);if(!match||0!==match.index)return"";var string=match[0];return this.tail=this.tail.substring(string.length),this.pos+=string.length,string},Scanner.prototype.scanUntil=function(re){var match,index=this.tail.search(re);switch(index){case-1:match=this.tail,this.tail="";break;case 0:match="";break;default:match=this.tail.substring(0,index),this.tail=this.tail.substring(index)}return this.pos+=match.length,match},Context.prototype.push=function(view){return new Context(view,this)},Context.prototype.lookup=function(name){var value,cache=this.cache;if(name in cache)value=cache[name];else{for(var names,index,context=this,lookupHit=!1;context;){if(name.indexOf(".")>0)for(value=context.view,names=name.split("."),index=0;null!=value&&index<names.length;)index===names.length-1&&null!=value&&(lookupHit="object"==typeof value&&value.hasOwnProperty(names[index])),value=value[names[index++]];else null!=context.view&&"object"==typeof context.view&&(value=context.view[name],lookupHit=context.view.hasOwnProperty(name));if(lookupHit)break;context=context.parent}cache[name]=value}return isFunction(value)&&(value=value.call(this.view)),value},Writer.prototype.clearCache=function(){this.cache={}},Writer.prototype.parse=function(template,tags){var cache=this.cache,tokens=cache[template];return null==tokens&&(tokens=cache[template]=parseTemplate(template,tags)),tokens},Writer.prototype.render=function(template,view,partials){var tokens=this.parse(template),context=view instanceof Context?view:new Context(view);return this.renderTokens(tokens,context,partials,template)},Writer.prototype.renderTokens=function(tokens,context,partials,originalTemplate){for(var token,symbol,value,buffer="",i=0,numTokens=tokens.length;numTokens>i;++i)value=void 0,token=tokens[i],symbol=token[0],"#"===symbol?value=this._renderSection(token,context,partials,originalTemplate):"^"===symbol?value=this._renderInverted(token,context,partials,originalTemplate):">"===symbol?value=this._renderPartial(token,context,partials,originalTemplate):"&"===symbol?value=this._unescapedValue(token,context):"name"===symbol?value=this._escapedValue(token,context):"text"===symbol&&(value=this._rawValue(token)),void 0!==value&&(buffer+=value);return buffer},Writer.prototype._renderSection=function(token,context,partials,originalTemplate){function subRender(template){return self.render(template,context,partials)}var self=this,buffer="",value=context.lookup(token[1]);if(value){if(isArray(value))for(var j=0,valueLength=value.length;valueLength>j;++j)buffer+=this.renderTokens(token[4],context.push(value[j]),partials,originalTemplate);else if("object"==typeof value||"string"==typeof value||"number"==typeof value)buffer+=this.renderTokens(token[4],context.push(value),partials,originalTemplate);else if(isFunction(value)){if("string"!=typeof originalTemplate)throw new Error("Cannot use higher-order sections without the original template");value=value.call(context.view,originalTemplate.slice(token[3],token[5]),subRender),null!=value&&(buffer+=value)}else buffer+=this.renderTokens(token[4],context,partials,originalTemplate);return buffer}},Writer.prototype._renderInverted=function(token,context,partials,originalTemplate){var value=context.lookup(token[1]);return!value||isArray(value)&&0===value.length?this.renderTokens(token[4],context,partials,originalTemplate):void 0},Writer.prototype._renderPartial=function(token,context,partials){if(partials){var value=isFunction(partials)?partials(token[1]):partials[token[1]];return null!=value?this.renderTokens(this.parse(value),context,partials,value):void 0}},Writer.prototype._unescapedValue=function(token,context){var value=context.lookup(token[1]);return null!=value?value:void 0},Writer.prototype._escapedValue=function(token,context){var value=context.lookup(token[1]);return null!=value?mustache.escape(value):void 0},Writer.prototype._rawValue=function(token){return token[1]},mustache.name="mustache.js",mustache.version="2.0.0",mustache.tags=["{{","}}"];var defaultWriter=new Writer;mustache.clearCache=function(){return defaultWriter.clearCache()},mustache.parse=function(template,tags){return defaultWriter.parse(template,tags)},mustache.render=function(template,view,partials){return defaultWriter.render(template,view,partials)},mustache.to_html=function(template,view,partials,send){var result=mustache.render(template,view,partials);return isFunction(send)?void send(result):result},mustache.escape=escapeHtml,mustache.Scanner=Scanner,mustache.Context=Context,mustache.Writer=Writer}),function(){$(document).on("click",".js-billing-upgrade-trigger",function(e){var cancel,context,desiredPlan,id,modify,reload;return e.preventDefault(),cancel=$(this).data("cancel"),context=$(this).data("context"),desiredPlan=$(this).data("desired-plan"),id=$(this).data("id"),modify=$(this).data("modify"),reload=$(this).data("reload"),$.takeover("/site-upgrade/"+id+"?cancel="+encodeURIComponent(cancel)+"&context="+encodeURIComponent(context)+"&desired_plan="+encodeURIComponent(desiredPlan)+"&modify="+encodeURIComponent(modify)+"&reload="+encodeURIComponent(reload),{callback:function($container){return angular.bootstrap($container.find("[ng-controller]")[0],["App"])}})}),$(document).on("click",".js-billing-credits-trigger",function(e){var id,limitType,reload;return e.preventDefault(),limitType=$(this).data("limit-type").toLowerCase(),id=$(this).data("site-id"),reload=$(this).data("reload"),$.takeover("/sites/"+id+"-x/"+limitType+"/credits-purchase/"+encodeURIComponent(limitType)+"?reload="+encodeURIComponent(reload),{callback:function($container){angular.bootstrap($container.find("[ng-controller]")[0],["App"])},closeButton:!1})})}.call(this),$(document).on("turbolinks:request-start",function(){$("#page-loading").addClass("shown"),$("select").not(".chzn-select, .chzn-select-dynamic, .no-dropkick").dropkick()}).on("turbolinks:load",function(){$("#page-loading").removeClass("shown"),$("select").not(".chzn-select, .chzn-select-dynamic, .no-dropkick").dropkick()}).on("turbolinks:before-visit",function(){window._app&&window._app.widget&&window._app.widget.unload&&window._app.widget.unload(),window._app=null,window._galleryApp&&window._galleryApp.unload&&window._galleryApp.unload(),window._galleryApp=null}),function(){var PlanSelection;window.API.planSelections=window.API.initEndpoint({type:"plan_selection","class":PlanSelection=function(){function PlanSelection(){}return PlanSelection}(),attributes:["plan_type","desired_cycle"],relationships:{site:{type:"site"},desired_plan:{type:"plan"}},nested_relationships:{limit_selections:{type:"limit_selection",attributes:["desired_limit","limit_type"]}}})}.call(this),function(){$(document).on("click","[data-append]",function(){var nonCDN;return nonCDN=$($(this).data("append")).text().replace(/js\\./g,""),setTimeout(function(){return $("body").append(nonCDN)},1)}),$(window).on("message onmessage",function(e){var data;try{if(data=JSON.parse(event.data),"capture_preview:resize"===data.command)return data.height>410?$(".campaign-live-preview iframe").attr("height",data.height+90):$(".campaign-live-preview iframe").attr("height","500px")}catch(error){}})}.call(this),/*!
  SerializeJSON jQuery plugin.
  https://github.com/marioizquierdo/jquery.serializeJSON
  version 1.0.1 (Aug 20, 2012)

  Copyright (c) 2012 Mario Izquierdo
  Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
  and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
*/
function(b){b.fn.serializeJSON=function(){var d,c;return d={},c=this.serializeArray(),b.each(c,function(g,e){var f,j,h;f=e.name,j=e.value,h=b.map(f.split("["),function(i){var k;return k=i[i.length-1],"]"===k?i.substring(0,i.length-1):i}),""===h[0]&&h.shift(),b.deepSet(d,h,j)}),d};var a=function(c){return c===Object(c)};b.deepSet=function(c,k,g){if(!k||0===k.length)throw new Error("ArgumentError: keys param expected to be an array with least one key");var i,d,f,h,j,e;i=k[0],d=k[1],void 0!==d&&null!==d?(f=k.slice(1),""===i&&(j=c.length-1,e=c[c.length-1],a(e)&&!e[d]?i=j:(c.push({}),i=j+1)),void 0===c[i]&&(h=""!==d&&isNaN(parseInt(d,10))?{}:[],c[i]=h),b.deepSet(c[i],f,g)):""===i?c.push(g):c[i]=g}}(jQuery),$(document).on("click",".btn-add-card",function(e){e.preventDefault();var $t=$(this),$form=$t.closest("form"),buttonText=$t.data("button-text");0===$form.find("[name=stripeToken]").size()&&e.preventDefault(),window.addStripeCard({panelLabel:buttonText},function(response){var $input=$("<input type=hidden name=stripeToken />").val(response.id);$form.append($input).submit(),$form.find(".btn").attr({disabled:!0})},function(){})}),$(function(){function initHandler(options){window.StripeCheckout&&(handler=StripeCheckout.configure({key:window.stripePublishableKey,image:"/images/small-logo.png",panelLabel:options.panelLabel||"Buy",color:"black",token:function(token){window.stripeSuccessCallback(token)}}))}var handler;initHandler({}),window.addStripeCard=function(options,successCallback,closedCallback){initHandler(options),window.stripeSuccessCallback=successCallback,handler.open({name:"Please add your card...",address:!0,color:"black",email:options.email,closed:closedCallback})}}),function(){!function($,window,document){var content,contentLoaded,globalOptions,hide,isShown,resetContentLoaded,show,takeover;return globalOptions={},content=function(){return $(".takeover .takeover__content")},isShown=function(){return takeover().hasClass("takeover--shown")},show=function(){return $("html").addClass("takeover-shown"),setTimeout(function(){return takeover().addClass("takeover--shown")},0)},contentLoaded=function(){return $(".takeover").size()>0?(takeover().removeClass("is-loading"),takeover().addClass("takeover--content-loaded")):void 0},resetContentLoaded=function(){return takeover().removeClass("takeover--content-loaded"),takeover().addClass("is-loading")},hide=function(){return $("html").removeClass("takeover-shown"),takeover().removeClass("takeover--shown"),setTimeout(function(){return content().html(""),takeover().remove()},200)},takeover=function(options){var closeMarkup;return null==options&&(options={}),closeMarkup=globalOptions.closeButton!==!1?'<a href=# class="takeover__close"></a>':"",0===$(".takeover").size()&&$("body").append('<div class="takeover js-takeover is-loading">'+closeMarkup+'<div class="multicolor-spinner"></div><div class="takeover__inner"><div class="takeover__content"></div></div></div></div>'),$(".takeover")},$.takeover=function(url,options){var ready,takeoverHTML;return null==options&&(options={}),globalOptions=options,takeoverHTML=null,resetContentLoaded(),$.get(url,function(data){return takeoverHTML=data,ready(),contentLoaded()}).fail(function(){return alert("Sorry, something went wrong")}),ready=function(){return takeoverHTML&&(content().html(takeoverHTML),options.callback)?options.callback.call(content(),content()):void 0},isShown()?(hide(),setTimeout(function(){return show(),ready()},200)):(show(),ready())},$(document).on("click",".takeover .takeover__close",function(e){var scope;return e.preventDefault(),scope=$(".takeover [ng-controller]").scope(),scope&&scope.ctrl&&scope.ctrl.closeTakeoverFunction?scope.ctrl.closeTakeoverFunction.call(window,hide):hide()}),$(document).on("click",".takeover-clicker",function(e){var type;return e.preventDefault(),takeover().remove(),type=$(this).data("takeover-type"),type&&takeover().addClass("takeover--"+type),$.takeover($(this).attr("href"),{callback:function($container){return angular.bootstrap($container.find("[ng-controller]")[0],["App"])}})}),$("html").removeClass("takeover-shown")}(jQuery,window,document)}.call(this),function(){var Task;window.API.tasks=window.API.initEndpoint({type:"task","class":Task=function(){function Task(){}return Task}(),attributes:["error_message","status","value","task_type","count","entry_status","entry_position","entry_start_date_str","entry_end_date_str","allow_repeated_winners"],relationships:{campaign:{type:"campaign"},entry:{type:"entry"},entry_method:{type:"entry_method"},site:{type:"site"}}}),window.API.tasks.complete=function(data,options){var afterCreation;return null==options&&(options={}),options.progress||(options.progress=function(){}),options.complete||(options.complete=function(){}),options.always||(options.always=function(){}),afterCreation=function(model){var abort,progressCallback;return progressCallback=function(){return window.API.tasks.get(model.id,{success:function(model){var currentTime;return options.progress.call(window,model,abort),null!==model.error_message?options.failure.call(window,model):model.status?("DrawWinners"===model.task_type&&(currentTime=new Date),"DrawWinners"===model.task_type&&this.lastStatus===model.status&&currentTime-this.statusTime>3e4?(model.error_message="Winner drawing task has stalled, try again later",options.failure.call(window,model)):("DrawWinners"===model.task_type&&model.status!==this.lastStatus&&(this.statusTime=currentTime,this.lastStatus=model.status),model.status>=100?(options.complete.call(window,model),options.always.call(window,model)):setTimeout(progressCallback,1e3))):(options.progress.call(window,model,abort),setTimeout(progressCallback,1e3))},failure:function(){return options.always.call(window)}})},abort=function(){return progressCallback=function(){}},options.progress.call(window,model,abort),setTimeout(progressCallback,1e3)},window.API.tasks.create(data,{success:afterCreation,failure:function(jqXHR,textStatus,errorThrown,data){return onError.call(this,jqXHR,textStatus,errorThrown,data),options.always.call(this)}})}}.call(this),function(){$(document).on("click",".async-task",function(e){var $a,$error,$status,args,behaviour,cleanUp,complete,failure,interval,params,progress,statusText,type;return e.preventDefault(),e.stopPropagation(),$a=$(this),$a.attr("disabled")?void 0:(interval=null,args=$a.data("task-args"),type=$a.data("task-type"),behaviour=$a.data("behaviour"),$status=$a.find(".async-task__status"),$error=$a.find(".async-task__error"),$a.addClass("async-task--in-progress"),$a.attr("disabled",!0),statusText=function(text){return $status.text(text),$error.hide(),$status.show()},statusText("(0%)"),cleanUp=function(message){return interval&&(clearInterval(interval),interval=null),message?($error.text("("+message+")"),$status.hide(),$error.show(),$a.addClass("async-task--failed")):statusText(""),$a.removeClass("async-task--in-progress"),$a.removeAttr("disabled")},complete=function(task){return task.status<0?cleanUp(task.error_message):"download"===behaviour?(window.setTimeout(cleanUp,250,null),window.location.assign(window.location.protocol+"//"+window.location.host+"/downloads/tasks/"+task.id)):window.location.href=window.location.href},failure=function(task){return cleanUp(task.error_message)},progress=function(task,abort){var completeness;return $.contains(document,$a[0])||abort(),completeness=task.status,null!==completeness&&completeness>=0&&$status.size()>=0?statusText("("+completeness+"%)"):void 0},$(document).on("turbolinks:load, turbolinks:before-cache",function(){return interval?(clearInterval(interval),interval=null):void 0}),params=args,params.task_type=type,API.tasks.complete(params,{progress:progress,complete:complete,failure:failure}))})}.call(this),function(){var User;window.API.users=window.API.initEndpoint({type:"user","class":User=function(){function User(){}return User}(),attributes:["name","email"]})}.call(this),function(){var popupForm;$(document).on("turbolinks:load",function(){var domain,here,name;return name="hello",domain="gleam.io",here=name+"@"+domain,$("a.mailus").each(function(){return $(this).attr("href","mailto:"+here).text(here)}),$('[data-behaviour="toggle-area"] input[type=radio]:checked, [data-behaviour="toggle-area"] input[type=checkbox]:checked').trigger("change"),setTimeout(function(){return $(".auto-focus").first().focus()},0)}),popupForm=function(clickSelector,formSelector,title,focusOn){return $(document).on("click",clickSelector,function(e){var $t;return $t=$(this),$t.offset().top<50||0===$t.parents(".nav").size()?(e.preventDefault(),""!==$t.data("original-title")&&$t.popover({title:title,trigger:"manual",html:"true",content:function(){var $container;return $container=$(formSelector).clone(),angular.bootstrap($container[0],["App"]),$container}}),$("[data-original-title]").not($t).popover("hide"),$t.popover("toggle"),setTimeout(function(){return $(focusOn).focus()},200)):void 0})},popupForm("[data-login]","#login-form form","Login to Gleam","#user_email:visible"),$(document).on("change",'[data-behaviour="toggle-area"] input[type=radio], [data-behaviour="toggle-area"] input[type=checkbox], [data-behaviour="toggle-area"] select.no-dropkick',function(){var $area,$areas,$t,v;return $t=$(this),$t.hasClass("no-toggle")||($area=$t.closest('[data-behaviour="toggle-area"]'),$area.find("[data-toggle-area-input]").size()>0&&$area.find("[data-toggle-area-input]").data("toggle-area-input")!==$t.data("toggle-area-input"))?void 0:(v="checkbox"===$t.attr("type")?$t.is(":checked")?"checked":"unchecked":$t.val(),$areas=$area.find("[data-toggle-area]").not($area.find("[data-toggle-area] [data-toggle-area]")),$areas.find(":input").not($areas.find(":input[type='checkbox']")).attr("disabled","disabled"),$areas.hide().filter("[data-toggle-area]").filter(function(){return($(this).data("toggle-area")+"").split(/\|\|/).indexOf(v)>=0}).show().find(":input").not("[data-force-disabled=true]").removeAttr("disabled"),$areas=$area.find("[data-hide-area]").not($area.find("[data-hide-area] [data-hide-area]")),$areas.find(":input").attr("disabled","disabled"),$areas.hide().filter("[data-hide-area]").filter(function(){return-1===($(this).data("hide-area")+"").split(/\|\|/).indexOf(v)}).show().find(":input").not("[data-force-disabled=true]").removeAttr("disabled"))}).on("submit","form.js-ajax-submit",function(e){var $form;return e.preventDefault(),$form=$(this),$.post($form.attr("action"),$form.serialize(),function(data){var $newForm,$response;try{return $newForm=$("#"+$form.attr("id")+"[action='"+$form.attr("action")+"']",data).not("#login-form form").first(),$response=$(".ajax-form-response",data).first(),$newForm.size()>0?($form.replaceWith($newForm),$newForm.find(".error :input:visible, :input:visible").first().focus()):$response.size()>0&&$form.replaceWith($response),angular.bootstrap($newForm[0],["App"])}catch(error){}})}),$(document).on("click","[data-clear-cookie]",function(e){return Cookies.remove($(this).data("clear-cookie"))}).on("click","[data-remove-element]",function(e){return $($(this).data("remove-element")).remove()}).on("click","[data-modal-clone]",function(e){return e.stopPropagation(),$(".modal").modal("hide"),$($(this).attr("href")).remove(),$("body").append($($(this).data("modal-clone")).html()),$($(this).attr("href")).modal("show")}).on("click","[data-dismiss=modal]",function(e){return $(".modal").modal("hide")}).on("click","[data-help-modal]",function(e){var $click,anchorName,href;return e.stopPropagation(),$click=$(this),href=$click.attr("href"),anchorName=href.replace(/.*#/,""),$(".modal").modal("hide"),$("#help-modal").remove(),$("body").append($("#help-modal-template").html()),$("#help-modal").modal("show"),$("#help-modal .modal-body").css("maxHeight",$(window).height()-101+"px"),$.get(href,function(data){var $anchor,$child,$children,$github,heading,helpHtml,i,index,j,ref,ref1;if($github=$(".github-md",data),$children=$github.children(),helpHtml="",heading=null,href.match(/#/)){for($anchor=$github.find("a[name="+anchorName+"]").first().closest(".github-md > *"),index=$children.index($anchor),i=j=ref=index+1,ref1=$children.size();ref1>j;i=j+=1)if($child=$children.eq(i),0===$child.find("a[name]").size())!heading&&$child.find("h2,h3,h4")?heading=$child.text():helpHtml+=$child[0].outerHTML;else if(""!==helpHtml)break}else $github.find("h1").remove(),helpHtml=$github.html(),heading=$("h1",data).text();return $("#help-modal .modal-body").html(helpHtml).find("a").attr("target","_blank"),$("#help-modal .modal-header h3").text("Help: "+heading),$("#help-modal .modal-header h3").append($("<a style='inline-block; padding-left: 6px;' target='_blank'><i class='fa fa-link'></i></a>").attr("href",href)),window.initFragment($("#help-modal .modal-body"))}),e.preventDefault()}).on("click",".js-options [data-action]",function(e){var $container,$dd,$t,isWinnerTab;return $t=$(this),$container=$t.closest(".js-options"),$dd=$container.find(".dropdown-toggle"),e.preventDefault(),$dd.dropdown("toggle").width($dd.width()).html('<i class="fa fa-spinner fa-spin"></i>'),isWinnerTab=function(){return $("#winners.active").length>0},$.ajax({url:$t.data("action"),dataType:"html",type:$t.data("method"),success:function(data){var $data;return $data=$(data),isWinnerTab()?$t.data("reload")?window.location.reload():($container.parents("tr").remove(),$("#winners table tr").length<=1&&$("#winners table").remove(),$("#win-status").load($("#win-status").data("reload-path"))):$container.replaceWith($data),$data.find("a[rel=popover], [data-toggle=popover]").popover(),$($container.data("reload-on-change")).each(function(){return $(this).load($(this).data("reload-path"))})},xhr:function(){return void 0!==document.documentMode&&8===document.documentMode?new window.ActiveXObject("Microsoft.XMLHTTP"):$.ajaxSettings.xhr()}}),$t.addClass("disabled")}).on("click","[data-login-link]",function(){return $("body.logged-in").size()>0?$(this).attr("href",$(this).data("login-link")):void 0}).on("click","[data-popup-window]",function(e){return window.open($(this).attr("href"),"_blank",$(this).attr("data-popup-window")),e.preventDefault()}).on("click","[data-tab-clicker]",function(e){var $target;return e.preventDefault(),$target=$("[href='"+$(this).attr("href")+"'][data-toggle=tab]").click()}).on("click","[data-facebook-login]",function(e){return $("[ng-controller=SignupController]").scope().facebookLogin(),$(this).addClass("facebook-logging-in")}).on("click","[data-signup]",function(e){return $("#lead-form").size()>0?(e.preventDefault(),$("#lead-form").modal("show"),trackPageview("/lead/click")):void 0}).on("tagchange","[data-tweet-hashtags]",function(e){var $t,tweetField,tweetFieldName;return $t=$(this),tweetFieldName=$t.data("tweet-field"),tweetFieldName?(tweetField=$("[name='"+$t.attr("name").replace(/config\d/,tweetFieldName)+"']"),tweetField.trigger("change")):void 0}).on("keyup change paste","[data-tweet-limit]",function(e){var $l,$sizeHint,$t,data,hashtagAllocation,hashtagField,hashtags,initialSize,j,len,linkParsedSize,tag,tags;if($t=$(this),data=$t.val(),$l=$t.closest(".control-group").find("label"),initialSize=data.replace(/\[LINK\]/gi,"https://bit.ly/1234567").replace(/http:\/\/[^\s]{14,140}/gi,"_______________________").replace(/https:\/\/[^\s]{15,140}/gi,"_______________________").replace(/(^|[^\/a-z0-9])([a-z0-9-]+\.)+[a-z]+\/[^\s]+/gi,"$1________________________").length,hashtagAllocation=0,hashtagField=$t.data("hashtags-field"))for(hashtags=$("[name='"+$t.attr("name").replace(/config\d/,hashtagField)+"']").val(),tags=hashtags.split(","),j=0,len=tags.length;len>j;j++)tag=tags[j],data.match(new RegExp(tag))||(hashtagAllocation+=tag.length+1);return linkParsedSize=initialSize+hashtagAllocation+(data.match(/https?:\/\/(?!pic\.twitter\.com|t\.co)[^ ]+[^ ,.]/i)?0:24),$sizeHint=$l.find(".size-hint"),0===$sizeHint.size()&&($sizeHint=$("<span class=size-hint></span>"),$l.append($sizeHint)),$sizeHint.text(" ("+linkParsedSize+"/140)"),$sizeHint.toggleClass("size-hint-error",0===initialSize||linkParsedSize>140)}).on("click","[data-example-site-tab]",function(e){var key;return $("#c9-blocker, #c9-button, #c9-popup").remove(),key=$(this).data("example-site-tab").replace(/[^a-z0-9]/gi,""),$.getScript("/"+key+"/ol.js",function(){return setTimeout(function(){return $("#c9-button").remove(),window[window.actionMarketingAppName].showPopup()},0)}),e.preventDefault()}).on("click","[data-test-webhook]",function(){var $t,always,campaign,done,siteId,url;return $t=$(this),url=$('[name="campaign[webhook_url]"]').val(),siteId=$t.data("test-webhook"),campaign=$("form.campaign").serializeJSON().campaign,always=function(){return $t.removeClass("disabled"),$t.find("i").addClass("fa-exchange").removeClass("fa-refresh").removeClass("fa-spin")},done=function(response){return always(),response?alert(response):void 0},$t.hasClass("disabled")?void 0:url?($t.addClass("disabled"),$t.find("i").removeClass("fa-exchange").addClass("fa-refresh").addClass("fa-spin"),$.post("/campaigns/send-test-webhook",{webhook_url:url,campaign_type:campaign.campaign_type,site_id:siteId},done).error(function(){return alert("Sorry, something went wrong sending the email."),always()})):alert("Please enter a URL to test your webhook")}).on("click","[data-test-email]",function(){var $t,allowed_attrs,always,campaign,default_claim,done,entry_methods,incentive;return $t=$(this),$t.hasClass("disabled")?void 0:(allowed_attrs=["config1","config2","config3","config4","config5","config6","config7","config8","worth","entry_type","interval_seconds"],campaign=$("form.campaign").serializeJSON().campaign,entry_methods=(campaign.entry_methods_attributes||[]).filter(function(entry_method){return"true"!==entry_method._destroy}).map(function(entry_method){var attr,em,j,len;for(em={},j=0,len=allowed_attrs.length;len>j;j++)attr=allowed_attrs[j],em[attr]=entry_method[attr];return em}),incentive=campaign.incentives_attributes[0],default_claim="Coupon"===incentive.data_type?"CODE123":"https://example.com/my-link",always=function(){return $t.removeClass("disabled"),$t.find("i").addClass("fa-envelope-o").removeClass("fa-refresh").removeClass("fa-spin")},done=function(response){return always(),response?alert(response):void 0},campaign.custom_confirmation_email_subject&&campaign.custom_confirmation_email_body&&entry_methods.length>0?($t.find("i").removeClass("fa-envelope-o").addClass("fa-refresh").addClass("fa-spin"),$t.addClass("disabled"),$.post("/campaigns/send-test-confirmation-email",{subject:campaign.custom_confirmation_email_subject,body:campaign.custom_confirmation_email_body,name:campaign.name,default_language:campaign.default_language,key:campaign.key,site_id:campaign.site_id,entry_methods:entry_methods,claim_data:(incentive.data||default_claim).strip().split(/[\n ,]/i)[0]},done).error(function(){return alert("Sorry, something went wrong sending the email."),always()})):(entry_methods.length>0?alert("Sorry, you must have an subject and body to send the test email"):alert("Sorry, you must have at least one action to send the test email"),done()))}).on("click","[data-test-email-configuration]",function(e){var $t,done,field,input,j,len,m,ref;if(e.preventDefault(),$t=$(this),!$t.hasClass("disabled")){for(m={email_configuration:{},user_id:$t.data("configuration-user-id"),site_id:$t.data("configuration-site-id")},ref=["address","domain","user_name","password","default_reply_to","default_from","authentication","enable_starttls_auto"],j=0,len=ref.length;len>j;j++)field=ref[j],input=$('[name*="[email_configuration_attributes]['+field+']"]'),"hidden"===input.attr("type")?m.email_configuration[field]=input.is(":checked"):m.email_configuration[field]=input.val();return done=function(response){return $t.removeClass("disabled"),$t.find("i").addClass("fa-envelope-o").removeClass("fa-refresh").removeClass("fa-spin"),response?alert(response):void 0},$t.find("i").removeClass("fa-envelope-o").addClass("fa-refresh").addClass("fa-spin"),$.post("/users/test-email-configuration",m,done)}}).on("submit",".single-submit",function(e){var $t;return $t=$(this),$t.data("submitting")?confirm("This form is already being submitted. Submitting it again could cause duplicates.  Are you sure?")?void 0:e.preventDefault():$t.data("submitting",!0)}).on("scroll",window,function(e){var $s,clone;return $s=$(".sticky-nav"),$s.size()>0?(clone=$s.data("clone"),clone||(clone=$s.clone(),clone.addClass("sticky-nav-clone"),$s.data("clone",clone),$("body").append(clone)),$(window).scrollTop()>=$s.offset().top?clone.show():clone.hide()):void 0}).on("click","[data-copy-prompt]",function(e){var $t,example_suffix,key,siteId;return e.preventDefault(),$t=$(this),key=$t.data("copy-key"),siteId=$t.data("copy-site-id"),example_suffix=$t.data("copy-example")?"&example=true":"",$.get("/campaigns/prepare-copy/"+key+"?site_id="+siteId+example_suffix,function(data){return $("#copy-modal").remove(),$("body").append(data),$("#copy-modal").modal("show")}).error(function(){return alert("Sorry, something went wrong when attempting to copy.")})}).on("click","[data-upgrade-prompt]",function(e){var context,feature,planTabLink,reload,userId;return e.preventDefault(),userId=$(this).data("upgrade-user-id"),context=$(this).data("upgrade-context"),feature=$(this).data("upgrade-prompt"),reload=$(this).data("upgrade-reload"),planTabLink=$(this).data("plan-tab-link"),$.takeover("/purchases/"+userId+"/prepare-upgrade?context="+encodeURIComponent(context)+"&reload="+encodeURIComponent(reload)+"&plan-tab-link="+encodeURIComponent(planTabLink)+"&feature="+encodeURIComponent(feature),{callback:function($container){return angular.bootstrap($container.find("[ng-controller]")[0],["App"])}})}).on("click","[data-billing-card-id]",function(e){var $modal,cardId,id,userId;return e.preventDefault(),cardId=$(this).data("billing-card-id"),id=$(this).data("billing-contact-id"),userId=$(this).data("billing-user-id"),$modal=$("#billing-contact-modal"),id?window.API.billingContacts.get(id,{success:function(data,textStatus,jqXHR){return $modal.scope().ctrl.initBillingContact(data),$modal.modal("show"),$modal.scope().$apply()}}):($modal.scope().ctrl.initBillingContact({user_id:userId,card_id:cardId}),$modal.modal("show"),$modal.scope().$apply())}).on("click","[data-remove-billing-contact]",function(e){var id;return e.preventDefault(),id=$(this).data("remove-billing-contact"),confirm("Are you sure you want to remove this Billing Contact?")?window.API.billingContacts["delete"]({id:id},{success:function(model){return alert("Billing contact has been removed"),window.location.reload()}}):void 0}).on("click","[data-draw-winners]",function(e){var $link,campaignId;return $link=$(this),$link.addClass("toggle-state--off"),campaignId=$(this).data("draw-winners"),$("[ng-controller*='DrawWinnersController']").scope().ctrl.load(function(campaignId){return $link.removeClass("toggle-state--off"),$("#draw-winners").modal("show")})}),$(document).on("turbolinks:load",function(){return window.testimonalsFlicker&&clearInterval(window.testimonalsFlicker),window.testimonalsFlicker=setInterval(function(){return $(".transition-active").each(function(){var $children,$t,index,newIndex;return $t=$(this),$children=$t.find("> li"),index=$t.find(".active").index(),newIndex=index===$children.size()-1?0:index+1,$t.find(".active").removeClass("active"),$children.eq(newIndex).addClass("active")})},1e4),navigator.userAgent.match(/MSIE [4-8]/gi)||$("pre[lang]").each(function(){return $(this).find("code").addClass($(this).attr("lang")),hljs.highlightBlock($(this).find("code")[0])}),$("input, textarea").placeholder(),new String(window.location.hash).match(/^#\/?support-modal/)?setTimeout(function(){return $("[href=#support-modal]").click()},1):void 0})}.call(this),function(){function aa(a,b,c){return a.call.apply(a.bind,arguments)}function ba(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,d),a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function p(a,b,c){return p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aa:ba,p.apply(null,arguments)}function ca(a,b){this.a=a,this.m=b||a,this.c=this.m.document}function t(a,b,c,d){if(b=a.c.createElement(b),c)for(var e in c)c.hasOwnProperty(e)&&("style"==e?b.style.cssText=c[e]:b.setAttribute(e,c[e]));return d&&b.appendChild(a.c.createTextNode(d)),b}function u(a,b,c){a=a.c.getElementsByTagName(b)[0],a||(a=document.documentElement),a.insertBefore(c,a.lastChild)}function v(a){a.parentNode&&a.parentNode.removeChild(a)}function w(a,b,c){b=b||[],c=c||[];for(var d=a.className.split(/\s+/),e=0;e<b.length;e+=1){for(var f=!1,g=0;g<d.length;g+=1)if(b[e]===d[g]){f=!0;break}f||d.push(b[e])}for(b=[],e=0;e<d.length;e+=1){for(f=!1,g=0;g<c.length;g+=1)if(d[e]===c[g]){f=!0;break}f||b.push(d[e])}a.className=b.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function y(a,b){for(var c=a.className.split(/\s+/),d=0,e=c.length;e>d;d++)if(c[d]==b)return!0;return!1}function z(a){if("string"==typeof a.f)return a.f;var b=a.m.location.protocol;return"about:"==b&&(b=a.a.location.protocol),"https:"==b?"https:":"http:"}function ea(a){return a.m.location.hostname||a.a.location.hostname}function A(a,b,c){function d(){k&&e&&f&&(k(g),k=null)}b=t(a,"link",{rel:"stylesheet",href:b,media:"all"});var e=!1,f=!0,g=null,k=c||null;da?(b.onload=function(){e=!0,d()},b.onerror=function(){e=!0,g=Error("Stylesheet failed to load"),d()}):setTimeout(function(){e=!0,d()},0),u(a,"head",b)}function B(a,b,c,d){var e=a.c.getElementsByTagName("head")[0];if(e){var f=t(a,"script",{src:b}),g=!1;return f.onload=f.onreadystatechange=function(){g||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(g=!0,c&&c(null),f.onload=f.onreadystatechange=null,"HEAD"==f.parentNode.tagName&&e.removeChild(f))},e.appendChild(f),setTimeout(function(){g||(g=!0,c&&c(Error("Script load timeout")))},d||5e3),f}return null}function C(){this.a=0,this.c=null}function D(a){return a.a++,function(){a.a--,E(a)}}function F(a,b){a.c=b,E(a)}function E(a){0==a.a&&a.c&&(a.c(),a.c=null)}function G(a){this.a=a||"-"}function H(a,b){this.c=a,this.f=4,this.a="n";var c=(b||"n4").match(/^([nio])([1-9])$/i);c&&(this.a=c[1],this.f=parseInt(c[2],10))}function fa(a){return I(a)+" "+(a.f+"00")+" 300px "+J(a.c)}function J(a){var b=[];a=a.split(/,\s*/);for(var c=0;c<a.length;c++){var d=a[c].replace(/['"]/g,"");-1!=d.indexOf(" ")||/^\d/.test(d)?b.push("'"+d+"'"):b.push(d)}return b.join(",")}function K(a){return a.a+a.f}function I(a){var b="normal";return"o"===a.a?b="oblique":"i"===a.a&&(b="italic"),b}function ga(a){var b=4,c="n",d=null;return a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10)))),c+b}function ha(a,b){this.c=a,this.f=a.m.document.documentElement,this.h=b,this.a=new G("-"),this.j=!1!==b.events,this.g=!1!==b.classes}function ia(a){a.g&&w(a.f,[a.a.c("wf","loading")]),L(a,"loading")}function M(a){if(a.g){var b=y(a.f,a.a.c("wf","active")),c=[],d=[a.a.c("wf","loading")];b||c.push(a.a.c("wf","inactive")),w(a.f,c,d)}L(a,"inactive")}function L(a,b,c){a.j&&a.h[b]&&(c?a.h[b](c.c,K(c)):a.h[b]())}function ja(){this.c={}}function ka(a,b,c){var e,d=[];for(e in b)if(b.hasOwnProperty(e)){var f=a.c[e];f&&d.push(f(b[e],c))}return d}function N(a,b){this.c=a,this.f=b,this.a=t(this.c,"span",{"aria-hidden":"true"},this.f)}function O(a){u(a.c,"body",a.a)}function P(a){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+J(a.c)+";"+("font-style:"+I(a)+";font-weight:"+(a.f+"00")+";")}function Q(a,b,c,d,e,f){this.g=a,this.j=b,this.a=d,this.c=c,this.f=e||3e3,this.h=f||void 0}function R(a,b,c,d,e,f,g){this.v=a,this.B=b,this.c=c,this.a=d,this.s=g||"BESbswy",this.f={},this.w=e||3e3,this.u=f||null,this.o=this.j=this.h=this.g=null,this.g=new N(this.c,this.s),this.h=new N(this.c,this.s),this.j=new N(this.c,this.s),this.o=new N(this.c,this.s),a=new H(this.a.c+",serif",K(this.a)),a=P(a),this.g.a.style.cssText=a,a=new H(this.a.c+",sans-serif",K(this.a)),a=P(a),this.h.a.style.cssText=a,a=new H("serif",K(this.a)),a=P(a),this.j.a.style.cssText=a,a=new H("sans-serif",K(this.a)),a=P(a),this.o.a.style.cssText=a,O(this.g),O(this.h),O(this.j),O(this.o)}function U(){if(null===T){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);T=!!a&&(536>parseInt(a[1],10)||536===parseInt(a[1],10)&&11>=parseInt(a[2],10))}return T}function ma(a,b,c){for(var d in S)if(S.hasOwnProperty(d)&&b===a.f[S[d]]&&c===a.f[S[d]])return!0;return!1}function la(a){var d,b=a.g.a.offsetWidth,c=a.h.a.offsetWidth;(d=b===a.f.serif&&c===a.f["sans-serif"])||(d=U()&&ma(a,b,c)),d?q()-a.A>=a.w?U()&&ma(a,b,c)&&(null===a.u||a.u.hasOwnProperty(a.a.c))?V(a,a.v):V(a,a.B):na(a):V(a,a.v)}function na(a){setTimeout(p(function(){la(this)},a),50)}function V(a,b){setTimeout(p(function(){v(this.g.a),v(this.h.a),v(this.j.a),v(this.o.a),b(this.a)},a),0)}function W(a,b,c){this.c=a,this.a=b,this.f=0,this.o=this.j=!1,this.s=c}function oa(a){0==--a.f&&a.j&&(a.o?(a=a.a,a.g&&w(a.f,[a.a.c("wf","active")],[a.a.c("wf","loading"),a.a.c("wf","inactive")]),L(a,"active")):M(a.a))}function pa(a){this.j=a,this.a=new ja,this.h=0,this.f=this.g=!0}function ra(a,b,c,d,e){var f=0==--a.h;(a.f||a.g)&&setTimeout(function(){var a=e||null,k=d||null||{};if(0===c.length&&f)M(b.a);else{b.f+=c.length,f&&(b.j=f);var h,m=[];for(h=0;h<c.length;h++){var l=c[h],n=k[l.c],r=b.a,x=l;if(r.g&&w(r.f,[r.a.c("wf",x.c,K(x).toString(),"loading")]),L(r,"fontloading",x),r=null,null===X)if(window.FontFace){var x=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),ya=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);X=x?42<parseInt(x[1],10):ya?!1:!0}else X=!1;r=X?new Q(p(b.g,b),p(b.h,b),b.c,l,b.s,n):new R(p(b.g,b),p(b.h,b),b.c,l,b.s,a,n),m.push(r)}for(h=0;h<m.length;h++)m[h].start()}},0)}function qa(a,b,c){var d=[],e=c.timeout;ia(b);var d=ka(a.a,c,a.c),f=new W(a.c,b,e);for(a.h=d.length,b=0,c=d.length;c>b;b++)d[b].load(function(b,d,c){ra(a,f,b,d,c)})}function sa(a,b){this.c=a,this.a=b}function ta(a,b,c){var d=z(a.c);return a=(a.a.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,""),d+"//"+a+"/"+b+".js"+(c?"?v="+c:"")}function ua(a,b){this.c=a,this.a=b}function va(a,b,c){a?this.c=a:this.c=b+wa,this.a=[],this.f=[],this.g=c||""}function xa(a,b){for(var c=b.length,d=0;c>d;d++){var e=b[d].split(":");3==e.length&&a.f.push(e.pop());var f="";2==e.length&&""!=e[1]&&(f=":"),a.a.push(e.join(f))}}function za(a){if(0==a.a.length)throw Error("No fonts to load!");if(-1!=a.c.indexOf("kit="))return a.c;for(var b=a.a.length,c=[],d=0;b>d;d++)c.push(a.a[d].replace(/ /g,"+"));return b=a.c+"?family="+c.join("%7C"),0<a.f.length&&(b+="&subset="+a.f.join(",")),0<a.g.length&&(b+="&text="+encodeURIComponent(a.g)),b}function Aa(a){this.f=a,this.a=[],this.c={}}function Fa(a){for(var b=a.f.length,c=0;b>c;c++){var d=a.f[c].split(":"),e=d[0].replace(/\+/g," "),f=["n4"];if(2<=d.length){var g,k=d[1];if(g=[],k)for(var k=k.split(","),h=k.length,m=0;h>m;m++){var l;if(l=k[m],l.match(/^[\w-]+$/)){var n=Ea.exec(l.toLowerCase());if(null==n)l="";else{if(l=n[2],l=null==l||""==l?"n":Da[l],n=n[1],null==n||""==n)n="4";else var r=Ca[n],n=r?r:isNaN(n)?"4":n.substr(0,1);l=[l,n].join("")}}else l="";l&&g.push(l)}0<g.length&&(f=g),3==d.length&&(d=d[2],g=[],d=d?d.split(","):g,0<d.length&&(d=Ba[d[0]])&&(a.c[e]=d))}for(a.c[e]||(d=Ba[e])&&(a.c[e]=d),d=0;d<f.length;d+=1)a.a.push(new H(e,f[d]))}}function Ga(a,b){this.c=a,this.a=b}function Ia(a,b){this.c=a,this.a=b}function Ja(a,b){this.c=a,this.f=b,this.a=[]}var q=Date.now||function(){return+new Date},da=!!window.FontFace;G.prototype.c=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c].replace(/[\W_]+/g,"").toLowerCase());return b.join(this.a)},Q.prototype.start=function(){var a=this.c.m.document,b=this,c=q(),d=new Promise(function(d,e){function k(){q()-c>=b.f?e():a.fonts.load(fa(b.a),b.h).then(function(a){1<=a.length?d():setTimeout(k,25)},function(){e()})}k()}),e=new Promise(function(a,d){setTimeout(d,b.f)});Promise.race([e,d]).then(function(){b.g(b.a)},function(){b.j(b.a)})};var S={D:"serif",C:"sans-serif"},T=null;R.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.o.a.offsetWidth,this.A=q(),la(this)};var X=null;W.prototype.g=function(a){var b=this.a;b.g&&w(b.f,[b.a.c("wf",a.c,K(a).toString(),"active")],[b.a.c("wf",a.c,K(a).toString(),"loading"),b.a.c("wf",a.c,K(a).toString(),"inactive")]),
L(b,"fontactive",a),this.o=!0,oa(this)},W.prototype.h=function(a){var b=this.a;if(b.g){var c=y(b.f,b.a.c("wf",a.c,K(a).toString(),"active")),d=[],e=[b.a.c("wf",a.c,K(a).toString(),"loading")];c||d.push(b.a.c("wf",a.c,K(a).toString(),"inactive")),w(b.f,d,e)}L(b,"fontinactive",a),oa(this)},pa.prototype.load=function(a){this.c=new ca(this.j,a.context||this.j),this.g=!1!==a.events,this.f=!1!==a.classes,qa(this,new ha(this.c,a),a)},sa.prototype.load=function(a){function b(){if(f["__mti_fntLst"+d]){var h,c=f["__mti_fntLst"+d](),e=[];if(c)for(var m=0;m<c.length;m++){var l=c[m].fontfamily;void 0!=c[m].fontStyle&&void 0!=c[m].fontWeight?(h=c[m].fontStyle+c[m].fontWeight,e.push(new H(l,h))):e.push(new H(l))}a(e)}else setTimeout(function(){b()},50)}var c=this,d=c.a.projectId,e=c.a.version;if(d){var f=c.c.m;B(this.c,ta(c,d,e),function(e){e?a([]):(f["__MonotypeConfiguration__"+d]=function(){return c.a},b())}).id="__MonotypeAPIScript__"+d}else a([])},ua.prototype.load=function(a){var b,c,d=this.a.urls||[],e=this.a.families||[],f=this.a.testStrings||{},g=new C;for(b=0,c=d.length;c>b;b++)A(this.c,d[b],D(g));var k=[];for(b=0,c=e.length;c>b;b++)if(d=e[b].split(":"),d[1])for(var h=d[1].split(","),m=0;m<h.length;m+=1)k.push(new H(d[0],h[m]));else k.push(new H(d[0]));F(g,function(){a(k,f)})};var wa="//fonts.googleapis.com/css",Ba={latin:"BESbswy","latin-ext":"\xe7\xf6\xfc\u011f\u015f",cyrillic:"\u0439\u044f\u0416",greek:"\u03b1\u03b2\u03a3",khmer:"\u1780\u1781\u1782",Hanuman:"\u1780\u1781\u1782"},Ca={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},Da={i:"i",italic:"i",n:"n",normal:"n"},Ea=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/,Ha={Arimo:!0,Cousine:!0,Tinos:!0};Ga.prototype.load=function(a){var b=new C,c=this.c,d=new va(this.a.api,z(c),this.a.text),e=this.a.families;xa(d,e);var f=new Aa(e);Fa(f),A(c,za(d),D(b)),F(b,function(){a(f.a,f.c,Ha)})},Ia.prototype.load=function(a){var b=this.a.id,c=this.c.m;b?B(this.c,(this.a.api||"https://use.typekit.net")+"/"+b+".js",function(b){if(b)a([]);else if(c.Typekit&&c.Typekit.config&&c.Typekit.config.fn){b=c.Typekit.config.fn;for(var e=[],f=0;f<b.length;f+=2)for(var g=b[f],k=b[f+1],h=0;h<k.length;h++)e.push(new H(g,k[h]));try{c.Typekit.load({events:!1,classes:!1,async:!0})}catch(m){}a(e)}},2e3):a([])},Ja.prototype.load=function(a){var b=this.f.id,c=this.c.m,d=this;b?(c.__webfontfontdeckmodule__||(c.__webfontfontdeckmodule__={}),c.__webfontfontdeckmodule__[b]=function(b,c){for(var g=0,k=c.fonts.length;k>g;++g){var h=c.fonts[g];d.a.push(new H(h.name,ga("font-weight:"+h.weight+";font-style:"+h.style)))}a(d.a)},B(this.c,z(this.c)+(this.f.api||"//f.fontdeck.com/s/css/js/")+ea(this.c)+"/"+b+".js",function(b){b&&a([])})):a([])};var Y=new pa(window);Y.a.c.custom=function(a,b){return new ua(b,a)},Y.a.c.fontdeck=function(a,b){return new Ja(b,a)},Y.a.c.monotype=function(a,b){return new sa(b,a)},Y.a.c.typekit=function(a,b){return new Ia(b,a)},Y.a.c.google=function(a,b){return new Ga(b,a)};var Z={load:p(Y.load,Y)};"function"==typeof define&&define.amd?define(function(){return Z}):"undefined"!=typeof module&&module.exports?module.exports=Z:(window.WebFont=Z,window.WebFontConfig&&Y.load(window.WebFontConfig))}(),function(){var XHRLoader,XHRLoaderClass,XHRTab,XHRTabLoaderClass,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;XHRLoaderClass=function(){function XHRLoaderClass(element1,params1){this.element=element1,this.params=params1,this.image=$("[data-loading-image]").data("loading-image"),this.imageClass=this.image.match(/logo\.png/)?"app-spin":"",this.$target=$(this.element),this.tabHref=$(this.element).data("xhr-loader-href")}return XHRLoaderClass.prototype.setParams=function(params){return this.params=params},XHRLoaderClass.prototype.prepareParams=function(){var key,params,ref,value;params=[],ref=this.params;for(key in ref)value=ref[key],params.push(key+"="+value);return params.join("&")},XHRLoaderClass.prototype.prepareHref=function(){var params;return params=this.prepareParams(),params.length>0?this.tabHref+"?"+params:this.tabHref},XHRLoaderClass.prototype.updateView=function(data){var $injector,$target;return $target=this.$target,window.galleryApp&&window.galleryApp.unload(),this.$target.html(data),window.initFragment($target),$injector=angular.injector(["ng","App"]),$injector.invoke(function($rootScope,$compile){return $compile($target)($rootScope)}),Turbolinks.controller.history.push(Turbolinks.Location.wrap(this.prepareHref()),Turbolinks.uuid())},XHRLoaderClass.prototype.load=function(params){return this.setParams(params),this.$target.data("loading")?void 0:(this.startLoading(),window.tabXHR&&window.tabXHR.abort(),window.tabXHR=$.get(this.prepareHref(),this.updateView.bind(this)).always(this.stopLoading.bind(this)))},XHRLoaderClass.prototype.loadTab=function(params){return null==params&&(params=null),this.load(params)},XHRLoaderClass.prototype.startLoading=function(){return this.$target.addClass("loading-tab").data("loading",!0).html("<img src='"+this.image+"' class='"+this.imageClass+"' alt='Loading'/>Loading...")},XHRLoaderClass.prototype.stopLoading=function(){return this.$target.data("loading",!1).removeClass("loading-tab")},XHRLoaderClass}(),XHRTabLoaderClass=function(superClass){function XHRTabLoaderClass(element1,params1){this.element=element1,this.params=null!=params1?params1:{},this.image=$("[data-loading-image]").data("loading-image"),this.imageClass=this.image.match(/logo\.png/)?"app-spin":"",this.$target=$($(this.element).attr("href")),this.tabHref=$(this.element).data("tab-href")}return extend(XHRTabLoaderClass,superClass),XHRTabLoaderClass}(XHRLoaderClass),XHRLoader=function(element,params){return new XHRLoaderClass(element,params)},XHRTab=function(element,params){return new XHRTabLoaderClass(element,params)},window.XHRLoader=XHRLoader,window.XHRTab=XHRTab,$(document).on("click","[data-tab-href]",function(e){var $el,params;return $el=$(e.target).closest("[data-tab-href]"),params={},$el.data("starts-at")&&(params.starts_at=$el.data("starts-at")),$el.data("ends-at")&&(params.ends_at=$el.data("ends-at")),XHRTab(this).loadTab(params)})}.call(this),function(){/*!
 * © 2014 Second Street, MIT License <http://opensource.org/licenses/MIT>
 * Talker.js 1.0.1 <http://github.com/secondstreet/talker.js>
 */
var TALKER_TYPE="application/x-talkerjs-v1+json",TALKER_ERR_TIMEOUT="timeout",pinkySwearPromise=function(){function a(a){return"function"==typeof a}function b(a){return"object"==typeof a}function c(a){"undefined"!=typeof setImmediate?setImmediate(a):"undefined"!=typeof process&&process.nextTick?process.nextTick(a):setTimeout(a,0)}var d;return function e(){var f,g=[],h=[],i=function(a,b){return null==f&&null!=a&&(f=a,g=b,h.length&&c(function(){for(var a=0;h.length>a;a++)h[a]()})),f};return i.then=function(i,j){var k=e(),l=function(){function c(e){var f,g=0;try{if(e&&(b(e)||a(e))&&a(f=e.then)){if(e===k)throw new TypeError;f.call(e,function(){g++||c.apply(d,arguments)},function(a){g++||k(!1,[a])})}else k(!0,arguments)}catch(h){g++||k(!1,[h])}}try{var e=f?i:j;a(e)?c(e.apply(d,g||[])):k(f,g)}catch(h){k(!1,[h])}};return null!=f?c(l):h.push(l),k},i}}(),objectCreate=function(a){function b(){}return b.prototype=a,new b},Talker=function(a,b){this.remoteWindow=a,this.remoteOrigin=b,this.timeout=3e3,this.handshaken=!1,this.handshake=pinkySwearPromise(),this._id=0,this._queue=[],this._sent={};var c=this;return window.addEventListener("message",function(a){c._receiveMessage(a)},!1),this._sendHandshake(),this};Talker.prototype.send=function(a,b,c){var d=new Talker.OutgoingMessage(this,a,b,c),e=pinkySwearPromise();return this._sent[d.id]=e,this._queue.push(d),this._flushQueue(),setTimeout(function(){e(!1,[new Error(TALKER_ERR_TIMEOUT)])},this.timeout),e},Talker.prototype._receiveMessage=function(a){var b,c;try{b=JSON.parse(a.data)}catch(d){b={}}return this._isSafeMessage(a.source,a.origin,b.type)?(c=b.handshake||b.handshakeConfirmation,c?this._handleHandshake(b):this._handleMessage(b)):!1},Talker.prototype._isSafeMessage=function(a,b,c){var d,e,f;return d=a===this.remoteWindow,e="*"===this.remoteOrigin||b===this.remoteOrigin,f=c===TALKER_TYPE,d&&e&&f},Talker.prototype._handleHandshake=function(a){a.handshake&&this._sendHandshake(this.handshaken),this.handshaken=!0,this.handshake(!0,[this.handshaken]),this._flushQueue()},Talker.prototype._handleMessage=function(a){var b=new Talker.IncomingMessage(this,a.namespace,a.data,a.id),c=a.responseToId;return c?this._respondToMessage(c,b):this._broadcastMessage(b)},Talker.prototype._respondToMessage=function(a,b){this._sent[a]&&(this._sent[a](!0,[b]),delete this._sent[a])},Talker.prototype._broadcastMessage=function(a){this.onMessage&&this.onMessage.call(this,a)},Talker.prototype._sendHandshake=function(a){var b={type:TALKER_TYPE},c=a?"handshakeConfirmation":"handshake";b[c]=!0,this._postMessage(b)},Talker.prototype._nextId=function(){return this._id+=1},Talker.prototype._postMessage=function(a){this.remoteWindow&&this.remoteOrigin&&this.remoteWindow.postMessage(JSON.stringify(a),this.remoteOrigin)},Talker.prototype._flushQueue=function(){if(this.handshaken){var a=this._queue.shift();if(!a)return this._queue;if(this._postMessage(a),this._queue.length>0)return this._flushQueue()}return this._queue},Talker.Message=function(a,b,c){return this.talker=a,this.namespace=b,this.data=c,this.type=TALKER_TYPE,this},Talker.OutgoingMessage=function(a,b,c,d){Talker.Message.call(this,a,b,c),this.responseToId=d||null,this.id=this.talker._nextId()},Talker.OutgoingMessage.prototype=objectCreate(Talker.Message.prototype),Talker.OutgoingMessage.prototype.constructor=Talker.Message,Talker.OutgoingMessage.prototype.toJSON=function(){return{id:this.id,responseToId:this.responseToId,namespace:this.namespace,data:this.data,type:this.type}},Talker.IncomingMessage=function(a,b,c,d){Talker.Message.call(this,a,b,c),this.id=d},Talker.IncomingMessage.prototype=objectCreate(Talker.Message.prototype),Talker.IncomingMessage.prototype.constructor=Talker.Message,Talker.IncomingMessage.prototype.respond=function(a){return this.talker.send(null,a,this.id)},window.Talker=Talker}();var unloaders=[];(function(){var DEBUG,DEBUG_TAG,EmbedGallery,GalleryApp,IFRAME_LOADED,LOAD_EVENT,MIN_READY_SPACE,POSITION_EVENT,SCROLL_DELAY,SCROLL_END,SCROLL_RUN,TARGET,addListener,debugIndex,unloaders;TARGET="*",LOAD_EVENT="LoadMoreGalleryItems",POSITION_EVENT="GalleryPosition",IFRAME_LOADED="GalleryIframeLoaded",MIN_READY_SPACE=3e3,DEBUG=window.localStorage&&!!window.localStorage.debugLoadMore,DEBUG_TAG=Math.round(1e3*Math.random()),debugIndex=0,SCROLL_DELAY=300,SCROLL_RUN="GalleryScrollRun",SCROLL_END="GalleryScrollEnd",unloaders=[],addListener=function(type,func,elem){var element;return element=elem||window,element.addEventListener(type,func),unloaders.push(function(){return element.removeEventListener(type,func)})},EmbedGallery=function(){function EmbedGallery(container,key1,config){this.container=container,this.key=key1,this.config=config,this.liveEdit="string"==typeof this.config.liveEdit&&JSON.parse(this.config.liveEdit),this.render()}return EmbedGallery.prototype.iframeSrc=function(){var params,path;return path=this.liveEdit?"js-gallery-live-edit":"js-gallery-embed",params={gallery_key:encodeURIComponent(this.key),l:encodeURIComponent(document.location.href)},this.config.header&&(params.h=encodeURIComponent(this.config.header)),this.config.enter&&(params.e=encodeURIComponent(this.config.enter)),this.config.sorting&&(params.s=encodeURIComponent(this.config.sorting)),this.config.sort&&(params.o=encodeURIComponent(this.config.sort)),this.config.baseUrl+"/"+path+"?"+toQueryString(params)+"&"+paramString(["d"])},EmbedGallery.prototype.render=function(){var iframeMinHeight;return iframeMinHeight=600,this.iframe=dom("iframe",{frameBorder:"0",allowfullscreen:"true",mozallowfullscreen:"true",webkitallowfullscreen:"true",src:this.iframeSrc()}),style(this.iframe,{position:"absolute",left:"-10000px",width:this.container.clientWidth+"px",display:"block",minHeight:iframeMinHeight+"px"}),this.iframe.onload=function(_this){return function(){var count,inst;return _this.iframe.isLoaded=!0,_this.postMessage(IFRAME_LOADED),style(_this.iframe,{position:"relative",left:"0",width:"100%"}),_this.container.removeChild(_this.loader),count=0,inst=setInterval(function(){return _this.onReposition(),count+=1,6===count?clearInterval(inst):void 0},500)}}(this),style(this.container,{minHeight:iframeMinHeight+"px"}),this.showLoader(),this.container.appendChild(this.iframe),this.iframe.key=this.key},EmbedGallery.prototype.showLoader=function(){return this.loader=dom("div",[dom("div",[dom(".e-widget-fc",[dom(".e-widget-spinner")])])]),style(this.loader,{lineHeight:"600px",background:"white",fontSize:"50px",textAlign:"center"}),this.container.appendChild(this.loader)},EmbedGallery.prototype.postMessage=function(message){return this.iframe.contentWindow.postMessage(message,TARGET)},EmbedGallery.prototype.onResize=function(height){return this.iframe.style.height=height+"px",DEBUG&&(debugIndex+=1,console.debug("[%s][%s]GalleryResize: key = %s; height = %s",DEBUG_TAG,debugIndex,this.key,height)),this.onReposition()},EmbedGallery.prototype.onLoad=function(){var isLoaded;return isLoaded=this.iframe.isLoaded,isLoaded&&this.postMessage(IFRAME_LOADED),DEBUG?(debugIndex+=1,console.debug("[%s][%s]GalleryIsLoaded: isLoaded = %s",DEBUG_TAG,debugIndex,isLoaded)):void 0},EmbedGallery.prototype.onReposition=function(){var diff,frameHeight,galleryRect,readySpace,vportHeight,vportOffset;return vportHeight=window.innerHeight,galleryRect=this.iframe.getBoundingClientRect(),frameHeight=galleryRect.height,vportOffset=galleryRect.bottom,this.iframe.contentWindow&&(diff=frameHeight-vportOffset+vportHeight,readySpace=frameHeight-diff,MIN_READY_SPACE>readySpace&&this.postMessage(LOAD_EVENT),this.postMessage(POSITION_EVENT+":b="+vportOffset+":w="+vportHeight+":g="+frameHeight),DEBUG)?(debugIndex+=1,console.debug("[%s][%s]%s: key = %s; frameHeight = %s; diff = %s; readySpace = %s; sended: %s",DEBUG_TAG,debugIndex,LOAD_EVENT,this.key,frameHeight,diff,readySpace,MIN_READY_SPACE>readySpace),debugIndex+=1,console.debug("[%s][%s]%s: key = %s; vportOffset = %s; vportHeight = %s; frameHeight = %s",DEBUG_TAG,debugIndex,POSITION_EVENT,this.key,vportOffset,vportHeight,frameHeight)):void 0},EmbedGallery}(),GalleryApp=function(){function GalleryApp(config){this.config=config,this.galleries=[],this.throttledOnReposition=throttle(this.onReposition.bind(this),50)}return GalleryApp.prototype.start=function(){var r;return goodBrowser()?document.body?onReady(this.applyPageLoad.bind(this)):(r=setInterval(function(_this){return function(){return document.body?(clearInterval(r),_this.applyPageLoad()):void 0}}(this),1),unloaders.push(function(){return clearInterval(r)})):void 0},GalleryApp.prototype.applyPageLoad=function(){return this.applyStyles(),this.parseBody(),this.attachListeners()},GalleryApp.prototype.parseBody=function(){var gEmbeds,gIncludes;return gEmbeds=document.querySelectorAll("[data-gallery-embed]"),gEmbeds=Array.prototype.slice.call(gEmbeds,0),gEmbeds.forEach(function(_this){return function(gEmbed){return _this.parseGalleryEmbed(gEmbed)}}(this)),gIncludes=document.querySelectorAll("[data-gallery-include]"),gIncludes.length>0?this.parseGalleryInclude():void 0},GalleryApp.prototype.parseGalleryEmbed=function(gEmbed){var gConfig,gallery,key;return gEmbed.getAttribute("initialized")?void 0:(gEmbed.setAttribute("initialized",!0),key=gEmbed.getAttribute("data-gallery-embed"),gConfig={baseUrl:this.config.baseUrl,sort:gEmbed.getAttribute("data-sort"),sorting:gEmbed.getAttribute("data-sorting"),header:gEmbed.getAttribute("data-header"),enter:gEmbed.getAttribute("data-enter"),liveEdit:gEmbed.getAttribute("data-live-edit")},gallery=new EmbedGallery(gEmbed,key,gConfig),this.galleries.push(gallery))},GalleryApp.prototype.parseGalleryInclude=function(){var ggsId;return"function"==typeof window.ggsLaunch?window.ggsLaunch():(ggsId="ggs-script-249081983840019-485",document.getElementById(ggsId)?void 0:document.head.appendChild(dom("script",{id:ggsId,src:this.config.baseUrl+"/ggs.js",type:"text/javascript"})))},GalleryApp.prototype.applyStyles=function(){var loaderStylesheet;return document.getElementById("embedded-gallery-stylesheet")?void 0:(loaderStylesheet=dom("style#embedded-gallery-stylesheet"),loaderStylesheet.textContent=this.config.loaderCss,document.head.appendChild(loaderStylesheet))},GalleryApp.prototype.galleryByKey=function(key){var result;return result=this.galleries.filter(function(g){return g.key===key||""===g.key&&"unknown-key"===key}),result.length>0?result[0]:null},GalleryApp.prototype.attachListeners=function(){return this.galleries.length>0?(addListener("scroll",this.throttledOnReposition),addListener("resize",this.throttledOnReposition),addListener("scroll",this.scrollHandler.bind(this)),addListener("message",this.handleMessage.bind(this))):void 0},GalleryApp.prototype.handleMessage=function(e){var match;if(e.data&&e.data.match&&(match=e.data.match(/(.+?)(Gallery[a-zA-Z]+)(\d+\.?\d*)?/)))switch(match[2]){case"GalleryResize":return this.galleryByKey(match[1]).onResize(match[3]);case"GalleryIsLoaded":return this.galleryByKey(match[1]).onLoad()}},GalleryApp.prototype.scrollHandler=function(){return this.lastScrolledAt=Date.now(),this.scrollTimeout?void 0:(this.isScrolling||(this.isScrolling=!0,this.galleries.forEach(function(gallery){return gallery.postMessage(SCROLL_RUN)})),this.scrollTimeout=setTimeout(this.scrollTimeoutCallback.bind(this),SCROLL_DELAY))},GalleryApp.prototype.scrollTimeoutCallback=function(){var diff;return diff=Date.now()-this.lastScrolledAt,diff>=SCROLL_DELAY?(this.scrollTimeout=null,this.isScrolling=!1,this.galleries.forEach(function(gallery){return gallery.postMessage(SCROLL_END)})):this.scrollTimeout=setTimeout(this.scrollTimeoutCallback.bind(this),SCROLL_DELAY-diff)},GalleryApp.prototype.onReposition=function(){return this.galleries.forEach(function(gallery){return gallery.onReposition()})},GalleryApp.prototype.preview=function(galleryContainer){return this.unload(),"string"==typeof galleryContainer&&(galleryContainer=document.querySelector("[data-gallery-embed='"+galleryContainer+"']")||document.querySelector("[data-gallery-include='"+galleryContainer+"']")),galleryContainer.hasAttribute("data-gallery-embed")&&this.parseGalleryEmbed(galleryContainer),galleryContainer.hasAttribute("data-gallery-include")&&this.parseGalleryInclude(galleryContainer),this.attachListeners()},GalleryApp.prototype.unload=function(){var e,i,len,unloader;for(i=0,len=unloaders.length;len>i;i++){unloader=unloaders[i];try{unloader.call(window)}catch(error){e=error,console&&console.log&&console.log("Unload failed",e)}}return this.galleries=[],unloaders=[]},GalleryApp}(),window._galleryApp||(window._galleryApp={}),_galleryApp.GalleryApp=GalleryApp}).call(this),function(){!function(){var galleryApp;return window.galleryApp=galleryApp=new window._galleryApp.GalleryApp({baseUrl:window.baseHost}),$(document).on("turbolinks:before-visit",function(){return galleryApp.unload()})}()}.call(this),function(window,document,undefined){"use strict";function minErr(module){return function(){var message,i,code=arguments[0],prefix="["+(module?module+":":"")+code+"] ",template=arguments[1],templateArgs=arguments,stringify=function(obj){return"function"==typeof obj?obj.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof obj?"undefined":"string"!=typeof obj?JSON.stringify(obj):obj};for(message=prefix+template.replace(/\{\d+\}/g,function(match){var arg,index=+match.slice(1,-1);return index+2<templateArgs.length?(arg=templateArgs[index+2],"function"==typeof arg?arg.toString().replace(/ ?\{[\s\S]*$/,""):"undefined"==typeof arg?"undefined":"string"!=typeof arg?toJson(arg):arg):match}),message=message+"\nhttp://errors.angularjs.org/1.2.32/"+(module?module+"/":"")+code,i=2;i<arguments.length;i++)message=message+(2==i?"?":"&")+"p"+(i-2)+"="+encodeURIComponent(stringify(arguments[i]));return new Error(message)}}function isArrayLike(obj){if(null==obj||isWindow(obj))return!1;var length=obj.length;return 1===obj.nodeType&&length?!0:isString(obj)||isArray(obj)||0===length||"number"==typeof length&&length>0&&length-1 in obj}function forEach(obj,iterator,context){var key;if(obj)if(isFunction(obj))for(key in obj)"prototype"==key||"length"==key||"name"==key||obj.hasOwnProperty&&!obj.hasOwnProperty(key)||iterator.call(context,obj[key],key);else if(isArray(obj)||isArrayLike(obj))for(key=0;key<obj.length;key++)iterator.call(context,obj[key],key);else if(obj.forEach&&obj.forEach!==forEach)obj.forEach(iterator,context);else for(key in obj)obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key);return obj}function sortedKeys(obj){var keys=[];for(var key in obj)obj.hasOwnProperty(key)&&keys.push(key);return keys.sort()}function forEachSorted(obj,iterator,context){for(var keys=sortedKeys(obj),i=0;i<keys.length;i++)iterator.call(context,obj[keys[i]],keys[i]);return keys}function reverseParams(iteratorFn){return function(value,key){iteratorFn(key,value)}}function nextUid(){for(var digit,index=uid.length;index;){if(index--,digit=uid[index].charCodeAt(0),57==digit)return uid[index]="A",uid.join("");if(90!=digit)return uid[index]=String.fromCharCode(digit+1),uid.join("");uid[index]="0"}return uid.unshift("0"),uid.join("")}function setHashKey(obj,h){h?obj.$$hashKey=h:delete obj.$$hashKey}function extend(dst){var h=dst.$$hashKey;return forEach(arguments,function(obj){obj!==dst&&forEach(obj,function(value,key){dst[key]=value})}),setHashKey(dst,h),dst}function int(str){return parseInt(str,10)}function inherit(parent,extra){return extend(new(extend(function(){},{prototype:parent})),extra)}function noop(){}function identity($){return $}function valueFn(value){return function(){return value}}function isUndefined(value){return"undefined"==typeof value}function isDefined(value){return"undefined"!=typeof value}function isObject(value){return null!=value&&"object"==typeof value}function isString(value){return"string"==typeof value}function isNumber(value){return"number"==typeof value}function isDate(value){return"[object Date]"===toString.call(value)}function isFunction(value){return"function"==typeof value}function isRegExp(value){return"[object RegExp]"===toString.call(value)}function isWindow(obj){return obj&&obj.document&&obj.location&&obj.alert&&obj.setInterval}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function isFile(obj){return"[object File]"===toString.call(obj)}function isBlob(obj){return"[object Blob]"===toString.call(obj)}function isPromiseLike(obj){return obj&&isFunction(obj.then)}function isElement(node){return!(!node||!(node.nodeName||node.prop&&node.attr&&node.find))}function map(obj,iterator,context){var results=[];return forEach(obj,function(value,index,list){results.push(iterator.call(context,value,index,list))}),results}function includes(array,obj){return-1!=indexOf(array,obj)}function indexOf(array,obj){if(array.indexOf)return array.indexOf(obj);for(var i=0;i<array.length;i++)if(obj===array[i])return i;return-1}function arrayRemove(array,value){var index=indexOf(array,value);return index>=0&&array.splice(index,1),value}function copy(source,destination,stackSource,stackDest){if(isWindow(source)||isScope(source))throw ngMinErr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(destination){if(source===destination)throw ngMinErr("cpi","Can't copy! Source and destination are identical.");if(stackSource=stackSource||[],stackDest=stackDest||[],isObject(source)){var index=indexOf(stackSource,source);if(-1!==index)return stackDest[index];stackSource.push(source),stackDest.push(destination)}var result;if(isArray(source)){destination.length=0;for(var i=0;i<source.length;i++)result=copy(source[i],null,stackSource,stackDest),isObject(source[i])&&(stackSource.push(source[i]),stackDest.push(result)),destination.push(result)}else{var h=destination.$$hashKey;isArray(destination)?destination.length=0:forEach(destination,function(value,key){delete destination[key]});for(var key in source)result=copy(source[key],null,stackSource,stackDest),isObject(source[key])&&(stackSource.push(source[key]),stackDest.push(result)),destination[key]=result;setHashKey(destination,h)}}else destination=source,source&&(isArray(source)?destination=copy(source,[],stackSource,stackDest):isDate(source)?destination=new Date(source.getTime()):isRegExp(source)?(destination=new RegExp(source.source,source.toString().match(/[^\/]*$/)[0]),destination.lastIndex=source.lastIndex):isObject(source)&&(destination=copy(source,{},stackSource,stackDest)));return destination}function shallowCopy(src,dst){if(isArray(src)){dst=dst||[];for(var i=0;i<src.length;i++)dst[i]=src[i]}else if(isObject(src)){dst=dst||{};for(var key in src)!hasOwnProperty.call(src,key)||"$"===key.charAt(0)&&"$"===key.charAt(1)||(dst[key]=src[key])}return dst||src}function equals(o1,o2){if(o1===o2)return!0;if(null===o1||null===o2)return!1;if(o1!==o1&&o2!==o2)return!0;var length,key,keySet,t1=typeof o1,t2=typeof o2;if(t1==t2&&"object"==t1){if(!isArray(o1)){if(isDate(o1))return isDate(o2)?isNaN(o1.getTime())&&isNaN(o2.getTime())||o1.getTime()===o2.getTime():!1;if(isRegExp(o1)&&isRegExp(o2))return o1.toString()==o2.toString();if(isScope(o1)||isScope(o2)||isWindow(o1)||isWindow(o2)||isArray(o2))return!1;keySet={};for(key in o1)if("$"!==key.charAt(0)&&!isFunction(o1[key])){if(!equals(o1[key],o2[key]))return!1;keySet[key]=!0}for(key in o2)if(!keySet.hasOwnProperty(key)&&"$"!==key.charAt(0)&&o2[key]!==undefined&&!isFunction(o2[key]))return!1;return!0}if(!isArray(o2))return!1;if((length=o1.length)==o2.length){for(key=0;length>key;key++)if(!equals(o1[key],o2[key]))return!1;return!0}}return!1}function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}function sliceArgs(args,startIndex){return slice.call(args,startIndex||0)}function bind(self,fn){var curryArgs=arguments.length>2?sliceArgs(arguments,2):[];return!isFunction(fn)||fn instanceof RegExp?fn:curryArgs.length?function(){return arguments.length?fn.apply(self,curryArgs.concat(slice.call(arguments,0))):fn.apply(self,curryArgs)}:function(){return arguments.length?fn.apply(self,arguments):fn.call(self)}}function toJsonReplacer(key,value){var val=value;return"string"==typeof key&&"$"===key.charAt(0)?val=undefined:isWindow(value)?val="$WINDOW":value&&document===value?val="$DOCUMENT":isScope(value)&&(val="$SCOPE"),val}function toJson(obj,pretty){return"undefined"==typeof obj?undefined:JSON.stringify(obj,toJsonReplacer,pretty?"  ":null)}function fromJson(json){return isString(json)?JSON.parse(json):json}function toBoolean(value){if("function"==typeof value)value=!0;else if(value&&0!==value.length){var v=lowercase(""+value);value=!("f"==v||"0"==v||"false"==v||"no"==v||"n"==v||"[]"==v)}else value=!1;return value}function startingTag(element){element=jqLite(element).clone();try{element.empty()}catch(e){}var TEXT_NODE=3,elemHtml=jqLite("<div>").append(element).html();try{return element[0].nodeType===TEXT_NODE?lowercase(elemHtml):elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(match,nodeName){return"<"+lowercase(nodeName)})}catch(e){return lowercase(elemHtml)}}function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}function parseKeyValue(keyValue){var key_value,key,obj={};return forEach((keyValue||"").split("&"),function(keyValue){if(keyValue&&(key_value=keyValue.replace(/\+/g,"%20").split("="),key=tryDecodeURIComponent(key_value[0]),isDefined(key))){var val=isDefined(key_value[1])?tryDecodeURIComponent(key_value[1]):!0;hasOwnProperty.call(obj,key)?isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val}}),obj}function toKeyValue(obj){var parts=[];return forEach(obj,function(value,key){isArray(value)?forEach(value,function(arrayValue){parts.push(encodeUriQuery(key,!0)+(arrayValue===!0?"":"="+encodeUriQuery(arrayValue,!0)))}):parts.push(encodeUriQuery(key,!0)+(value===!0?"":"="+encodeUriQuery(value,!0)))}),parts.length?parts.join("&"):""}function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,pctEncodeSpaces?"%20":"+")}function angularInit(element,bootstrap){function append(element){element&&elements.push(element)}var appElement,module,elements=[element],names=["ng:app","ng-app","x-ng-app","data-ng-app"],NG_APP_CLASS_REGEXP=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;forEach(names,function(name){names[name]=!0,append(document.getElementById(name)),name=name.replace(":","\\:"),element.querySelectorAll&&(forEach(element.querySelectorAll("."+name),append),forEach(element.querySelectorAll("."+name+"\\:"),append),forEach(element.querySelectorAll("["+name+"]"),append))}),forEach(elements,function(element){if(!appElement){var className=" "+element.className+" ",match=NG_APP_CLASS_REGEXP.exec(className);match?(appElement=element,module=(match[2]||"").replace(/\s+/g,",")):forEach(element.attributes,function(attr){!appElement&&names[attr.name]&&(appElement=element,module=attr.value)})}}),appElement&&bootstrap(appElement,module?[module]:[])}function bootstrap(element,modules){var doBootstrap=function(){if(element=jqLite(element),element.injector()){var tag=element[0]===document?"document":startingTag(element);throw ngMinErr("btstrpd","App Already Bootstrapped with this Element '{0}'",tag.replace(/</,"&lt;").replace(/>/,"&gt;"))}modules=modules||[],modules.unshift(["$provide",function($provide){$provide.value("$rootElement",element)}]),modules.unshift("ng");var injector=createInjector(modules);return injector.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(scope,element,compile,injector,animate){scope.$apply(function(){element.data("$injector",injector),compile(element)(scope)})}]),injector},NG_DEFER_BOOTSTRAP=/^NG_DEFER_BOOTSTRAP!/;return window&&!NG_DEFER_BOOTSTRAP.test(window.name)?doBootstrap():(window.name=window.name.replace(NG_DEFER_BOOTSTRAP,""),void(angular.resumeBootstrap=function(extraModules){forEach(extraModules,function(module){modules.push(module)}),doBootstrap()}))}function snake_case(name,separator){return separator=separator||"_",name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}function bindJQuery(){jQuery=window.jQuery,jQuery&&jQuery.fn.on?(jqLite=jQuery,extend(jQuery.fn,{scope:JQLitePrototype.scope,isolateScope:JQLitePrototype.isolateScope,controller:JQLitePrototype.controller,injector:JQLitePrototype.injector,inheritedData:JQLitePrototype.inheritedData}),jqLitePatchJQueryRemove("remove",!0,!0,!1),jqLitePatchJQueryRemove("empty",!1,!1,!1),jqLitePatchJQueryRemove("html",!1,!1,!0)):jqLite=JQLite,angular.element=jqLite}function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function assertArgFn(arg,name,acceptArrayAnnotation){return acceptArrayAnnotation&&isArray(arg)&&(arg=arg[arg.length-1]),assertArg(isFunction(arg),name,"not a function, got "+(arg&&"object"==typeof arg?arg.constructor.name||"Object":typeof arg)),arg}function assertNotHasOwnProperty(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}function getter(obj,path,bindFnToScope){if(!path)return obj;for(var key,keys=path.split("."),lastInstance=obj,len=keys.length,i=0;len>i;i++)key=keys[i],obj&&(obj=(lastInstance=obj)[key]);return!bindFnToScope&&isFunction(obj)?bind(lastInstance,obj):obj}function getBlockElements(nodes){var startNode=nodes[0],endNode=nodes[nodes.length-1];if(startNode===endNode)return jqLite(startNode);var element=startNode,elements=[element];do{if(element=element.nextSibling,!element)break;elements.push(element)}while(element!==endNode);return jqLite(elements)}function setupModuleLoader(window){function ensure(obj,name,factory){return obj[name]||(obj[name]=factory())}var $injectorMinErr=minErr("$injector"),ngMinErr=minErr("ng"),angular=ensure(window,"angular",Object);return angular.$$minErr=angular.$$minErr||minErr,ensure(angular,"module",function(){var modules={};return function(name,requires,configFn){var assertNotHasOwnProperty=function(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)};return assertNotHasOwnProperty(name,"module"),requires&&modules.hasOwnProperty(name)&&(modules[name]=null),ensure(modules,name,function(){function invokeLater(provider,method,insertMethod){return function(){return invokeQueue[insertMethod||"push"]([provider,method,arguments]),moduleInstance}}if(!requires)throw $injectorMinErr("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",name);var invokeQueue=[],runBlocks=[],config=invokeLater("$injector","invoke"),moduleInstance={_invokeQueue:invokeQueue,_runBlocks:runBlocks,requires:requires,name:name,provider:invokeLater("$provide","provider"),factory:invokeLater("$provide","factory"),service:invokeLater("$provide","service"),value:invokeLater("$provide","value"),constant:invokeLater("$provide","constant","unshift"),animation:invokeLater("$animateProvider","register"),filter:invokeLater("$filterProvider","register"),controller:invokeLater("$controllerProvider","register"),directive:invokeLater("$compileProvider","directive"),config:config,run:function(block){return runBlocks.push(block),this}};return configFn&&config(configFn),moduleInstance})}})}function publishExternalAPI(angular){extend(angular,{bootstrap:bootstrap,copy:copy,extend:extend,equals:equals,element:jqLite,forEach:forEach,injector:createInjector,noop:noop,bind:bind,toJson:toJson,fromJson:fromJson,identity:identity,isUndefined:isUndefined,isDefined:isDefined,isString:isString,isFunction:isFunction,isObject:isObject,isNumber:isNumber,isElement:isElement,isArray:isArray,version:version,isDate:isDate,lowercase:lowercase,uppercase:uppercase,callbacks:{counter:0},$$minErr:minErr,$$csp:csp}),angularModule=setupModuleLoader(window);try{angularModule("ngLocale")}catch(e){angularModule("ngLocale",[]).provider("$locale",$LocaleProvider)}angularModule("ng",["ngLocale"],["$provide",function($provide){$provide.provider({$$sanitizeUri:$$SanitizeUriProvider}),$provide.provider("$compile",$CompileProvider).directive({a:htmlAnchorDirective,input:inputDirective,textarea:inputDirective,form:formDirective,script:scriptDirective,select:selectDirective,style:styleDirective,option:optionDirective,ngBind:ngBindDirective,ngBindHtml:ngBindHtmlDirective,ngBindTemplate:ngBindTemplateDirective,ngClass:ngClassDirective,ngClassEven:ngClassEvenDirective,ngClassOdd:ngClassOddDirective,ngCloak:ngCloakDirective,ngController:ngControllerDirective,ngForm:ngFormDirective,ngHide:ngHideDirective,ngIf:ngIfDirective,ngInclude:ngIncludeDirective,ngInit:ngInitDirective,ngNonBindable:ngNonBindableDirective,ngPluralize:ngPluralizeDirective,ngRepeat:ngRepeatDirective,ngShow:ngShowDirective,ngStyle:ngStyleDirective,ngSwitch:ngSwitchDirective,ngSwitchWhen:ngSwitchWhenDirective,ngSwitchDefault:ngSwitchDefaultDirective,ngOptions:ngOptionsDirective,ngTransclude:ngTranscludeDirective,ngModel:ngModelDirective,ngList:ngListDirective,ngChange:ngChangeDirective,required:requiredDirective,ngRequired:requiredDirective,ngValue:ngValueDirective}).directive({ngInclude:ngIncludeFillContentDirective}).directive(ngAttributeAliasDirectives).directive(ngEventDirectives),$provide.provider({$anchorScroll:$AnchorScrollProvider,$animate:$AnimateProvider,$browser:$BrowserProvider,$cacheFactory:$CacheFactoryProvider,$controller:$ControllerProvider,$document:$DocumentProvider,$exceptionHandler:$ExceptionHandlerProvider,$filter:$FilterProvider,$interpolate:$InterpolateProvider,$interval:$IntervalProvider,$http:$HttpProvider,$httpBackend:$HttpBackendProvider,$location:$LocationProvider,$log:$LogProvider,$parse:$ParseProvider,$rootScope:$RootScopeProvider,$q:$QProvider,$sce:$SceProvider,$sceDelegate:$SceDelegateProvider,$sniffer:$SnifferProvider,$templateCache:$TemplateCacheProvider,$timeout:$TimeoutProvider,$window:$WindowProvider,$$rAF:$$RAFProvider,$$asyncCallback:$$AsyncCallbackProvider})}])}function jqNextId(){return++jqId}function camelCase(name){return name.replace(SPECIAL_CHARS_REGEXP,function(_,separator,letter,offset){return offset?letter.toUpperCase():letter}).replace(MOZ_HACK_REGEXP,"Moz$1")}function jqLitePatchJQueryRemove(name,dispatchThis,filterElems,getterIfNoArguments){function removePatch(param){var set,setIndex,setLength,element,childIndex,childLength,children,list=filterElems&&param?[this.filter(param)]:[this],fireEvent=dispatchThis;if(!getterIfNoArguments||null!=param)for(;list.length;)for(set=list.shift(),setIndex=0,setLength=set.length;setLength>setIndex;setIndex++)for(element=jqLite(set[setIndex]),fireEvent?element.triggerHandler("$destroy"):fireEvent=!fireEvent,childIndex=0,childLength=(children=element.children()).length;childLength>childIndex;childIndex++)list.push(jQuery(children[childIndex]));return originalJqFn.apply(this,arguments)}var originalJqFn=jQuery.fn[name];originalJqFn=originalJqFn.$original||originalJqFn,removePatch.$original=originalJqFn,jQuery.fn[name]=removePatch}function jqLiteIsTextNode(html){return!HTML_REGEXP.test(html)}function jqLiteBuildFragment(html,context){var tmp,tag,wrap,i,j,jj,fragment=context.createDocumentFragment(),nodes=[];if(jqLiteIsTextNode(html))nodes.push(context.createTextNode(html));else{for(tmp=fragment.appendChild(context.createElement("div")),tag=(TAG_NAME_REGEXP.exec(html)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML="<div>&#160;</div>"+wrap[1]+html.replace(XHTML_TAG_REGEXP,"<$1></$2>")+wrap[2],tmp.removeChild(tmp.firstChild),i=wrap[0];i--;)tmp=tmp.lastChild;for(j=0,jj=tmp.childNodes.length;jj>j;++j)nodes.push(tmp.childNodes[j]);tmp=fragment.firstChild,tmp.textContent=""}return fragment.textContent="",fragment.innerHTML="",nodes}function jqLiteParseHTML(html,context){context=context||document;var parsed;return(parsed=SINGLE_TAG_REGEXP.exec(html))?[context.createElement(parsed[1])]:jqLiteBuildFragment(html,context)}function JQLite(element){if(element instanceof JQLite)return element;if(isString(element)&&(element=trim(element)),!(this instanceof JQLite)){if(isString(element)&&"<"!=element.charAt(0))throw jqLiteMinErr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new JQLite(element)}if(isString(element)){jqLiteAddNodes(this,jqLiteParseHTML(element));var fragment=jqLite(document.createDocumentFragment());fragment.append(this)}else jqLiteAddNodes(this,element)}function jqLiteClone(element){return element.cloneNode(!0)}function jqLiteDealoc(element){jqLiteRemoveData(element);
for(var i=0,children=element.childNodes||[];i<children.length;i++)jqLiteDealoc(children[i])}function jqLiteOff(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("offargs","jqLite#off() does not support the `selector` argument");var events=jqLiteExpandoStore(element,"events"),handle=jqLiteExpandoStore(element,"handle");handle&&(isUndefined(type)?forEach(events,function(eventHandler,type){removeEventListenerFn(element,type,eventHandler),delete events[type]}):forEach(type.split(" "),function(type){isUndefined(fn)?(removeEventListenerFn(element,type,events[type]),delete events[type]):arrayRemove(events[type]||[],fn)}))}function jqLiteRemoveData(element,name){var expandoId=element.ng339,expandoStore=jqCache[expandoId];if(expandoStore){if(name)return void delete jqCache[expandoId].data[name];expandoStore.handle&&(expandoStore.events.$destroy&&expandoStore.handle({},"$destroy"),jqLiteOff(element)),delete jqCache[expandoId],element.ng339=undefined}}function jqLiteExpandoStore(element,key,value){var expandoId=element.ng339,expandoStore=jqCache[expandoId||-1];return isDefined(value)?(expandoStore||(element.ng339=expandoId=jqNextId(),expandoStore=jqCache[expandoId]={}),void(expandoStore[key]=value)):expandoStore&&expandoStore[key]}function jqLiteData(element,key,value){var data=jqLiteExpandoStore(element,"data"),isSetter=isDefined(value),keyDefined=!isSetter&&isDefined(key),isSimpleGetter=keyDefined&&!isObject(key);if(data||isSimpleGetter||jqLiteExpandoStore(element,"data",data={}),isSetter)data[key]=value;else{if(!keyDefined)return data;if(isSimpleGetter)return data&&data[key];extend(data,key)}}function jqLiteHasClass(element,selector){return element.getAttribute?(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+selector+" ")>-1:!1}function jqLiteRemoveClass(element,cssClasses){cssClasses&&element.setAttribute&&forEach(cssClasses.split(" "),function(cssClass){element.setAttribute("class",trim((" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+trim(cssClass)+" "," ")))})}function jqLiteAddClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");forEach(cssClasses.split(" "),function(cssClass){cssClass=trim(cssClass),-1===existingClasses.indexOf(" "+cssClass+" ")&&(existingClasses+=cssClass+" ")}),element.setAttribute("class",trim(existingClasses))}}function jqLiteAddNodes(root,elements){if(elements){elements=elements.nodeName||!isDefined(elements.length)||isWindow(elements)?[elements]:elements;for(var i=0;i<elements.length;i++)root.push(elements[i])}}function jqLiteController(element,name){return jqLiteInheritedData(element,"$"+(name||"ngController")+"Controller")}function jqLiteInheritedData(element,name,value){9==element.nodeType&&(element=element.documentElement);for(var names=isArray(name)?name:[name];element;){for(var i=0,ii=names.length;ii>i;i++)if((value=jqLite.data(element,names[i]))!==undefined)return value;element=element.parentNode||11===element.nodeType&&element.host}}function jqLiteEmpty(element){for(var i=0,childNodes=element.childNodes;i<childNodes.length;i++)jqLiteDealoc(childNodes[i]);for(;element.firstChild;)element.removeChild(element.firstChild)}function getBooleanAttrName(element,name){var booleanAttr=BOOLEAN_ATTR[name.toLowerCase()];return booleanAttr&&BOOLEAN_ELEMENTS[element.nodeName]&&booleanAttr}function createEventHandler(element,events){var eventHandler=function(event,type){if(event.preventDefault||(event.preventDefault=function(){event.returnValue=!1}),event.stopPropagation||(event.stopPropagation=function(){event.cancelBubble=!0}),event.target||(event.target=event.srcElement||document),isUndefined(event.defaultPrevented)){var prevent=event.preventDefault;event.preventDefault=function(){event.defaultPrevented=!0,prevent.call(event)},event.defaultPrevented=!1}event.isDefaultPrevented=function(){return event.defaultPrevented||event.returnValue===!1};var eventHandlersCopy=shallowCopy(events[type||event.type]||[]);forEach(eventHandlersCopy,function(fn){fn.call(element,event)}),8>=msie?(event.preventDefault=null,event.stopPropagation=null,event.isDefaultPrevented=null):(delete event.preventDefault,delete event.stopPropagation,delete event.isDefaultPrevented)};return eventHandler.elem=element,eventHandler}function hashKey(obj,nextUidFn){var key,objType=typeof obj;return"function"==objType||"object"==objType&&null!==obj?"function"==typeof(key=obj.$$hashKey)?key=obj.$$hashKey():key===undefined&&(key=obj.$$hashKey=(nextUidFn||nextUid)()):key=obj,objType+":"+key}function HashMap(array,isolatedUid){if(isolatedUid){var uid=0;this.nextUid=function(){return++uid}}forEach(array,this.put,this)}function annotate(fn){var $inject,fnText,argDecl,last;return"function"==typeof fn?($inject=fn.$inject)||($inject=[],fn.length&&(fnText=fn.toString().replace(STRIP_COMMENTS,""),argDecl=fnText.match(FN_ARGS),forEach(argDecl[1].split(FN_ARG_SPLIT),function(arg){arg.replace(FN_ARG,function(all,underscore,name){$inject.push(name)})})),fn.$inject=$inject):isArray(fn)?(last=fn.length-1,assertArgFn(fn[last],"fn"),$inject=fn.slice(0,last)):assertArgFn(fn,"fn",!0),$inject}function createInjector(modulesToLoad){function supportObject(delegate){return function(key,value){return isObject(key)?void forEach(key,reverseParams(delegate)):delegate(key,value)}}function provider(name,provider_){if(assertNotHasOwnProperty(name,"service"),(isFunction(provider_)||isArray(provider_))&&(provider_=providerInjector.instantiate(provider_)),!provider_.$get)throw $injectorMinErr("pget","Provider '{0}' must define $get factory method.",name);return providerCache[name+providerSuffix]=provider_}function factory(name,factoryFn){return provider(name,{$get:factoryFn})}function service(name,constructor){return factory(name,["$injector",function($injector){return $injector.instantiate(constructor)}])}function value(name,val){return factory(name,valueFn(val))}function constant(name,value){assertNotHasOwnProperty(name,"constant"),providerCache[name]=value,instanceCache[name]=value}function decorator(serviceName,decorFn){var origProvider=providerInjector.get(serviceName+providerSuffix),orig$get=origProvider.$get;origProvider.$get=function(){var origInstance=instanceInjector.invoke(orig$get,origProvider);return instanceInjector.invoke(decorFn,null,{$delegate:origInstance})}}function loadModules(modulesToLoad){var moduleFn,invokeQueue,i,ii,runBlocks=[];return forEach(modulesToLoad,function(module){if(!loadedModules.get(module)){loadedModules.put(module,!0);try{if(isString(module))for(moduleFn=angularModule(module),runBlocks=runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks),invokeQueue=moduleFn._invokeQueue,i=0,ii=invokeQueue.length;ii>i;i++){var invokeArgs=invokeQueue[i],provider=providerInjector.get(invokeArgs[0]);provider[invokeArgs[1]].apply(provider,invokeArgs[2])}else isFunction(module)?runBlocks.push(providerInjector.invoke(module)):isArray(module)?runBlocks.push(providerInjector.invoke(module)):assertArgFn(module,"module")}catch(e){throw isArray(module)&&(module=module[module.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),$injectorMinErr("modulerr","Failed to instantiate module {0} due to:\n{1}",module,e.stack||e.message||e)}}}),runBlocks}function createInternalInjector(cache,factory){function getService(serviceName){if(cache.hasOwnProperty(serviceName)){if(cache[serviceName]===INSTANTIATING)throw $injectorMinErr("cdep","Circular dependency found: {0}",serviceName+" <- "+path.join(" <- "));return cache[serviceName]}try{return path.unshift(serviceName),cache[serviceName]=INSTANTIATING,cache[serviceName]=factory(serviceName)}catch(err){throw cache[serviceName]===INSTANTIATING&&delete cache[serviceName],err}finally{path.shift()}}function invoke(fn,self,locals){var length,i,key,args=[],$inject=annotate(fn);for(i=0,length=$inject.length;length>i;i++){if(key=$inject[i],"string"!=typeof key)throw $injectorMinErr("itkn","Incorrect injection token! Expected service name as string, got {0}",key);args.push(locals&&locals.hasOwnProperty(key)?locals[key]:getService(key))}return isArray(fn)&&(fn=fn[length]),fn.apply(self,args)}function instantiate(Type,locals){var instance,returnedValue,Constructor=function(){};return Constructor.prototype=(isArray(Type)?Type[Type.length-1]:Type).prototype,instance=new Constructor,returnedValue=invoke(Type,instance,locals),isObject(returnedValue)||isFunction(returnedValue)?returnedValue:instance}return{invoke:invoke,instantiate:instantiate,get:getService,annotate:annotate,has:function(name){return providerCache.hasOwnProperty(name+providerSuffix)||cache.hasOwnProperty(name)}}}var INSTANTIATING={},providerSuffix="Provider",path=[],loadedModules=new HashMap([],!0),providerCache={$provide:{provider:supportObject(provider),factory:supportObject(factory),service:supportObject(service),value:supportObject(value),constant:supportObject(constant),decorator:decorator}},providerInjector=providerCache.$injector=createInternalInjector(providerCache,function(){throw $injectorMinErr("unpr","Unknown provider: {0}",path.join(" <- "))}),instanceCache={},instanceInjector=instanceCache.$injector=createInternalInjector(instanceCache,function(servicename){var provider=providerInjector.get(servicename+providerSuffix);return instanceInjector.invoke(provider.$get,provider)});return forEach(loadModules(modulesToLoad),function(fn){instanceInjector.invoke(fn||noop)}),instanceInjector}function $AnchorScrollProvider(){var autoScrollingEnabled=!0;this.disableAutoScrolling=function(){autoScrollingEnabled=!1},this.$get=["$window","$location","$rootScope",function($window,$location,$rootScope){function getFirstAnchor(list){var result=null;return forEach(list,function(element){result||"a"!==lowercase(element.nodeName)||(result=element)}),result}function scroll(){var elm,hash=$location.hash();hash?(elm=document.getElementById(hash))?elm.scrollIntoView():(elm=getFirstAnchor(document.getElementsByName(hash)))?elm.scrollIntoView():"top"===hash&&$window.scrollTo(0,0):$window.scrollTo(0,0)}var document=$window.document;return autoScrollingEnabled&&$rootScope.$watch(function(){return $location.hash()},function(){$rootScope.$evalAsync(scroll)}),scroll}]}function $$AsyncCallbackProvider(){this.$get=["$$rAF","$timeout",function($$rAF,$timeout){return $$rAF.supported?function(fn){return $$rAF(fn)}:function(fn){return $timeout(fn,0,!1)}}]}function Browser(window,document,$log,$sniffer){function completeOutstandingRequest(fn){try{fn.apply(null,sliceArgs(arguments,1))}finally{if(outstandingRequestCount--,0===outstandingRequestCount)for(;outstandingRequestCallbacks.length;)try{outstandingRequestCallbacks.pop()()}catch(e){$log.error(e)}}}function getHash(url){var index=url.indexOf("#");return-1===index?"":url.substr(index+1)}function startPoller(interval,setTimeout){!function check(){forEach(pollFns,function(pollFn){pollFn()}),pollTimeout=setTimeout(check,interval)}()}function fireUrlChange(){lastBrowserUrl!=self.url()&&(lastBrowserUrl=self.url(),forEach(urlChangeListeners,function(listener){listener(self.url())}))}var self=this,rawDocument=document[0],location=window.location,history=window.history,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,pendingDeferIds={};self.isMock=!1;var outstandingRequestCount=0,outstandingRequestCallbacks=[];self.$$completeOutstandingRequest=completeOutstandingRequest,self.$$incOutstandingRequestCount=function(){outstandingRequestCount++},self.notifyWhenNoOutstandingRequests=function(callback){forEach(pollFns,function(pollFn){pollFn()}),0===outstandingRequestCount?callback():outstandingRequestCallbacks.push(callback)};var pollTimeout,pollFns=[];self.addPollFn=function(fn){return isUndefined(pollTimeout)&&startPoller(100,setTimeout),pollFns.push(fn),fn};var lastBrowserUrl=location.href,baseElement=document.find("base"),reloadLocation=null;self.url=function(url,replace){if(location!==window.location&&(location=window.location),history!==window.history&&(history=window.history),url){if(lastBrowserUrl==url)return;var sameBase=lastBrowserUrl&&stripHash(lastBrowserUrl)===stripHash(url);return lastBrowserUrl=url,!sameBase&&$sniffer.history?replace?history.replaceState(null,"",url):(history.pushState(null,"",url),baseElement.attr("href",baseElement.attr("href"))):(sameBase||(reloadLocation=url),replace?location.replace(url):sameBase?location.hash=getHash(url):location.href=url),self}return reloadLocation||location.href.replace(/%27/g,"'")};var urlChangeListeners=[],urlChangeInit=!1;self.onUrlChange=function(callback){return urlChangeInit||($sniffer.history&&jqLite(window).on("popstate",fireUrlChange),$sniffer.hashchange?jqLite(window).on("hashchange",fireUrlChange):self.addPollFn(fireUrlChange),urlChangeInit=!0),urlChangeListeners.push(callback),callback},self.$$checkUrlChange=fireUrlChange,self.baseHref=function(){var href=baseElement.attr("href");return href?href.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var lastCookies={},lastCookieString="",cookiePath=self.baseHref();self.cookies=function(name,value){var cookieLength,cookieArray,cookie,i,index;if(!name){if(rawDocument.cookie!==lastCookieString)for(lastCookieString=rawDocument.cookie,cookieArray=lastCookieString.split("; "),lastCookies={},i=0;i<cookieArray.length;i++)cookie=cookieArray[i],index=cookie.indexOf("="),index>0&&(name=unescape(cookie.substring(0,index)),lastCookies[name]===undefined&&(lastCookies[name]=unescape(cookie.substring(index+1))));return lastCookies}value===undefined?rawDocument.cookie=escape(name)+"=;path="+cookiePath+";expires=Thu, 01 Jan 1970 00:00:00 GMT":isString(value)&&(cookieLength=(rawDocument.cookie=escape(name)+"="+escape(value)+";path="+cookiePath).length+1,cookieLength>4096&&$log.warn("Cookie '"+name+"' possibly not set or overflowed because it was too large ("+cookieLength+" > 4096 bytes)!"))},self.defer=function(fn,delay){var timeoutId;return outstandingRequestCount++,timeoutId=setTimeout(function(){delete pendingDeferIds[timeoutId],completeOutstandingRequest(fn)},delay||0),pendingDeferIds[timeoutId]=!0,timeoutId},self.defer.cancel=function(deferId){return pendingDeferIds[deferId]?(delete pendingDeferIds[deferId],clearTimeout(deferId),completeOutstandingRequest(noop),!0):!1}}function $BrowserProvider(){this.$get=["$window","$log","$sniffer","$document",function($window,$log,$sniffer,$document){return new Browser($window,$document,$log,$sniffer)}]}function $CacheFactoryProvider(){this.$get=function(){function cacheFactory(cacheId,options){function refresh(entry){entry!=freshEnd&&(staleEnd?staleEnd==entry&&(staleEnd=entry.n):staleEnd=entry,link(entry.n,entry.p),link(entry,freshEnd),freshEnd=entry,freshEnd.n=null)}function link(nextEntry,prevEntry){nextEntry!=prevEntry&&(nextEntry&&(nextEntry.p=prevEntry),prevEntry&&(prevEntry.n=nextEntry))}if(cacheId in caches)throw minErr("$cacheFactory")("iid","CacheId '{0}' is already taken!",cacheId);var size=0,stats=extend({},options,{id:cacheId}),data={},capacity=options&&options.capacity||Number.MAX_VALUE,lruHash={},freshEnd=null,staleEnd=null;return caches[cacheId]={put:function(key,value){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key]||(lruHash[key]={key:key});refresh(lruEntry)}if(!isUndefined(value))return key in data||size++,data[key]=value,size>capacity&&this.remove(staleEnd.key),value},get:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;refresh(lruEntry)}return data[key]},remove:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;lruEntry==freshEnd&&(freshEnd=lruEntry.p),lruEntry==staleEnd&&(staleEnd=lruEntry.n),link(lruEntry.n,lruEntry.p),delete lruHash[key]}delete data[key],size--},removeAll:function(){data={},size=0,lruHash={},freshEnd=staleEnd=null},destroy:function(){data=null,stats=null,lruHash=null,delete caches[cacheId]},info:function(){return extend({},stats,{size:size})}}}var caches={};return cacheFactory.info=function(){var info={};return forEach(caches,function(cache,cacheId){info[cacheId]=cache.info()}),info},cacheFactory.get=function(cacheId){return caches[cacheId]},cacheFactory}}function $TemplateCacheProvider(){this.$get=["$cacheFactory",function($cacheFactory){return $cacheFactory("templates")}]}function $CompileProvider($provide,$$sanitizeUriProvider){var hasDirectives={},Suffix="Directive",COMMENT_DIRECTIVE_REGEXP=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,CLASS_DIRECTIVE_REGEXP=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,EVENT_HANDLER_ATTR_REGEXP=/^(on[a-z]+|formaction)$/;this.directive=function registerDirective(name,directiveFactory){return assertNotHasOwnProperty(name,"directive"),isString(name)?(assertArg(directiveFactory,"directiveFactory"),hasDirectives.hasOwnProperty(name)||(hasDirectives[name]=[],$provide.factory(name+Suffix,["$injector","$exceptionHandler",function($injector,$exceptionHandler){var directives=[];return forEach(hasDirectives[name],function(directiveFactory,index){try{var directive=$injector.invoke(directiveFactory);isFunction(directive)?directive={compile:valueFn(directive)}:!directive.compile&&directive.link&&(directive.compile=valueFn(directive.link)),directive.priority=directive.priority||0,directive.index=index,directive.name=directive.name||name,directive.require=directive.require||directive.controller&&directive.name,directive.restrict=directive.restrict||"A",directives.push(directive)}catch(e){$exceptionHandler(e)}}),directives}])),hasDirectives[name].push(directiveFactory)):forEach(name,reverseParams(registerDirective)),this},this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.imgSrcSanitizationWhitelist()},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function($injector,$interpolate,$exceptionHandler,$http,$templateCache,$parse,$controller,$rootScope,$document,$sce,$animate,$$sanitizeUri){function compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){$compileNodes instanceof jqLite||($compileNodes=jqLite($compileNodes)),forEach($compileNodes,function(node,index){3==node.nodeType&&node.nodeValue.match(/\S+/)&&($compileNodes[index]=node=jqLite(node).wrap("<span></span>").parent()[0])});var compositeLinkFn=compileNodes($compileNodes,transcludeFn,$compileNodes,maxPriority,ignoreDirective,previousCompileContext);return safeAddClass($compileNodes,"ng-scope"),function(scope,cloneConnectFn,transcludeControllers,parentBoundTranscludeFn){assertArg(scope,"scope");var $linkNode=cloneConnectFn?JQLitePrototype.clone.call($compileNodes):$compileNodes;forEach(transcludeControllers,function(instance,name){$linkNode.data("$"+name+"Controller",instance)});for(var i=0,ii=$linkNode.length;ii>i;i++){var node=$linkNode[i],nodeType=node.nodeType;(1===nodeType||9===nodeType)&&$linkNode.eq(i).data("$scope",scope)}return cloneConnectFn&&cloneConnectFn($linkNode,scope),compositeLinkFn&&compositeLinkFn(scope,$linkNode,$linkNode,parentBoundTranscludeFn),$linkNode}}function safeAddClass($element,className){try{$element.addClass(className)}catch(e){}}function compileNodes(nodeList,transcludeFn,$rootElement,maxPriority,ignoreDirective,previousCompileContext){function compositeLinkFn(scope,nodeList,$rootElement,parentBoundTranscludeFn){var nodeLinkFn,childLinkFn,node,childScope,i,ii,n,childBoundTranscludeFn,nodeListLength=nodeList.length,stableNodeList=new Array(nodeListLength);for(i=0;nodeListLength>i;i++)stableNodeList[i]=nodeList[i];for(i=0,n=0,ii=linkFns.length;ii>i;n++)node=stableNodeList[n],nodeLinkFn=linkFns[i++],childLinkFn=linkFns[i++],nodeLinkFn?(nodeLinkFn.scope?(childScope=scope.$new(),jqLite.data(node,"$scope",childScope)):childScope=scope,childBoundTranscludeFn=nodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,nodeLinkFn.transclude,parentBoundTranscludeFn):!nodeLinkFn.templateOnThisElement&&parentBoundTranscludeFn?parentBoundTranscludeFn:!parentBoundTranscludeFn&&transcludeFn?createBoundTranscludeFn(scope,transcludeFn):null,nodeLinkFn(childLinkFn,childScope,node,$rootElement,childBoundTranscludeFn)):childLinkFn&&childLinkFn(scope,node.childNodes,undefined,parentBoundTranscludeFn)}for(var attrs,directives,nodeLinkFn,childNodes,childLinkFn,linkFnFound,linkFns=[],i=0;i<nodeList.length;i++)attrs=new Attributes,directives=collectDirectives(nodeList[i],[],attrs,0===i?maxPriority:undefined,ignoreDirective),nodeLinkFn=directives.length?applyDirectivesToNode(directives,nodeList[i],attrs,transcludeFn,$rootElement,null,[],[],previousCompileContext):null,nodeLinkFn&&nodeLinkFn.scope&&safeAddClass(attrs.$$element,"ng-scope"),childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||!(childNodes=nodeList[i].childNodes)||!childNodes.length?null:compileNodes(childNodes,nodeLinkFn?(nodeLinkFn.transcludeOnThisElement||!nodeLinkFn.templateOnThisElement)&&nodeLinkFn.transclude:transcludeFn),linkFns.push(nodeLinkFn,childLinkFn),linkFnFound=linkFnFound||nodeLinkFn||childLinkFn,previousCompileContext=null;return linkFnFound?compositeLinkFn:null}function createBoundTranscludeFn(scope,transcludeFn,previousBoundTranscludeFn){var boundTranscludeFn=function(transcludedScope,cloneFn,controllers){var scopeCreated=!1;transcludedScope||(transcludedScope=scope.$new(),transcludedScope.$$transcluded=!0,scopeCreated=!0);var clone=transcludeFn(transcludedScope,cloneFn,controllers,previousBoundTranscludeFn);return scopeCreated&&clone.on("$destroy",function(){transcludedScope.$destroy()}),clone};return boundTranscludeFn}function collectDirectives(node,directives,attrs,maxPriority,ignoreDirective){var match,nodeName,className,nodeType=node.nodeType,attrsMap=attrs.$attr;switch(nodeType){case 1:nodeName=nodeName_(node).toLowerCase(),addDirective(directives,directiveNormalize(nodeName),"E",maxPriority,ignoreDirective);for(var attr,name,nName,ngAttrName,value,isNgAttr,nAttrs=node.attributes,j=0,jj=nAttrs&&nAttrs.length;jj>j;j++){var attrStartName=!1,attrEndName=!1;if(attr=nAttrs[j],!msie||msie>=8||attr.specified){name=attr.name,value=trim(attr.value),ngAttrName=directiveNormalize(name),(isNgAttr=NG_ATTR_BINDING.test(ngAttrName))&&(name=snake_case(ngAttrName.substr(6),"-"));var directiveNName=ngAttrName.replace(/(Start|End)$/,"");ngAttrName===directiveNName+"Start"&&(attrStartName=name,attrEndName=name.substr(0,name.length-5)+"end",name=name.substr(0,name.length-6)),nName=directiveNormalize(name.toLowerCase()),attrsMap[nName]=name,(isNgAttr||!attrs.hasOwnProperty(nName))&&(attrs[nName]=value,getBooleanAttrName(node,nName)&&(attrs[nName]=!0)),addAttrInterpolateDirective(node,directives,value,nName),addDirective(directives,nName,"A",maxPriority,ignoreDirective,attrStartName,attrEndName)}}if("input"===nodeName&&"hidden"===node.getAttribute("type")&&node.setAttribute("autocomplete","off"),className=node.className,isString(className)&&""!==className)for(;match=CLASS_DIRECTIVE_REGEXP.exec(className);)nName=directiveNormalize(match[2]),addDirective(directives,nName,"C",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[3])),className=className.substr(match.index+match[0].length);break;case 3:if(11===msie)for(;node.parentNode&&node.nextSibling&&3===node.nextSibling.nodeType;)node.nodeValue=node.nodeValue+node.nextSibling.nodeValue,node.parentNode.removeChild(node.nextSibling);addTextInterpolateDirective(directives,node.nodeValue);break;case 8:try{match=COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue),match&&(nName=directiveNormalize(match[1]),addDirective(directives,nName,"M",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[2])))}catch(e){}}return directives.sort(byPriority),directives}function groupScan(node,attrStart,attrEnd){var nodes=[],depth=0;if(attrStart&&node.hasAttribute&&node.hasAttribute(attrStart)){do{if(!node)throw $compileMinErr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",attrStart,attrEnd);1==node.nodeType&&(node.hasAttribute(attrStart)&&depth++,node.hasAttribute(attrEnd)&&depth--),nodes.push(node),node=node.nextSibling}while(depth>0)}else nodes.push(node);return jqLite(nodes)}function groupElementsLinkFnWrapper(linkFn,attrStart,attrEnd){return function(scope,element,attrs,controllers,transcludeFn){return element=groupScan(element[0],attrStart,attrEnd),linkFn(scope,element,attrs,controllers,transcludeFn)}}function applyDirectivesToNode(directives,compileNode,templateAttrs,transcludeFn,jqCollection,originalReplaceDirective,preLinkFns,postLinkFns,previousCompileContext){function addLinkFns(pre,post,attrStart,attrEnd){pre&&(attrStart&&(pre=groupElementsLinkFnWrapper(pre,attrStart,attrEnd)),pre.require=directive.require,pre.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(pre=cloneAndAnnotateFn(pre,{isolateScope:!0})),preLinkFns.push(pre)),post&&(attrStart&&(post=groupElementsLinkFnWrapper(post,attrStart,attrEnd)),post.require=directive.require,post.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(post=cloneAndAnnotateFn(post,{isolateScope:!0})),postLinkFns.push(post))}function getControllers(directiveName,require,$element,elementControllers){var value,retrievalMethod="data",optional=!1;if(isString(require)){for(;"^"==(value=require.charAt(0))||"?"==value;)require=require.substr(1),"^"==value&&(retrievalMethod="inheritedData"),optional=optional||"?"==value;if(value=null,elementControllers&&"data"===retrievalMethod&&(value=elementControllers[require]),value=value||$element[retrievalMethod]("$"+require+"Controller"),!value&&!optional)throw $compileMinErr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",require,directiveName);return value}return isArray(require)&&(value=[],forEach(require,function(require){value.push(getControllers(directiveName,require,$element,elementControllers))})),value}function nodeLinkFn(childLinkFn,scope,linkNode,$rootElement,boundTranscludeFn){function controllersBoundTransclude(scope,cloneAttachFn){var transcludeControllers;return arguments.length<2&&(cloneAttachFn=scope,scope=undefined),hasElementTranscludeDirective&&(transcludeControllers=elementControllers),boundTranscludeFn(scope,cloneAttachFn,transcludeControllers)}var attrs,$element,i,ii,linkFn,controller,isolateScope,transcludeFn,elementControllers={};if(attrs=compileNode===linkNode?templateAttrs:shallowCopy(templateAttrs,new Attributes(jqLite(linkNode),templateAttrs.$attr)),$element=attrs.$$element,newIsolateScopeDirective){var LOCAL_REGEXP=/^\s*([@=&])(\??)\s*(\w*)\s*$/;isolateScope=scope.$new(!0),!templateDirective||templateDirective!==newIsolateScopeDirective&&templateDirective!==newIsolateScopeDirective.$$originalDirective?$element.data("$isolateScopeNoTemplate",isolateScope):$element.data("$isolateScope",isolateScope),safeAddClass($element,"ng-isolate-scope"),forEach(newIsolateScopeDirective.scope,function(definition,scopeName){var lastValue,parentGet,parentSet,compare,match=definition.match(LOCAL_REGEXP)||[],attrName=match[3]||scopeName,optional="?"==match[2],mode=match[1];switch(isolateScope.$$isolateBindings[scopeName]=mode+attrName,mode){case"@":attrs.$observe(attrName,function(value){isolateScope[scopeName]=value}),attrs.$$observers[attrName].$$scope=scope,attrs[attrName]&&(isolateScope[scopeName]=$interpolate(attrs[attrName])(scope));break;case"=":if(optional&&!attrs[attrName])return;parentGet=$parse(attrs[attrName]),compare=parentGet.literal?equals:function(a,b){return a===b||a!==a&&b!==b},parentSet=parentGet.assign||function(){throw lastValue=isolateScope[scopeName]=parentGet(scope),$compileMinErr("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",attrs[attrName],newIsolateScopeDirective.name)},lastValue=isolateScope[scopeName]=parentGet(scope),isolateScope.$watch(function(){var parentValue=parentGet(scope);return compare(parentValue,isolateScope[scopeName])||(compare(parentValue,lastValue)?parentSet(scope,parentValue=isolateScope[scopeName]):isolateScope[scopeName]=parentValue),lastValue=parentValue},null,parentGet.literal);break;case"&":parentGet=$parse(attrs[attrName]),isolateScope[scopeName]=function(locals){return parentGet(scope,locals)};break;default:throw $compileMinErr("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",newIsolateScopeDirective.name,scopeName,definition)}})}for(transcludeFn=boundTranscludeFn&&controllersBoundTransclude,controllerDirectives&&forEach(controllerDirectives,function(directive){var controllerInstance,locals={$scope:directive===newIsolateScopeDirective||directive.$$isolateScope?isolateScope:scope,$element:$element,$attrs:attrs,$transclude:transcludeFn};controller=directive.controller,"@"==controller&&(controller=attrs[directive.name]),controllerInstance=$controller(controller,locals),elementControllers[directive.name]=controllerInstance,hasElementTranscludeDirective||$element.data("$"+directive.name+"Controller",controllerInstance),directive.controllerAs&&(locals.$scope[directive.controllerAs]=controllerInstance)}),i=0,ii=preLinkFns.length;ii>i;i++)try{linkFn=preLinkFns[i],linkFn(linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}var scopeToChild=scope;for(newIsolateScopeDirective&&(newIsolateScopeDirective.template||null===newIsolateScopeDirective.templateUrl)&&(scopeToChild=isolateScope),childLinkFn&&childLinkFn(scopeToChild,linkNode.childNodes,undefined,boundTranscludeFn),i=postLinkFns.length-1;i>=0;i--)try{linkFn=postLinkFns[i],linkFn(linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}}previousCompileContext=previousCompileContext||{};for(var newScopeDirective,directive,directiveName,$template,linkFn,directiveValue,terminalPriority=-Number.MAX_VALUE,controllerDirectives=previousCompileContext.controllerDirectives,newIsolateScopeDirective=previousCompileContext.newIsolateScopeDirective,templateDirective=previousCompileContext.templateDirective,nonTlbTranscludeDirective=previousCompileContext.nonTlbTranscludeDirective,hasTranscludeDirective=!1,hasTemplate=!1,hasElementTranscludeDirective=previousCompileContext.hasElementTranscludeDirective,$compileNode=templateAttrs.$$element=jqLite(compileNode),replaceDirective=originalReplaceDirective,childTranscludeFn=transcludeFn,i=0,ii=directives.length;ii>i;i++){directive=directives[i];var attrStart=directive.$$start,attrEnd=directive.$$end;if(attrStart&&($compileNode=groupScan(compileNode,attrStart,attrEnd)),$template=undefined,terminalPriority>directive.priority)break;if((directiveValue=directive.scope)&&(newScopeDirective=newScopeDirective||directive,directive.templateUrl||(assertNoDuplicate("new/isolated scope",newIsolateScopeDirective,directive,$compileNode),isObject(directiveValue)&&(newIsolateScopeDirective=directive))),directiveName=directive.name,!directive.templateUrl&&directive.controller&&(directiveValue=directive.controller,controllerDirectives=controllerDirectives||{},assertNoDuplicate("'"+directiveName+"' controller",controllerDirectives[directiveName],directive,$compileNode),controllerDirectives[directiveName]=directive),(directiveValue=directive.transclude)&&(hasTranscludeDirective=!0,directive.$$tlb||(assertNoDuplicate("transclusion",nonTlbTranscludeDirective,directive,$compileNode),nonTlbTranscludeDirective=directive),"element"==directiveValue?(hasElementTranscludeDirective=!0,terminalPriority=directive.priority,$template=$compileNode,$compileNode=templateAttrs.$$element=jqLite(document.createComment(" "+directiveName+": "+templateAttrs[directiveName]+" ")),compileNode=$compileNode[0],replaceWith(jqCollection,sliceArgs($template),compileNode),childTranscludeFn=compile($template,transcludeFn,terminalPriority,replaceDirective&&replaceDirective.name,{nonTlbTranscludeDirective:nonTlbTranscludeDirective})):($template=jqLite(jqLiteClone(compileNode)).contents(),$compileNode.empty(),childTranscludeFn=compile($template,transcludeFn))),directive.template)if(hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directiveValue=isFunction(directive.template)?directive.template($compileNode,templateAttrs):directive.template,
directiveValue=denormalizeTemplate(directiveValue),directive.replace){if(replaceDirective=directive,$template=jqLiteIsTextNode(directiveValue)?[]:jqLite(trim(directiveValue)),compileNode=$template[0],1!=$template.length||1!==compileNode.nodeType)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",directiveName,"");replaceWith(jqCollection,$compileNode,compileNode);var newTemplateAttrs={$attr:{}},templateDirectives=collectDirectives(compileNode,[],newTemplateAttrs),unprocessedDirectives=directives.splice(i+1,directives.length-(i+1));newIsolateScopeDirective&&markDirectivesAsIsolate(templateDirectives),directives=directives.concat(templateDirectives).concat(unprocessedDirectives),mergeTemplateAttributes(templateAttrs,newTemplateAttrs),ii=directives.length}else $compileNode.html(directiveValue);if(directive.templateUrl)hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directive.replace&&(replaceDirective=directive),nodeLinkFn=compileTemplateUrl(directives.splice(i,directives.length-i),$compileNode,templateAttrs,jqCollection,hasTranscludeDirective&&childTranscludeFn,preLinkFns,postLinkFns,{controllerDirectives:controllerDirectives,newIsolateScopeDirective:newIsolateScopeDirective,templateDirective:templateDirective,nonTlbTranscludeDirective:nonTlbTranscludeDirective}),ii=directives.length;else if(directive.compile)try{linkFn=directive.compile($compileNode,templateAttrs,childTranscludeFn),isFunction(linkFn)?addLinkFns(null,linkFn,attrStart,attrEnd):linkFn&&addLinkFns(linkFn.pre,linkFn.post,attrStart,attrEnd)}catch(e){$exceptionHandler(e,startingTag($compileNode))}directive.terminal&&(nodeLinkFn.terminal=!0,terminalPriority=Math.max(terminalPriority,directive.priority))}return nodeLinkFn.scope=newScopeDirective&&newScopeDirective.scope===!0,nodeLinkFn.transcludeOnThisElement=hasTranscludeDirective,nodeLinkFn.templateOnThisElement=hasTemplate,nodeLinkFn.transclude=childTranscludeFn,previousCompileContext.hasElementTranscludeDirective=hasElementTranscludeDirective,nodeLinkFn}function markDirectivesAsIsolate(directives){for(var j=0,jj=directives.length;jj>j;j++)directives[j]=inherit(directives[j],{$$isolateScope:!0})}function addDirective(tDirectives,name,location,maxPriority,ignoreDirective,startAttrName,endAttrName){if(name===ignoreDirective)return null;var match=null;if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;ii>i;i++)try{directive=directives[i],(maxPriority===undefined||maxPriority>directive.priority)&&-1!=directive.restrict.indexOf(location)&&(startAttrName&&(directive=inherit(directive,{$$start:startAttrName,$$end:endAttrName})),tDirectives.push(directive),match=directive)}catch(e){$exceptionHandler(e)}return match}function mergeTemplateAttributes(dst,src){var srcAttr=src.$attr,dstAttr=dst.$attr,$element=dst.$$element;forEach(dst,function(value,key){"$"!=key.charAt(0)&&(src[key]&&src[key]!==value&&(value+=("style"===key?";":" ")+src[key]),dst.$set(key,value,!0,srcAttr[key]))}),forEach(src,function(value,key){"class"==key?(safeAddClass($element,value),dst["class"]=(dst["class"]?dst["class"]+" ":"")+value):"style"==key?($element.attr("style",$element.attr("style")+";"+value),dst.style=(dst.style?dst.style+";":"")+value):"$"==key.charAt(0)||dst.hasOwnProperty(key)||(dst[key]=value,dstAttr[key]=srcAttr[key])})}function compileTemplateUrl(directives,$compileNode,tAttrs,$rootElement,childTranscludeFn,preLinkFns,postLinkFns,previousCompileContext){var afterTemplateNodeLinkFn,afterTemplateChildLinkFn,linkQueue=[],beforeTemplateCompileNode=$compileNode[0],origAsyncDirective=directives.shift(),derivedSyncDirective=extend({},origAsyncDirective,{templateUrl:null,transclude:null,replace:null,$$originalDirective:origAsyncDirective}),templateUrl=isFunction(origAsyncDirective.templateUrl)?origAsyncDirective.templateUrl($compileNode,tAttrs):origAsyncDirective.templateUrl;return $compileNode.empty(),$http.get($sce.getTrustedResourceUrl(templateUrl),{cache:$templateCache}).success(function(content){var compileNode,tempTemplateAttrs,$template,childBoundTranscludeFn;if(content=denormalizeTemplate(content),origAsyncDirective.replace){if($template=jqLiteIsTextNode(content)?[]:jqLite(trim(content)),compileNode=$template[0],1!=$template.length||1!==compileNode.nodeType)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",origAsyncDirective.name,templateUrl);tempTemplateAttrs={$attr:{}},replaceWith($rootElement,$compileNode,compileNode);var templateDirectives=collectDirectives(compileNode,[],tempTemplateAttrs);isObject(origAsyncDirective.scope)&&markDirectivesAsIsolate(templateDirectives),directives=templateDirectives.concat(directives),mergeTemplateAttributes(tAttrs,tempTemplateAttrs)}else compileNode=beforeTemplateCompileNode,$compileNode.html(content);for(directives.unshift(derivedSyncDirective),afterTemplateNodeLinkFn=applyDirectivesToNode(directives,compileNode,tAttrs,childTranscludeFn,$compileNode,origAsyncDirective,preLinkFns,postLinkFns,previousCompileContext),forEach($rootElement,function(node,i){node==compileNode&&($rootElement[i]=$compileNode[0])}),afterTemplateChildLinkFn=compileNodes($compileNode[0].childNodes,childTranscludeFn);linkQueue.length;){var scope=linkQueue.shift(),beforeTemplateLinkNode=linkQueue.shift(),linkRootElement=linkQueue.shift(),boundTranscludeFn=linkQueue.shift(),linkNode=$compileNode[0];if(beforeTemplateLinkNode!==beforeTemplateCompileNode){var oldClasses=beforeTemplateLinkNode.className;previousCompileContext.hasElementTranscludeDirective&&origAsyncDirective.replace||(linkNode=jqLiteClone(compileNode)),replaceWith(linkRootElement,jqLite(beforeTemplateLinkNode),linkNode),safeAddClass(jqLite(linkNode),oldClasses)}childBoundTranscludeFn=afterTemplateNodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn):boundTranscludeFn,afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,linkNode,$rootElement,childBoundTranscludeFn)}linkQueue=null}).error(function(response,code,headers,config){throw $compileMinErr("tpload","Failed to load template: {0}",config.url)}),function(ignoreChildLinkFn,scope,node,rootElement,boundTranscludeFn){var childBoundTranscludeFn=boundTranscludeFn;linkQueue?(linkQueue.push(scope),linkQueue.push(node),linkQueue.push(rootElement),linkQueue.push(childBoundTranscludeFn)):(afterTemplateNodeLinkFn.transcludeOnThisElement&&(childBoundTranscludeFn=createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn)),afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,node,rootElement,childBoundTranscludeFn))}}function byPriority(a,b){var diff=b.priority-a.priority;return 0!==diff?diff:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function assertNoDuplicate(what,previousDirective,directive,element){if(previousDirective)throw $compileMinErr("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",previousDirective.name,directive.name,what,startingTag(element))}function addTextInterpolateDirective(directives,text){var interpolateFn=$interpolate(text,!0);interpolateFn&&directives.push({priority:0,compile:function(templateNode){var parent=templateNode.parent(),hasCompileParent=parent.length;return hasCompileParent&&safeAddClass(templateNode.parent(),"ng-binding"),function(scope,node){var parent=node.parent(),bindings=parent.data("$binding")||[];bindings.push(interpolateFn),parent.data("$binding",bindings),hasCompileParent||safeAddClass(parent,"ng-binding"),scope.$watch(interpolateFn,function(value){node[0].nodeValue=value})}}})}function getTrustedContext(node,attrNormalizedName){if("srcdoc"==attrNormalizedName)return $sce.HTML;var tag=nodeName_(node);return"xlinkHref"==attrNormalizedName||"FORM"==tag&&"action"==attrNormalizedName||"LINK"==tag&&"href"==attrNormalizedName||"IMG"!=tag&&("src"==attrNormalizedName||"ngSrc"==attrNormalizedName)?$sce.RESOURCE_URL:void 0}function addAttrInterpolateDirective(node,directives,value,name){var interpolateFn=$interpolate(value,!0);if(interpolateFn){if("multiple"===name&&"SELECT"===nodeName_(node))throw $compileMinErr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",startingTag(node));directives.push({priority:100,compile:function(){return{pre:function(scope,element,attr){var $$observers=attr.$$observers||(attr.$$observers={});if(EVENT_HANDLER_ATTR_REGEXP.test(name))throw $compileMinErr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");interpolateFn=$interpolate(attr[name],!0,getTrustedContext(node,name)),interpolateFn&&(attr[name]=interpolateFn(scope),($$observers[name]||($$observers[name]=[])).$$inter=!0,(attr.$$observers&&attr.$$observers[name].$$scope||scope).$watch(interpolateFn,function(newValue,oldValue){"class"===name&&newValue!=oldValue?attr.$updateClass(newValue,oldValue):attr.$set(name,newValue)}))}}}})}}function replaceWith($rootElement,elementsToRemove,newNode){var i,ii,firstElementToRemove=elementsToRemove[0],removeCount=elementsToRemove.length,parent=firstElementToRemove.parentNode;if($rootElement)for(i=0,ii=$rootElement.length;ii>i;i++)if($rootElement[i]==firstElementToRemove){$rootElement[i++]=newNode;for(var j=i,j2=j+removeCount-1,jj=$rootElement.length;jj>j;j++,j2++)jj>j2?$rootElement[j]=$rootElement[j2]:delete $rootElement[j];$rootElement.length-=removeCount-1;break}parent&&parent.replaceChild(newNode,firstElementToRemove);var fragment=document.createDocumentFragment();fragment.appendChild(firstElementToRemove),newNode[jqLite.expando]=firstElementToRemove[jqLite.expando];for(var k=1,kk=elementsToRemove.length;kk>k;k++){var element=elementsToRemove[k];jqLite(element).remove(),fragment.appendChild(element),delete elementsToRemove[k]}elementsToRemove[0]=newNode,elementsToRemove.length=1}function cloneAndAnnotateFn(fn,annotation){return extend(function(){return fn.apply(null,arguments)},fn,annotation)}var Attributes=function(element,attr){this.$$element=element,this.$attr=attr||{}};Attributes.prototype={$normalize:directiveNormalize,$addClass:function(classVal){classVal&&classVal.length>0&&$animate.addClass(this.$$element,classVal)},$removeClass:function(classVal){classVal&&classVal.length>0&&$animate.removeClass(this.$$element,classVal)},$updateClass:function(newClasses,oldClasses){var toAdd=tokenDifference(newClasses,oldClasses),toRemove=tokenDifference(oldClasses,newClasses);0===toAdd.length?$animate.removeClass(this.$$element,toRemove):0===toRemove.length?$animate.addClass(this.$$element,toAdd):$animate.setClass(this.$$element,toAdd,toRemove)},$set:function(key,value,writeAttr,attrName){var nodeName,booleanKey=getBooleanAttrName(this.$$element[0],key);booleanKey&&(this.$$element.prop(key,value),attrName=booleanKey),this[key]=value,attrName?this.$attr[key]=attrName:(attrName=this.$attr[key],attrName||(this.$attr[key]=attrName=snake_case(key,"-"))),nodeName=nodeName_(this.$$element).toUpperCase(),("A"===nodeName&&("href"===key||"xlinkHref"===key)||"IMG"===nodeName&&"src"===key)&&(this[key]=value=$$sanitizeUri(value,"src"===key)),writeAttr!==!1&&(null===value||value===undefined?this.$$element.removeAttr(attrName):this.$$element.attr(attrName,value));var $$observers=this.$$observers;$$observers&&forEach($$observers[key],function(fn){try{fn(value)}catch(e){$exceptionHandler(e)}})},$observe:function(key,fn){var attrs=this,$$observers=attrs.$$observers||(attrs.$$observers={}),listeners=$$observers[key]||($$observers[key]=[]);return listeners.push(fn),$rootScope.$evalAsync(function(){listeners.$$inter||fn(attrs[key])}),fn}};var startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),denormalizeTemplate="{{"==startSymbol||"}}"==endSymbol?identity:function(template){return template.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol)},NG_ATTR_BINDING=/^ngAttr[A-Z]/;return compile}]}function directiveNormalize(name){return camelCase(name.replace(PREFIX_REGEXP,""))}function tokenDifference(str1,str2){var values="",tokens1=str1.split(/\s+/),tokens2=str2.split(/\s+/);outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values+=(values.length>0?" ":"")+token}return values}function $ControllerProvider(){var controllers={},CNTRL_REG=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(name,constructor){assertNotHasOwnProperty(name,"controller"),isObject(name)?extend(controllers,name):controllers[name]=constructor},this.$get=["$injector","$window",function($injector,$window){return function(expression,locals){var instance,match,constructor,identifier;if(isString(expression)&&(match=expression.match(CNTRL_REG),constructor=match[1],identifier=match[3],expression=controllers.hasOwnProperty(constructor)?controllers[constructor]:getter(locals.$scope,constructor,!0)||getter($window,constructor,!0),assertArgFn(expression,constructor,!0)),instance=$injector.instantiate(expression,locals),identifier){if(!locals||"object"!=typeof locals.$scope)throw minErr("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",constructor||expression.name,identifier);locals.$scope[identifier]=instance}return instance}}]}function $DocumentProvider(){this.$get=["$window",function(window){return jqLite(window.document)}]}function $ExceptionHandlerProvider(){this.$get=["$log",function($log){return function(exception,cause){$log.error.apply($log,arguments)}}]}function parseHeaders(headers){var key,val,i,parsed={};return headers?(forEach(headers.split("\n"),function(line){i=line.indexOf(":"),key=lowercase(trim(line.substr(0,i))),val=trim(line.substr(i+1)),key&&(parsed[key]=parsed[key]?parsed[key]+", "+val:val)}),parsed):parsed}function headersGetter(headers){var headersObj=isObject(headers)?headers:undefined;return function(name){return headersObj||(headersObj=parseHeaders(headers)),name?headersObj[lowercase(name)]||null:headersObj}}function transformData(data,headers,fns){return isFunction(fns)?fns(data,headers):(forEach(fns,function(fn){data=fn(data,headers)}),data)}function isSuccess(status){return status>=200&&300>status}function $HttpProvider(){var JSON_START=/^\s*(\[|\{[^\{])/,JSON_END=/[\}\]]\s*$/,PROTECTION_PREFIX=/^\)\]\}',?\n/,CONTENT_TYPE_APPLICATION_JSON={"Content-Type":"application/json;charset=utf-8"},defaults=this.defaults={transformResponse:[function(data){return isString(data)&&(data=data.replace(PROTECTION_PREFIX,""),JSON_START.test(data)&&JSON_END.test(data)&&(data=fromJson(data))),data}],transformRequest:[function(d){return!isObject(d)||isFile(d)||isBlob(d)?d:toJson(d)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),put:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),patch:shallowCopy(CONTENT_TYPE_APPLICATION_JSON)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},interceptorFactories=this.interceptors=[],responseInterceptorFactories=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function($httpBackend,$browser,$cacheFactory,$rootScope,$q,$injector){function $http(requestConfig){function transformResponse(response){var resp=extend({},response,{data:transformData(response.data,response.headers,config.transformResponse)});return isSuccess(response.status)?resp:$q.reject(resp)}function mergeHeaders(config){function execHeaders(headers){var headerContent;forEach(headers,function(headerFn,header){isFunction(headerFn)&&(headerContent=headerFn(),null!=headerContent?headers[header]=headerContent:delete headers[header])})}var defHeaderName,lowercaseDefHeaderName,reqHeaderName,defHeaders=defaults.headers,reqHeaders=extend({},config.headers);defHeaders=extend({},defHeaders.common,defHeaders[lowercase(config.method)]);defaultHeadersIteration:for(defHeaderName in defHeaders){lowercaseDefHeaderName=lowercase(defHeaderName);for(reqHeaderName in reqHeaders)if(lowercase(reqHeaderName)===lowercaseDefHeaderName)continue defaultHeadersIteration;reqHeaders[defHeaderName]=defHeaders[defHeaderName]}return execHeaders(reqHeaders),reqHeaders}var config={method:"get",transformRequest:defaults.transformRequest,transformResponse:defaults.transformResponse},headers=mergeHeaders(requestConfig);extend(config,requestConfig),config.headers=headers,config.method=uppercase(config.method);var serverRequest=function(config){headers=config.headers;var reqData=transformData(config.data,headersGetter(headers),config.transformRequest);return isUndefined(reqData)&&forEach(headers,function(value,header){"content-type"===lowercase(header)&&delete headers[header]}),isUndefined(config.withCredentials)&&!isUndefined(defaults.withCredentials)&&(config.withCredentials=defaults.withCredentials),sendReq(config,reqData,headers).then(transformResponse,transformResponse)},chain=[serverRequest,undefined],promise=$q.when(config);for(forEach(reversedInterceptors,function(interceptor){(interceptor.request||interceptor.requestError)&&chain.unshift(interceptor.request,interceptor.requestError),(interceptor.response||interceptor.responseError)&&chain.push(interceptor.response,interceptor.responseError)});chain.length;){var thenFn=chain.shift(),rejectFn=chain.shift();promise=promise.then(thenFn,rejectFn)}return promise.success=function(fn){return promise.then(function(response){fn(response.data,response.status,response.headers,config)}),promise},promise.error=function(fn){return promise.then(null,function(response){fn(response.data,response.status,response.headers,config)}),promise},promise}function createShortMethods(names){forEach(arguments,function(name){$http[name]=function(url,config){return $http(extend(config||{},{method:name,url:url}))}})}function createShortMethodsWithData(name){forEach(arguments,function(name){$http[name]=function(url,data,config){return $http(extend(config||{},{method:name,url:url,data:data}))}})}function sendReq(config,reqData,reqHeaders){function done(status,response,headersString,statusText){cache&&(isSuccess(status)?cache.put(url,[status,response,parseHeaders(headersString),statusText]):cache.remove(url)),resolvePromise(response,status,headersString,statusText),$rootScope.$$phase||$rootScope.$apply()}function resolvePromise(response,status,headers,statusText){status=Math.max(status,0),(isSuccess(status)?deferred.resolve:deferred.reject)({data:response,status:status,headers:headersGetter(headers),config:config,statusText:statusText})}function removePendingReq(){var idx=indexOf($http.pendingRequests,config);-1!==idx&&$http.pendingRequests.splice(idx,1)}var cache,cachedResp,deferred=$q.defer(),promise=deferred.promise,url=buildUrl(config.url,config.params);if($http.pendingRequests.push(config),promise.then(removePendingReq,removePendingReq),!config.cache&&!defaults.cache||config.cache===!1||"GET"!==config.method&&"JSONP"!==config.method||(cache=isObject(config.cache)?config.cache:isObject(defaults.cache)?defaults.cache:defaultCache),cache)if(cachedResp=cache.get(url),isDefined(cachedResp)){if(isPromiseLike(cachedResp))return cachedResp.then(removePendingReq,removePendingReq),cachedResp;isArray(cachedResp)?resolvePromise(cachedResp[1],cachedResp[0],shallowCopy(cachedResp[2]),cachedResp[3]):resolvePromise(cachedResp,200,{},"OK")}else cache.put(url,promise);if(isUndefined(cachedResp)){var xsrfValue=urlIsSameOrigin(config.url)?$browser.cookies()[config.xsrfCookieName||defaults.xsrfCookieName]:undefined;xsrfValue&&(reqHeaders[config.xsrfHeaderName||defaults.xsrfHeaderName]=xsrfValue),$httpBackend(config.method,url,reqData,done,reqHeaders,config.timeout,config.withCredentials,config.responseType)}return promise}function buildUrl(url,params){if(!params)return url;var parts=[];return forEachSorted(params,function(value,key){null===value||isUndefined(value)||(isArray(value)||(value=[value]),forEach(value,function(v){isObject(v)&&(v=isDate(v)?v.toISOString():toJson(v)),parts.push(encodeUriQuery(key)+"="+encodeUriQuery(v))}))}),parts.length>0&&(url+=(-1==url.indexOf("?")?"?":"&")+parts.join("&")),url}var defaultCache=$cacheFactory("$http"),reversedInterceptors=[];return forEach(interceptorFactories,function(interceptorFactory){reversedInterceptors.unshift(isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory))}),forEach(responseInterceptorFactories,function(interceptorFactory,index){var responseFn=isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory);reversedInterceptors.splice(index,0,{response:function(response){return responseFn($q.when(response))},responseError:function(response){return responseFn($q.reject(response))}})}),$http.pendingRequests=[],createShortMethods("get","delete","head","jsonp"),createShortMethodsWithData("post","put","patch"),$http.defaults=defaults,$http}]}function createXhr(method){if(8>=msie&&(!method.match(/^(get|post|head|put|delete|options)$/i)||!window.XMLHttpRequest))return new window.ActiveXObject("Microsoft.XMLHTTP");if(window.XMLHttpRequest)return new window.XMLHttpRequest;throw minErr("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")}function $HttpBackendProvider(){this.$get=["$browser","$window","$document",function($browser,$window,$document){return createHttpBackend($browser,createXhr,$browser.defer,$window.angular.callbacks,$document[0])}]}function createHttpBackend($browser,createXhr,$browserDefer,callbacks,rawDocument){function jsonpReq(url,callbackId,done){var script=rawDocument.createElement("script"),callback=null;return script.type="text/javascript",script.src=url,script.async=!0,callback=function(event){removeEventListenerFn(script,"load",callback),removeEventListenerFn(script,"error",callback),rawDocument.body.removeChild(script),script=null;var status=-1,text="unknown";event&&("load"!==event.type||callbacks[callbackId].called||(event={type:"error"}),text=event.type,status="error"===event.type?404:200),done&&done(status,text)},addEventListenerFn(script,"load",callback),addEventListenerFn(script,"error",callback),8>=msie&&(script.onreadystatechange=function(){isString(script.readyState)&&/loaded|complete/.test(script.readyState)&&(script.onreadystatechange=null,callback({type:"load"}))}),rawDocument.body.appendChild(script),callback}var ABORTED=-1;return function(method,url,post,callback,headers,timeout,withCredentials,responseType){function timeoutRequest(){status=ABORTED,jsonpDone&&jsonpDone(),xhr&&xhr.abort()}function completeRequest(callback,status,response,headersString,statusText){timeoutId&&$browserDefer.cancel(timeoutId),jsonpDone=xhr=null,0===status&&(status=response?200:"file"==urlResolve(url).protocol?404:0),status=1223===status?204:status,statusText=statusText||"",callback(status,response,headersString,statusText),$browser.$$completeOutstandingRequest(noop)}var status;if($browser.$$incOutstandingRequestCount(),url=url||$browser.url(),"jsonp"==lowercase(method)){var callbackId="_"+(callbacks.counter++).toString(36);callbacks[callbackId]=function(data){callbacks[callbackId].data=data,callbacks[callbackId].called=!0};var jsonpDone=jsonpReq(url.replace("JSON_CALLBACK","angular.callbacks."+callbackId),callbackId,function(status,text){completeRequest(callback,status,callbacks[callbackId].data,"",text),callbacks[callbackId]=noop})}else{var xhr=createXhr(method);if(xhr.open(method,url,!0),forEach(headers,function(value,key){isDefined(value)&&xhr.setRequestHeader(key,value)}),xhr.onreadystatechange=function(){if(xhr&&4==xhr.readyState){var responseHeaders=null,response=null,statusText="";status!==ABORTED&&(responseHeaders=xhr.getAllResponseHeaders(),response="response"in xhr?xhr.response:xhr.responseText),status===ABORTED&&10>msie||(statusText=xhr.statusText),completeRequest(callback,status||xhr.status,response,responseHeaders,statusText)}},withCredentials&&(xhr.withCredentials=!0),responseType)try{xhr.responseType=responseType}catch(e){if("json"!==responseType)throw e}xhr.send(post||null)}if(timeout>0)var timeoutId=$browserDefer(timeoutRequest,timeout);else isPromiseLike(timeout)&&timeout.then(timeoutRequest)}}function $InterpolateProvider(){var startSymbol="{{",endSymbol="}}";this.startSymbol=function(value){return value?(startSymbol=value,this):startSymbol},this.endSymbol=function(value){return value?(endSymbol=value,this):endSymbol},this.$get=["$parse","$exceptionHandler","$sce",function($parse,$exceptionHandler,$sce){function $interpolate(text,mustHaveExpression,trustedContext){for(var startIndex,endIndex,fn,exp,index=0,parts=[],length=text.length,hasInterpolation=!1,concat=[];length>index;)-1!=(startIndex=text.indexOf(startSymbol,index))&&-1!=(endIndex=text.indexOf(endSymbol,startIndex+startSymbolLength))?(index!=startIndex&&parts.push(text.substring(index,startIndex)),parts.push(fn=$parse(exp=text.substring(startIndex+startSymbolLength,endIndex))),fn.exp=exp,index=endIndex+endSymbolLength,hasInterpolation=!0):(index!=length&&parts.push(text.substring(index)),index=length);if((length=parts.length)||(parts.push(""),length=1),trustedContext&&parts.length>1)throw $interpolateMinErr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",text);return!mustHaveExpression||hasInterpolation?(concat.length=length,fn=function(context){try{for(var part,i=0,ii=length;ii>i;i++){if("function"==typeof(part=parts[i]))if(part=part(context),part=trustedContext?$sce.getTrusted(trustedContext,part):$sce.valueOf(part),null==part)part="";else switch(typeof part){case"string":break;case"number":part=""+part;break;default:part=toJson(part)}concat[i]=part}return concat.join("")}catch(err){var newErr=$interpolateMinErr("interr","Can't interpolate: {0}\n{1}",text,err.toString());$exceptionHandler(newErr)}},fn.exp=text,fn.parts=parts,fn):void 0}var startSymbolLength=startSymbol.length,endSymbolLength=endSymbol.length;return $interpolate.startSymbol=function(){return startSymbol},$interpolate.endSymbol=function(){return endSymbol},$interpolate}]}function $IntervalProvider(){this.$get=["$rootScope","$window","$q",function($rootScope,$window,$q){function interval(fn,delay,count,invokeApply){var setInterval=$window.setInterval,clearInterval=$window.clearInterval,deferred=$q.defer(),promise=deferred.promise,iteration=0,skipApply=isDefined(invokeApply)&&!invokeApply;return count=isDefined(count)?count:0,promise.then(null,null,fn),promise.$$intervalId=setInterval(function(){deferred.notify(iteration++),count>0&&iteration>=count&&(deferred.resolve(iteration),clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId]),skipApply||$rootScope.$apply()},delay),intervals[promise.$$intervalId]=deferred,promise}var intervals={};return interval.cancel=function(promise){return promise&&promise.$$intervalId in intervals?(intervals[promise.$$intervalId].reject("canceled"),$window.clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId],!0):!1},interval}]}function $LocaleProvider(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\xa4",posSuf:"",negPre:"(\xa4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(num){return 1===num?"one":"other"}}}}function encodePath(path){for(var segments=path.split("/"),i=segments.length;i--;)segments[i]=encodeUriSegment(segments[i]);return segments.join("/")}function parseAbsoluteUrl(absoluteUrl,locationObj,appBase){var parsedUrl=urlResolve(absoluteUrl,appBase);locationObj.$$protocol=parsedUrl.protocol,locationObj.$$host=parsedUrl.hostname,locationObj.$$port=int(parsedUrl.port)||DEFAULT_PORTS[parsedUrl.protocol]||null}function parseAppUrl(relativeUrl,locationObj,appBase){var prefixed="/"!==relativeUrl.charAt(0);prefixed&&(relativeUrl="/"+relativeUrl);var match=urlResolve(relativeUrl,appBase);locationObj.$$path=decodeURIComponent(prefixed&&"/"===match.pathname.charAt(0)?match.pathname.substring(1):match.pathname),locationObj.$$search=parseKeyValue(match.search),locationObj.$$hash=decodeURIComponent(match.hash),locationObj.$$path&&"/"!=locationObj.$$path.charAt(0)&&(locationObj.$$path="/"+locationObj.$$path)}function beginsWith(begin,whole){return 0===whole.indexOf(begin)?whole.substr(begin.length):void 0}function stripHash(url){var index=url.indexOf("#");return-1==index?url:url.substr(0,index)}function trimEmptyHash(url){return url.replace(/(#.+)|#$/,"$1")}function stripFile(url){return url.substr(0,stripHash(url).lastIndexOf("/")+1)}function serverBase(url){return url.substring(0,url.indexOf("/",url.indexOf("//")+2))}function LocationHtml5Url(appBase,basePrefix){this.$$html5=!0,basePrefix=basePrefix||"";var appBaseNoFile=stripFile(appBase);parseAbsoluteUrl(appBase,this,appBase),this.$$parse=function(url){var pathUrl=beginsWith(appBaseNoFile,url);if(!isString(pathUrl))throw $locationMinErr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',url,appBaseNoFile);parseAppUrl(pathUrl,this,appBase),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBaseNoFile+this.$$url.substr(1)},this.$$parseLinkUrl=function(url,relHref){var appUrl,prevAppUrl,rewrittenUrl;return(appUrl=beginsWith(appBase,url))!==undefined?(prevAppUrl=appUrl,rewrittenUrl=(appUrl=beginsWith(basePrefix,appUrl))!==undefined?appBaseNoFile+(beginsWith("/",appUrl)||appUrl):appBase+prevAppUrl):(appUrl=beginsWith(appBaseNoFile,url))!==undefined?rewrittenUrl=appBaseNoFile+appUrl:appBaseNoFile==url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl}}function LocationHashbangUrl(appBase,hashPrefix){var appBaseNoFile=stripFile(appBase);parseAbsoluteUrl(appBase,this,appBase),this.$$parse=function(url){function removeWindowsDriveName(path,url,base){var firstPathSegmentMatch,windowsFilePathExp=/^\/[A-Z]:(\/.*)/;return 0===url.indexOf(base)&&(url=url.replace(base,"")),windowsFilePathExp.exec(url)?path:(firstPathSegmentMatch=windowsFilePathExp.exec(path),firstPathSegmentMatch?firstPathSegmentMatch[1]:path)}var withoutBaseUrl=beginsWith(appBase,url)||beginsWith(appBaseNoFile,url),withoutHashUrl="#"==withoutBaseUrl.charAt(0)?beginsWith(hashPrefix,withoutBaseUrl):this.$$html5?withoutBaseUrl:"";if(!isString(withoutHashUrl))throw $locationMinErr("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',url,hashPrefix);parseAppUrl(withoutHashUrl,this,appBase),this.$$path=removeWindowsDriveName(this.$$path,withoutHashUrl,appBase),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+(this.$$url?hashPrefix+this.$$url:"")},this.$$parseLinkUrl=function(url,relHref){return stripHash(appBase)==stripHash(url)?(this.$$parse(url),!0):!1}}function LocationHashbangInHtml5Url(appBase,hashPrefix){this.$$html5=!0,LocationHashbangUrl.apply(this,arguments);var appBaseNoFile=stripFile(appBase);this.$$parseLinkUrl=function(url,relHref){var rewrittenUrl,appUrl;return appBase==stripHash(url)?rewrittenUrl=url:(appUrl=beginsWith(appBaseNoFile,url))?rewrittenUrl=appBase+hashPrefix+appUrl:appBaseNoFile===url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+hashPrefix+this.$$url}}function locationGetter(property){return function(){return this[property]}}function locationGetterSetter(property,preprocess){return function(value){return isUndefined(value)?this[property]:(this[property]=preprocess(value),this.$$compose(),this)}}function $LocationProvider(){
var hashPrefix="",html5Mode=!1;this.hashPrefix=function(prefix){return isDefined(prefix)?(hashPrefix=prefix,this):hashPrefix},this.html5Mode=function(mode){return isDefined(mode)?(html5Mode=mode,this):html5Mode},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function($rootScope,$browser,$sniffer,$rootElement){function afterLocationChange(oldUrl){$rootScope.$broadcast("$locationChangeSuccess",$location.absUrl(),oldUrl)}var $location,LocationMode,appBase,baseHref=$browser.baseHref(),initialUrl=$browser.url();html5Mode?(appBase=serverBase(initialUrl)+(baseHref||"/"),LocationMode=$sniffer.history?LocationHtml5Url:LocationHashbangInHtml5Url):(appBase=stripHash(initialUrl),LocationMode=LocationHashbangUrl),$location=new LocationMode(appBase,"#"+hashPrefix),$location.$$parseLinkUrl(initialUrl,initialUrl);var IGNORE_URI_REGEXP=/^\s*(javascript|mailto):/i;$rootElement.on("click",function(event){if(!event.ctrlKey&&!event.metaKey&&2!=event.which){for(var elm=jqLite(event.target);"a"!==lowercase(elm[0].nodeName);)if(elm[0]===$rootElement[0]||!(elm=elm.parent())[0])return;var absHref=elm.prop("href"),relHref=elm.attr("href")||elm.attr("xlink:href");isObject(absHref)&&"[object SVGAnimatedString]"===absHref.toString()&&(absHref=urlResolve(absHref.animVal).href),IGNORE_URI_REGEXP.test(absHref)||!absHref||elm.attr("target")||event.isDefaultPrevented()||$location.$$parseLinkUrl(absHref,relHref)&&(event.preventDefault(),$location.absUrl()!=$browser.url()&&($rootScope.$apply(),window.angular["ff-684208-preventDefault"]=!0))}}),$location.absUrl()!=initialUrl&&$browser.url($location.absUrl(),!0),$browser.onUrlChange(function(newUrl){$location.absUrl()!=newUrl&&($rootScope.$evalAsync(function(){var oldUrl=$location.absUrl();$location.$$parse(newUrl),$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl).defaultPrevented?($location.$$parse(oldUrl),$browser.url(oldUrl)):afterLocationChange(oldUrl)}),$rootScope.$$phase||$rootScope.$digest())});var changeCounter=0;return $rootScope.$watch(function(){var oldUrl=trimEmptyHash($browser.url()),newUrl=trimEmptyHash($location.absUrl()),currentReplace=$location.$$replace;return changeCounter&&oldUrl==newUrl||(changeCounter++,$rootScope.$evalAsync(function(){$rootScope.$broadcast("$locationChangeStart",$location.absUrl(),oldUrl).defaultPrevented?$location.$$parse(oldUrl):($browser.url($location.absUrl(),currentReplace),afterLocationChange(oldUrl))})),$location.$$replace=!1,changeCounter}),$location}]}function $LogProvider(){var debug=!0,self=this;this.debugEnabled=function(flag){return isDefined(flag)?(debug=flag,this):debug},this.$get=["$window",function($window){function formatError(arg){return arg instanceof Error&&(arg.stack?arg=arg.message&&-1===arg.stack.indexOf(arg.message)?"Error: "+arg.message+"\n"+arg.stack:arg.stack:arg.sourceURL&&(arg=arg.message+"\n"+arg.sourceURL+":"+arg.line)),arg}function consoleLog(type){var console=$window.console||{},logFn=console[type]||console.log||noop,hasApply=!1;try{hasApply=!!logFn.apply}catch(e){}return hasApply?function(){var args=[];return forEach(arguments,function(arg){args.push(formatError(arg))}),logFn.apply(console,args)}:function(arg1,arg2){logFn(arg1,null==arg2?"":arg2)}}return{log:consoleLog("log"),info:consoleLog("info"),warn:consoleLog("warn"),error:consoleLog("error"),debug:function(){var fn=consoleLog("debug");return function(){debug&&fn.apply(self,arguments)}}()}}]}function ensureSafeMemberName(name,fullExpression){if("__defineGetter__"===name||"__defineSetter__"===name||"__lookupGetter__"===name||"__lookupSetter__"===name||"__proto__"===name)throw $parseMinErr("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",fullExpression);return name}function getStringValue(name,fullExpression){if(name+="",!isString(name))throw $parseMinErr("iseccst","Cannot convert object to primitive value! Expression: {0}",fullExpression);return name}function ensureSafeObject(obj,fullExpression){if(obj){var booleanConstructor=(!1).constructor,numberConstructor=0..constructor,stringConstructor="".constructor,objectConstructor={}.constructor,arrayConstructor=[].constructor,functionConstructor=Function.constructor;if(obj===booleanConstructor||obj===numberConstructor||obj===stringConstructor||obj===objectConstructor||obj===arrayConstructor||obj===functionConstructor||obj===booleanConstructor.prototype||obj===numberConstructor.prototype||obj===stringConstructor.prototype||obj===objectConstructor.prototype||obj===arrayConstructor.prototype||obj===functionConstructor.prototype)throw $parseMinErr("isecaf","Assigning to a constructor or it's prototype is disallowed! Expression: {0}",fullExpression);if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.document&&obj.location&&obj.alert&&obj.setInterval)throw $parseMinErr("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.children&&(obj.nodeName||obj.prop&&obj.attr&&obj.find))throw $parseMinErr("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj===Object)throw $parseMinErr("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",fullExpression)}return obj}function ensureSafeFunction(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj===CALL||obj===APPLY||BIND&&obj===BIND)throw $parseMinErr("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",fullExpression)}}function setter(obj,path,setValue,fullExp,options){ensureSafeObject(obj,fullExp),options=options||{};for(var key,element=path.split("."),i=0;element.length>1;i++){key=ensureSafeMemberName(element.shift(),fullExp);var propertyObj=ensureSafeObject(obj[key],fullExp);propertyObj||(propertyObj={},obj[key]=propertyObj),obj=propertyObj,obj.then&&options.unwrapPromises&&(promiseWarning(fullExp),"$$v"in obj||!function(promise){promise.then(function(val){promise.$$v=val})}(obj),obj.$$v===undefined&&(obj.$$v={}),obj=obj.$$v)}return key=ensureSafeMemberName(element.shift(),fullExp),ensureSafeObject(obj[key],fullExp),obj[key]=setValue,setValue}function isPossiblyDangerousMemberName(name){return"constructor"==name}function cspSafeGetterFn(key0,key1,key2,key3,key4,fullExp,options){ensureSafeMemberName(key0,fullExp),ensureSafeMemberName(key1,fullExp),ensureSafeMemberName(key2,fullExp),ensureSafeMemberName(key3,fullExp),ensureSafeMemberName(key4,fullExp);var eso=function(o){return ensureSafeObject(o,fullExp)},expensiveChecks=options.expensiveChecks,eso0=expensiveChecks||isPossiblyDangerousMemberName(key0)?eso:identity,eso1=expensiveChecks||isPossiblyDangerousMemberName(key1)?eso:identity,eso2=expensiveChecks||isPossiblyDangerousMemberName(key2)?eso:identity,eso3=expensiveChecks||isPossiblyDangerousMemberName(key3)?eso:identity,eso4=expensiveChecks||isPossiblyDangerousMemberName(key4)?eso:identity;return options.unwrapPromises?function(scope,locals){var promise,pathVal=locals&&locals.hasOwnProperty(key0)?locals:scope;return null==pathVal?pathVal:(pathVal=eso0(pathVal[key0]),pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=eso0(val)})),pathVal=eso0(pathVal.$$v)),key1?null==pathVal?undefined:(pathVal=eso1(pathVal[key1]),pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=eso1(val)})),pathVal=eso1(pathVal.$$v)),key2?null==pathVal?undefined:(pathVal=eso2(pathVal[key2]),pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=eso2(val)})),pathVal=eso2(pathVal.$$v)),key3?null==pathVal?undefined:(pathVal=eso3(pathVal[key3]),pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=eso3(val)})),pathVal=eso3(pathVal.$$v)),key4?null==pathVal?undefined:(pathVal=eso4(pathVal[key4]),pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=eso4(val)})),pathVal=eso4(pathVal.$$v)),pathVal):pathVal):pathVal):pathVal):pathVal)}:function(scope,locals){var pathVal=locals&&locals.hasOwnProperty(key0)?locals:scope;return null==pathVal?pathVal:(pathVal=eso0(pathVal[key0]),key1?null==pathVal?undefined:(pathVal=eso1(pathVal[key1]),key2?null==pathVal?undefined:(pathVal=eso2(pathVal[key2]),key3?null==pathVal?undefined:(pathVal=eso3(pathVal[key3]),key4?null==pathVal?undefined:pathVal=eso4(pathVal[key4]):pathVal):pathVal):pathVal):pathVal)}}function getterFnWithExtraArgs(fn,fullExpression){return function(s,l){return fn(s,l,promiseWarning,ensureSafeObject,fullExpression)}}function getterFn(path,options,fullExp){var expensiveChecks=options.expensiveChecks,getterFnCache=expensiveChecks?getterFnCacheExpensive:getterFnCacheDefault;if(getterFnCache.hasOwnProperty(path))return getterFnCache[path];var fn,pathKeys=path.split("."),pathKeysLength=pathKeys.length;if(options.csp)fn=6>pathKeysLength?cspSafeGetterFn(pathKeys[0],pathKeys[1],pathKeys[2],pathKeys[3],pathKeys[4],fullExp,options):function(scope,locals){var val,i=0;do val=cspSafeGetterFn(pathKeys[i++],pathKeys[i++],pathKeys[i++],pathKeys[i++],pathKeys[i++],fullExp,options)(scope,locals),locals=undefined,scope=val;while(pathKeysLength>i);return val};else{var code="var p;\n";expensiveChecks&&(code+="s = eso(s, fe);\nl = eso(l, fe);\n");var needsEnsureSafeObject=expensiveChecks;forEach(pathKeys,function(key,index){ensureSafeMemberName(key,fullExp);var lookupJs=(index?"s":'((l&&l.hasOwnProperty("'+key+'"))?l:s)')+'["'+key+'"]',wrapWithEso=expensiveChecks||isPossiblyDangerousMemberName(key);wrapWithEso&&(lookupJs="eso("+lookupJs+", fe)",needsEnsureSafeObject=!0),code+="if(s == null) return undefined;\ns="+lookupJs+";\n",options.unwrapPromises&&(code+='if (s && s.then) {\n pw("'+fullExp.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v='+(wrapWithEso?"eso(v)":"v")+";});\n}\n s="+(wrapWithEso?"eso(s.$$v)":"s.$$v")+"\n}\n")}),code+="return s;";var evaledFnGetter=new Function("s","l","pw","eso","fe",code);evaledFnGetter.toString=valueFn(code),(needsEnsureSafeObject||options.unwrapPromises)&&(evaledFnGetter=getterFnWithExtraArgs(evaledFnGetter,fullExp)),fn=evaledFnGetter}return"hasOwnProperty"!==path&&(getterFnCache[path]=fn),fn}function $ParseProvider(){var cacheDefault={},cacheExpensive={},$parseOptions={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0,expensiveChecks:!1};this.unwrapPromises=function(value){return isDefined(value)?($parseOptions.unwrapPromises=!!value,this):$parseOptions.unwrapPromises},this.logPromiseWarnings=function(value){return isDefined(value)?($parseOptions.logPromiseWarnings=value,this):$parseOptions.logPromiseWarnings},this.$get=["$filter","$sniffer","$log",function($filter,$sniffer,$log){$parseOptions.csp=$sniffer.csp;var $parseOptionsExpensive={csp:$parseOptions.csp,unwrapPromises:$parseOptions.unwrapPromises,logPromiseWarnings:$parseOptions.logPromiseWarnings,expensiveChecks:!0};return promiseWarning=function(fullExp){$parseOptions.logPromiseWarnings&&!promiseWarningCache.hasOwnProperty(fullExp)&&(promiseWarningCache[fullExp]=!0,$log.warn("[$parse] Promise found in the expression `"+fullExp+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))},function(exp,expensiveChecks){var parsedExpression;switch(typeof exp){case"string":var cache=expensiveChecks?cacheExpensive:cacheDefault;if(cache.hasOwnProperty(exp))return cache[exp];var parseOptions=expensiveChecks?$parseOptionsExpensive:$parseOptions,lexer=new Lexer(parseOptions),parser=new Parser(lexer,$filter,parseOptions);return parsedExpression=parser.parse(exp),"hasOwnProperty"!==exp&&(cache[exp]=parsedExpression),parsedExpression;case"function":return exp;default:return noop}}}]}function $QProvider(){this.$get=["$rootScope","$exceptionHandler",function($rootScope,$exceptionHandler){return qFactory(function(callback){$rootScope.$evalAsync(callback)},$exceptionHandler)}]}function qFactory(nextTick,exceptionHandler){function defaultCallback(value){return value}function defaultErrback(reason){return reject(reason)}function all(promises){var deferred=defer(),counter=0,results=isArray(promises)?[]:{};return forEach(promises,function(promise,key){counter++,ref(promise).then(function(value){results.hasOwnProperty(key)||(results[key]=value,--counter||deferred.resolve(results))},function(reason){results.hasOwnProperty(key)||deferred.reject(reason)})}),0===counter&&deferred.resolve(results),deferred.promise}var defer=function(){var value,deferred,pending=[];return deferred={resolve:function(val){if(pending){var callbacks=pending;pending=undefined,value=ref(val),callbacks.length&&nextTick(function(){for(var callback,i=0,ii=callbacks.length;ii>i;i++)callback=callbacks[i],value.then(callback[0],callback[1],callback[2])})}},reject:function(reason){deferred.resolve(createInternalRejectedPromise(reason))},notify:function(progress){if(pending){var callbacks=pending;pending.length&&nextTick(function(){for(var callback,i=0,ii=callbacks.length;ii>i;i++)callback=callbacks[i],callback[2](progress)})}},promise:{then:function(callback,errback,progressback){var result=defer(),wrappedCallback=function(value){try{result.resolve((isFunction(callback)?callback:defaultCallback)(value))}catch(e){result.reject(e),exceptionHandler(e)}},wrappedErrback=function(reason){try{result.resolve((isFunction(errback)?errback:defaultErrback)(reason))}catch(e){result.reject(e),exceptionHandler(e)}},wrappedProgressback=function(progress){try{result.notify((isFunction(progressback)?progressback:defaultCallback)(progress))}catch(e){exceptionHandler(e)}};return pending?pending.push([wrappedCallback,wrappedErrback,wrappedProgressback]):value.then(wrappedCallback,wrappedErrback,wrappedProgressback),result.promise},"catch":function(callback){return this.then(null,callback)},"finally":function(callback){function makePromise(value,resolved){var result=defer();return resolved?result.resolve(value):result.reject(value),result.promise}function handleCallback(value,isResolved){var callbackOutput=null;try{callbackOutput=(callback||defaultCallback)()}catch(e){return makePromise(e,!1)}return isPromiseLike(callbackOutput)?callbackOutput.then(function(){return makePromise(value,isResolved)},function(error){return makePromise(error,!1)}):makePromise(value,isResolved)}return this.then(function(value){return handleCallback(value,!0)},function(error){return handleCallback(error,!1)})}}}},ref=function(value){return isPromiseLike(value)?value:{then:function(callback){var result=defer();return nextTick(function(){result.resolve(callback(value))}),result.promise}}},reject=function(reason){var result=defer();return result.reject(reason),result.promise},createInternalRejectedPromise=function(reason){return{then:function(callback,errback){var result=defer();return nextTick(function(){try{result.resolve((isFunction(errback)?errback:defaultErrback)(reason))}catch(e){result.reject(e),exceptionHandler(e)}}),result.promise}}},when=function(value,callback,errback,progressback){var done,result=defer(),wrappedCallback=function(value){try{return(isFunction(callback)?callback:defaultCallback)(value)}catch(e){return exceptionHandler(e),reject(e)}},wrappedErrback=function(reason){try{return(isFunction(errback)?errback:defaultErrback)(reason)}catch(e){return exceptionHandler(e),reject(e)}},wrappedProgressback=function(progress){try{return(isFunction(progressback)?progressback:defaultCallback)(progress)}catch(e){exceptionHandler(e)}};return nextTick(function(){ref(value).then(function(value){done||(done=!0,result.resolve(ref(value).then(wrappedCallback,wrappedErrback,wrappedProgressback)))},function(reason){done||(done=!0,result.resolve(wrappedErrback(reason)))},function(progress){done||result.notify(wrappedProgressback(progress))})}),result.promise};return{defer:defer,reject:reject,when:when,all:all}}function $$RAFProvider(){this.$get=["$window","$timeout",function($window,$timeout){var requestAnimationFrame=$window.requestAnimationFrame||$window.webkitRequestAnimationFrame||$window.mozRequestAnimationFrame,cancelAnimationFrame=$window.cancelAnimationFrame||$window.webkitCancelAnimationFrame||$window.mozCancelAnimationFrame||$window.webkitCancelRequestAnimationFrame,rafSupported=!!requestAnimationFrame,raf=rafSupported?function(fn){var id=requestAnimationFrame(fn);return function(){cancelAnimationFrame(id)}}:function(fn){var timer=$timeout(fn,16.66,!1);return function(){$timeout.cancel(timer)}};return raf.supported=rafSupported,raf}]}function $RootScopeProvider(){var TTL=10,$rootScopeMinErr=minErr("$rootScope"),lastDirtyWatch=null;this.digestTtl=function(value){return arguments.length&&(TTL=value),TTL},this.$get=["$injector","$exceptionHandler","$parse","$browser",function($injector,$exceptionHandler,$parse,$browser){function Scope(){this.$id=nextUid(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this["this"]=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings={}}function beginPhase(phase){if($rootScope.$$phase)throw $rootScopeMinErr("inprog","{0} already in progress",$rootScope.$$phase);$rootScope.$$phase=phase}function clearPhase(){$rootScope.$$phase=null}function compileToFn(exp,name){var fn=$parse(exp);return assertArgFn(fn,name),fn}function decrementListenerCount(current,count,name){do current.$$listenerCount[name]-=count,0===current.$$listenerCount[name]&&delete current.$$listenerCount[name];while(current=current.$parent)}function initWatchVal(){}Scope.prototype={constructor:Scope,$new:function(isolate){var child;return isolate?(child=new Scope,child.$root=this.$root,child.$$asyncQueue=this.$$asyncQueue,child.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=nextUid(),this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),child=new this.$$childScopeClass),child["this"]=child,child.$parent=this,child.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=child,this.$$childTail=child):this.$$childHead=this.$$childTail=child,child},$watch:function(watchExp,listener,objectEquality){var scope=this,get=compileToFn(watchExp,"watch"),array=scope.$$watchers,watcher={fn:listener,last:initWatchVal,get:get,exp:watchExp,eq:!!objectEquality};if(lastDirtyWatch=null,!isFunction(listener)){var listenFn=compileToFn(listener||noop,"listener");watcher.fn=function(newVal,oldVal,scope){listenFn(scope)}}if("string"==typeof watchExp&&get.constant){var originalFn=watcher.fn;watcher.fn=function(newVal,oldVal,scope){originalFn.call(this,newVal,oldVal,scope),arrayRemove(array,watcher)}}return array||(array=scope.$$watchers=[]),array.unshift(watcher),function(){arrayRemove(array,watcher),lastDirtyWatch=null}},$watchCollection:function(obj,listener){function $watchCollectionWatch(){newValue=objGetter(self);var newLength,key,bothNaN;if(isObject(newValue))if(isArrayLike(newValue)){oldValue!==internalArray&&(oldValue=internalArray,oldLength=oldValue.length=0,changeDetected++),newLength=newValue.length,oldLength!==newLength&&(changeDetected++,oldValue.length=oldLength=newLength);for(var i=0;newLength>i;i++)bothNaN=oldValue[i]!==oldValue[i]&&newValue[i]!==newValue[i],bothNaN||oldValue[i]===newValue[i]||(changeDetected++,oldValue[i]=newValue[i])}else{oldValue!==internalObject&&(oldValue=internalObject={},oldLength=0,changeDetected++),newLength=0;for(key in newValue)newValue.hasOwnProperty(key)&&(newLength++,oldValue.hasOwnProperty(key)?(bothNaN=oldValue[key]!==oldValue[key]&&newValue[key]!==newValue[key],bothNaN||oldValue[key]===newValue[key]||(changeDetected++,oldValue[key]=newValue[key])):(oldLength++,oldValue[key]=newValue[key],changeDetected++));if(oldLength>newLength){changeDetected++;for(key in oldValue)oldValue.hasOwnProperty(key)&&!newValue.hasOwnProperty(key)&&(oldLength--,delete oldValue[key])}}else oldValue!==newValue&&(oldValue=newValue,changeDetected++);return changeDetected}function $watchCollectionAction(){if(initRun?(initRun=!1,listener(newValue,newValue,self)):listener(newValue,veryOldValue,self),trackVeryOldValue)if(isObject(newValue))if(isArrayLike(newValue)){veryOldValue=new Array(newValue.length);for(var i=0;i<newValue.length;i++)veryOldValue[i]=newValue[i]}else{veryOldValue={};for(var key in newValue)hasOwnProperty.call(newValue,key)&&(veryOldValue[key]=newValue[key])}else veryOldValue=newValue}var newValue,oldValue,veryOldValue,self=this,trackVeryOldValue=listener.length>1,changeDetected=0,objGetter=$parse(obj),internalArray=[],internalObject={},initRun=!0,oldLength=0;return this.$watch($watchCollectionWatch,$watchCollectionAction)},$digest:function(){var watch,value,last,watchers,length,dirty,next,current,logIdx,logMsg,asyncTask,asyncQueue=this.$$asyncQueue,postDigestQueue=this.$$postDigestQueue,ttl=TTL,target=this,watchLog=[];beginPhase("$digest"),$browser.$$checkUrlChange(),lastDirtyWatch=null;do{for(dirty=!1,current=target;asyncQueue.length;){try{asyncTask=asyncQueue.shift(),asyncTask.scope.$eval(asyncTask.expression)}catch(e){clearPhase(),$exceptionHandler(e)}lastDirtyWatch=null}traverseScopesLoop:do{if(watchers=current.$$watchers)for(length=watchers.length;length--;)try{if(watch=watchers[length])if((value=watch.get(current))===(last=watch.last)||(watch.eq?equals(value,last):"number"==typeof value&&"number"==typeof last&&isNaN(value)&&isNaN(last))){if(watch===lastDirtyWatch){dirty=!1;break traverseScopesLoop}}else dirty=!0,lastDirtyWatch=watch,watch.last=watch.eq?copy(value,null):value,watch.fn(value,last===initWatchVal?value:last,current),5>ttl&&(logIdx=4-ttl,watchLog[logIdx]||(watchLog[logIdx]=[]),logMsg=isFunction(watch.exp)?"fn: "+(watch.exp.name||watch.exp.toString()):watch.exp,logMsg+="; newVal: "+toJson(value)+"; oldVal: "+toJson(last),watchLog[logIdx].push(logMsg))}catch(e){clearPhase(),$exceptionHandler(e)}if(!(next=current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}while(current=next);if((dirty||asyncQueue.length)&&!ttl--)throw clearPhase(),$rootScopeMinErr("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",TTL,toJson(watchLog))}while(dirty||asyncQueue.length);for(clearPhase();postDigestQueue.length;)try{postDigestQueue.shift()()}catch(e){$exceptionHandler(e)}},$destroy:function(){if(!this.$$destroyed){var parent=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this!==$rootScope&&(forEach(this.$$listenerCount,bind(null,decrementListenerCount,this)),parent.$$childHead==this&&(parent.$$childHead=this.$$nextSibling),parent.$$childTail==this&&(parent.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=noop,this.$on=this.$watch=function(){return noop})}},$eval:function(expr,locals){return $parse(expr)(this,locals)},$evalAsync:function(expr){$rootScope.$$phase||$rootScope.$$asyncQueue.length||$browser.defer(function(){$rootScope.$$asyncQueue.length&&$rootScope.$digest()}),this.$$asyncQueue.push({scope:this,expression:expr})},$$postDigest:function(fn){this.$$postDigestQueue.push(fn)},$apply:function(expr){try{return beginPhase("$apply"),this.$eval(expr)}catch(e){$exceptionHandler(e)}finally{clearPhase();try{$rootScope.$digest()}catch(e){throw $exceptionHandler(e),e}}},$on:function(name,listener){var namedListeners=this.$$listeners[name];namedListeners||(this.$$listeners[name]=namedListeners=[]),namedListeners.push(listener);var current=this;do current.$$listenerCount[name]||(current.$$listenerCount[name]=0),current.$$listenerCount[name]++;while(current=current.$parent);var self=this;return function(){var indexOfListener=indexOf(namedListeners,listener);-1!==indexOfListener&&(namedListeners[indexOfListener]=null,decrementListenerCount(self,1,name))}},$emit:function(name,args){var namedListeners,i,length,empty=[],scope=this,stopPropagation=!1,event={name:name,targetScope:scope,stopPropagation:function(){stopPropagation=!0},preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);do{for(namedListeners=scope.$$listeners[name]||empty,event.currentScope=scope,i=0,length=namedListeners.length;length>i;i++)if(namedListeners[i])try{namedListeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else namedListeners.splice(i,1),i--,length--;if(stopPropagation)return event;scope=scope.$parent}while(scope);return event},$broadcast:function(name,args){for(var listeners,i,length,target=this,current=target,next=target,event={name:name,targetScope:target,preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);current=next;){for(event.currentScope=current,listeners=current.$$listeners[name]||[],i=0,length=listeners.length;length>i;i++)if(listeners[i])try{listeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else listeners.splice(i,1),i--,length--;if(!(next=current.$$listenerCount[name]&&current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}return event}};var $rootScope=new Scope;return $rootScope}]}function $$SanitizeUriProvider(){var aHrefSanitizationWhitelist=/^\s*(https?|ftp|mailto|tel|file):/,imgSrcSanitizationWhitelist=/^\s*((https?|ftp|file):|data:image\/)/;this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?(aHrefSanitizationWhitelist=regexp,this):aHrefSanitizationWhitelist},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?(imgSrcSanitizationWhitelist=regexp,this):imgSrcSanitizationWhitelist},this.$get=function(){return function(uri,isImage){var normalizedVal,regex=isImage?imgSrcSanitizationWhitelist:aHrefSanitizationWhitelist;return msie&&!(msie>=8)||(normalizedVal=urlResolve(uri).href,""===normalizedVal||normalizedVal.match(regex))?uri:"unsafe:"+normalizedVal}}}function escapeForRegexp(s){return s.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function adjustMatcher(matcher){if("self"===matcher)return matcher;if(isString(matcher)){if(matcher.indexOf("***")>-1)throw $sceMinErr("iwcard","Illegal sequence *** in string matcher.  String: {0}",matcher);return matcher=escapeForRegexp(matcher).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+matcher+"$")}if(isRegExp(matcher))return new RegExp("^"+matcher.source+"$");throw $sceMinErr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function adjustMatchers(matchers){var adjustedMatchers=[];return isDefined(matchers)&&forEach(matchers,function(matcher){adjustedMatchers.push(adjustMatcher(matcher))}),adjustedMatchers}function $SceDelegateProvider(){this.SCE_CONTEXTS=SCE_CONTEXTS;var resourceUrlWhitelist=["self"],resourceUrlBlacklist=[];this.resourceUrlWhitelist=function(value){return arguments.length&&(resourceUrlWhitelist=adjustMatchers(value)),resourceUrlWhitelist},this.resourceUrlBlacklist=function(value){return arguments.length&&(resourceUrlBlacklist=adjustMatchers(value)),resourceUrlBlacklist},this.$get=["$injector",function($injector){function matchUrl(matcher,parsedUrl){return"self"===matcher?urlIsSameOrigin(parsedUrl):!!matcher.exec(parsedUrl.href)}function isResourceUrlAllowedByPolicy(url){var i,n,parsedUrl=urlResolve(url.toString()),allowed=!1;for(i=0,n=resourceUrlWhitelist.length;n>i;i++)if(matchUrl(resourceUrlWhitelist[i],parsedUrl)){allowed=!0;break}if(allowed)for(i=0,n=resourceUrlBlacklist.length;n>i;i++)if(matchUrl(resourceUrlBlacklist[i],parsedUrl)){allowed=!1;break}return allowed}function generateHolderType(Base){var holderType=function(trustedValue){this.$$unwrapTrustedValue=function(){return trustedValue}};return Base&&(holderType.prototype=new Base),holderType.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},holderType.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},holderType}function trustAs(type,trustedValue){var Constructor=byType.hasOwnProperty(type)?byType[type]:null;if(!Constructor)throw $sceMinErr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",type,trustedValue);if(null===trustedValue||trustedValue===undefined||""===trustedValue)return trustedValue;if("string"!=typeof trustedValue)throw $sceMinErr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",type);return new Constructor(trustedValue)}function valueOf(maybeTrusted){return maybeTrusted instanceof trustedValueHolderBase?maybeTrusted.$$unwrapTrustedValue():maybeTrusted}function getTrusted(type,maybeTrusted){if(null===maybeTrusted||maybeTrusted===undefined||""===maybeTrusted)return maybeTrusted;var constructor=byType.hasOwnProperty(type)?byType[type]:null;if(constructor&&maybeTrusted instanceof constructor)return maybeTrusted.$$unwrapTrustedValue();if(type===SCE_CONTEXTS.RESOURCE_URL){if(isResourceUrlAllowedByPolicy(maybeTrusted))return maybeTrusted;throw $sceMinErr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",maybeTrusted.toString())}if(type===SCE_CONTEXTS.HTML)return htmlSanitizer(maybeTrusted);throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")}var htmlSanitizer=function(html){throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")};$injector.has("$sanitize")&&(htmlSanitizer=$injector.get("$sanitize"));var trustedValueHolderBase=generateHolderType(),byType={};return byType[SCE_CONTEXTS.HTML]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.CSS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.URL]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.JS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.RESOURCE_URL]=generateHolderType(byType[SCE_CONTEXTS.URL]),{trustAs:trustAs,getTrusted:getTrusted,valueOf:valueOf}}]}function $SceProvider(){var enabled=!0;this.enabled=function(value){return arguments.length&&(enabled=!!value),enabled},this.$get=["$parse","$sniffer","$sceDelegate",function($parse,$sniffer,$sceDelegate){if(enabled&&$sniffer.msie&&$sniffer.msieDocumentMode<8)throw $sceMinErr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var sce=shallowCopy(SCE_CONTEXTS);sce.isEnabled=function(){return enabled},sce.trustAs=$sceDelegate.trustAs,sce.getTrusted=$sceDelegate.getTrusted,sce.valueOf=$sceDelegate.valueOf,enabled||(sce.trustAs=sce.getTrusted=function(type,value){return value},sce.valueOf=identity),sce.parseAs=function(type,expr){var parsed=$parse(expr);return parsed.literal&&parsed.constant?parsed:function(self,locals){return sce.getTrusted(type,parsed(self,locals))}};var parse=sce.parseAs,getTrusted=sce.getTrusted,trustAs=sce.trustAs;return forEach(SCE_CONTEXTS,function(enumValue,name){var lName=lowercase(name);sce[camelCase("parse_as_"+lName)]=function(expr){return parse(enumValue,expr)},sce[camelCase("get_trusted_"+lName)]=function(value){return getTrusted(enumValue,value)},sce[camelCase("trust_as_"+lName)]=function(value){return trustAs(enumValue,value)}}),sce}]}function $SnifferProvider(){this.$get=["$window","$document",function($window,$document){var vendorPrefix,match,eventSupport={},android=int((/android (\d+)/.exec(lowercase(($window.navigator||{}).userAgent))||[])[1]),boxee=/Boxee/i.test(($window.navigator||{}).userAgent),document=$document[0]||{},documentMode=document.documentMode,vendorRegex=/^(Moz|webkit|O|ms)(?=[A-Z])/,bodyStyle=document.body&&document.body.style,transitions=!1,animations=!1;if(bodyStyle){
for(var prop in bodyStyle)if(match=vendorRegex.exec(prop)){vendorPrefix=match[0],vendorPrefix=vendorPrefix.substr(0,1).toUpperCase()+vendorPrefix.substr(1);break}vendorPrefix||(vendorPrefix="WebkitOpacity"in bodyStyle&&"webkit"),transitions=!!("transition"in bodyStyle||vendorPrefix+"Transition"in bodyStyle),animations=!!("animation"in bodyStyle||vendorPrefix+"Animation"in bodyStyle),!android||transitions&&animations||(transitions=isString(document.body.style.webkitTransition),animations=isString(document.body.style.webkitAnimation))}return{history:!(!$window.history||!$window.history.pushState||4>android||boxee),hashchange:"onhashchange"in $window&&(!documentMode||documentMode>7),hasEvent:function(event){if("input"==event&&9==msie)return!1;if(isUndefined(eventSupport[event])){var divElm=document.createElement("div");eventSupport[event]="on"+event in divElm}return eventSupport[event]},csp:csp(),vendorPrefix:vendorPrefix,transitions:transitions,animations:animations,android:android,msie:msie,msieDocumentMode:documentMode}}]}function $TimeoutProvider(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function($rootScope,$browser,$q,$exceptionHandler){function timeout(fn,delay,invokeApply){var timeoutId,deferred=$q.defer(),promise=deferred.promise,skipApply=isDefined(invokeApply)&&!invokeApply;return timeoutId=$browser.defer(function(){try{deferred.resolve(fn())}catch(e){deferred.reject(e),$exceptionHandler(e)}finally{delete deferreds[promise.$$timeoutId]}skipApply||$rootScope.$apply()},delay),promise.$$timeoutId=timeoutId,deferreds[timeoutId]=deferred,promise}var deferreds={};return timeout.cancel=function(promise){return promise&&promise.$$timeoutId in deferreds?(deferreds[promise.$$timeoutId].reject("canceled"),delete deferreds[promise.$$timeoutId],$browser.defer.cancel(promise.$$timeoutId)):!1},timeout}]}function urlResolve(url,base){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}function urlIsSameOrigin(requestUrl){var parsed=isString(requestUrl)?urlResolve(requestUrl):requestUrl;return parsed.protocol===originUrl.protocol&&parsed.host===originUrl.host}function $WindowProvider(){this.$get=valueFn(window)}function $FilterProvider($provide){function register(name,factory){if(isObject(name)){var filters={};return forEach(name,function(filter,key){filters[key]=register(key,filter)}),filters}return $provide.factory(name+suffix,factory)}var suffix="Filter";this.register=register,this.$get=["$injector",function($injector){return function(name){return $injector.get(name+suffix)}}],register("currency",currencyFilter),register("date",dateFilter),register("filter",filterFilter),register("json",jsonFilter),register("limitTo",limitToFilter),register("lowercase",lowercaseFilter),register("number",numberFilter),register("orderBy",orderByFilter),register("uppercase",uppercaseFilter)}function filterFilter(){return function(array,expression,comparator){if(!isArray(array))return array;var comparatorType=typeof comparator,predicates=[];predicates.check=function(value){for(var j=0;j<predicates.length;j++)if(!predicates[j](value))return!1;return!0},"function"!==comparatorType&&(comparator="boolean"===comparatorType&&comparator?function(obj,text){return angular.equals(obj,text)}:function(obj,text){if(obj&&text&&"object"==typeof obj&&"object"==typeof text){for(var objKey in obj)if("$"!==objKey.charAt(0)&&hasOwnProperty.call(obj,objKey)&&comparator(obj[objKey],text[objKey]))return!0;return!1}return text=(""+text).toLowerCase(),(""+obj).toLowerCase().indexOf(text)>-1});var search=function(obj,text){if("string"==typeof text&&"!"===text.charAt(0))return!search(obj,text.substr(1));switch(typeof obj){case"boolean":case"number":case"string":return comparator(obj,text);case"object":switch(typeof text){case"object":return comparator(obj,text);default:for(var objKey in obj)if("$"!==objKey.charAt(0)&&search(obj[objKey],text))return!0}return!1;case"array":for(var i=0;i<obj.length;i++)if(search(obj[i],text))return!0;return!1;default:return!1}};switch(typeof expression){case"boolean":case"number":case"string":expression={$:expression};case"object":for(var key in expression)!function(path){"undefined"!=typeof expression[path]&&predicates.push(function(value){return search("$"==path?value:value&&value[path],expression[path])})}(key);break;case"function":predicates.push(expression);break;default:return array}for(var filtered=[],j=0;j<array.length;j++){var value=array[j];predicates.check(value)&&filtered.push(value)}return filtered}}function currencyFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(amount,currencySymbol){return isUndefined(currencySymbol)&&(currencySymbol=formats.CURRENCY_SYM),formatNumber(amount,formats.PATTERNS[1],formats.GROUP_SEP,formats.DECIMAL_SEP,2).replace(/\u00A4/g,currencySymbol)}}function numberFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(number,fractionSize){return formatNumber(number,formats.PATTERNS[0],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize)}}function formatNumber(number,pattern,groupSep,decimalSep,fractionSize){if(null==number||!isFinite(number)||isObject(number))return"";var isNegative=0>number;number=Math.abs(number);var numStr=number+"",formatedText="",parts=[],hasExponent=!1;if(-1!==numStr.indexOf("e")){var match=numStr.match(/([\d\.]+)e(-?)(\d+)/);match&&"-"==match[2]&&match[3]>fractionSize+1?(numStr="0",number=0):(formatedText=numStr,hasExponent=!0)}if(hasExponent)fractionSize>0&&number>-1&&1>number&&(formatedText=number.toFixed(fractionSize));else{var fractionLen=(numStr.split(DECIMAL_SEP)[1]||"").length;isUndefined(fractionSize)&&(fractionSize=Math.min(Math.max(pattern.minFrac,fractionLen),pattern.maxFrac)),number=+(Math.round(+(number.toString()+"e"+fractionSize)).toString()+"e"+-fractionSize),0===number&&(isNegative=!1);var fraction=(""+number).split(DECIMAL_SEP),whole=fraction[0];fraction=fraction[1]||"";var i,pos=0,lgroup=pattern.lgSize,group=pattern.gSize;if(whole.length>=lgroup+group)for(pos=whole.length-lgroup,i=0;pos>i;i++)(pos-i)%group===0&&0!==i&&(formatedText+=groupSep),formatedText+=whole.charAt(i);for(i=pos;i<whole.length;i++)(whole.length-i)%lgroup===0&&0!==i&&(formatedText+=groupSep),formatedText+=whole.charAt(i);for(;fraction.length<fractionSize;)fraction+="0";fractionSize&&"0"!==fractionSize&&(formatedText+=decimalSep+fraction.substr(0,fractionSize))}return parts.push(isNegative?pattern.negPre:pattern.posPre),parts.push(formatedText),parts.push(isNegative?pattern.negSuf:pattern.posSuf),parts.join("")}function padNumber(num,digits,trim){var neg="";for(0>num&&(neg="-",num=-num),num=""+num;num.length<digits;)num="0"+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function dateGetter(name,size,offset,trim){return offset=offset||0,function(date){var value=date["get"+name]();return(offset>0||value>-offset)&&(value+=offset),0===value&&-12==offset&&(value=12),padNumber(value,size,trim)}}function dateStrGetter(name,shortForm){return function(date,formats){var value=date["get"+name](),get=uppercase(shortForm?"SHORT"+name:name);return formats[get][value]}}function timeZoneGetter(date){var zone=-1*date.getTimezoneOffset(),paddedZone=zone>=0?"+":"";return paddedZone+=padNumber(Math[zone>0?"floor":"ceil"](zone/60),2)+padNumber(Math.abs(zone%60),2)}function ampmGetter(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]}function dateFilter($locale){function jsonStringToDate(string){var match;if(match=string.match(R_ISO8601_STR)){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;match[9]&&(tzHour=int(match[9]+match[10]),tzMin=int(match[9]+match[11])),dateSetter.call(date,int(match[1]),int(match[2])-1,int(match[3]));var h=int(match[4]||0)-tzHour,m=int(match[5]||0)-tzMin,s=int(match[6]||0),ms=Math.round(1e3*parseFloat("0."+(match[7]||0)));return timeSetter.call(date,h,m,s,ms),date}return string}var R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(date,format){var fn,match,text="",parts=[];if(format=format||"mediumDate",format=$locale.DATETIME_FORMATS[format]||format,isString(date)&&(date=NUMBER_STRING.test(date)?int(date):jsonStringToDate(date)),isNumber(date)&&(date=new Date(date)),!isDate(date))return date;for(;format;)match=DATE_FORMATS_SPLIT.exec(format),match?(parts=concat(parts,match,1),format=parts.pop()):(parts.push(format),format=null);return forEach(parts,function(value){fn=DATE_FORMATS[value],text+=fn?fn(date,$locale.DATETIME_FORMATS):value.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),text}}function jsonFilter(){return function(object){return toJson(object,!0)}}function limitToFilter(){return function(input,limit){return isArray(input)||isString(input)?(limit=Math.abs(Number(limit))===1/0?Number(limit):int(limit),limit?limit>0?input.slice(0,limit):input.slice(limit):isString(input)?"":[]):input}}function orderByFilter($parse){return function(array,sortPredicate,reverseOrder){function comparator(o1,o2){for(var i=0;i<sortPredicate.length;i++){var comp=sortPredicate[i](o1,o2);if(0!==comp)return comp}return 0}function reverseComparator(comp,descending){return toBoolean(descending)?function(a,b){return comp(b,a)}:comp}function compare(v1,v2){var t1=typeof v1,t2=typeof v2;return t1==t2?(isDate(v1)&&isDate(v2)&&(v1=v1.valueOf(),v2=v2.valueOf()),"string"==t1&&(v1=v1.toLowerCase(),v2=v2.toLowerCase()),v1===v2?0:v2>v1?-1:1):t2>t1?-1:1}return isArrayLike(array)?(sortPredicate=isArray(sortPredicate)?sortPredicate:[sortPredicate],0===sortPredicate.length&&(sortPredicate=["+"]),sortPredicate=map(sortPredicate,function(predicate){var descending=!1,get=predicate||identity;if(isString(predicate)){if(("+"==predicate.charAt(0)||"-"==predicate.charAt(0))&&(descending="-"==predicate.charAt(0),predicate=predicate.substring(1)),""===predicate)return reverseComparator(function(a,b){return compare(a,b)},descending);if(get=$parse(predicate),get.constant){var key=get();return reverseComparator(function(a,b){return compare(a[key],b[key])},descending)}}return reverseComparator(function(a,b){return compare(get(a),get(b))},descending)}),slice.call(array).sort(reverseComparator(comparator,reverseOrder))):array}}function ngDirective(directive){return isFunction(directive)&&(directive={link:directive}),directive.restrict=directive.restrict||"AC",valueFn(directive)}function FormController(element,attrs,$scope,$animate){function toggleValidCss(isValid,validationErrorKey){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"",$animate.setClass(element,(isValid?VALID_CLASS:INVALID_CLASS)+validationErrorKey,(isValid?INVALID_CLASS:VALID_CLASS)+validationErrorKey)}var form=this,parentForm=element.parent().controller("form")||nullFormCtrl,invalidCount=0,errors=form.$error={},controls=[];form.$name=attrs.name||attrs.ngForm,form.$dirty=!1,form.$pristine=!0,form.$valid=!0,form.$invalid=!1,parentForm.$addControl(form),element.addClass(PRISTINE_CLASS),toggleValidCss(!0),form.$addControl=function(control){assertNotHasOwnProperty(control.$name,"input"),controls.push(control),control.$name&&(form[control.$name]=control)},form.$removeControl=function(control){control.$name&&form[control.$name]===control&&delete form[control.$name],forEach(errors,function(queue,validationToken){form.$setValidity(validationToken,!0,control)}),arrayRemove(controls,control)},form.$setValidity=function(validationToken,isValid,control){var queue=errors[validationToken];if(isValid)queue&&(arrayRemove(queue,control),queue.length||(invalidCount--,invalidCount||(toggleValidCss(isValid),form.$valid=!0,form.$invalid=!1),errors[validationToken]=!1,toggleValidCss(!0,validationToken),parentForm.$setValidity(validationToken,!0,form)));else{if(invalidCount||toggleValidCss(isValid),queue){if(includes(queue,control))return}else errors[validationToken]=queue=[],invalidCount++,toggleValidCss(!1,validationToken),parentForm.$setValidity(validationToken,!1,form);queue.push(control),form.$valid=!1,form.$invalid=!0}},form.$setDirty=function(){$animate.removeClass(element,PRISTINE_CLASS),$animate.addClass(element,DIRTY_CLASS),form.$dirty=!0,form.$pristine=!1,parentForm.$setDirty()},form.$setPristine=function(){$animate.removeClass(element,DIRTY_CLASS),$animate.addClass(element,PRISTINE_CLASS),form.$dirty=!1,form.$pristine=!0,forEach(controls,function(control){control.$setPristine()})}}function validate(ctrl,validatorName,validity,value){return ctrl.$setValidity(validatorName,validity),validity?value:undefined}function testFlags(validity,flags){var i,flag;if(flags)for(i=0;i<flags.length;++i)if(flag=flags[i],validity[flag])return!0;return!1}function addNativeHtml5Validators(ctrl,validatorName,badFlags,ignoreFlags,validity){if(isObject(validity)){ctrl.$$hasNativeValidators=!0;var validator=function(value){return ctrl.$error[validatorName]||testFlags(validity,ignoreFlags)||!testFlags(validity,badFlags)?value:void ctrl.$setValidity(validatorName,!1)};ctrl.$parsers.push(validator)}}function textInputType(scope,element,attr,ctrl,$sniffer,$browser){var validity=element.prop(VALIDITY_STATE_PROPERTY),placeholder=element[0].placeholder,noevent={},type=lowercase(element[0].type);if(ctrl.$$validityState=validity,!$sniffer.android){var composing=!1;element.on("compositionstart",function(data){composing=!0}),element.on("compositionend",function(){composing=!1,listener()})}var listener=function(ev){if(!composing){var value=element.val();if(msie&&"input"===(ev||noevent).type&&element[0].placeholder!==placeholder)return void(placeholder=element[0].placeholder);"password"!==type&&toBoolean(attr.ngTrim||"T")&&(value=trim(value));var revalidate=validity&&ctrl.$$hasNativeValidators;(ctrl.$viewValue!==value||""===value&&revalidate)&&(scope.$root.$$phase?ctrl.$setViewValue(value):scope.$apply(function(){ctrl.$setViewValue(value)}))}};if($sniffer.hasEvent("input"))element.on("input",listener);else{var timeout,deferListener=function(){timeout||(timeout=$browser.defer(function(){listener(),timeout=null}))};element.on("keydown",function(event){var key=event.keyCode;91===key||key>15&&19>key||key>=37&&40>=key||deferListener()}),$sniffer.hasEvent("paste")&&element.on("paste cut",deferListener)}element.on("change",listener),ctrl.$render=function(){element.val(ctrl.$isEmpty(ctrl.$viewValue)?"":ctrl.$viewValue)};var patternValidator,match,pattern=attr.ngPattern;if(pattern){var validateRegex=function(regexp,value){return validate(ctrl,"pattern",ctrl.$isEmpty(value)||regexp.test(value),value)};match=pattern.match(/^\/(.*)\/([gim]*)$/),match?(pattern=new RegExp(match[1],match[2]),patternValidator=function(value){return validateRegex(pattern,value)}):patternValidator=function(value){var patternObj=scope.$eval(pattern);if(!patternObj||!patternObj.test)throw minErr("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",pattern,patternObj,startingTag(element));return validateRegex(patternObj,value)},ctrl.$formatters.push(patternValidator),ctrl.$parsers.push(patternValidator)}if(attr.ngMinlength){var minlength=int(attr.ngMinlength),minLengthValidator=function(value){return validate(ctrl,"minlength",ctrl.$isEmpty(value)||value.length>=minlength,value)};ctrl.$parsers.push(minLengthValidator),ctrl.$formatters.push(minLengthValidator)}if(attr.ngMaxlength){var maxlength=int(attr.ngMaxlength),maxLengthValidator=function(value){return validate(ctrl,"maxlength",ctrl.$isEmpty(value)||value.length<=maxlength,value)};ctrl.$parsers.push(maxLengthValidator),ctrl.$formatters.push(maxLengthValidator)}}function numberInputType(scope,element,attr,ctrl,$sniffer,$browser){if(textInputType(scope,element,attr,ctrl,$sniffer,$browser),ctrl.$parsers.push(function(value){var empty=ctrl.$isEmpty(value);return empty||NUMBER_REGEXP.test(value)?(ctrl.$setValidity("number",!0),""===value?null:empty?value:parseFloat(value)):(ctrl.$setValidity("number",!1),undefined)}),addNativeHtml5Validators(ctrl,"number",numberBadFlags,null,ctrl.$$validityState),ctrl.$formatters.push(function(value){return ctrl.$isEmpty(value)?"":""+value}),attr.min){var minValidator=function(value){var min=parseFloat(attr.min);return validate(ctrl,"min",ctrl.$isEmpty(value)||value>=min,value)};ctrl.$parsers.push(minValidator),ctrl.$formatters.push(minValidator)}if(attr.max){var maxValidator=function(value){var max=parseFloat(attr.max);return validate(ctrl,"max",ctrl.$isEmpty(value)||max>=value,value)};ctrl.$parsers.push(maxValidator),ctrl.$formatters.push(maxValidator)}ctrl.$formatters.push(function(value){return validate(ctrl,"number",ctrl.$isEmpty(value)||isNumber(value),value)})}function urlInputType(scope,element,attr,ctrl,$sniffer,$browser){textInputType(scope,element,attr,ctrl,$sniffer,$browser);var urlValidator=function(value){return validate(ctrl,"url",ctrl.$isEmpty(value)||URL_REGEXP.test(value),value)};ctrl.$formatters.push(urlValidator),ctrl.$parsers.push(urlValidator)}function emailInputType(scope,element,attr,ctrl,$sniffer,$browser){textInputType(scope,element,attr,ctrl,$sniffer,$browser);var emailValidator=function(value){return validate(ctrl,"email",ctrl.$isEmpty(value)||EMAIL_REGEXP.test(value),value)};ctrl.$formatters.push(emailValidator),ctrl.$parsers.push(emailValidator)}function radioInputType(scope,element,attr,ctrl){isUndefined(attr.name)&&element.attr("name",nextUid()),element.on("click",function(){element[0].checked&&scope.$apply(function(){ctrl.$setViewValue(attr.value)})}),ctrl.$render=function(){var value=attr.value;element[0].checked=value==ctrl.$viewValue},attr.$observe("value",ctrl.$render)}function checkboxInputType(scope,element,attr,ctrl){var trueValue=attr.ngTrueValue,falseValue=attr.ngFalseValue;isString(trueValue)||(trueValue=!0),isString(falseValue)||(falseValue=!1),element.on("click",function(){scope.$apply(function(){ctrl.$setViewValue(element[0].checked)})}),ctrl.$render=function(){element[0].checked=ctrl.$viewValue},ctrl.$isEmpty=function(value){return value!==trueValue},ctrl.$formatters.push(function(value){return value===trueValue}),ctrl.$parsers.push(function(value){return value?trueValue:falseValue})}function classDirective(name,selector){return name="ngClass"+name,["$animate",function($animate){function arrayDifference(tokens1,tokens2){var values=[];outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values.push(token)}return values}function arrayClasses(classVal){if(isArray(classVal))return classVal;if(isString(classVal))return classVal.split(" ");if(isObject(classVal)){var classes=[];return forEach(classVal,function(v,k){v&&(classes=classes.concat(k.split(" ")))}),classes}return classVal}return{restrict:"AC",link:function(scope,element,attr){function addClasses(classes){var newClasses=digestClassCounts(classes,1);attr.$addClass(newClasses)}function removeClasses(classes){var newClasses=digestClassCounts(classes,-1);attr.$removeClass(newClasses)}function digestClassCounts(classes,count){var classCounts=element.data("$classCounts")||{},classesToUpdate=[];return forEach(classes,function(className){(count>0||classCounts[className])&&(classCounts[className]=(classCounts[className]||0)+count,classCounts[className]===+(count>0)&&classesToUpdate.push(className))}),element.data("$classCounts",classCounts),classesToUpdate.join(" ")}function updateClasses(oldClasses,newClasses){var toAdd=arrayDifference(newClasses,oldClasses),toRemove=arrayDifference(oldClasses,newClasses);toRemove=digestClassCounts(toRemove,-1),toAdd=digestClassCounts(toAdd,1),0===toAdd.length?$animate.removeClass(element,toRemove):0===toRemove.length?$animate.addClass(element,toAdd):$animate.setClass(element,toAdd,toRemove)}function ngClassWatchAction(newVal){if(selector===!0||scope.$index%2===selector){var newClasses=arrayClasses(newVal||[]);if(oldVal){if(!equals(newVal,oldVal)){var oldClasses=arrayClasses(oldVal);updateClasses(oldClasses,newClasses)}}else addClasses(newClasses)}oldVal=shallowCopy(newVal)}var oldVal;scope.$watch(attr[name],ngClassWatchAction,!0),attr.$observe("class",function(value){ngClassWatchAction(scope.$eval(attr[name]))}),"ngClass"!==name&&scope.$watch("$index",function($index,old$index){var mod=1&$index;if(mod!==(1&old$index)){var classes=arrayClasses(scope.$eval(attr[name]));mod===selector?addClasses(classes):removeClasses(classes)}})}}}]}var VALIDITY_STATE_PROPERTY="validity",lowercase=function(string){return isString(string)?string.toLowerCase():string},hasOwnProperty=Object.prototype.hasOwnProperty,uppercase=function(string){return isString(string)?string.toUpperCase():string},manualLowercase=function(s){return isString(s)?s.replace(/[A-Z]/g,function(ch){return String.fromCharCode(32|ch.charCodeAt(0))}):s},manualUppercase=function(s){return isString(s)?s.replace(/[a-z]/g,function(ch){return String.fromCharCode(-33&ch.charCodeAt(0))}):s};"i"!=="I".toLowerCase()&&(lowercase=manualLowercase,uppercase=manualUppercase);var msie,jqLite,jQuery,angularModule,nodeName_,slice=[].slice,push=[].push,toString=Object.prototype.toString,ngMinErr=minErr("ng"),angular=window.angular||(window.angular={}),uid=["0","0","0"];msie=int((/msie (\d+)/.exec(lowercase(navigator.userAgent))||[])[1]),isNaN(msie)&&(msie=int((/trident\/.*; rv:(\d+)/.exec(lowercase(navigator.userAgent))||[])[1])),noop.$inject=[],identity.$inject=[];var isArray=function(){return isFunction(Array.isArray)?Array.isArray:function(value){return"[object Array]"===toString.call(value)}}(),trim=function(){return String.prototype.trim?function(value){return isString(value)?value.trim():value}:function(value){return isString(value)?value.replace(/^\s\s*/,"").replace(/\s\s*$/,""):value}}();nodeName_=9>msie?function(element){return element=element.nodeName?element:element[0],element.scopeName&&"HTML"!=element.scopeName?uppercase(element.scopeName+":"+element.nodeName):element.nodeName}:function(element){return element.nodeName?element.nodeName:element[0].nodeName};var csp=function(){if(isDefined(csp.isActive_))return csp.isActive_;var active=!(!document.querySelector("[ng-csp]")&&!document.querySelector("[data-ng-csp]"));if(!active)try{new Function("")}catch(e){active=!0}return csp.isActive_=active},SNAKE_CASE_REGEXP=/[A-Z]/g,version={full:"1.2.32",major:1,minor:2,dot:32,codeName:"alternation-intention"};JQLite.expando="ng339";var jqCache=JQLite.cache={},jqId=1,addEventListenerFn=window.document.addEventListener?function(element,type,fn){element.addEventListener(type,fn,!1)}:function(element,type,fn){element.attachEvent("on"+type,fn)},removeEventListenerFn=window.document.removeEventListener?function(element,type,fn){element.removeEventListener(type,fn,!1)}:function(element,type,fn){element.detachEvent("on"+type,fn)},SPECIAL_CHARS_REGEXP=(JQLite._data=function(node){return this.cache[node[this.expando]]||{}},/([\:\-\_]+(.))/g),MOZ_HACK_REGEXP=/^moz([A-Z])/,jqLiteMinErr=minErr("jqLite"),SINGLE_TAG_REGEXP=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,HTML_REGEXP=/<|&#?\w+;/,TAG_NAME_REGEXP=/<([\w:]+)/,XHTML_TAG_REGEXP=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,wrapMap={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var JQLitePrototype=JQLite.prototype={ready:function(fn){function trigger(){fired||(fired=!0,fn())}var fired=!1;"complete"===document.readyState?setTimeout(trigger):(this.on("DOMContentLoaded",trigger),JQLite(window).on("load",trigger))},toString:function(){var value=[];return forEach(this,function(e){value.push(""+e)}),"["+value.join(", ")+"]"},eq:function(index){return jqLite(index>=0?this[index]:this[this.length+index])},length:0,push:push,sort:[].sort,splice:[].splice},BOOLEAN_ATTR={};forEach("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(value){BOOLEAN_ATTR[lowercase(value)]=value});var BOOLEAN_ELEMENTS={};forEach("input,select,option,textarea,button,form,details".split(","),function(value){BOOLEAN_ELEMENTS[uppercase(value)]=!0}),forEach({data:jqLiteData,removeData:jqLiteRemoveData},function(fn,name){JQLite[name]=fn}),forEach({data:jqLiteData,inheritedData:jqLiteInheritedData,scope:function(element){return jqLite.data(element,"$scope")||jqLiteInheritedData(element.parentNode||element,["$isolateScope","$scope"])},isolateScope:function(element){return jqLite.data(element,"$isolateScope")||jqLite.data(element,"$isolateScopeNoTemplate")},controller:jqLiteController,injector:function(element){return jqLiteInheritedData(element,"$injector")},removeAttr:function(element,name){element.removeAttribute(name)},hasClass:jqLiteHasClass,css:function(element,name,value){if(name=camelCase(name),!isDefined(value)){var val;return 8>=msie&&(val=element.currentStyle&&element.currentStyle[name],""===val&&(val="auto")),val=val||element.style[name],8>=msie&&(val=""===val?undefined:val),val}element.style[name]=value},attr:function(element,name,value){var lowercasedName=lowercase(name);if(BOOLEAN_ATTR[lowercasedName]){if(!isDefined(value))return element[name]||(element.attributes.getNamedItem(name)||noop).specified?lowercasedName:undefined;value?(element[name]=!0,element.setAttribute(name,lowercasedName)):(element[name]=!1,element.removeAttribute(lowercasedName))}else if(isDefined(value))element.setAttribute(name,value);else if(element.getAttribute){var ret=element.getAttribute(name,2);return null===ret?undefined:ret}},prop:function(element,name,value){return isDefined(value)?void(element[name]=value):element[name]},text:function(){function getText(element,value){var textProp=NODE_TYPE_TEXT_PROPERTY[element.nodeType];return isUndefined(value)?textProp?element[textProp]:"":void(element[textProp]=value)}var NODE_TYPE_TEXT_PROPERTY=[];return 9>msie?(NODE_TYPE_TEXT_PROPERTY[1]="innerText",NODE_TYPE_TEXT_PROPERTY[3]="nodeValue"):NODE_TYPE_TEXT_PROPERTY[1]=NODE_TYPE_TEXT_PROPERTY[3]="textContent",getText.$dv="",getText}(),val:function(element,value){if(isUndefined(value)){if("SELECT"===nodeName_(element)&&element.multiple){var result=[];return forEach(element.options,function(option){option.selected&&result.push(option.value||option.text)}),0===result.length?null:result}return element.value}element.value=value},html:function(element,value){if(isUndefined(value))return element.innerHTML;for(var i=0,childNodes=element.childNodes;i<childNodes.length;i++)jqLiteDealoc(childNodes[i]);element.innerHTML=value},empty:jqLiteEmpty},function(fn,name){JQLite.prototype[name]=function(arg1,arg2){var i,key,nodeCount=this.length;if(fn!==jqLiteEmpty&&(2==fn.length&&fn!==jqLiteHasClass&&fn!==jqLiteController?arg1:arg2)===undefined){if(isObject(arg1)){for(i=0;nodeCount>i;i++)if(fn===jqLiteData)fn(this[i],arg1);else for(key in arg1)fn(this[i],key,arg1[key]);return this}for(var value=fn.$dv,jj=value===undefined?Math.min(nodeCount,1):nodeCount,j=0;jj>j;j++){var nodeValue=fn(this[j],arg1,arg2);value=value?value+nodeValue:nodeValue}return value}for(i=0;nodeCount>i;i++)fn(this[i],arg1,arg2);return this}}),forEach({removeData:jqLiteRemoveData,dealoc:jqLiteDealoc,on:function onFn(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");var events=jqLiteExpandoStore(element,"events"),handle=jqLiteExpandoStore(element,"handle");events||jqLiteExpandoStore(element,"events",events={}),handle||jqLiteExpandoStore(element,"handle",handle=createEventHandler(element,events)),forEach(type.split(" "),function(type){var eventFns=events[type];if(!eventFns){if("mouseenter"==type||"mouseleave"==type){var contains=document.body.contains||document.body.compareDocumentPosition?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};events[type]=[];var eventmap={mouseleave:"mouseout",mouseenter:"mouseover"};onFn(element,eventmap[type],function(event){var target=this,related=event.relatedTarget;(!related||related!==target&&!contains(target,related))&&handle(event,type)})}else addEventListenerFn(element,type,handle),events[type]=[];eventFns=events[type]}eventFns.push(fn)})},off:jqLiteOff,one:function(element,type,fn){element=jqLite(element),element.on(type,function onFn(){element.off(type,fn),element.off(type,onFn)}),element.on(type,fn)},replaceWith:function(element,replaceNode){var index,parent=element.parentNode;jqLiteDealoc(element),forEach(new JQLite(replaceNode),function(node){index?parent.insertBefore(node,index.nextSibling):parent.replaceChild(node,element),index=node})},children:function(element){var children=[];return forEach(element.childNodes,function(element){1===element.nodeType&&children.push(element)}),children},contents:function(element){return element.contentDocument||element.childNodes||[]},append:function(element,node){forEach(new JQLite(node),function(child){(1===element.nodeType||11===element.nodeType)&&element.appendChild(child)})},prepend:function(element,node){if(1===element.nodeType){var index=element.firstChild;forEach(new JQLite(node),function(child){element.insertBefore(child,index)})}},wrap:function(element,wrapNode){wrapNode=jqLite(wrapNode)[0];var parent=element.parentNode;parent&&parent.replaceChild(wrapNode,element),wrapNode.appendChild(element)},remove:function(element){jqLiteDealoc(element);var parent=element.parentNode;parent&&parent.removeChild(element)},after:function(element,newElement){var index=element,parent=element.parentNode;forEach(new JQLite(newElement),function(node){parent.insertBefore(node,index.nextSibling),index=node})},addClass:jqLiteAddClass,removeClass:jqLiteRemoveClass,toggleClass:function(element,selector,condition){selector&&forEach(selector.split(" "),function(className){var classCondition=condition;isUndefined(classCondition)&&(classCondition=!jqLiteHasClass(element,className)),(classCondition?jqLiteAddClass:jqLiteRemoveClass)(element,className)})},parent:function(element){var parent=element.parentNode;return parent&&11!==parent.nodeType?parent:null},next:function(element){if(element.nextElementSibling)return element.nextElementSibling;for(var elm=element.nextSibling;null!=elm&&1!==elm.nodeType;)elm=elm.nextSibling;return elm},find:function(element,selector){return element.getElementsByTagName?element.getElementsByTagName(selector):[]},clone:jqLiteClone,triggerHandler:function(element,event,extraParameters){var dummyEvent,eventFnsCopy,handlerArgs,eventName=event.type||event,eventFns=(jqLiteExpandoStore(element,"events")||{})[eventName];eventFns&&(dummyEvent={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopPropagation:noop,type:eventName,target:element},event.type&&(dummyEvent=extend(dummyEvent,event)),eventFnsCopy=shallowCopy(eventFns),handlerArgs=extraParameters?[dummyEvent].concat(extraParameters):[dummyEvent],forEach(eventFnsCopy,function(fn){fn.apply(element,handlerArgs)}))}},function(fn,name){JQLite.prototype[name]=function(arg1,arg2,arg3){for(var value,i=0;i<this.length;i++)isUndefined(value)?(value=fn(this[i],arg1,arg2,arg3),isDefined(value)&&(value=jqLite(value))):jqLiteAddNodes(value,fn(this[i],arg1,arg2,arg3));return isDefined(value)?value:this},JQLite.prototype.bind=JQLite.prototype.on,JQLite.prototype.unbind=JQLite.prototype.off}),HashMap.prototype={put:function(key,value){this[hashKey(key,this.nextUid)]=value},get:function(key){return this[hashKey(key,this.nextUid)]},remove:function(key){var value=this[key=hashKey(key,this.nextUid)];return delete this[key],value}};var FN_ARGS=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,FN_ARG_SPLIT=/,/,FN_ARG=/^\s*(_?)(\S+?)\1\s*$/,STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,$injectorMinErr=minErr("$injector"),$animateMinErr=minErr("$animate"),$AnimateProvider=["$provide",function($provide){this.$$selectors={},this.register=function(name,factory){
var key=name+"-animation";if(name&&"."!=name.charAt(0))throw $animateMinErr("notcsel","Expecting class selector starting with '.' got '{0}'.",name);this.$$selectors[name.substr(1)]=key,$provide.factory(key,factory)},this.classNameFilter=function(expression){return 1===arguments.length&&(this.$$classNameFilter=expression instanceof RegExp?expression:null),this.$$classNameFilter},this.$get=["$timeout","$$asyncCallback",function($timeout,$$asyncCallback){function async(fn){fn&&$$asyncCallback(fn)}return{enter:function(element,parent,after,done){after?after.after(element):(parent&&parent[0]||(parent=after.parent()),parent.append(element)),async(done)},leave:function(element,done){element.remove(),async(done)},move:function(element,parent,after,done){this.enter(element,parent,after,done)},addClass:function(element,className,done){className=isString(className)?className:isArray(className)?className.join(" "):"",forEach(element,function(element){jqLiteAddClass(element,className)}),async(done)},removeClass:function(element,className,done){className=isString(className)?className:isArray(className)?className.join(" "):"",forEach(element,function(element){jqLiteRemoveClass(element,className)}),async(done)},setClass:function(element,add,remove,done){forEach(element,function(element){jqLiteAddClass(element,add),jqLiteRemoveClass(element,remove)}),async(done)},enabled:noop}}]}],$compileMinErr=minErr("$compile");$CompileProvider.$inject=["$provide","$$sanitizeUriProvider"];var PREFIX_REGEXP=/^(x[\:\-_]|data[\:\-_])/i,$interpolateMinErr=minErr("$interpolate"),PATH_MATCH=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,DEFAULT_PORTS={http:80,https:443,ftp:21},$locationMinErr=minErr("$location");LocationHashbangInHtml5Url.prototype=LocationHashbangUrl.prototype=LocationHtml5Url.prototype={$$html5:!1,$$replace:!1,absUrl:locationGetter("$$absUrl"),url:function(url){if(isUndefined(url))return this.$$url;var match=PATH_MATCH.exec(url);return match[1]&&this.path(decodeURIComponent(match[1])),(match[2]||match[1])&&this.search(match[3]||""),this.hash(match[5]||""),this},protocol:locationGetter("$$protocol"),host:locationGetter("$$host"),port:locationGetter("$$port"),path:locationGetterSetter("$$path",function(path){return path=null!==path?path.toString():"","/"==path.charAt(0)?path:"/"+path}),search:function(search,paramValue){switch(arguments.length){case 0:return this.$$search;case 1:if(isString(search)||isNumber(search))search=search.toString(),this.$$search=parseKeyValue(search);else{if(!isObject(search))throw $locationMinErr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");forEach(search,function(value,key){null==value&&delete search[key]}),this.$$search=search}break;default:isUndefined(paramValue)||null===paramValue?delete this.$$search[search]:this.$$search[search]=paramValue}return this.$$compose(),this},hash:locationGetterSetter("$$hash",function(hash){return null!==hash?hash.toString():""}),replace:function(){return this.$$replace=!0,this}};var promiseWarning,$parseMinErr=minErr("$parse"),promiseWarningCache={},CALL=Function.prototype.call,APPLY=Function.prototype.apply,BIND=Function.prototype.bind,OPERATORS={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:noop,"+":function(self,locals,a,b){return a=a(self,locals),b=b(self,locals),isDefined(a)?isDefined(b)?a+b:a:isDefined(b)?b:undefined},"-":function(self,locals,a,b){return a=a(self,locals),b=b(self,locals),(isDefined(a)?a:0)-(isDefined(b)?b:0)},"*":function(self,locals,a,b){return a(self,locals)*b(self,locals)},"/":function(self,locals,a,b){return a(self,locals)/b(self,locals)},"%":function(self,locals,a,b){return a(self,locals)%b(self,locals)},"^":function(self,locals,a,b){return a(self,locals)^b(self,locals)},"=":noop,"===":function(self,locals,a,b){return a(self,locals)===b(self,locals)},"!==":function(self,locals,a,b){return a(self,locals)!==b(self,locals)},"==":function(self,locals,a,b){return a(self,locals)==b(self,locals)},"!=":function(self,locals,a,b){return a(self,locals)!=b(self,locals)},"<":function(self,locals,a,b){return a(self,locals)<b(self,locals)},">":function(self,locals,a,b){return a(self,locals)>b(self,locals)},"<=":function(self,locals,a,b){return a(self,locals)<=b(self,locals)},">=":function(self,locals,a,b){return a(self,locals)>=b(self,locals)},"&&":function(self,locals,a,b){return a(self,locals)&&b(self,locals)},"||":function(self,locals,a,b){return a(self,locals)||b(self,locals)},"&":function(self,locals,a,b){return a(self,locals)&b(self,locals)},"|":function(self,locals,a,b){return b(self,locals)(self,locals,a(self,locals))},"!":function(self,locals,a){return!a(self,locals)}},ESCAPE={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Lexer=function(options){this.options=options};Lexer.prototype={constructor:Lexer,lex:function(text){for(this.text=text,this.index=0,this.ch=undefined,this.lastCh=":",this.tokens=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var ch2=this.ch+this.peek(),ch3=ch2+this.peek(2),fn=OPERATORS[this.ch],fn2=OPERATORS[ch2],fn3=OPERATORS[ch3];fn3?(this.tokens.push({index:this.index,text:ch3,fn:fn3}),this.index+=3):fn2?(this.tokens.push({index:this.index,text:ch2,fn:fn2}),this.index+=2):fn?(this.tokens.push({index:this.index,text:this.ch,fn:fn}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(chars){return-1!==chars.indexOf(this.ch)},was:function(chars){return-1!==chars.indexOf(this.lastCh)},peek:function(i){var num=i||1;return this.index+num<this.text.length?this.text.charAt(this.index+num):!1},isNumber:function(ch){return ch>="0"&&"9">=ch},isWhitespace:function(ch){return" "===ch||"\r"===ch||"	"===ch||"\n"===ch||""===ch||"\xa0"===ch},isIdent:function(ch){return ch>="a"&&"z">=ch||ch>="A"&&"Z">=ch||"_"===ch||"$"===ch},isExpOperator:function(ch){return"-"===ch||"+"===ch||this.isNumber(ch)},throwError:function(error,start,end){end=end||this.index;var colStr=isDefined(start)?"s "+start+"-"+this.index+" ["+this.text.substring(start,end)+"]":" "+end;throw $parseMinErr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",error,colStr,this.text)},readNumber:function(){for(var number="",start=this.index;this.index<this.text.length;){var ch=lowercase(this.text.charAt(this.index));if("."==ch||this.isNumber(ch))number+=ch;else{var peekCh=this.peek();if("e"==ch&&this.isExpOperator(peekCh))number+=ch;else if(this.isExpOperator(ch)&&peekCh&&this.isNumber(peekCh)&&"e"==number.charAt(number.length-1))number+=ch;else{if(!this.isExpOperator(ch)||peekCh&&this.isNumber(peekCh)||"e"!=number.charAt(number.length-1))break;this.throwError("Invalid exponent")}}this.index++}number=1*number,this.tokens.push({index:start,text:number,literal:!0,constant:!0,fn:function(){return number}})},readIdent:function(){for(var lastDot,peekIndex,methodName,ch,parser=this,ident="",start=this.index;this.index<this.text.length&&(ch=this.text.charAt(this.index),"."===ch||this.isIdent(ch)||this.isNumber(ch));)"."===ch&&(lastDot=this.index),ident+=ch,this.index++;if(lastDot)for(peekIndex=this.index;peekIndex<this.text.length;){if(ch=this.text.charAt(peekIndex),"("===ch){methodName=ident.substr(lastDot-start+1),ident=ident.substr(0,lastDot-start),this.index=peekIndex;break}if(!this.isWhitespace(ch))break;peekIndex++}var token={index:start,text:ident};if(OPERATORS.hasOwnProperty(ident))token.fn=OPERATORS[ident],token.literal=!0,token.constant=!0;else{var getter=getterFn(ident,this.options,this.text);token.fn=extend(function(self,locals){return getter(self,locals)},{assign:function(self,value){return setter(self,ident,value,parser.text,parser.options)}})}this.tokens.push(token),methodName&&(this.tokens.push({index:lastDot,text:"."}),this.tokens.push({index:lastDot+1,text:methodName}))},readString:function(quote){var start=this.index;this.index++;for(var string="",rawString=quote,escape=!1;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(rawString+=ch,escape){if("u"===ch){var hex=this.text.substring(this.index+1,this.index+5);hex.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+hex+"]"),this.index+=4,string+=String.fromCharCode(parseInt(hex,16))}else{var rep=ESCAPE[ch];string+=rep||ch}escape=!1}else if("\\"===ch)escape=!0;else{if(ch===quote)return this.index++,void this.tokens.push({index:start,text:rawString,string:string,literal:!0,constant:!0,fn:function(){return string}});string+=ch}this.index++}this.throwError("Unterminated quote",start)}};var Parser=function(lexer,$filter,options){this.lexer=lexer,this.$filter=$filter,this.options=options};Parser.ZERO=extend(function(){return 0},{constant:!0}),Parser.prototype={constructor:Parser,parse:function(text){this.text=text,this.tokens=this.lexer.lex(text);var value=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),value.literal=!!value.literal,value.constant=!!value.constant,value},primary:function(){var primary;if(this.expect("("))primary=this.filterChain(),this.consume(")");else if(this.expect("["))primary=this.arrayDeclaration();else if(this.expect("{"))primary=this.object();else{var token=this.expect();primary=token.fn,primary||this.throwError("not a primary expression",token),primary.literal=!!token.literal,primary.constant=!!token.constant}for(var next,context;next=this.expect("(","[",".");)"("===next.text?(primary=this.functionCall(primary,context),context=null):"["===next.text?(context=primary,primary=this.objectIndex(primary)):"."===next.text?(context=primary,primary=this.fieldAccess(primary)):this.throwError("IMPOSSIBLE");return primary},throwError:function(msg,token){throw $parseMinErr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",token.text,msg,token.index+1,this.text,this.text.substring(token.index))},peekToken:function(){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e1,e2,e3,e4){if(this.tokens.length>0){var token=this.tokens[0],t=token.text;if(t===e1||t===e2||t===e3||t===e4||!e1&&!e2&&!e3&&!e4)return token}return!1},expect:function(e1,e2,e3,e4){var token=this.peek(e1,e2,e3,e4);return token?(this.tokens.shift(),token):!1},consume:function(e1){this.expect(e1)||this.throwError("is unexpected, expecting ["+e1+"]",this.peek())},unaryFn:function(fn,right){return extend(function(self,locals){return fn(self,locals,right)},{constant:right.constant})},ternaryFn:function(left,middle,right){return extend(function(self,locals){return left(self,locals)?middle(self,locals):right(self,locals)},{constant:left.constant&&middle.constant&&right.constant})},binaryFn:function(left,fn,right){return extend(function(self,locals){return fn(self,locals,left,right)},{constant:left.constant&&right.constant})},statements:function(){for(var statements=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&statements.push(this.filterChain()),!this.expect(";"))return 1===statements.length?statements[0]:function(self,locals){for(var value,i=0;i<statements.length;i++){var statement=statements[i];statement&&(value=statement(self,locals))}return value}},filterChain:function(){for(var token,left=this.expression();;){if(!(token=this.expect("|")))return left;left=this.binaryFn(left,token.fn,this.filter())}},filter:function(){for(var token=this.expect(),fn=this.$filter(token.text),argsFn=[];;){if(!(token=this.expect(":"))){var fnInvoke=function(self,locals,input){for(var args=[input],i=0;i<argsFn.length;i++)args.push(argsFn[i](self,locals));return fn.apply(self,args)};return function(){return fnInvoke}}argsFn.push(this.expression())}},expression:function(){return this.assignment()},assignment:function(){var right,token,left=this.ternary();return(token=this.expect("="))?(left.assign||this.throwError("implies assignment but ["+this.text.substring(0,token.index)+"] can not be assigned to",token),right=this.ternary(),function(scope,locals){return left.assign(scope,right(scope,locals),locals)}):left},ternary:function(){var middle,token,left=this.logicalOR();return(token=this.expect("?"))?(middle=this.assignment(),(token=this.expect(":"))?this.ternaryFn(left,middle,this.assignment()):void this.throwError("expected :",token)):left},logicalOR:function(){for(var token,left=this.logicalAND();;){if(!(token=this.expect("||")))return left;left=this.binaryFn(left,token.fn,this.logicalAND())}},logicalAND:function(){var token,left=this.equality();return(token=this.expect("&&"))&&(left=this.binaryFn(left,token.fn,this.logicalAND())),left},equality:function(){var token,left=this.relational();return(token=this.expect("==","!=","===","!=="))&&(left=this.binaryFn(left,token.fn,this.equality())),left},relational:function(){var token,left=this.additive();return(token=this.expect("<",">","<=",">="))&&(left=this.binaryFn(left,token.fn,this.relational())),left},additive:function(){for(var token,left=this.multiplicative();token=this.expect("+","-");)left=this.binaryFn(left,token.fn,this.multiplicative());return left},multiplicative:function(){for(var token,left=this.unary();token=this.expect("*","/","%");)left=this.binaryFn(left,token.fn,this.unary());return left},unary:function(){var token;return this.expect("+")?this.primary():(token=this.expect("-"))?this.binaryFn(Parser.ZERO,token.fn,this.unary()):(token=this.expect("!"))?this.unaryFn(token.fn,this.unary()):this.primary()},fieldAccess:function(object){var parser=this,field=this.expect().text,getter=getterFn(field,this.options,this.text);return extend(function(scope,locals,self){return getter(self||object(scope,locals))},{assign:function(scope,value,locals){var o=object(scope,locals);return o||object.assign(scope,o={}),setter(o,field,value,parser.text,parser.options)}})},objectIndex:function(obj){var parser=this,indexFn=this.expression();return this.consume("]"),extend(function(self,locals){var v,p,o=obj(self,locals),i=getStringValue(indexFn(self,locals),parser.text);return ensureSafeMemberName(i,parser.text),o?(v=ensureSafeObject(o[i],parser.text),v&&v.then&&parser.options.unwrapPromises&&(p=v,"$$v"in v||(p.$$v=undefined,p.then(function(val){p.$$v=val})),v=v.$$v),v):undefined},{assign:function(self,value,locals){var key=ensureSafeMemberName(getStringValue(indexFn(self,locals),parser.text),parser.text),o=ensureSafeObject(obj(self,locals),parser.text);return o||obj.assign(self,o={}),o[key]=value}})},functionCall:function(fn,contextGetter){var argsFn=[];if(")"!==this.peekToken().text)do argsFn.push(this.expression());while(this.expect(","));this.consume(")");var parser=this;return function(scope,locals){for(var args=[],context=contextGetter?contextGetter(scope,locals):scope,i=0;i<argsFn.length;i++)args.push(ensureSafeObject(argsFn[i](scope,locals),parser.text));var fnPtr=fn(scope,locals,context)||noop;ensureSafeObject(context,parser.text),ensureSafeFunction(fnPtr,parser.text);var v=fnPtr.apply?fnPtr.apply(context,args):fnPtr(args[0],args[1],args[2],args[3],args[4]);return ensureSafeObject(v,parser.text)}},arrayDeclaration:function(){var elementFns=[],allConstant=!0;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var elementFn=this.expression();elementFns.push(elementFn),elementFn.constant||(allConstant=!1)}while(this.expect(","));return this.consume("]"),extend(function(self,locals){for(var array=[],i=0;i<elementFns.length;i++)array.push(elementFns[i](self,locals));return array},{literal:!0,constant:allConstant})},object:function(){var keyValues=[],allConstant=!0;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var token=this.expect(),key=token.string||token.text;this.consume(":");var value=this.expression();keyValues.push({key:key,value:value}),value.constant||(allConstant=!1)}while(this.expect(","));return this.consume("}"),extend(function(self,locals){for(var object={},i=0;i<keyValues.length;i++){var keyValue=keyValues[i];object[keyValue.key]=keyValue.value(self,locals)}return object},{literal:!0,constant:allConstant})}};var getterFnCacheDefault={},getterFnCacheExpensive={},$sceMinErr=minErr("$sce"),SCE_CONTEXTS={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},urlParsingNode=document.createElement("a"),originUrl=urlResolve(window.location.href,!0);$FilterProvider.$inject=["$provide"],currencyFilter.$inject=["$locale"],numberFilter.$inject=["$locale"];var DECIMAL_SEP=".",DATE_FORMATS={yyyy:dateGetter("FullYear",4),yy:dateGetter("FullYear",2,0,!0),y:dateGetter("FullYear",1),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0),a:ampmGetter,Z:timeZoneGetter},DATE_FORMATS_SPLIT=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,NUMBER_STRING=/^\-?\d+$/;dateFilter.$inject=["$locale"];var lowercaseFilter=valueFn(lowercase),uppercaseFilter=valueFn(uppercase);orderByFilter.$inject=["$parse"];var htmlAnchorDirective=valueFn({restrict:"E",compile:function(element,attr){return 8>=msie&&(attr.href||attr.name||attr.$set("href",""),element.append(document.createComment("IE fix"))),attr.href||attr.xlinkHref||attr.name?void 0:function(scope,element){var href="[object SVGAnimatedString]"===toString.call(element.prop("href"))?"xlink:href":"href";element.on("click",function(event){element.attr(href)||event.preventDefault()})}}}),ngAttributeAliasDirectives={};forEach(BOOLEAN_ATTR,function(propName,attrName){if("multiple"!=propName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:100,link:function(scope,element,attr){scope.$watch(attr[normalized],function(value){attr.$set(attrName,!!value)})}}}}}),forEach(["src","srcset","href"],function(attrName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:99,link:function(scope,element,attr){var propName=attrName,name=attrName;"href"===attrName&&"[object SVGAnimatedString]"===toString.call(element.prop("href"))&&(name="xlinkHref",attr.$attr[name]="xlink:href",propName=null),attr.$observe(normalized,function(value){return value?(attr.$set(name,value),void(msie&&propName&&element.prop(propName,attr[name]))):void("href"===attrName&&attr.$set(name,null))})}}}});var nullFormCtrl={$addControl:noop,$removeControl:noop,$setValidity:noop,$setDirty:noop,$setPristine:noop};FormController.$inject=["$element","$attrs","$scope","$animate"];var formDirectiveFactory=function(isNgForm){return["$timeout",function($timeout){var formDirective={name:"form",restrict:isNgForm?"EAC":"E",controller:FormController,compile:function(){return{pre:function(scope,formElement,attr,controller){if(!attr.action){var preventDefaultListener=function(event){event.preventDefault?event.preventDefault():event.returnValue=!1};addEventListenerFn(formElement[0],"submit",preventDefaultListener),formElement.on("$destroy",function(){$timeout(function(){removeEventListenerFn(formElement[0],"submit",preventDefaultListener)},0,!1)})}var parentFormCtrl=formElement.parent().controller("form"),alias=attr.name||attr.ngForm;alias&&setter(scope,alias,controller,alias),parentFormCtrl&&formElement.on("$destroy",function(){parentFormCtrl.$removeControl(controller),alias&&setter(scope,alias,undefined,alias),extend(controller,nullFormCtrl)})}}}};return formDirective}]},formDirective=formDirectiveFactory(),ngFormDirective=formDirectiveFactory(!0),URL_REGEXP=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,EMAIL_REGEXP=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,NUMBER_REGEXP=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,inputType={text:textInputType,number:numberInputType,url:urlInputType,email:emailInputType,radio:radioInputType,checkbox:checkboxInputType,hidden:noop,button:noop,submit:noop,reset:noop,file:noop},numberBadFlags=["badInput"],inputDirective=["$browser","$sniffer",function($browser,$sniffer){return{restrict:"E",require:"?ngModel",link:function(scope,element,attr,ctrl){ctrl&&(inputType[lowercase(attr.type)]||inputType.text)(scope,element,attr,ctrl,$sniffer,$browser)}}}],VALID_CLASS="ng-valid",INVALID_CLASS="ng-invalid",PRISTINE_CLASS="ng-pristine",DIRTY_CLASS="ng-dirty",NgModelController=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate",function($scope,$exceptionHandler,$attr,$element,$parse,$animate){function toggleValidCss(isValid,validationErrorKey){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"",$animate.removeClass($element,(isValid?INVALID_CLASS:VALID_CLASS)+validationErrorKey),$animate.addClass($element,(isValid?VALID_CLASS:INVALID_CLASS)+validationErrorKey)}this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=$attr.name;var ngModelGet=$parse($attr.ngModel),ngModelSet=ngModelGet.assign;if(!ngModelSet)throw minErr("ngModel")("nonassign","Expression '{0}' is non-assignable. Element: {1}",$attr.ngModel,startingTag($element));this.$render=noop,this.$isEmpty=function(value){return isUndefined(value)||""===value||null===value||value!==value};var parentForm=$element.inheritedData("$formController")||nullFormCtrl,invalidCount=0,$error=this.$error={};$element.addClass(PRISTINE_CLASS),toggleValidCss(!0),this.$setValidity=function(validationErrorKey,isValid){$error[validationErrorKey]!==!isValid&&(isValid?($error[validationErrorKey]&&invalidCount--,invalidCount||(toggleValidCss(!0),this.$valid=!0,this.$invalid=!1)):(toggleValidCss(!1),this.$invalid=!0,this.$valid=!1,invalidCount++),$error[validationErrorKey]=!isValid,toggleValidCss(isValid,validationErrorKey),parentForm.$setValidity(validationErrorKey,isValid,this))},this.$setPristine=function(){this.$dirty=!1,this.$pristine=!0,$animate.removeClass($element,DIRTY_CLASS),$animate.addClass($element,PRISTINE_CLASS)},this.$setViewValue=function(value){this.$viewValue=value,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,$animate.removeClass($element,PRISTINE_CLASS),$animate.addClass($element,DIRTY_CLASS),parentForm.$setDirty()),forEach(this.$parsers,function(fn){value=fn(value)}),this.$modelValue!==value&&(this.$modelValue=value,ngModelSet($scope,value),forEach(this.$viewChangeListeners,function(listener){try{listener()}catch(e){$exceptionHandler(e)}}))};var ctrl=this;$scope.$watch(function(){var value=ngModelGet($scope);if(ctrl.$modelValue!==value){var formatters=ctrl.$formatters,idx=formatters.length;for(ctrl.$modelValue=value;idx--;)value=formatters[idx](value);ctrl.$viewValue!==value&&(ctrl.$viewValue=value,ctrl.$render())}return value})}],ngModelDirective=function(){return{require:["ngModel","^?form"],controller:NgModelController,link:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0],formCtrl=ctrls[1]||nullFormCtrl;formCtrl.$addControl(modelCtrl),scope.$on("$destroy",function(){formCtrl.$removeControl(modelCtrl)})}}},ngChangeDirective=valueFn({require:"ngModel",link:function(scope,element,attr,ctrl){ctrl.$viewChangeListeners.push(function(){scope.$eval(attr.ngChange)})}}),requiredDirective=function(){return{require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){attr.required=!0;var validator=function(value){return attr.required&&ctrl.$isEmpty(value)?void ctrl.$setValidity("required",!1):(ctrl.$setValidity("required",!0),value)};ctrl.$formatters.push(validator),ctrl.$parsers.unshift(validator),attr.$observe("required",function(){validator(ctrl.$viewValue)})}}}},ngListDirective=function(){return{require:"ngModel",link:function(scope,element,attr,ctrl){var match=/\/(.*)\//.exec(attr.ngList),separator=match&&new RegExp(match[1])||attr.ngList||",",parse=function(viewValue){if(!isUndefined(viewValue)){var list=[];return viewValue&&forEach(viewValue.split(separator),function(value){value&&list.push(trim(value))}),list}};ctrl.$parsers.push(parse),ctrl.$formatters.push(function(value){return isArray(value)?value.join(", "):undefined}),ctrl.$isEmpty=function(value){return!value||!value.length}}}},CONSTANT_VALUE_REGEXP=/^(true|false|\d+)$/,ngValueDirective=function(){return{priority:100,compile:function(tpl,tplAttr){return CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue)?function(scope,elm,attr){attr.$set("value",scope.$eval(attr.ngValue))}:function(scope,elm,attr){scope.$watch(attr.ngValue,function(value){attr.$set("value",value)})}}}},ngBindDirective=ngDirective({compile:function(templateElement){return templateElement.addClass("ng-binding"),function(scope,element,attr){element.data("$binding",attr.ngBind),scope.$watch(attr.ngBind,function(value){element.text(value==undefined?"":value)})}}}),ngBindTemplateDirective=["$interpolate",function($interpolate){return function(scope,element,attr){var interpolateFn=$interpolate(element.attr(attr.$attr.ngBindTemplate));element.addClass("ng-binding").data("$binding",interpolateFn),attr.$observe("ngBindTemplate",function(value){element.text(value)})}}],ngBindHtmlDirective=["$sce","$parse",function($sce,$parse){return{compile:function(tElement){return tElement.addClass("ng-binding"),function(scope,element,attr){function getStringValue(){return(parsed(scope)||"").toString()}element.data("$binding",attr.ngBindHtml);var parsed=$parse(attr.ngBindHtml);scope.$watch(getStringValue,function(value){element.html($sce.getTrustedHtml(parsed(scope))||"")})}}}}],ngClassDirective=classDirective("",!0),ngClassOddDirective=classDirective("Odd",0),ngClassEvenDirective=classDirective("Even",1),ngCloakDirective=ngDirective({compile:function(element,attr){attr.$set("ngCloak",undefined),element.removeClass("ng-cloak")}}),ngControllerDirective=[function(){return{scope:!0,controller:"@",priority:500}}],ngEventDirectives={},forceAsyncEvents={blur:!0,focus:!0};forEach("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(eventName){var directiveName=directiveNormalize("ng-"+eventName);ngEventDirectives[directiveName]=["$parse","$rootScope",function($parse,$rootScope){return{compile:function($element,attr){var fn=$parse(attr[directiveName],!0);return function(scope,element){element.on(eventName,function(event){var callback=function(){fn(scope,{$event:event})};forceAsyncEvents[eventName]&&$rootScope.$$phase?scope.$evalAsync(callback):scope.$apply(callback)})}}}}]});var ngIfDirective=["$animate",function($animate){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var block,childScope,previousElements;$scope.$watch($attr.ngIf,function(value){toBoolean(value)?childScope||(childScope=$scope.$new(),$transclude(childScope,function(clone){clone[clone.length++]=document.createComment(" end ngIf: "+$attr.ngIf+" "),block={clone:clone},$animate.enter(clone,$element.parent(),$element)})):(previousElements&&(previousElements.remove(),previousElements=null),childScope&&(childScope.$destroy(),childScope=null),block&&(previousElements=getBlockElements(block.clone),$animate.leave(previousElements,function(){previousElements=null}),block=null))})}}}],ngIncludeDirective=["$http","$templateCache","$anchorScroll","$animate","$sce",function($http,$templateCache,$anchorScroll,$animate,$sce){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:angular.noop,compile:function(element,attr){var srcExp=attr.ngInclude||attr.src,onloadExp=attr.onload||"",autoScrollExp=attr.autoscroll;return function(scope,$element,$attr,ctrl,$transclude){var currentScope,previousElement,currentElement,changeCounter=0,cleanupLastIncludeContent=function(){previousElement&&(previousElement.remove(),previousElement=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement,function(){previousElement=null}),previousElement=currentElement,currentElement=null)};scope.$watch($sce.parseAsResourceUrl(srcExp),function(src){var afterAnimation=function(){!isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()},thisChangeId=++changeCounter;src?($http.get(src,{cache:$templateCache}).success(function(response){if(thisChangeId===changeCounter){var newScope=scope.$new();ctrl.template=response;var clone=$transclude(newScope,function(clone){cleanupLastIncludeContent(),$animate.enter(clone,null,$element,afterAnimation)});currentScope=newScope,currentElement=clone,currentScope.$emit("$includeContentLoaded"),scope.$eval(onloadExp)}}).error(function(){thisChangeId===changeCounter&&cleanupLastIncludeContent()}),scope.$emit("$includeContentRequested")):(cleanupLastIncludeContent(),ctrl.template=null)})}}}}],ngIncludeFillContentDirective=["$compile",function($compile){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(scope,$element,$attr,ctrl){$element.html(ctrl.template),$compile($element.contents())(scope)}}}],ngInitDirective=ngDirective({priority:450,compile:function(){return{pre:function(scope,element,attrs){scope.$eval(attrs.ngInit)}}}}),ngNonBindableDirective=ngDirective({terminal:!0,priority:1e3}),ngPluralizeDirective=["$locale","$interpolate",function($locale,$interpolate){var BRACE=/{}/g;return{restrict:"EA",link:function(scope,element,attr){var numberExp=attr.count,whenExp=attr.$attr.when&&element.attr(attr.$attr.when),offset=attr.offset||0,whens=scope.$eval(whenExp)||{},whensExpFns={},startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),isWhen=/^when(Minus)?(.+)$/;forEach(attr,function(expression,attributeName){isWhen.test(attributeName)&&(whens[lowercase(attributeName.replace("when","").replace("Minus","-"))]=element.attr(attr.$attr[attributeName]))}),forEach(whens,function(expression,key){whensExpFns[key]=$interpolate(expression.replace(BRACE,startSymbol+numberExp+"-"+offset+endSymbol))}),scope.$watch(function(){var value=parseFloat(scope.$eval(numberExp));return isNaN(value)?"":(value in whens||(value=$locale.pluralCat(value-offset)),whensExpFns[value](scope,element,!0))},function(newVal){element.text(newVal)})}}}],ngRepeatDirective=["$parse","$animate",function($parse,$animate){function getBlockStart(block){return block.clone[0]}function getBlockEnd(block){return block.clone[block.clone.length-1]}var NG_REMOVED="$$NG_REMOVED",ngRepeatMinErr=minErr("ngRepeat");return{transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var trackByExp,trackByExpGetter,trackByIdExpFn,trackByIdArrayFn,trackByIdObjFn,lhs,rhs,valueIdentifier,keyIdentifier,expression=$attr.ngRepeat,match=expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),hashFnLocals={$id:hashKey};if(!match)throw ngRepeatMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression);if(lhs=match[1],rhs=match[2],trackByExp=match[3],trackByExp?(trackByExpGetter=$parse(trackByExp),trackByIdExpFn=function(key,value,index){return keyIdentifier&&(hashFnLocals[keyIdentifier]=key),hashFnLocals[valueIdentifier]=value,hashFnLocals.$index=index,trackByExpGetter($scope,hashFnLocals)}):(trackByIdArrayFn=function(key,value){return hashKey(value)},trackByIdObjFn=function(key){return key}),match=lhs.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!match)throw ngRepeatMinErr("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",lhs);valueIdentifier=match[3]||match[1],keyIdentifier=match[2];var lastBlockMap={};$scope.$watchCollection(rhs,function(collection){var index,length,nextNode,arrayLength,childScope,key,value,trackById,trackByIdFn,collectionKeys,block,elementsToRemove,previousNode=$element[0],nextBlockMap={},nextBlockOrder=[];if(isArrayLike(collection))collectionKeys=collection,trackByIdFn=trackByIdExpFn||trackByIdArrayFn;else{trackByIdFn=trackByIdExpFn||trackByIdObjFn,collectionKeys=[];for(key in collection)collection.hasOwnProperty(key)&&"$"!=key.charAt(0)&&collectionKeys.push(key);
collectionKeys.sort()}for(arrayLength=collectionKeys.length,length=nextBlockOrder.length=collectionKeys.length,index=0;length>index;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],trackById=trackByIdFn(key,value,index),assertNotHasOwnProperty(trackById,"`track by` id"),lastBlockMap.hasOwnProperty(trackById))block=lastBlockMap[trackById],delete lastBlockMap[trackById],nextBlockMap[trackById]=block,nextBlockOrder[index]=block;else{if(nextBlockMap.hasOwnProperty(trackById))throw forEach(nextBlockOrder,function(block){block&&block.scope&&(lastBlockMap[block.id]=block)}),ngRepeatMinErr("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",expression,trackById,toJson(value));nextBlockOrder[index]={id:trackById},nextBlockMap[trackById]=!1}for(key in lastBlockMap)lastBlockMap.hasOwnProperty(key)&&(block=lastBlockMap[key],elementsToRemove=getBlockElements(block.clone),$animate.leave(elementsToRemove),forEach(elementsToRemove,function(element){element[NG_REMOVED]=!0}),block.scope.$destroy());for(index=0,length=collectionKeys.length;length>index;index++){if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],block=nextBlockOrder[index],nextBlockOrder[index-1]&&(previousNode=getBlockEnd(nextBlockOrder[index-1])),block.scope){childScope=block.scope,nextNode=previousNode;do nextNode=nextNode.nextSibling;while(nextNode&&nextNode[NG_REMOVED]);getBlockStart(block)!=nextNode&&$animate.move(getBlockElements(block.clone),null,jqLite(previousNode)),previousNode=getBlockEnd(block)}else childScope=$scope.$new();childScope[valueIdentifier]=value,keyIdentifier&&(childScope[keyIdentifier]=key),childScope.$index=index,childScope.$first=0===index,childScope.$last=index===arrayLength-1,childScope.$middle=!(childScope.$first||childScope.$last),childScope.$odd=!(childScope.$even=0===(1&index)),block.scope||$transclude(childScope,function(clone){clone[clone.length++]=document.createComment(" end ngRepeat: "+expression+" "),$animate.enter(clone,null,jqLite(previousNode)),previousNode=clone,block.scope=childScope,block.clone=clone,nextBlockMap[block.id]=block})}lastBlockMap=nextBlockMap})}}}],ngShowDirective=["$animate",function($animate){return function(scope,element,attr){scope.$watch(attr.ngShow,function(value){$animate[toBoolean(value)?"removeClass":"addClass"](element,"ng-hide")})}}],ngHideDirective=["$animate",function($animate){return function(scope,element,attr){scope.$watch(attr.ngHide,function(value){$animate[toBoolean(value)?"addClass":"removeClass"](element,"ng-hide")})}}],ngStyleDirective=ngDirective(function(scope,element,attr){scope.$watch(attr.ngStyle,function(newStyles,oldStyles){oldStyles&&newStyles!==oldStyles&&forEach(oldStyles,function(val,style){element.css(style,"")}),newStyles&&element.css(newStyles)},!0)}),ngSwitchDirective=["$animate",function($animate){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(scope,element,attr,ngSwitchController){var watchExpr=attr.ngSwitch||attr.on,selectedTranscludes=[],selectedElements=[],previousElements=[],selectedScopes=[];scope.$watch(watchExpr,function(value){var i,ii;for(i=0,ii=previousElements.length;ii>i;++i)previousElements[i].remove();for(previousElements.length=0,i=0,ii=selectedScopes.length;ii>i;++i){var selected=selectedElements[i];selectedScopes[i].$destroy(),previousElements[i]=selected,$animate.leave(selected,function(){previousElements.splice(i,1)})}selectedElements.length=0,selectedScopes.length=0,(selectedTranscludes=ngSwitchController.cases["!"+value]||ngSwitchController.cases["?"])&&(scope.$eval(attr.change),forEach(selectedTranscludes,function(selectedTransclude){var selectedScope=scope.$new();selectedScopes.push(selectedScope),selectedTransclude.transclude(selectedScope,function(caseElement){var anchor=selectedTransclude.element;selectedElements.push(caseElement),$animate.enter(caseElement,anchor.parent(),anchor)})}))})}}}],ngSwitchWhenDirective=ngDirective({transclude:"element",priority:800,require:"^ngSwitch",link:function(scope,element,attrs,ctrl,$transclude){ctrl.cases["!"+attrs.ngSwitchWhen]=ctrl.cases["!"+attrs.ngSwitchWhen]||[],ctrl.cases["!"+attrs.ngSwitchWhen].push({transclude:$transclude,element:element})}}),ngSwitchDefaultDirective=ngDirective({transclude:"element",priority:800,require:"^ngSwitch",link:function(scope,element,attr,ctrl,$transclude){ctrl.cases["?"]=ctrl.cases["?"]||[],ctrl.cases["?"].push({transclude:$transclude,element:element})}}),ngTranscludeDirective=ngDirective({link:function($scope,$element,$attrs,controller,$transclude){if(!$transclude)throw minErr("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag($element));$transclude(function(clone){$element.empty(),$element.append(clone)})}}),scriptDirective=["$templateCache",function($templateCache){return{restrict:"E",terminal:!0,compile:function(element,attr){if("text/ng-template"==attr.type){var templateUrl=attr.id,text=element[0].text;$templateCache.put(templateUrl,text)}}}}],ngOptionsMinErr=minErr("ngOptions"),ngOptionsDirective=valueFn({terminal:!0}),selectDirective=["$compile","$parse",function($compile,$parse){var NG_OPTIONS_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,nullModelCtrl={$setViewValue:noop};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function($element,$scope,$attrs){var nullOption,unknownOption,self=this,optionsMap={},ngModelCtrl=nullModelCtrl;self.databound=$attrs.ngModel,self.init=function(ngModelCtrl_,nullOption_,unknownOption_){ngModelCtrl=ngModelCtrl_,nullOption=nullOption_,unknownOption=unknownOption_},self.addOption=function(value){assertNotHasOwnProperty(value,'"option value"'),optionsMap[value]=!0,ngModelCtrl.$viewValue==value&&($element.val(value),unknownOption.parent()&&unknownOption.remove())},self.removeOption=function(value){this.hasOption(value)&&(delete optionsMap[value],ngModelCtrl.$viewValue==value&&this.renderUnknownOption(value))},self.renderUnknownOption=function(val){var unknownVal="? "+hashKey(val)+" ?";unknownOption.val(unknownVal),$element.prepend(unknownOption),$element.val(unknownVal),unknownOption.prop("selected",!0)},self.hasOption=function(value){return optionsMap.hasOwnProperty(value)},$scope.$on("$destroy",function(){self.renderUnknownOption=noop})}],link:function(scope,element,attr,ctrls){function setupAsSingle(scope,selectElement,ngModelCtrl,selectCtrl){ngModelCtrl.$render=function(){var viewValue=ngModelCtrl.$viewValue;selectCtrl.hasOption(viewValue)?(unknownOption.parent()&&unknownOption.remove(),selectElement.val(viewValue),""===viewValue&&emptyOption.prop("selected",!0)):isUndefined(viewValue)&&emptyOption?selectElement.val(""):selectCtrl.renderUnknownOption(viewValue)},selectElement.on("change",function(){scope.$apply(function(){unknownOption.parent()&&unknownOption.remove(),ngModelCtrl.$setViewValue(selectElement.val())})})}function setupAsMultiple(scope,selectElement,ctrl){var lastView;ctrl.$render=function(){var items=new HashMap(ctrl.$viewValue);forEach(selectElement.find("option"),function(option){option.selected=isDefined(items.get(option.value))})},scope.$watch(function(){equals(lastView,ctrl.$viewValue)||(lastView=shallowCopy(ctrl.$viewValue),ctrl.$render())}),selectElement.on("change",function(){scope.$apply(function(){var array=[];forEach(selectElement.find("option"),function(option){option.selected&&array.push(option.value)}),ctrl.$setViewValue(array)})})}function setupAsOptions(scope,selectElement,ctrl){function getSelectedSet(){var selectedSet=!1;if(multiple){var modelValue=ctrl.$modelValue;if(trackFn&&isArray(modelValue)){selectedSet=new HashMap([]);for(var locals={},trackIndex=0;trackIndex<modelValue.length;trackIndex++)locals[valueName]=modelValue[trackIndex],selectedSet.put(trackFn(scope,locals),modelValue[trackIndex])}else selectedSet=new HashMap(modelValue)}return selectedSet}function render(){var optionGroupName,optionGroup,option,existingParent,existingOptions,existingOption,key,groupLength,length,groupIndex,index,selected,lastElement,element,label,optionGroups={"":[]},optionGroupNames=[""],modelValue=ctrl.$modelValue,values=valuesFn(scope)||[],keys=keyName?sortedKeys(values):values,locals={},selectedSet=getSelectedSet();for(index=0;length=keys.length,length>index;index++){if(key=index,keyName){if(key=keys[index],"$"===key.charAt(0))continue;locals[keyName]=key}if(locals[valueName]=values[key],optionGroupName=groupByFn(scope,locals)||"",(optionGroup=optionGroups[optionGroupName])||(optionGroup=optionGroups[optionGroupName]=[],optionGroupNames.push(optionGroupName)),multiple)selected=isDefined(selectedSet.remove(trackFn?trackFn(scope,locals):valueFn(scope,locals)));else{if(trackFn){var modelCast={};modelCast[valueName]=modelValue,selected=trackFn(scope,modelCast)===trackFn(scope,locals)}else selected=modelValue===valueFn(scope,locals);selectedSet=selectedSet||selected}label=displayFn(scope,locals),label=isDefined(label)?label:"",optionGroup.push({id:trackFn?trackFn(scope,locals):keyName?keys[index]:index,label:label,selected:selected})}for(multiple||(nullOption||null===modelValue?optionGroups[""].unshift({id:"",label:"",selected:!selectedSet}):selectedSet||optionGroups[""].unshift({id:"?",label:"",selected:!0})),groupIndex=0,groupLength=optionGroupNames.length;groupLength>groupIndex;groupIndex++){for(optionGroupName=optionGroupNames[groupIndex],optionGroup=optionGroups[optionGroupName],optionGroupsCache.length<=groupIndex?(existingParent={element:optGroupTemplate.clone().attr("label",optionGroupName),label:optionGroup.label},existingOptions=[existingParent],optionGroupsCache.push(existingOptions),selectElement.append(existingParent.element)):(existingOptions=optionGroupsCache[groupIndex],existingParent=existingOptions[0],existingParent.label!=optionGroupName&&existingParent.element.attr("label",existingParent.label=optionGroupName)),lastElement=null,index=0,length=optionGroup.length;length>index;index++)option=optionGroup[index],(existingOption=existingOptions[index+1])?(lastElement=existingOption.element,existingOption.label!==option.label&&(lastElement.text(existingOption.label=option.label),lastElement.prop("label",existingOption.label)),existingOption.id!==option.id&&lastElement.val(existingOption.id=option.id),lastElement[0].selected!==option.selected&&(lastElement.prop("selected",existingOption.selected=option.selected),msie&&lastElement.prop("selected",existingOption.selected))):(""===option.id&&nullOption?element=nullOption:(element=optionTemplate.clone()).val(option.id).prop("selected",option.selected).attr("selected",option.selected).prop("label",option.label).text(option.label),existingOptions.push(existingOption={element:element,label:option.label,id:option.id,selected:option.selected}),selectCtrl.addOption(option.label,element),lastElement?lastElement.after(element):existingParent.element.append(element),lastElement=element);for(index++;existingOptions.length>index;)option=existingOptions.pop(),selectCtrl.removeOption(option.label),option.element.remove()}for(;optionGroupsCache.length>groupIndex;)optionGroupsCache.pop()[0].element.remove()}var match;if(!(match=optionsExp.match(NG_OPTIONS_REGEXP)))throw ngOptionsMinErr("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",optionsExp,startingTag(selectElement));var displayFn=$parse(match[2]||match[1]),valueName=match[4]||match[6],keyName=match[5],groupByFn=$parse(match[3]||""),valueFn=$parse(match[2]?match[1]:valueName),valuesFn=$parse(match[7]),track=match[8],trackFn=track?$parse(match[8]):null,optionGroupsCache=[[{element:selectElement,label:""}]];nullOption&&($compile(nullOption)(scope),nullOption.removeClass("ng-scope"),nullOption.remove()),selectElement.empty(),selectElement.on("change",function(){scope.$apply(function(){var optionGroup,key,value,optionElement,index,groupIndex,length,groupLength,trackIndex,collection=valuesFn(scope)||[],locals={};if(multiple){for(value=[],groupIndex=0,groupLength=optionGroupsCache.length;groupLength>groupIndex;groupIndex++)for(optionGroup=optionGroupsCache[groupIndex],index=1,length=optionGroup.length;length>index;index++)if((optionElement=optionGroup[index].element)[0].selected){if(key=optionElement.val(),keyName&&(locals[keyName]=key),trackFn)for(trackIndex=0;trackIndex<collection.length&&(locals[valueName]=collection[trackIndex],trackFn(scope,locals)!=key);trackIndex++);else locals[valueName]=collection[key];value.push(valueFn(scope,locals))}}else if(key=selectElement.val(),"?"==key)value=undefined;else if(""===key)value=null;else if(trackFn){for(trackIndex=0;trackIndex<collection.length;trackIndex++)if(locals[valueName]=collection[trackIndex],trackFn(scope,locals)==key){value=valueFn(scope,locals);break}}else locals[valueName]=collection[key],keyName&&(locals[keyName]=key),value=valueFn(scope,locals);ctrl.$setViewValue(value),render()})}),ctrl.$render=render,scope.$watchCollection(valuesFn,render),scope.$watchCollection(function(){var locals={},values=valuesFn(scope);if(values){for(var toDisplay=new Array(values.length),i=0,ii=values.length;ii>i;i++)locals[valueName]=values[i],toDisplay[i]=displayFn(scope,locals);return toDisplay}},render),multiple&&scope.$watchCollection(function(){return ctrl.$modelValue},render)}if(ctrls[1]){for(var emptyOption,selectCtrl=ctrls[0],ngModelCtrl=ctrls[1],multiple=attr.multiple,optionsExp=attr.ngOptions,nullOption=!1,optionTemplate=jqLite(document.createElement("option")),optGroupTemplate=jqLite(document.createElement("optgroup")),unknownOption=optionTemplate.clone(),i=0,children=element.children(),ii=children.length;ii>i;i++)if(""===children[i].value){emptyOption=nullOption=children.eq(i);break}selectCtrl.init(ngModelCtrl,nullOption,unknownOption),multiple&&(ngModelCtrl.$isEmpty=function(value){return!value||0===value.length}),optionsExp?setupAsOptions(scope,element,ngModelCtrl):multiple?setupAsMultiple(scope,element,ngModelCtrl):setupAsSingle(scope,element,ngModelCtrl,selectCtrl)}}}}],optionDirective=["$interpolate",function($interpolate){var nullSelectCtrl={addOption:noop,removeOption:noop};return{restrict:"E",priority:100,compile:function(element,attr){if(isUndefined(attr.value)){var interpolateFn=$interpolate(element.text(),!0);interpolateFn||attr.$set("value",element.text())}return function(scope,element,attr){var selectCtrlName="$selectController",parent=element.parent(),selectCtrl=parent.data(selectCtrlName)||parent.parent().data(selectCtrlName);selectCtrl&&selectCtrl.databound?element.prop("selected",!1):selectCtrl=nullSelectCtrl,interpolateFn?scope.$watch(interpolateFn,function(newVal,oldVal){attr.$set("value",newVal),newVal!==oldVal&&selectCtrl.removeOption(oldVal),selectCtrl.addOption(newVal)}):selectCtrl.addOption(attr.value),element.on("$destroy",function(){selectCtrl.removeOption(attr.value)})}}}}],styleDirective=valueFn({restrict:"E",terminal:!0});return window.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(bindJQuery(),publishExternalAPI(angular),void jqLite(document).ready(function(){angularInit(document,bootstrap)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>'),function(window,angular,undefined){"use strict";function $SanitizeProvider(){this.$get=["$$sanitizeUri",function($$sanitizeUri){return function(html){var buf=[];return htmlParser(html,htmlSanitizeWriter(buf,function(uri,isImage){return!/^unsafe/.test($$sanitizeUri(uri,isImage))})),buf.join("")}}]}function sanitizeText(chars){var buf=[],writer=htmlSanitizeWriter(buf,angular.noop);return writer.chars(chars),buf.join("")}function makeMap(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}function htmlParser(html,handler){function parseStartTag(tag,tagName,rest,unary){if(tagName=angular.lowercase(tagName),blockElements[tagName])for(;stack.last()&&inlineElements[stack.last()];)parseEndTag("",stack.last());optionalEndTagElements[tagName]&&stack.last()==tagName&&parseEndTag("",tagName),unary=voidElements[tagName]||!!unary,unary||stack.push(tagName);var attrs={};rest.replace(ATTR_REGEXP,function(match,name,doubleQuotedValue,singleQuotedValue,unquotedValue){var value=doubleQuotedValue||singleQuotedValue||unquotedValue||"";attrs[name]=decodeEntities(value)}),handler.start&&handler.start(tagName,attrs,unary)}function parseEndTag(tag,tagName){var i,pos=0;if(tagName=angular.lowercase(tagName))for(pos=stack.length-1;pos>=0&&stack[pos]!=tagName;pos--);if(pos>=0){for(i=stack.length-1;i>=pos;i--)handler.end&&handler.end(stack[i]);stack.length=pos}}"string"!=typeof html&&(html=null===html||"undefined"==typeof html?"":""+html);var index,chars,match,text,stack=[],last=html;for(stack.last=function(){return stack[stack.length-1]};html;){if(text="",chars=!0,stack.last()&&specialElements[stack.last()]?(html=html.replace(new RegExp("([^]*)<\\s*\\/\\s*"+stack.last()+"[^>]*>","i"),function(all,text){return text=text.replace(COMMENT_REGEXP,"$1").replace(CDATA_REGEXP,"$1"),handler.chars&&handler.chars(decodeEntities(text)),""}),parseEndTag("",stack.last())):(0===html.indexOf("<!--")?(index=html.indexOf("--",4),index>=0&&html.lastIndexOf("-->",index)===index&&(handler.comment&&handler.comment(html.substring(4,index)),html=html.substring(index+3),chars=!1)):DOCTYPE_REGEXP.test(html)?(match=html.match(DOCTYPE_REGEXP),match&&(html=html.replace(match[0],""),chars=!1)):BEGING_END_TAGE_REGEXP.test(html)?(match=html.match(END_TAG_REGEXP),match&&(html=html.substring(match[0].length),match[0].replace(END_TAG_REGEXP,parseEndTag),chars=!1)):BEGIN_TAG_REGEXP.test(html)&&(match=html.match(START_TAG_REGEXP),match?(match[4]&&(html=html.substring(match[0].length),match[0].replace(START_TAG_REGEXP,parseStartTag)),chars=!1):(text+="<",html=html.substring(1))),chars&&(index=html.indexOf("<"),text+=0>index?html:html.substring(0,index),html=0>index?"":html.substring(index),handler.chars&&handler.chars(decodeEntities(text)))),html==last)throw $sanitizeMinErr("badparse","The sanitizer was unable to parse the following block of html: {0}",html);last=html}parseEndTag()}function decodeEntities(value){if(!value)return"";var parts=spaceRe.exec(value),spaceBefore=parts[1],spaceAfter=parts[3],content=parts[2];return content&&(hiddenPre.innerHTML=content.replace(/</g,"&lt;"),content="textContent"in hiddenPre?hiddenPre.textContent:hiddenPre.innerText),spaceBefore+content+spaceAfter}function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,function(value){var hi=value.charCodeAt(0),low=value.charCodeAt(1);return"&#"+(1024*(hi-55296)+(low-56320)+65536)+";"}).replace(NON_ALPHANUMERIC_REGEXP,function(value){var c=value.charCodeAt(0);return 8>=c||11==c||12==c||c>=14&&159>=c||173==c||c>=1536&&1540>=c||1807==c||6068==c||6069==c||c>=8204&&8207>=c||c>=8232&&8239>=c||c>=8288&&8303>=c||65279==c||c>=65520&&65535>=c?"&#"+c+";":value}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function validStyles(styleAttr){var allowedStyles=[],result="",styleArray=styleAttr.split(";");return angular.forEach(styleArray,function(value){var v=value.split(":");if(2==v.length){var key=trim(angular.lowercase(v[0])),value=trim(angular.lowercase(v[1]));(("color"===key||"background-color"===key)&&(value.match(/^rgb\([0-9%,\. ]*\)$/i)||value.match(/^rgba\([0-9%,\. ]*\)$/i)||value.match(/^hsl\([0-9%,\. ]*\)$/i)||value.match(/^hsla\([0-9%,\. ]*\)$/i)||value.match(/^#[0-9a-f]{3,6}$/i)||value.match(/^[a-z]*$/i))||("text-align"===key||"text-align-last"===key)&&("left"===value||"right"===value||"center"===value||"justify"===value)||"float"===key&&("left"===value||"right"===value||"none"===value)||("width"===key||"height"===key||"max-height"===key||"max-width"===key||"min-height"===key||"min-width"===key||"line-height"===key)&&value.match(/[0-9\.]*(px|em|rem|%)/)||("padding-left"===key||"padding-right"===key||"padding-top"===key||"padding-bottom"===key||"margin-left"===key||"margin-right"===key||"margin-top"===key||"margin-bottom"===key)&&value.match(/-?[0-9\.]*(px|em|rem|%)/)||("padding"===key||"margin"===key)&&value.match(/-?[0-9\.]*(px|em|rem|%)( -?[0-9\.]*(px|em|rem|%))?( -?[0-9\.]*(px|em|rem|%))?( -?[0-9\.]*(px|em|rem|%))?/)||"direction"===key&&value.match(/^ltr|rtl|initial|inherit$/)||-1!==allowedStyles.indexOf(key))&&(result+=key+": "+value+";")}}),result}function validCustomTag(tag,attrs,lkey,value){return"img"===tag&&attrs["ta-insert-video"]&&("ta-insert-video"===lkey||"allowfullscreen"===lkey||"frameborder"===lkey||"contenteditable"===lkey&&"false"===value)?!0:"div"!==tag&&"span"!==tag||"ta-insert-token"!==lkey?"a"===tag&&"ta-insert-button"===lkey?!0:!1:!0}function htmlSanitizeWriter(buf,uriValidator){var ignore=!1,out=angular.bind(buf,buf.push);return{start:function(tag,attrs,unary){tag=angular.lowercase(tag),!ignore&&specialElements[tag]&&(ignore=tag),ignore||validElements[tag]!==!0||(out("<"),out(tag),angular.forEach(attrs,function(value,key){var lkey=angular.lowercase(key),isImage="img"===tag&&"src"===lkey||"background"===lkey;("style"===lkey&&""!==(value=validStyles(value))||validCustomTag(tag,attrs,lkey,value)||validAttrs[lkey]===!0&&(uriAttrs[lkey]!==!0||uriValidator(value,isImage)))&&(out(" "),out(key),out('="'),out(encodeEntities(value)),out('"'))}),out(unary?"/>":">"))},end:function(tag){tag=angular.lowercase(tag),ignore||validElements[tag]!==!0||(out("</"),out(tag),out(">")),tag==ignore&&(ignore=!1)},chars:function(chars){ignore||out(encodeEntities(chars))}}}var $sanitizeMinErr=angular.$$minErr("$sanitize"),START_TAG_REGEXP=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,END_TAG_REGEXP=/^<\/\s*([\w:-]+)[^>]*>/,ATTR_REGEXP=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,BEGIN_TAG_REGEXP=/^</,BEGING_END_TAGE_REGEXP=/^<\//,COMMENT_REGEXP=/<!--(.*?)-->/g,DOCTYPE_REGEXP=/<!DOCTYPE([^>]*?)>/i,CDATA_REGEXP=/<!\[CDATA\[(.*?)]]>/g,SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~| |!])/g,voidElements=makeMap("area,br,col,hr,img,wbr"),optionalEndTagBlockElements=makeMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=makeMap("rp,rt"),optionalEndTagElements=angular.extend({},optionalEndTagInlineElements,optionalEndTagBlockElements),blockElements=angular.extend({},optionalEndTagBlockElements,makeMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),inlineElements=angular.extend({},optionalEndTagInlineElements,makeMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),svgElements=makeMap("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),specialElements=makeMap("script,style"),validElements=angular.extend({},voidElements,blockElements,inlineElements,optionalEndTagElements,svgElements),uriAttrs=makeMap("background,cite,href,longdesc,src,usemap,xlink:href"),htmlAttrs=makeMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,id,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),svgAttrs=makeMap("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),validAttrs=angular.extend({},uriAttrs,svgAttrs,htmlAttrs),hiddenPre=document.createElement("pre"),spaceRe=/^(\s*)([\s\S]*?)(\s*)$/,trim=function(){return String.prototype.trim?function(value){return angular.isString(value)?value.trim():value}:function(value){return angular.isString(value)?value.replace(/^\s\s*/,"").replace(/\s\s*$/,""):value}}();angular.module("ngSanitize",[]).provider("$sanitize",$SanitizeProvider),angular.module("ngSanitize").filter("linky",["$sanitize",function($sanitize){var LINKY_URL_REGEXP=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/,MAILTO_REGEXP=/^mailto:/;return function(text,target){function addText(text){text&&html.push(sanitizeText(text))}function addLink(url,text){html.push("<a "),angular.isDefined(target)&&html.push('target="',target,'" '),html.push('href="',url.replace(/"/g,"&quot;"),'">'),addText(text),html.push("</a>")}if(!text)return text;for(var match,url,i,raw=text,html=[];match=raw.match(LINKY_URL_REGEXP);)url=match[0],match[2]||match[4]||(url=(match[3]?"http://":"mailto:")+url),i=match.index,addText(raw.substr(0,i)),addLink(url,match[0].replace(MAILTO_REGEXP,"")),raw=raw.substring(i+match[0].length);return addText(raw),$sanitize(html.join(""))}}])}(window,window.angular),/**
 * Rangy, a cross-browser JavaScript range and selection library
 * https://github.com/timdown/rangy
 *
 * Copyright 2015, Tim Down
 * Licensed under the MIT license.
 * Version: 1.3.0
 * Build date: 10 May 2015
 */
function(factory,root){"function"==typeof define&&define.amd?define(factory):"undefined"!=typeof module&&"object"==typeof exports?module.exports=factory():root.rangy=factory()}(function(){function isHostMethod(o,p){var t=typeof o[p];return t==FUNCTION||!(t!=OBJECT||!o[p])||"unknown"==t}function isHostObject(o,p){return!(typeof o[p]!=OBJECT||!o[p])}function isHostProperty(o,p){return typeof o[p]!=UNDEFINED}function createMultiplePropertyTest(testFunc){return function(o,props){for(var i=props.length;i--;)if(!testFunc(o,props[i]))return!1;return!0}}function isTextRange(range){return range&&areHostMethods(range,textRangeMethods)&&areHostProperties(range,textRangeProperties)}function getBody(doc){return isHostObject(doc,"body")?doc.body:doc.getElementsByTagName("body")[0]}function consoleLog(msg){typeof console!=UNDEFINED&&isHostMethod(console,"log")&&console.log(msg)}function alertOrLog(msg,shouldAlert){isBrowser&&shouldAlert?alert(msg):consoleLog(msg)}function fail(reason){api.initialized=!0,api.supported=!1,alertOrLog("Rangy is not supported in this environment. Reason: "+reason,api.config.alertOnFail)}function warn(msg){alertOrLog("Rangy warning: "+msg,api.config.alertOnWarn)}function getErrorDesc(ex){return ex.message||ex.description||String(ex)}function init(){if(isBrowser&&!api.initialized){var testRange,implementsDomRange=!1,implementsTextRange=!1;isHostMethod(document,"createRange")&&(testRange=document.createRange(),areHostMethods(testRange,domRangeMethods)&&areHostProperties(testRange,domRangeProperties)&&(implementsDomRange=!0));var body=getBody(document);if(!body||"body"!=body.nodeName.toLowerCase())return void fail("No body element found");if(body&&isHostMethod(body,"createTextRange")&&(testRange=body.createTextRange(),isTextRange(testRange)&&(implementsTextRange=!0)),!implementsDomRange&&!implementsTextRange)return void fail("Neither Range nor TextRange are available");api.initialized=!0,api.features={implementsDomRange:implementsDomRange,implementsTextRange:implementsTextRange};var module,errorMessage;for(var moduleName in modules)(module=modules[moduleName])instanceof Module&&module.init(module,api);for(var i=0,len=initListeners.length;len>i;++i)try{initListeners[i](api)}catch(ex){errorMessage="Rangy init listener threw an exception. Continuing. Detail: "+getErrorDesc(ex),consoleLog(errorMessage)}}}function deprecationNotice(deprecated,replacement,module){module&&(deprecated+=" in module "+module.name),api.warn("DEPRECATED: "+deprecated+" is deprecated. Please use "+replacement+" instead.")}function createAliasForDeprecatedMethod(owner,deprecated,replacement,module){owner[deprecated]=function(){return deprecationNotice(deprecated,replacement,module),owner[replacement].apply(owner,util.toArray(arguments))}}function shim(win){win=win||window,init();for(var i=0,len=shimListeners.length;len>i;++i)shimListeners[i](win)}function Module(name,dependencies,initializer){this.name=name,this.dependencies=dependencies,this.initialized=!1,this.supported=!1,this.initializer=initializer}function createModule(name,dependencies,initFunc){var newModule=new Module(name,dependencies,function(module){if(!module.initialized){module.initialized=!0;try{initFunc(api,module),module.supported=!0}catch(ex){var errorMessage="Module '"+name+"' failed to load: "+getErrorDesc(ex);consoleLog(errorMessage),ex.stack&&consoleLog(ex.stack)}}});return modules[name]=newModule,newModule}function RangePrototype(){}function SelectionPrototype(){}var OBJECT="object",FUNCTION="function",UNDEFINED="undefined",domRangeProperties=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],domRangeMethods=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],textRangeProperties=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],textRangeMethods=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],areHostMethods=createMultiplePropertyTest(isHostMethod),areHostObjects=createMultiplePropertyTest(isHostObject),areHostProperties=createMultiplePropertyTest(isHostProperty),forEach=[].forEach?function(arr,func){arr.forEach(func)}:function(arr,func){for(var i=0,len=arr.length;len>i;++i)func(arr[i],i)},modules={},isBrowser=typeof window!=UNDEFINED&&typeof document!=UNDEFINED,util={isHostMethod:isHostMethod,isHostObject:isHostObject,isHostProperty:isHostProperty,areHostMethods:areHostMethods,areHostObjects:areHostObjects,areHostProperties:areHostProperties,isTextRange:isTextRange,getBody:getBody,forEach:forEach},api={version:"1.3.0",initialized:!1,isBrowser:isBrowser,supported:!0,util:util,features:{},modules:modules,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:!1}};api.fail=fail,api.warn=warn;var extend;({}).hasOwnProperty?(util.extend=extend=function(obj,props,deep){var o,p;for(var i in props)props.hasOwnProperty(i)&&(o=obj[i],p=props[i],deep&&null!==o&&"object"==typeof o&&null!==p&&"object"==typeof p&&extend(o,p,!0),obj[i]=p);return props.hasOwnProperty("toString")&&(obj.toString=props.toString),obj},util.createOptions=function(optionsParam,defaults){var options={};return extend(options,defaults),optionsParam&&extend(options,optionsParam),options}):fail("hasOwnProperty not supported"),isBrowser||fail("Rangy can only run in a browser"),function(){var toArray;if(isBrowser){var el=document.createElement("div");el.appendChild(document.createElement("span"));var slice=[].slice;try{1==slice.call(el.childNodes,0)[0].nodeType&&(toArray=function(arrayLike){return slice.call(arrayLike,0)})}catch(e){}}toArray||(toArray=function(arrayLike){for(var arr=[],i=0,len=arrayLike.length;len>i;++i)arr[i]=arrayLike[i];return arr}),util.toArray=toArray}();var addListener;isBrowser&&(isHostMethod(document,"addEventListener")?addListener=function(obj,eventType,listener){obj.addEventListener(eventType,listener,!1)}:isHostMethod(document,"attachEvent")?addListener=function(obj,eventType,listener){obj.attachEvent("on"+eventType,listener)}:fail("Document does not have required addEventListener or attachEvent method"),util.addListener=addListener);var initListeners=[];util.deprecationNotice=deprecationNotice,util.createAliasForDeprecatedMethod=createAliasForDeprecatedMethod,api.init=init,api.addInitListener=function(listener){api.initialized?listener(api):initListeners.push(listener)};var shimListeners=[];api.addShimListener=function(listener){shimListeners.push(listener)},isBrowser&&(api.shim=api.createMissingNativeApi=shim,createAliasForDeprecatedMethod(api,"createMissingNativeApi","shim")),Module.prototype={init:function(){for(var requiredModule,moduleName,requiredModuleNames=this.dependencies||[],i=0,len=requiredModuleNames.length;len>i;++i){if(moduleName=requiredModuleNames[i],requiredModule=modules[moduleName],!(requiredModule&&requiredModule instanceof Module))throw new Error("required module '"+moduleName+"' not found");if(requiredModule.init(),!requiredModule.supported)throw new Error("required module '"+moduleName+"' not supported")}this.initializer(this)},fail:function(reason){throw this.initialized=!0,this.supported=!1,new Error(reason)},warn:function(msg){api.warn("Module "+this.name+": "+msg)},deprecationNotice:function(deprecated,replacement){api.warn("DEPRECATED: "+deprecated+" in module "+this.name+" is deprecated. Please use "+replacement+" instead")},createError:function(msg){return new Error("Error in Rangy "+this.name+" module: "+msg)}},api.createModule=function(name){var initFunc,dependencies;2==arguments.length?(initFunc=arguments[1],dependencies=[]):(initFunc=arguments[2],dependencies=arguments[1]);var module=createModule(name,dependencies,initFunc);api.initialized&&api.supported&&module.init()},api.createCoreModule=function(name,dependencies,initFunc){createModule(name,dependencies,initFunc)},api.RangePrototype=RangePrototype,api.rangePrototype=new RangePrototype,api.selectionPrototype=new SelectionPrototype,api.createCoreModule("DomUtil",[],function(api,module){function isHtmlNamespace(node){var ns;return typeof node.namespaceURI==UNDEF||null===(ns=node.namespaceURI)||"http://www.w3.org/1999/xhtml"==ns}function parentElement(node){var parent=node.parentNode;return 1==parent.nodeType?parent:null}function getNodeIndex(node){for(var i=0;node=node.previousSibling;)++i;return i}function getNodeLength(node){switch(node.nodeType){case 7:case 10:return 0;case 3:case 8:return node.length;default:return node.childNodes.length}}function getCommonAncestor(node1,node2){var n,ancestors=[];for(n=node1;n;n=n.parentNode)ancestors.push(n);for(n=node2;n;n=n.parentNode)if(arrayContains(ancestors,n))return n;return null}function isAncestorOf(ancestor,descendant,selfIsAncestor){for(var n=selfIsAncestor?descendant:descendant.parentNode;n;){if(n===ancestor)return!0;n=n.parentNode}return!1}function isOrIsAncestorOf(ancestor,descendant){return isAncestorOf(ancestor,descendant,!0)}function getClosestAncestorIn(node,ancestor,selfIsAncestor){for(var p,n=selfIsAncestor?node:node.parentNode;n;){if(p=n.parentNode,p===ancestor)return n;n=p}return null}function isCharacterDataNode(node){var t=node.nodeType;return 3==t||4==t||8==t}function isTextOrCommentNode(node){if(!node)return!1;var t=node.nodeType;return 3==t||8==t}function insertAfter(node,precedingNode){var nextNode=precedingNode.nextSibling,parent=precedingNode.parentNode;return nextNode?parent.insertBefore(node,nextNode):parent.appendChild(node),node}function splitDataNode(node,index,positionsToPreserve){var newNode=node.cloneNode(!1);if(newNode.deleteData(0,index),node.deleteData(index,node.length-index),insertAfter(newNode,node),positionsToPreserve)for(var position,i=0;position=positionsToPreserve[i++];)position.node==node&&position.offset>index?(position.node=newNode,position.offset-=index):position.node==node.parentNode&&position.offset>getNodeIndex(node)&&++position.offset;return newNode}function getDocument(node){if(9==node.nodeType)return node;if(typeof node.ownerDocument!=UNDEF)return node.ownerDocument;if(typeof node.document!=UNDEF)return node.document;if(node.parentNode)return getDocument(node.parentNode);throw module.createError("getDocument: no document found for node")}function getWindow(node){var doc=getDocument(node);if(typeof doc.defaultView!=UNDEF)return doc.defaultView;if(typeof doc.parentWindow!=UNDEF)return doc.parentWindow;throw module.createError("Cannot get a window object for node")}function getIframeDocument(iframeEl){if(typeof iframeEl.contentDocument!=UNDEF)return iframeEl.contentDocument;if(typeof iframeEl.contentWindow!=UNDEF)return iframeEl.contentWindow.document;throw module.createError("getIframeDocument: No Document object found for iframe element")}function getIframeWindow(iframeEl){if(typeof iframeEl.contentWindow!=UNDEF)return iframeEl.contentWindow;if(typeof iframeEl.contentDocument!=UNDEF)return iframeEl.contentDocument.defaultView;throw module.createError("getIframeWindow: No Window object found for iframe element")}function isWindow(obj){return obj&&util.isHostMethod(obj,"setTimeout")&&util.isHostObject(obj,"document")}function getContentDocument(obj,module,methodName){var doc;if(obj?util.isHostProperty(obj,"nodeType")?doc=1==obj.nodeType&&"iframe"==obj.tagName.toLowerCase()?getIframeDocument(obj):getDocument(obj):isWindow(obj)&&(doc=obj.document):doc=document,!doc)throw module.createError(methodName+"(): Parameter must be a Window object or DOM node");return doc}function getRootContainer(node){for(var parent;parent=node.parentNode;)node=parent;return node}function comparePoints(nodeA,offsetA,nodeB,offsetB){var nodeC,root,childA,childB,n;if(nodeA==nodeB)return offsetA===offsetB?0:offsetB>offsetA?-1:1;if(nodeC=getClosestAncestorIn(nodeB,nodeA,!0))return offsetA<=getNodeIndex(nodeC)?-1:1;if(nodeC=getClosestAncestorIn(nodeA,nodeB,!0))return getNodeIndex(nodeC)<offsetB?-1:1;if(root=getCommonAncestor(nodeA,nodeB),!root)throw new Error("comparePoints error: nodes have no common ancestor");if(childA=nodeA===root?root:getClosestAncestorIn(nodeA,root,!0),childB=nodeB===root?root:getClosestAncestorIn(nodeB,root,!0),childA===childB)throw module.createError("comparePoints got to case 4 and childA and childB are the same!");for(n=root.firstChild;n;){if(n===childA)return-1;if(n===childB)return 1;n=n.nextSibling}}function isBrokenNode(node){var n;try{return n=node.parentNode,!1}catch(e){return!0}}function inspectNode(node){if(!node)return"[No node]";if(crashyTextNodes&&isBrokenNode(node))return"[Broken node]";if(isCharacterDataNode(node))return'"'+node.data+'"';if(1==node.nodeType){var idAttr=node.id?' id="'+node.id+'"':"";return"<"+node.nodeName+idAttr+">[index:"+getNodeIndex(node)+",length:"+node.childNodes.length+"]["+(node.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return node.nodeName}function fragmentFromNodeChildren(node){for(var child,fragment=getDocument(node).createDocumentFragment();child=node.firstChild;)fragment.appendChild(child);return fragment}function createTestElement(doc,html,contentEditable){var body=getBody(doc),el=doc.createElement("div");el.contentEditable=""+!!contentEditable,html&&(el.innerHTML=html);var bodyFirstChild=body.firstChild;return bodyFirstChild?body.insertBefore(el,bodyFirstChild):body.appendChild(el),el}function removeNode(node){return node.parentNode.removeChild(node)}function NodeIterator(root){this.root=root,this._next=root}function createIterator(root){return new NodeIterator(root)}function DomPosition(node,offset){this.node=node,this.offset=offset}function DOMException(codeName){this.code=this[codeName],this.codeName=codeName,this.message="DOMException: "+this.codeName}var UNDEF="undefined",util=api.util,getBody=util.getBody;util.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||module.fail("document missing a Node creation method"),util.isHostMethod(document,"getElementsByTagName")||module.fail("document missing getElementsByTagName method");var el=document.createElement("div");util.areHostMethods(el,["insertBefore","appendChild","cloneNode"]||!util.areHostObjects(el,["previousSibling","nextSibling","childNodes","parentNode"]))||module.fail("Incomplete Element implementation"),util.isHostProperty(el,"innerHTML")||module.fail("Element is missing innerHTML property");var textNode=document.createTextNode("test");util.areHostMethods(textNode,["splitText","deleteData","insertData","appendData","cloneNode"]||!util.areHostObjects(el,["previousSibling","nextSibling","childNodes","parentNode"])||!util.areHostProperties(textNode,["data"]))||module.fail("Incomplete Text Node implementation");var arrayContains=function(arr,val){for(var i=arr.length;i--;)if(arr[i]===val)return!0;return!1},crashyTextNodes=!1;!function(){var el=document.createElement("b");el.innerHTML="1";var textNode=el.firstChild;el.innerHTML="<br />",crashyTextNodes=isBrokenNode(textNode),api.features.crashyTextNodes=crashyTextNodes}();var getComputedStyleProperty;typeof window.getComputedStyle!=UNDEF?getComputedStyleProperty=function(el,propName){return getWindow(el).getComputedStyle(el,null)[propName]}:typeof document.documentElement.currentStyle!=UNDEF?getComputedStyleProperty=function(el,propName){return el.currentStyle?el.currentStyle[propName]:""}:module.fail("No means of obtaining computed style properties found"),NodeIterator.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var child,next,n=this._current=this._next;if(this._current)if(child=n.firstChild)this._next=child;else{for(next=null;n!==this.root&&!(next=n.nextSibling);)n=n.parentNode;this._next=next}return this._current},detach:function(){this._current=this._next=this.root=null}},DomPosition.prototype={equals:function(pos){return!!pos&&this.node===pos.node&&this.offset==pos.offset},inspect:function(){return"[DomPosition("+inspectNode(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},DOMException.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},DOMException.prototype.toString=function(){return this.message},api.dom={arrayContains:arrayContains,isHtmlNamespace:isHtmlNamespace,parentElement:parentElement,getNodeIndex:getNodeIndex,getNodeLength:getNodeLength,getCommonAncestor:getCommonAncestor,isAncestorOf:isAncestorOf,isOrIsAncestorOf:isOrIsAncestorOf,getClosestAncestorIn:getClosestAncestorIn,isCharacterDataNode:isCharacterDataNode,isTextOrCommentNode:isTextOrCommentNode,insertAfter:insertAfter,splitDataNode:splitDataNode,getDocument:getDocument,getWindow:getWindow,getIframeWindow:getIframeWindow,getIframeDocument:getIframeDocument,getBody:getBody,isWindow:isWindow,getContentDocument:getContentDocument,getRootContainer:getRootContainer,comparePoints:comparePoints,isBrokenNode:isBrokenNode,inspectNode:inspectNode,getComputedStyleProperty:getComputedStyleProperty,createTestElement:createTestElement,removeNode:removeNode,fragmentFromNodeChildren:fragmentFromNodeChildren,createIterator:createIterator,DomPosition:DomPosition},api.DOMException=DOMException}),api.createCoreModule("DomRange",["DomUtil"],function(api,module){function isNonTextPartiallySelected(node,range){return 3!=node.nodeType&&(isOrIsAncestorOf(node,range.startContainer)||isOrIsAncestorOf(node,range.endContainer))}function getRangeDocument(range){return range.document||getDocument(range.startContainer)}function getRangeRoot(range){return getRootContainer(range.startContainer)}function getBoundaryBeforeNode(node){return new DomPosition(node.parentNode,getNodeIndex(node))}function getBoundaryAfterNode(node){return new DomPosition(node.parentNode,getNodeIndex(node)+1)}function insertNodeAtPosition(node,n,o){var firstNodeInserted=11==node.nodeType?node.firstChild:node;return isCharacterDataNode(n)?o==n.length?dom.insertAfter(node,n):n.parentNode.insertBefore(node,0==o?n:splitDataNode(n,o)):o>=n.childNodes.length?n.appendChild(node):n.insertBefore(node,n.childNodes[o]),firstNodeInserted}function rangesIntersect(rangeA,rangeB,touchingIsIntersecting){if(assertRangeValid(rangeA),assertRangeValid(rangeB),getRangeDocument(rangeB)!=getRangeDocument(rangeA))throw new DOMException("WRONG_DOCUMENT_ERR");var startComparison=comparePoints(rangeA.startContainer,rangeA.startOffset,rangeB.endContainer,rangeB.endOffset),endComparison=comparePoints(rangeA.endContainer,rangeA.endOffset,rangeB.startContainer,rangeB.startOffset);return touchingIsIntersecting?0>=startComparison&&endComparison>=0:0>startComparison&&endComparison>0}function cloneSubtree(iterator){for(var partiallySelected,node,subIterator,frag=getRangeDocument(iterator.range).createDocumentFragment();node=iterator.next();){if(partiallySelected=iterator.isPartiallySelectedSubtree(),node=node.cloneNode(!partiallySelected),partiallySelected&&(subIterator=iterator.getSubtreeIterator(),node.appendChild(cloneSubtree(subIterator)),subIterator.detach()),10==node.nodeType)throw new DOMException("HIERARCHY_REQUEST_ERR");frag.appendChild(node)}return frag}function iterateSubtree(rangeIterator,func,iteratorState){var it,n;iteratorState=iteratorState||{stop:!1};for(var node,subRangeIterator;node=rangeIterator.next();)if(rangeIterator.isPartiallySelectedSubtree()){if(func(node)===!1)return void(iteratorState.stop=!0);if(subRangeIterator=rangeIterator.getSubtreeIterator(),iterateSubtree(subRangeIterator,func,iteratorState),subRangeIterator.detach(),iteratorState.stop)return}else for(it=dom.createIterator(node);n=it.next();)if(func(n)===!1)return void(iteratorState.stop=!0)}function deleteSubtree(iterator){for(var subIterator;iterator.next();)iterator.isPartiallySelectedSubtree()?(subIterator=iterator.getSubtreeIterator(),deleteSubtree(subIterator),subIterator.detach()):iterator.remove()}function extractSubtree(iterator){for(var node,subIterator,frag=getRangeDocument(iterator.range).createDocumentFragment();node=iterator.next();){if(iterator.isPartiallySelectedSubtree()?(node=node.cloneNode(!1),subIterator=iterator.getSubtreeIterator(),node.appendChild(extractSubtree(subIterator)),subIterator.detach()):iterator.remove(),10==node.nodeType)throw new DOMException("HIERARCHY_REQUEST_ERR");frag.appendChild(node)}return frag}function getNodesInRange(range,nodeTypes,filter){var regex,filterNodeTypes=!(!nodeTypes||!nodeTypes.length),filterExists=!!filter;filterNodeTypes&&(regex=new RegExp("^("+nodeTypes.join("|")+")$"));var nodes=[];return iterateSubtree(new RangeIterator(range,!1),function(node){if((!filterNodeTypes||regex.test(node.nodeType))&&(!filterExists||filter(node))){var sc=range.startContainer;if(node!=sc||!isCharacterDataNode(sc)||range.startOffset!=sc.length){var ec=range.endContainer;node==ec&&isCharacterDataNode(ec)&&0==range.endOffset||nodes.push(node)}}}),nodes}function inspect(range){var name="undefined"==typeof range.getName?"Range":range.getName();return"["+name+"("+dom.inspectNode(range.startContainer)+":"+range.startOffset+", "+dom.inspectNode(range.endContainer)+":"+range.endOffset+")]"}function RangeIterator(range,clonePartiallySelectedTextNodes){if(this.range=range,this.clonePartiallySelectedTextNodes=clonePartiallySelectedTextNodes,!range.collapsed){this.sc=range.startContainer,this.so=range.startOffset,this.ec=range.endContainer,this.eo=range.endOffset;var root=range.commonAncestorContainer;this.sc===this.ec&&isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==root||isCharacterDataNode(this.sc)?getClosestAncestorIn(this.sc,root,!0):this.sc.childNodes[this.so],this._last=this.ec!==root||isCharacterDataNode(this.ec)?getClosestAncestorIn(this.ec,root,!0):this.ec.childNodes[this.eo-1])}}function createAncestorFinder(nodeTypes){return function(node,selfIsAncestor){for(var t,n=selfIsAncestor?node:node.parentNode;n;){if(t=n.nodeType,arrayContains(nodeTypes,t))return n;n=n.parentNode}return null}}function assertNoDocTypeNotationEntityAncestor(node,allowSelf){if(getDocTypeNotationEntityAncestor(node,allowSelf))throw new DOMException("INVALID_NODE_TYPE_ERR")}function assertValidNodeType(node,invalidTypes){if(!arrayContains(invalidTypes,node.nodeType))throw new DOMException("INVALID_NODE_TYPE_ERR")}function assertValidOffset(node,offset){if(0>offset||offset>(isCharacterDataNode(node)?node.length:node.childNodes.length))throw new DOMException("INDEX_SIZE_ERR")}function assertSameDocumentOrFragment(node1,node2){if(getDocumentOrFragmentContainer(node1,!0)!==getDocumentOrFragmentContainer(node2,!0))throw new DOMException("WRONG_DOCUMENT_ERR")}function assertNodeNotReadOnly(node){if(getReadonlyAncestor(node,!0))throw new DOMException("NO_MODIFICATION_ALLOWED_ERR")}function assertNode(node,codeName){if(!node)throw new DOMException(codeName)}function isValidOffset(node,offset){return offset<=(isCharacterDataNode(node)?node.length:node.childNodes.length)}function isRangeValid(range){return!!range.startContainer&&!!range.endContainer&&!(crashyTextNodes&&(dom.isBrokenNode(range.startContainer)||dom.isBrokenNode(range.endContainer)))&&getRootContainer(range.startContainer)==getRootContainer(range.endContainer)&&isValidOffset(range.startContainer,range.startOffset)&&isValidOffset(range.endContainer,range.endOffset)}function assertRangeValid(range){if(!isRangeValid(range))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+range.inspect()+")")}function splitRangeBoundaries(range,positionsToPreserve){assertRangeValid(range);var sc=range.startContainer,so=range.startOffset,ec=range.endContainer,eo=range.endOffset,startEndSame=sc===ec;isCharacterDataNode(ec)&&eo>0&&eo<ec.length&&splitDataNode(ec,eo,positionsToPreserve),isCharacterDataNode(sc)&&so>0&&so<sc.length&&(sc=splitDataNode(sc,so,positionsToPreserve),startEndSame?(eo-=so,ec=sc):ec==sc.parentNode&&eo>=getNodeIndex(sc)&&eo++,so=0),range.setStartAndEnd(sc,so,ec,eo)}function rangeToHtml(range){assertRangeValid(range);var container=range.commonAncestorContainer.parentNode.cloneNode(!1);return container.appendChild(range.cloneContents()),container.innerHTML}function copyComparisonConstantsToObject(obj){obj.START_TO_START=s2s,obj.START_TO_END=s2e,obj.END_TO_END=e2e,obj.END_TO_START=e2s,obj.NODE_BEFORE=n_b,obj.NODE_AFTER=n_a,obj.NODE_BEFORE_AND_AFTER=n_b_a,obj.NODE_INSIDE=n_i}function copyComparisonConstants(constructor){copyComparisonConstantsToObject(constructor),copyComparisonConstantsToObject(constructor.prototype)}function createRangeContentRemover(remover,boundaryUpdater){return function(){assertRangeValid(this);var node,boundary,sc=this.startContainer,so=this.startOffset,root=this.commonAncestorContainer,iterator=new RangeIterator(this,!0);sc!==root&&(node=getClosestAncestorIn(sc,root,!0),boundary=getBoundaryAfterNode(node),sc=boundary.node,so=boundary.offset),iterateSubtree(iterator,assertNodeNotReadOnly),iterator.reset();var returnValue=remover(iterator);return iterator.detach(),boundaryUpdater(this,sc,so,sc,so),returnValue}}function createPrototypeRange(constructor,boundaryUpdater){function createBeforeAfterNodeSetter(isBefore,isStart){return function(node){assertValidNodeType(node,beforeAfterNodeTypes),assertValidNodeType(getRootContainer(node),rootContainerNodeTypes);var boundary=(isBefore?getBoundaryBeforeNode:getBoundaryAfterNode)(node);(isStart?setRangeStart:setRangeEnd)(this,boundary.node,boundary.offset)}}function setRangeStart(range,node,offset){var ec=range.endContainer,eo=range.endOffset;(node!==range.startContainer||offset!==range.startOffset)&&((getRootContainer(node)!=getRootContainer(ec)||1==comparePoints(node,offset,ec,eo))&&(ec=node,eo=offset),boundaryUpdater(range,node,offset,ec,eo))}function setRangeEnd(range,node,offset){var sc=range.startContainer,so=range.startOffset;(node!==range.endContainer||offset!==range.endOffset)&&((getRootContainer(node)!=getRootContainer(sc)||-1==comparePoints(node,offset,sc,so))&&(sc=node,so=offset),boundaryUpdater(range,sc,so,node,offset))}var F=function(){};F.prototype=api.rangePrototype,constructor.prototype=new F,util.extend(constructor.prototype,{setStart:function(node,offset){assertNoDocTypeNotationEntityAncestor(node,!0),assertValidOffset(node,offset),setRangeStart(this,node,offset)},setEnd:function(node,offset){assertNoDocTypeNotationEntityAncestor(node,!0),assertValidOffset(node,offset),setRangeEnd(this,node,offset)},setStartAndEnd:function(){var args=arguments,sc=args[0],so=args[1],ec=sc,eo=so;switch(args.length){case 3:eo=args[2];break;case 4:ec=args[2],eo=args[3]}boundaryUpdater(this,sc,so,ec,eo)},setBoundary:function(node,offset,isStart){this["set"+(isStart?"Start":"End")](node,offset)},setStartBefore:createBeforeAfterNodeSetter(!0,!0),setStartAfter:createBeforeAfterNodeSetter(!1,!0),setEndBefore:createBeforeAfterNodeSetter(!0,!1),setEndAfter:createBeforeAfterNodeSetter(!1,!1),collapse:function(isStart){assertRangeValid(this),isStart?boundaryUpdater(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):boundaryUpdater(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(node){assertNoDocTypeNotationEntityAncestor(node,!0),boundaryUpdater(this,node,0,node,getNodeLength(node))},selectNode:function(node){assertNoDocTypeNotationEntityAncestor(node,!1),assertValidNodeType(node,beforeAfterNodeTypes);var start=getBoundaryBeforeNode(node),end=getBoundaryAfterNode(node);boundaryUpdater(this,start.node,start.offset,end.node,end.offset)},extractContents:createRangeContentRemover(extractSubtree,boundaryUpdater),deleteContents:createRangeContentRemover(deleteSubtree,boundaryUpdater),canSurroundContents:function(){assertRangeValid(this),assertNodeNotReadOnly(this.startContainer),assertNodeNotReadOnly(this.endContainer);var iterator=new RangeIterator(this,!0),boundariesInvalid=iterator._first&&isNonTextPartiallySelected(iterator._first,this)||iterator._last&&isNonTextPartiallySelected(iterator._last,this);return iterator.detach(),!boundariesInvalid},splitBoundaries:function(){splitRangeBoundaries(this)},splitBoundariesPreservingPositions:function(positionsToPreserve){splitRangeBoundaries(this,positionsToPreserve)},normalizeBoundaries:function(){assertRangeValid(this);var sibling,sc=this.startContainer,so=this.startOffset,ec=this.endContainer,eo=this.endOffset,mergeForward=function(node){var sibling=node.nextSibling;sibling&&sibling.nodeType==node.nodeType&&(ec=node,eo=node.length,node.appendData(sibling.data),removeNode(sibling))},mergeBackward=function(node){var sibling=node.previousSibling;if(sibling&&sibling.nodeType==node.nodeType){sc=node;var nodeLength=node.length;if(so=sibling.length,node.insertData(0,sibling.data),removeNode(sibling),sc==ec)eo+=so,ec=sc;else if(ec==node.parentNode){var nodeIndex=getNodeIndex(node);eo==nodeIndex?(ec=node,eo=nodeLength):eo>nodeIndex&&eo--}}},normalizeStart=!0;if(isCharacterDataNode(ec))eo==ec.length?mergeForward(ec):0==eo&&(sibling=ec.previousSibling,sibling&&sibling.nodeType==ec.nodeType&&(eo=sibling.length,sc==ec&&(normalizeStart=!1),sibling.appendData(ec.data),removeNode(ec),ec=sibling));else{if(eo>0){var endNode=ec.childNodes[eo-1];endNode&&isCharacterDataNode(endNode)&&mergeForward(endNode)}normalizeStart=!this.collapsed}if(normalizeStart){if(isCharacterDataNode(sc))0==so?mergeBackward(sc):so==sc.length&&(sibling=sc.nextSibling,sibling&&sibling.nodeType==sc.nodeType&&(ec==sibling&&(ec=sc,eo+=sc.length),sc.appendData(sibling.data),removeNode(sibling)));else if(so<sc.childNodes.length){var startNode=sc.childNodes[so];startNode&&isCharacterDataNode(startNode)&&mergeBackward(startNode)}}else sc=ec,so=eo;boundaryUpdater(this,sc,so,ec,eo)},collapseToPoint:function(node,offset){assertNoDocTypeNotationEntityAncestor(node,!0),assertValidOffset(node,offset),this.setStartAndEnd(node,offset)}}),copyComparisonConstants(constructor)}function updateCollapsedAndCommonAncestor(range){range.collapsed=range.startContainer===range.endContainer&&range.startOffset===range.endOffset,range.commonAncestorContainer=range.collapsed?range.startContainer:dom.getCommonAncestor(range.startContainer,range.endContainer)}function updateBoundaries(range,startContainer,startOffset,endContainer,endOffset){range.startContainer=startContainer,range.startOffset=startOffset,range.endContainer=endContainer,range.endOffset=endOffset,range.document=dom.getDocument(startContainer),updateCollapsedAndCommonAncestor(range)}function Range(doc){this.startContainer=doc,this.startOffset=0,this.endContainer=doc,this.endOffset=0,this.document=doc,updateCollapsedAndCommonAncestor(this)}var dom=api.dom,util=api.util,DomPosition=dom.DomPosition,DOMException=api.DOMException,isCharacterDataNode=dom.isCharacterDataNode,getNodeIndex=dom.getNodeIndex,isOrIsAncestorOf=dom.isOrIsAncestorOf,getDocument=dom.getDocument,comparePoints=dom.comparePoints,splitDataNode=dom.splitDataNode,getClosestAncestorIn=dom.getClosestAncestorIn,getNodeLength=dom.getNodeLength,arrayContains=dom.arrayContains,getRootContainer=dom.getRootContainer,crashyTextNodes=api.features.crashyTextNodes,removeNode=dom.removeNode;RangeIterator.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var current=this._current=this._next;return current&&(this._next=current!==this._last?current.nextSibling:null,isCharacterDataNode(current)&&this.clonePartiallySelectedTextNodes&&(current===this.ec&&(current=current.cloneNode(!0)).deleteData(this.eo,current.length-this.eo),this._current===this.sc&&(current=current.cloneNode(!0)).deleteData(0,this.so))),current},remove:function(){var start,end,current=this._current;!isCharacterDataNode(current)||current!==this.sc&&current!==this.ec?current.parentNode&&removeNode(current):(start=current===this.sc?this.so:0,end=current===this.ec?this.eo:current.length,start!=end&&current.deleteData(start,end-start))},isPartiallySelectedSubtree:function(){var current=this._current;return isNonTextPartiallySelected(current,this.range)},getSubtreeIterator:function(){var subRange;if(this.isSingleCharacterDataNode)subRange=this.range.cloneRange(),subRange.collapse(!1);else{subRange=new Range(getRangeDocument(this.range));var current=this._current,startContainer=current,startOffset=0,endContainer=current,endOffset=getNodeLength(current);isOrIsAncestorOf(current,this.sc)&&(startContainer=this.sc,startOffset=this.so),isOrIsAncestorOf(current,this.ec)&&(endContainer=this.ec,
endOffset=this.eo),updateBoundaries(subRange,startContainer,startOffset,endContainer,endOffset)}return new RangeIterator(subRange,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var beforeAfterNodeTypes=[1,3,4,5,7,8,10],rootContainerNodeTypes=[2,9,11],readonlyNodeTypes=[5,6,10,12],insertableNodeTypes=[1,3,4,5,7,8,10,11],surroundNodeTypes=[1,3,4,5,7,8],getDocumentOrFragmentContainer=createAncestorFinder([9,11]),getReadonlyAncestor=createAncestorFinder(readonlyNodeTypes),getDocTypeNotationEntityAncestor=createAncestorFinder([6,10,12]),styleEl=document.createElement("style"),htmlParsingConforms=!1;try{styleEl.innerHTML="<b>x</b>",htmlParsingConforms=3==styleEl.firstChild.nodeType}catch(e){}api.features.htmlParsingConforms=htmlParsingConforms;var createContextualFragment=htmlParsingConforms?function(fragmentStr){var node=this.startContainer,doc=getDocument(node);if(!node)throw new DOMException("INVALID_STATE_ERR");var el=null;return 1==node.nodeType?el=node:isCharacterDataNode(node)&&(el=dom.parentElement(node)),el=null===el||"HTML"==el.nodeName&&dom.isHtmlNamespace(getDocument(el).documentElement)&&dom.isHtmlNamespace(el)?doc.createElement("body"):el.cloneNode(!1),el.innerHTML=fragmentStr,dom.fragmentFromNodeChildren(el)}:function(fragmentStr){var doc=getRangeDocument(this),el=doc.createElement("body");return el.innerHTML=fragmentStr,dom.fragmentFromNodeChildren(el)},rangeProperties=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],s2s=0,s2e=1,e2e=2,e2s=3,n_b=0,n_a=1,n_b_a=2,n_i=3;util.extend(api.rangePrototype,{compareBoundaryPoints:function(how,range){assertRangeValid(this),assertSameDocumentOrFragment(this.startContainer,range.startContainer);var nodeA,offsetA,nodeB,offsetB,prefixA=how==e2s||how==s2s?"start":"end",prefixB=how==s2e||how==s2s?"start":"end";return nodeA=this[prefixA+"Container"],offsetA=this[prefixA+"Offset"],nodeB=range[prefixB+"Container"],offsetB=range[prefixB+"Offset"],comparePoints(nodeA,offsetA,nodeB,offsetB)},insertNode:function(node){if(assertRangeValid(this),assertValidNodeType(node,insertableNodeTypes),assertNodeNotReadOnly(this.startContainer),isOrIsAncestorOf(node,this.startContainer))throw new DOMException("HIERARCHY_REQUEST_ERR");var firstNodeInserted=insertNodeAtPosition(node,this.startContainer,this.startOffset);this.setStartBefore(firstNodeInserted)},cloneContents:function(){assertRangeValid(this);var clone,frag;if(this.collapsed)return getRangeDocument(this).createDocumentFragment();if(this.startContainer===this.endContainer&&isCharacterDataNode(this.startContainer))return clone=this.startContainer.cloneNode(!0),clone.data=clone.data.slice(this.startOffset,this.endOffset),frag=getRangeDocument(this).createDocumentFragment(),frag.appendChild(clone),frag;var iterator=new RangeIterator(this,!0);return clone=cloneSubtree(iterator),iterator.detach(),clone},canSurroundContents:function(){assertRangeValid(this),assertNodeNotReadOnly(this.startContainer),assertNodeNotReadOnly(this.endContainer);var iterator=new RangeIterator(this,!0),boundariesInvalid=iterator._first&&isNonTextPartiallySelected(iterator._first,this)||iterator._last&&isNonTextPartiallySelected(iterator._last,this);return iterator.detach(),!boundariesInvalid},surroundContents:function(node){if(assertValidNodeType(node,surroundNodeTypes),!this.canSurroundContents())throw new DOMException("INVALID_STATE_ERR");var content=this.extractContents();if(node.hasChildNodes())for(;node.lastChild;)node.removeChild(node.lastChild);insertNodeAtPosition(node,this.startContainer,this.startOffset),node.appendChild(content),this.selectNode(node)},cloneRange:function(){assertRangeValid(this);for(var prop,range=new Range(getRangeDocument(this)),i=rangeProperties.length;i--;)prop=rangeProperties[i],range[prop]=this[prop];return range},toString:function(){assertRangeValid(this);var sc=this.startContainer;if(sc===this.endContainer&&isCharacterDataNode(sc))return 3==sc.nodeType||4==sc.nodeType?sc.data.slice(this.startOffset,this.endOffset):"";var textParts=[],iterator=new RangeIterator(this,!0);return iterateSubtree(iterator,function(node){(3==node.nodeType||4==node.nodeType)&&textParts.push(node.data)}),iterator.detach(),textParts.join("")},compareNode:function(node){assertRangeValid(this);var parent=node.parentNode,nodeIndex=getNodeIndex(node);if(!parent)throw new DOMException("NOT_FOUND_ERR");var startComparison=this.comparePoint(parent,nodeIndex),endComparison=this.comparePoint(parent,nodeIndex+1);return 0>startComparison?endComparison>0?n_b_a:n_b:endComparison>0?n_a:n_i},comparePoint:function(node,offset){return assertRangeValid(this),assertNode(node,"HIERARCHY_REQUEST_ERR"),assertSameDocumentOrFragment(node,this.startContainer),comparePoints(node,offset,this.startContainer,this.startOffset)<0?-1:comparePoints(node,offset,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:createContextualFragment,toHtml:function(){return rangeToHtml(this)},intersectsNode:function(node,touchingIsIntersecting){if(assertRangeValid(this),getRootContainer(node)!=getRangeRoot(this))return!1;var parent=node.parentNode,offset=getNodeIndex(node);if(!parent)return!0;var startComparison=comparePoints(parent,offset,this.endContainer,this.endOffset),endComparison=comparePoints(parent,offset+1,this.startContainer,this.startOffset);return touchingIsIntersecting?0>=startComparison&&endComparison>=0:0>startComparison&&endComparison>0},isPointInRange:function(node,offset){return assertRangeValid(this),assertNode(node,"HIERARCHY_REQUEST_ERR"),assertSameDocumentOrFragment(node,this.startContainer),comparePoints(node,offset,this.startContainer,this.startOffset)>=0&&comparePoints(node,offset,this.endContainer,this.endOffset)<=0},intersectsRange:function(range){return rangesIntersect(this,range,!1)},intersectsOrTouchesRange:function(range){return rangesIntersect(this,range,!0)},intersection:function(range){if(this.intersectsRange(range)){var startComparison=comparePoints(this.startContainer,this.startOffset,range.startContainer,range.startOffset),endComparison=comparePoints(this.endContainer,this.endOffset,range.endContainer,range.endOffset),intersectionRange=this.cloneRange();return-1==startComparison&&intersectionRange.setStart(range.startContainer,range.startOffset),1==endComparison&&intersectionRange.setEnd(range.endContainer,range.endOffset),intersectionRange}return null},union:function(range){if(this.intersectsOrTouchesRange(range)){var unionRange=this.cloneRange();return-1==comparePoints(range.startContainer,range.startOffset,this.startContainer,this.startOffset)&&unionRange.setStart(range.startContainer,range.startOffset),1==comparePoints(range.endContainer,range.endOffset,this.endContainer,this.endOffset)&&unionRange.setEnd(range.endContainer,range.endOffset),unionRange}throw new DOMException("Ranges do not intersect")},containsNode:function(node,allowPartial){return allowPartial?this.intersectsNode(node,!1):this.compareNode(node)==n_i},containsNodeContents:function(node){return this.comparePoint(node,0)>=0&&this.comparePoint(node,getNodeLength(node))<=0},containsRange:function(range){var intersection=this.intersection(range);return null!==intersection&&range.equals(intersection)},containsNodeText:function(node){var nodeRange=this.cloneRange();nodeRange.selectNode(node);var textNodes=nodeRange.getNodes([3]);if(textNodes.length>0){nodeRange.setStart(textNodes[0],0);var lastTextNode=textNodes.pop();return nodeRange.setEnd(lastTextNode,lastTextNode.length),this.containsRange(nodeRange)}return this.containsNodeContents(node)},getNodes:function(nodeTypes,filter){return assertRangeValid(this),getNodesInRange(this,nodeTypes,filter)},getDocument:function(){return getRangeDocument(this)},collapseBefore:function(node){this.setEndBefore(node),this.collapse(!1)},collapseAfter:function(node){this.setStartAfter(node),this.collapse(!0)},getBookmark:function(containerNode){var doc=getRangeDocument(this),preSelectionRange=api.createRange(doc);containerNode=containerNode||dom.getBody(doc),preSelectionRange.selectNodeContents(containerNode);var range=this.intersection(preSelectionRange),start=0,end=0;return range&&(preSelectionRange.setEnd(range.startContainer,range.startOffset),start=preSelectionRange.toString().length,end=start+range.toString().length),{start:start,end:end,containerNode:containerNode}},moveToBookmark:function(bookmark){var containerNode=bookmark.containerNode,charIndex=0;this.setStart(containerNode,0),this.collapse(!0);for(var node,nextCharIndex,i,childNodes,nodeStack=[containerNode],foundStart=!1,stop=!1;!stop&&(node=nodeStack.pop());)if(3==node.nodeType)nextCharIndex=charIndex+node.length,!foundStart&&bookmark.start>=charIndex&&bookmark.start<=nextCharIndex&&(this.setStart(node,bookmark.start-charIndex),foundStart=!0),foundStart&&bookmark.end>=charIndex&&bookmark.end<=nextCharIndex&&(this.setEnd(node,bookmark.end-charIndex),stop=!0),charIndex=nextCharIndex;else for(childNodes=node.childNodes,i=childNodes.length;i--;)nodeStack.push(childNodes[i])},getName:function(){return"DomRange"},equals:function(range){return Range.rangesEqual(this,range)},isValid:function(){return isRangeValid(this)},inspect:function(){return inspect(this)},detach:function(){}}),createPrototypeRange(Range,updateBoundaries),util.extend(Range,{rangeProperties:rangeProperties,RangeIterator:RangeIterator,copyComparisonConstants:copyComparisonConstants,createPrototypeRange:createPrototypeRange,inspect:inspect,toHtml:rangeToHtml,getRangeDocument:getRangeDocument,rangesEqual:function(r1,r2){return r1.startContainer===r2.startContainer&&r1.startOffset===r2.startOffset&&r1.endContainer===r2.endContainer&&r1.endOffset===r2.endOffset}}),api.DomRange=Range}),api.createCoreModule("WrappedRange",["DomRange"],function(api,module){var WrappedRange,WrappedTextRange,dom=api.dom,util=api.util,DomPosition=dom.DomPosition,DomRange=api.DomRange,getBody=dom.getBody,getContentDocument=dom.getContentDocument,isCharacterDataNode=dom.isCharacterDataNode;if(api.features.implementsDomRange&&!function(){function updateRangeProperties(range){for(var prop,i=rangeProperties.length;i--;)prop=rangeProperties[i],range[prop]=range.nativeRange[prop];range.collapsed=range.startContainer===range.endContainer&&range.startOffset===range.endOffset}function updateNativeRange(range,startContainer,startOffset,endContainer,endOffset){var startMoved=range.startContainer!==startContainer||range.startOffset!=startOffset,endMoved=range.endContainer!==endContainer||range.endOffset!=endOffset,nativeRangeDifferent=!range.equals(range.nativeRange);(startMoved||endMoved||nativeRangeDifferent)&&(range.setEnd(endContainer,endOffset),range.setStart(startContainer,startOffset))}var rangeProto,createBeforeAfterNodeSetter,rangeProperties=DomRange.rangeProperties;WrappedRange=function(range){if(!range)throw module.createError("WrappedRange: Range must be specified");this.nativeRange=range,updateRangeProperties(this)},DomRange.createPrototypeRange(WrappedRange,updateNativeRange),rangeProto=WrappedRange.prototype,rangeProto.selectNode=function(node){this.nativeRange.selectNode(node),updateRangeProperties(this)},rangeProto.cloneContents=function(){return this.nativeRange.cloneContents()},rangeProto.surroundContents=function(node){this.nativeRange.surroundContents(node),updateRangeProperties(this)},rangeProto.collapse=function(isStart){this.nativeRange.collapse(isStart),updateRangeProperties(this)},rangeProto.cloneRange=function(){return new WrappedRange(this.nativeRange.cloneRange())},rangeProto.refresh=function(){updateRangeProperties(this)},rangeProto.toString=function(){return this.nativeRange.toString()};var testTextNode=document.createTextNode("test");getBody(document).appendChild(testTextNode);var range=document.createRange();range.setStart(testTextNode,0),range.setEnd(testTextNode,0);try{range.setStart(testTextNode,1),rangeProto.setStart=function(node,offset){this.nativeRange.setStart(node,offset),updateRangeProperties(this)},rangeProto.setEnd=function(node,offset){this.nativeRange.setEnd(node,offset),updateRangeProperties(this)},createBeforeAfterNodeSetter=function(name){return function(node){this.nativeRange[name](node),updateRangeProperties(this)}}}catch(ex){rangeProto.setStart=function(node,offset){try{this.nativeRange.setStart(node,offset)}catch(ex){this.nativeRange.setEnd(node,offset),this.nativeRange.setStart(node,offset)}updateRangeProperties(this)},rangeProto.setEnd=function(node,offset){try{this.nativeRange.setEnd(node,offset)}catch(ex){this.nativeRange.setStart(node,offset),this.nativeRange.setEnd(node,offset)}updateRangeProperties(this)},createBeforeAfterNodeSetter=function(name,oppositeName){return function(node){try{this.nativeRange[name](node)}catch(ex){this.nativeRange[oppositeName](node),this.nativeRange[name](node)}updateRangeProperties(this)}}}rangeProto.setStartBefore=createBeforeAfterNodeSetter("setStartBefore","setEndBefore"),rangeProto.setStartAfter=createBeforeAfterNodeSetter("setStartAfter","setEndAfter"),rangeProto.setEndBefore=createBeforeAfterNodeSetter("setEndBefore","setStartBefore"),rangeProto.setEndAfter=createBeforeAfterNodeSetter("setEndAfter","setStartAfter"),rangeProto.selectNodeContents=function(node){this.setStartAndEnd(node,0,dom.getNodeLength(node))},range.selectNodeContents(testTextNode),range.setEnd(testTextNode,3);var range2=document.createRange();range2.selectNodeContents(testTextNode),range2.setEnd(testTextNode,4),range2.setStart(testTextNode,2),-1==range.compareBoundaryPoints(range.START_TO_END,range2)&&1==range.compareBoundaryPoints(range.END_TO_START,range2)?rangeProto.compareBoundaryPoints=function(type,range){return range=range.nativeRange||range,type==range.START_TO_END?type=range.END_TO_START:type==range.END_TO_START&&(type=range.START_TO_END),this.nativeRange.compareBoundaryPoints(type,range)}:rangeProto.compareBoundaryPoints=function(type,range){return this.nativeRange.compareBoundaryPoints(type,range.nativeRange||range)};var el=document.createElement("div");el.innerHTML="123";var textNode=el.firstChild,body=getBody(document);body.appendChild(el),range.setStart(textNode,1),range.setEnd(textNode,2),range.deleteContents(),"13"==textNode.data&&(rangeProto.deleteContents=function(){this.nativeRange.deleteContents(),updateRangeProperties(this)},rangeProto.extractContents=function(){var frag=this.nativeRange.extractContents();return updateRangeProperties(this),frag}),body.removeChild(el),body=null,util.isHostMethod(range,"createContextualFragment")&&(rangeProto.createContextualFragment=function(fragmentStr){return this.nativeRange.createContextualFragment(fragmentStr)}),getBody(document).removeChild(testTextNode),rangeProto.getName=function(){return"WrappedRange"},api.WrappedRange=WrappedRange,api.createNativeRange=function(doc){return doc=getContentDocument(doc,module,"createNativeRange"),doc.createRange()}}(),api.features.implementsTextRange){var getTextRangeContainerElement=function(textRange){var parentEl=textRange.parentElement(),range=textRange.duplicate();range.collapse(!0);var startEl=range.parentElement();range=textRange.duplicate(),range.collapse(!1);var endEl=range.parentElement(),startEndContainer=startEl==endEl?startEl:dom.getCommonAncestor(startEl,endEl);return startEndContainer==parentEl?startEndContainer:dom.getCommonAncestor(parentEl,startEndContainer)},textRangeIsCollapsed=function(textRange){return 0==textRange.compareEndPoints("StartToEnd",textRange)},getTextRangeBoundaryPosition=function(textRange,wholeRangeContainerElement,isStart,isCollapsed,startInfo){var workingRange=textRange.duplicate();workingRange.collapse(isStart);var containerElement=workingRange.parentElement();if(dom.isOrIsAncestorOf(wholeRangeContainerElement,containerElement)||(containerElement=wholeRangeContainerElement),!containerElement.canHaveHTML){var pos=new DomPosition(containerElement.parentNode,dom.getNodeIndex(containerElement));return{boundaryPosition:pos,nodeInfo:{nodeIndex:pos.offset,containerElement:pos.node}}}var workingNode=dom.getDocument(containerElement).createElement("span");workingNode.parentNode&&dom.removeNode(workingNode);for(var comparison,previousNode,nextNode,boundaryPosition,boundaryNode,workingComparisonType=isStart?"StartToStart":"StartToEnd",start=startInfo&&startInfo.containerElement==containerElement?startInfo.nodeIndex:0,childNodeCount=containerElement.childNodes.length,end=childNodeCount,nodeIndex=end;;){if(nodeIndex==childNodeCount?containerElement.appendChild(workingNode):containerElement.insertBefore(workingNode,containerElement.childNodes[nodeIndex]),workingRange.moveToElementText(workingNode),comparison=workingRange.compareEndPoints(workingComparisonType,textRange),0==comparison||start==end)break;if(-1==comparison){if(end==start+1)break;start=nodeIndex}else end=end==start+1?start:nodeIndex;nodeIndex=Math.floor((start+end)/2),containerElement.removeChild(workingNode)}if(boundaryNode=workingNode.nextSibling,-1==comparison&&boundaryNode&&isCharacterDataNode(boundaryNode)){workingRange.setEndPoint(isStart?"EndToStart":"EndToEnd",textRange);var offset;if(/[\r\n]/.test(boundaryNode.data)){var tempRange=workingRange.duplicate(),rangeLength=tempRange.text.replace(/\r\n/g,"\r").length;for(offset=tempRange.moveStart("character",rangeLength);-1==(comparison=tempRange.compareEndPoints("StartToEnd",tempRange));)offset++,tempRange.moveStart("character",1)}else offset=workingRange.text.length;boundaryPosition=new DomPosition(boundaryNode,offset)}else previousNode=(isCollapsed||!isStart)&&workingNode.previousSibling,nextNode=(isCollapsed||isStart)&&workingNode.nextSibling,boundaryPosition=nextNode&&isCharacterDataNode(nextNode)?new DomPosition(nextNode,0):previousNode&&isCharacterDataNode(previousNode)?new DomPosition(previousNode,previousNode.data.length):new DomPosition(containerElement,dom.getNodeIndex(workingNode));return dom.removeNode(workingNode),{boundaryPosition:boundaryPosition,nodeInfo:{nodeIndex:nodeIndex,containerElement:containerElement}}},createBoundaryTextRange=function(boundaryPosition,isStart){var boundaryNode,boundaryParent,workingNode,childNodes,boundaryOffset=boundaryPosition.offset,doc=dom.getDocument(boundaryPosition.node),workingRange=getBody(doc).createTextRange(),nodeIsDataNode=isCharacterDataNode(boundaryPosition.node);return nodeIsDataNode?(boundaryNode=boundaryPosition.node,boundaryParent=boundaryNode.parentNode):(childNodes=boundaryPosition.node.childNodes,boundaryNode=boundaryOffset<childNodes.length?childNodes[boundaryOffset]:null,boundaryParent=boundaryPosition.node),workingNode=doc.createElement("span"),workingNode.innerHTML="&#feff;",boundaryNode?boundaryParent.insertBefore(workingNode,boundaryNode):boundaryParent.appendChild(workingNode),workingRange.moveToElementText(workingNode),workingRange.collapse(!isStart),boundaryParent.removeChild(workingNode),nodeIsDataNode&&workingRange[isStart?"moveStart":"moveEnd"]("character",boundaryOffset),workingRange};WrappedTextRange=function(textRange){this.textRange=textRange,this.refresh()},WrappedTextRange.prototype=new DomRange(document),WrappedTextRange.prototype.refresh=function(){var start,end,startBoundary,rangeContainerElement=getTextRangeContainerElement(this.textRange);textRangeIsCollapsed(this.textRange)?end=start=getTextRangeBoundaryPosition(this.textRange,rangeContainerElement,!0,!0).boundaryPosition:(startBoundary=getTextRangeBoundaryPosition(this.textRange,rangeContainerElement,!0,!1),start=startBoundary.boundaryPosition,end=getTextRangeBoundaryPosition(this.textRange,rangeContainerElement,!1,!1,startBoundary.nodeInfo).boundaryPosition),this.setStart(start.node,start.offset),this.setEnd(end.node,end.offset)},WrappedTextRange.prototype.getName=function(){return"WrappedTextRange"},DomRange.copyComparisonConstants(WrappedTextRange);var rangeToTextRange=function(range){if(range.collapsed)return createBoundaryTextRange(new DomPosition(range.startContainer,range.startOffset),!0);var startRange=createBoundaryTextRange(new DomPosition(range.startContainer,range.startOffset),!0),endRange=createBoundaryTextRange(new DomPosition(range.endContainer,range.endOffset),!1),textRange=getBody(DomRange.getRangeDocument(range)).createTextRange();return textRange.setEndPoint("StartToStart",startRange),textRange.setEndPoint("EndToEnd",endRange),textRange};if(WrappedTextRange.rangeToTextRange=rangeToTextRange,WrappedTextRange.prototype.toTextRange=function(){return rangeToTextRange(this)},api.WrappedTextRange=WrappedTextRange,!api.features.implementsDomRange||api.config.preferTextRange){var globalObj=function(f){return f("return this;")()}(Function);"undefined"==typeof globalObj.Range&&(globalObj.Range=WrappedTextRange),api.createNativeRange=function(doc){return doc=getContentDocument(doc,module,"createNativeRange"),getBody(doc).createTextRange()},api.WrappedRange=WrappedTextRange}}api.createRange=function(doc){return doc=getContentDocument(doc,module,"createRange"),new api.WrappedRange(api.createNativeRange(doc))},api.createRangyRange=function(doc){return doc=getContentDocument(doc,module,"createRangyRange"),new DomRange(doc)},util.createAliasForDeprecatedMethod(api,"createIframeRange","createRange"),util.createAliasForDeprecatedMethod(api,"createIframeRangyRange","createRangyRange"),api.addShimListener(function(win){var doc=win.document;"undefined"==typeof doc.createRange&&(doc.createRange=function(){return api.createRange(doc)}),doc=win=null})}),api.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(api,module){function isDirectionBackward(dir){return"string"==typeof dir?/^backward(s)?$/i.test(dir):!!dir}function getWindow(win,methodName){if(win){if(dom.isWindow(win))return win;if(win instanceof WrappedSelection)return win.win;var doc=dom.getContentDocument(win,module,methodName);return dom.getWindow(doc)}return window}function getWinSelection(winParam){return getWindow(winParam,"getWinSelection").getSelection()}function getDocSelection(winParam){return getWindow(winParam,"getDocSelection").document.selection}function winSelectionIsBackward(sel){var backward=!1;return sel.anchorNode&&(backward=1==dom.comparePoints(sel.anchorNode,sel.anchorOffset,sel.focusNode,sel.focusOffset)),backward}function updateAnchorAndFocusFromRange(sel,range,backward){var anchorPrefix=backward?"end":"start",focusPrefix=backward?"start":"end";sel.anchorNode=range[anchorPrefix+"Container"],sel.anchorOffset=range[anchorPrefix+"Offset"],sel.focusNode=range[focusPrefix+"Container"],sel.focusOffset=range[focusPrefix+"Offset"]}function updateAnchorAndFocusFromNativeSelection(sel){var nativeSel=sel.nativeSelection;sel.anchorNode=nativeSel.anchorNode,sel.anchorOffset=nativeSel.anchorOffset,sel.focusNode=nativeSel.focusNode,sel.focusOffset=nativeSel.focusOffset}function updateEmptySelection(sel){sel.anchorNode=sel.focusNode=null,sel.anchorOffset=sel.focusOffset=0,sel.rangeCount=0,sel.isCollapsed=!0,sel._ranges.length=0}function getNativeRange(range){var nativeRange;return range instanceof DomRange?(nativeRange=api.createNativeRange(range.getDocument()),nativeRange.setEnd(range.endContainer,range.endOffset),nativeRange.setStart(range.startContainer,range.startOffset)):range instanceof WrappedRange?nativeRange=range.nativeRange:features.implementsDomRange&&range instanceof dom.getWindow(range.startContainer).Range&&(nativeRange=range),nativeRange}function rangeContainsSingleElement(rangeNodes){if(!rangeNodes.length||1!=rangeNodes[0].nodeType)return!1;for(var i=1,len=rangeNodes.length;len>i;++i)if(!dom.isAncestorOf(rangeNodes[0],rangeNodes[i]))return!1;return!0}function getSingleElementFromRange(range){var nodes=range.getNodes();if(!rangeContainsSingleElement(nodes))throw module.createError("getSingleElementFromRange: range "+range.inspect()+" did not consist of a single element");return nodes[0]}function isTextRange(range){return!!range&&"undefined"!=typeof range.text}function updateFromTextRange(sel,range){var wrappedRange=new WrappedRange(range);sel._ranges=[wrappedRange],updateAnchorAndFocusFromRange(sel,wrappedRange,!1),sel.rangeCount=1,sel.isCollapsed=wrappedRange.collapsed}function updateControlSelection(sel){if(sel._ranges.length=0,"None"==sel.docSelection.type)updateEmptySelection(sel);else{var controlRange=sel.docSelection.createRange();if(isTextRange(controlRange))updateFromTextRange(sel,controlRange);else{sel.rangeCount=controlRange.length;for(var range,doc=getDocument(controlRange.item(0)),i=0;i<sel.rangeCount;++i)range=api.createRange(doc),range.selectNode(controlRange.item(i)),sel._ranges.push(range);sel.isCollapsed=1==sel.rangeCount&&sel._ranges[0].collapsed,updateAnchorAndFocusFromRange(sel,sel._ranges[sel.rangeCount-1],!1)}}}function addRangeToControlSelection(sel,range){for(var controlRange=sel.docSelection.createRange(),rangeElement=getSingleElementFromRange(range),doc=getDocument(controlRange.item(0)),newControlRange=getBody(doc).createControlRange(),i=0,len=controlRange.length;len>i;++i)newControlRange.add(controlRange.item(i));try{newControlRange.add(rangeElement)}catch(ex){throw module.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}newControlRange.select(),updateControlSelection(sel)}function WrappedSelection(selection,docSelection,win){this.nativeSelection=selection,this.docSelection=docSelection,this._ranges=[],this.win=win,this.refresh()}function deleteProperties(sel){sel.win=sel.anchorNode=sel.focusNode=sel._ranges=null,sel.rangeCount=sel.anchorOffset=sel.focusOffset=0,sel.detached=!0}function actOnCachedSelection(win,action){for(var cached,sel,i=cachedRangySelections.length;i--;)if(cached=cachedRangySelections[i],sel=cached.selection,"deleteAll"==action)deleteProperties(sel);else if(cached.win==win)return"delete"==action?(cachedRangySelections.splice(i,1),!0):sel;return"deleteAll"==action&&(cachedRangySelections.length=0),null}function createControlSelection(sel,ranges){for(var el,doc=getDocument(ranges[0].startContainer),controlRange=getBody(doc).createControlRange(),i=0,len=ranges.length;len>i;++i){el=getSingleElementFromRange(ranges[i]);try{controlRange.add(el)}catch(ex){throw module.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}controlRange.select(),updateControlSelection(sel)}function assertNodeInSameDocument(sel,node){if(sel.win.document!=getDocument(node))throw new DOMException("WRONG_DOCUMENT_ERR")}function createStartOrEndSetter(isStart){return function(node,offset){var range;this.rangeCount?(range=this.getRangeAt(0),range["set"+(isStart?"Start":"End")](node,offset)):(range=api.createRange(this.win.document),range.setStartAndEnd(node,offset)),this.setSingleRange(range,this.isBackward())}}function inspect(sel){var rangeInspects=[],anchor=new DomPosition(sel.anchorNode,sel.anchorOffset),focus=new DomPosition(sel.focusNode,sel.focusOffset),name="function"==typeof sel.getName?sel.getName():"Selection";if("undefined"!=typeof sel.rangeCount)for(var i=0,len=sel.rangeCount;len>i;++i)rangeInspects[i]=DomRange.inspect(sel.getRangeAt(i));return"["+name+"(Ranges: "+rangeInspects.join(", ")+")(anchor: "+anchor.inspect()+", focus: "+focus.inspect()+"]"}api.config.checkSelectionRanges=!0;var getNativeSelection,selectionIsCollapsed,BOOLEAN="boolean",NUMBER="number",dom=api.dom,util=api.util,isHostMethod=util.isHostMethod,DomRange=api.DomRange,WrappedRange=api.WrappedRange,DOMException=api.DOMException,DomPosition=dom.DomPosition,features=api.features,CONTROL="Control",getDocument=dom.getDocument,getBody=dom.getBody,rangesEqual=DomRange.rangesEqual,implementsWinGetSelection=isHostMethod(window,"getSelection"),implementsDocSelection=util.isHostObject(document,"selection");features.implementsWinGetSelection=implementsWinGetSelection,features.implementsDocSelection=implementsDocSelection;var useDocumentSelection=implementsDocSelection&&(!implementsWinGetSelection||api.config.preferTextRange);if(useDocumentSelection)getNativeSelection=getDocSelection,api.isSelectionValid=function(winParam){var doc=getWindow(winParam,"isSelectionValid").document,nativeSel=doc.selection;return"None"!=nativeSel.type||getDocument(nativeSel.createRange().parentElement())==doc};else{if(!implementsWinGetSelection)return module.fail("Neither document.selection or window.getSelection() detected."),!1;getNativeSelection=getWinSelection,api.isSelectionValid=function(){return!0}}api.getNativeSelection=getNativeSelection;var testSelection=getNativeSelection();if(!testSelection)return module.fail("Native selection was null (possibly issue 138?)"),!1;var testRange=api.createNativeRange(document),body=getBody(document),selectionHasAnchorAndFocus=util.areHostProperties(testSelection,["anchorNode","focusNode","anchorOffset","focusOffset"]);features.selectionHasAnchorAndFocus=selectionHasAnchorAndFocus;var selectionHasExtend=isHostMethod(testSelection,"extend");features.selectionHasExtend=selectionHasExtend;var selectionHasRangeCount=typeof testSelection.rangeCount==NUMBER;features.selectionHasRangeCount=selectionHasRangeCount;var selectionSupportsMultipleRanges=!1,collapsedNonEditableSelectionsSupported=!0,addRangeBackwardToNative=selectionHasExtend?function(nativeSelection,range){var doc=DomRange.getRangeDocument(range),endRange=api.createRange(doc);endRange.collapseToPoint(range.endContainer,range.endOffset),nativeSelection.addRange(getNativeRange(endRange)),nativeSelection.extend(range.startContainer,range.startOffset)}:null;util.areHostMethods(testSelection,["addRange","getRangeAt","removeAllRanges"])&&typeof testSelection.rangeCount==NUMBER&&features.implementsDomRange&&!function(){var sel=window.getSelection();if(sel){for(var originalSelectionRangeCount=sel.rangeCount,selectionHasMultipleRanges=originalSelectionRangeCount>1,originalSelectionRanges=[],originalSelectionBackward=winSelectionIsBackward(sel),i=0;originalSelectionRangeCount>i;++i)originalSelectionRanges[i]=sel.getRangeAt(i);var testEl=dom.createTestElement(document,"",!1),textNode=testEl.appendChild(document.createTextNode("\xa0\xa0\xa0")),r1=document.createRange();if(r1.setStart(textNode,1),r1.collapse(!0),sel.removeAllRanges(),sel.addRange(r1),collapsedNonEditableSelectionsSupported=1==sel.rangeCount,sel.removeAllRanges(),!selectionHasMultipleRanges){var chromeMatch=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(chromeMatch&&parseInt(chromeMatch[1])>=36)selectionSupportsMultipleRanges=!1;else{var r2=r1.cloneRange();r1.setStart(textNode,0),r2.setEnd(textNode,3),r2.setStart(textNode,2),sel.addRange(r1),sel.addRange(r2),selectionSupportsMultipleRanges=2==sel.rangeCount}}for(dom.removeNode(testEl),sel.removeAllRanges(),i=0;originalSelectionRangeCount>i;++i)0==i&&originalSelectionBackward?addRangeBackwardToNative?addRangeBackwardToNative(sel,originalSelectionRanges[i]):(api.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),sel.addRange(originalSelectionRanges[i])):sel.addRange(originalSelectionRanges[i])}}(),features.selectionSupportsMultipleRanges=selectionSupportsMultipleRanges,features.collapsedNonEditableSelectionsSupported=collapsedNonEditableSelectionsSupported;var testControlRange,implementsControlRange=!1;body&&isHostMethod(body,"createControlRange")&&(testControlRange=body.createControlRange(),util.areHostProperties(testControlRange,["item","add"])&&(implementsControlRange=!0)),features.implementsControlRange=implementsControlRange,selectionIsCollapsed=selectionHasAnchorAndFocus?function(sel){return sel.anchorNode===sel.focusNode&&sel.anchorOffset===sel.focusOffset}:function(sel){return sel.rangeCount?sel.getRangeAt(sel.rangeCount-1).collapsed:!1};var getSelectionRangeAt;isHostMethod(testSelection,"getRangeAt")?getSelectionRangeAt=function(sel,index){try{return sel.getRangeAt(index)}catch(ex){return null}}:selectionHasAnchorAndFocus&&(getSelectionRangeAt=function(sel){var doc=getDocument(sel.anchorNode),range=api.createRange(doc);return range.setStartAndEnd(sel.anchorNode,sel.anchorOffset,sel.focusNode,sel.focusOffset),range.collapsed!==this.isCollapsed&&range.setStartAndEnd(sel.focusNode,sel.focusOffset,sel.anchorNode,sel.anchorOffset),range}),WrappedSelection.prototype=api.selectionPrototype;var cachedRangySelections=[],getSelection=function(win){if(win&&win instanceof WrappedSelection)return win.refresh(),win;win=getWindow(win,"getNativeSelection");var sel=actOnCachedSelection(win),nativeSel=getNativeSelection(win),docSel=implementsDocSelection?getDocSelection(win):null;return sel?(sel.nativeSelection=nativeSel,sel.docSelection=docSel,sel.refresh()):(sel=new WrappedSelection(nativeSel,docSel,win),
cachedRangySelections.push({win:win,selection:sel})),sel};api.getSelection=getSelection,util.createAliasForDeprecatedMethod(api,"getIframeSelection","getSelection");var selProto=WrappedSelection.prototype;if(!useDocumentSelection&&selectionHasAnchorAndFocus&&util.areHostMethods(testSelection,["removeAllRanges","addRange"])){selProto.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),updateEmptySelection(this)};var addRangeBackward=function(sel,range){addRangeBackwardToNative(sel.nativeSelection,range),sel.refresh()};selectionHasRangeCount?selProto.addRange=function(range,direction){if(implementsControlRange&&implementsDocSelection&&this.docSelection.type==CONTROL)addRangeToControlSelection(this,range);else if(isDirectionBackward(direction)&&selectionHasExtend)addRangeBackward(this,range);else{var previousRangeCount;selectionSupportsMultipleRanges?previousRangeCount=this.rangeCount:(this.removeAllRanges(),previousRangeCount=0);var clonedNativeRange=getNativeRange(range).cloneRange();try{this.nativeSelection.addRange(clonedNativeRange)}catch(ex){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==previousRangeCount+1){if(api.config.checkSelectionRanges){var nativeRange=getSelectionRangeAt(this.nativeSelection,this.rangeCount-1);nativeRange&&!rangesEqual(nativeRange,range)&&(range=new WrappedRange(nativeRange))}this._ranges[this.rangeCount-1]=range,updateAnchorAndFocusFromRange(this,range,selectionIsBackward(this.nativeSelection)),this.isCollapsed=selectionIsCollapsed(this)}else this.refresh()}}:selProto.addRange=function(range,direction){isDirectionBackward(direction)&&selectionHasExtend?addRangeBackward(this,range):(this.nativeSelection.addRange(getNativeRange(range)),this.refresh())},selProto.setRanges=function(ranges){if(implementsControlRange&&implementsDocSelection&&ranges.length>1)createControlSelection(this,ranges);else{this.removeAllRanges();for(var i=0,len=ranges.length;len>i;++i)this.addRange(ranges[i])}}}else{if(!(isHostMethod(testSelection,"empty")&&isHostMethod(testRange,"select")&&implementsControlRange&&useDocumentSelection))return module.fail("No means of selecting a Range or TextRange was found"),!1;selProto.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var doc;if(this.anchorNode)doc=getDocument(this.anchorNode);else if(this.docSelection.type==CONTROL){var controlRange=this.docSelection.createRange();controlRange.length&&(doc=getDocument(controlRange.item(0)))}if(doc){var textRange=getBody(doc).createTextRange();textRange.select(),this.docSelection.empty()}}}catch(ex){}updateEmptySelection(this)},selProto.addRange=function(range){this.docSelection.type==CONTROL?addRangeToControlSelection(this,range):(api.WrappedTextRange.rangeToTextRange(range).select(),this._ranges[0]=range,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,updateAnchorAndFocusFromRange(this,range,!1))},selProto.setRanges=function(ranges){this.removeAllRanges();var rangeCount=ranges.length;rangeCount>1?createControlSelection(this,ranges):rangeCount&&this.addRange(ranges[0])}}selProto.getRangeAt=function(index){if(0>index||index>=this.rangeCount)throw new DOMException("INDEX_SIZE_ERR");return this._ranges[index].cloneRange()};var refreshSelection;if(useDocumentSelection)refreshSelection=function(sel){var range;api.isSelectionValid(sel.win)?range=sel.docSelection.createRange():(range=getBody(sel.win.document).createTextRange(),range.collapse(!0)),sel.docSelection.type==CONTROL?updateControlSelection(sel):isTextRange(range)?updateFromTextRange(sel,range):updateEmptySelection(sel)};else if(isHostMethod(testSelection,"getRangeAt")&&typeof testSelection.rangeCount==NUMBER)refreshSelection=function(sel){if(implementsControlRange&&implementsDocSelection&&sel.docSelection.type==CONTROL)updateControlSelection(sel);else if(sel._ranges.length=sel.rangeCount=sel.nativeSelection.rangeCount,sel.rangeCount){for(var i=0,len=sel.rangeCount;len>i;++i)sel._ranges[i]=new api.WrappedRange(sel.nativeSelection.getRangeAt(i));updateAnchorAndFocusFromRange(sel,sel._ranges[sel.rangeCount-1],selectionIsBackward(sel.nativeSelection)),sel.isCollapsed=selectionIsCollapsed(sel)}else updateEmptySelection(sel)};else{if(!selectionHasAnchorAndFocus||typeof testSelection.isCollapsed!=BOOLEAN||typeof testRange.collapsed!=BOOLEAN||!features.implementsDomRange)return module.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;refreshSelection=function(sel){var range,nativeSel=sel.nativeSelection;nativeSel.anchorNode?(range=getSelectionRangeAt(nativeSel,0),sel._ranges=[range],sel.rangeCount=1,updateAnchorAndFocusFromNativeSelection(sel),sel.isCollapsed=selectionIsCollapsed(sel)):updateEmptySelection(sel)}}selProto.refresh=function(checkForChanges){var oldRanges=checkForChanges?this._ranges.slice(0):null,oldAnchorNode=this.anchorNode,oldAnchorOffset=this.anchorOffset;if(refreshSelection(this),checkForChanges){var i=oldRanges.length;if(i!=this._ranges.length)return!0;if(this.anchorNode!=oldAnchorNode||this.anchorOffset!=oldAnchorOffset)return!0;for(;i--;)if(!rangesEqual(oldRanges[i],this._ranges[i]))return!0;return!1}};var removeRangeManually=function(sel,range){var ranges=sel.getAllRanges();sel.removeAllRanges();for(var i=0,len=ranges.length;len>i;++i)rangesEqual(range,ranges[i])||sel.addRange(ranges[i]);sel.rangeCount||updateEmptySelection(sel)};implementsControlRange&&implementsDocSelection?selProto.removeRange=function(range){if(this.docSelection.type==CONTROL){for(var el,controlRange=this.docSelection.createRange(),rangeElement=getSingleElementFromRange(range),doc=getDocument(controlRange.item(0)),newControlRange=getBody(doc).createControlRange(),removed=!1,i=0,len=controlRange.length;len>i;++i)el=controlRange.item(i),el!==rangeElement||removed?newControlRange.add(controlRange.item(i)):removed=!0;newControlRange.select(),updateControlSelection(this)}else removeRangeManually(this,range)}:selProto.removeRange=function(range){removeRangeManually(this,range)};var selectionIsBackward;!useDocumentSelection&&selectionHasAnchorAndFocus&&features.implementsDomRange?(selectionIsBackward=winSelectionIsBackward,selProto.isBackward=function(){return selectionIsBackward(this)}):selectionIsBackward=selProto.isBackward=function(){return!1},selProto.isBackwards=selProto.isBackward,selProto.toString=function(){for(var rangeTexts=[],i=0,len=this.rangeCount;len>i;++i)rangeTexts[i]=""+this._ranges[i];return rangeTexts.join("")},selProto.collapse=function(node,offset){assertNodeInSameDocument(this,node);var range=api.createRange(node);range.collapseToPoint(node,offset),this.setSingleRange(range),this.isCollapsed=!0},selProto.collapseToStart=function(){if(!this.rangeCount)throw new DOMException("INVALID_STATE_ERR");var range=this._ranges[0];this.collapse(range.startContainer,range.startOffset)},selProto.collapseToEnd=function(){if(!this.rangeCount)throw new DOMException("INVALID_STATE_ERR");var range=this._ranges[this.rangeCount-1];this.collapse(range.endContainer,range.endOffset)},selProto.selectAllChildren=function(node){assertNodeInSameDocument(this,node);var range=api.createRange(node);range.selectNodeContents(node),this.setSingleRange(range)},selProto.deleteFromDocument=function(){if(implementsControlRange&&implementsDocSelection&&this.docSelection.type==CONTROL){for(var element,controlRange=this.docSelection.createRange();controlRange.length;)element=controlRange.item(0),controlRange.remove(element),dom.removeNode(element);this.refresh()}else if(this.rangeCount){var ranges=this.getAllRanges();if(ranges.length){this.removeAllRanges();for(var i=0,len=ranges.length;len>i;++i)ranges[i].deleteContents();this.addRange(ranges[len-1])}}},selProto.eachRange=function(func,returnValue){for(var i=0,len=this._ranges.length;len>i;++i)if(func(this.getRangeAt(i)))return returnValue},selProto.getAllRanges=function(){var ranges=[];return this.eachRange(function(range){ranges.push(range)}),ranges},selProto.setSingleRange=function(range,direction){this.removeAllRanges(),this.addRange(range,direction)},selProto.callMethodOnEachRange=function(methodName,params){var results=[];return this.eachRange(function(range){results.push(range[methodName].apply(range,params||[]))}),results},selProto.setStart=createStartOrEndSetter(!0),selProto.setEnd=createStartOrEndSetter(!1),api.rangePrototype.select=function(direction){getSelection(this.getDocument()).setSingleRange(this,direction)},selProto.changeEachRange=function(func){var ranges=[],backward=this.isBackward();this.eachRange(function(range){func(range),ranges.push(range)}),this.removeAllRanges(),backward&&1==ranges.length?this.addRange(ranges[0],"backward"):this.setRanges(ranges)},selProto.containsNode=function(node,allowPartial){return this.eachRange(function(range){return range.containsNode(node,allowPartial)},!0)||!1},selProto.getBookmark=function(containerNode){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[containerNode])}},selProto.moveToBookmark=function(bookmark){for(var rangeBookmark,range,selRanges=[],i=0;rangeBookmark=bookmark.rangeBookmarks[i++];)range=api.createRange(this.win),range.moveToBookmark(rangeBookmark),selRanges.push(range);bookmark.backward?this.setSingleRange(selRanges[0],"backward"):this.setRanges(selRanges)},selProto.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},selProto.restoreRanges=function(selRanges){this.removeAllRanges();for(var range,i=0;range=selRanges.ranges[i];++i)this.addRange(range,selRanges.backward&&0==i)},selProto.toHtml=function(){var rangeHtmls=[];return this.eachRange(function(range){rangeHtmls.push(DomRange.toHtml(range))}),rangeHtmls.join("")},features.implementsTextRange&&(selProto.getNativeTextRange=function(){var sel;if(sel=this.docSelection){var range=sel.createRange();if(isTextRange(range))return range;throw module.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return api.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw module.createError("getNativeTextRange: selection contains no range")}),selProto.getName=function(){return"WrappedSelection"},selProto.inspect=function(){return inspect(this)},selProto.detach=function(){actOnCachedSelection(this.win,"delete"),deleteProperties(this)},WrappedSelection.detachAll=function(){actOnCachedSelection(null,"deleteAll")},WrappedSelection.inspect=inspect,WrappedSelection.isDirectionBackward=isDirectionBackward,api.Selection=WrappedSelection,api.selectionPrototype=selProto,api.addShimListener(function(win){"undefined"==typeof win.getSelection&&(win.getSelection=function(){return getSelection(win)}),win=null})});var docReady=!1,loadHandler=function(e){docReady||(docReady=!0,!api.initialized&&api.config.autoInitialize&&init())};return isBrowser&&("complete"==document.readyState?loadHandler():(isHostMethod(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",loadHandler,!1),addListener(window,"load",loadHandler))),api},this),/**
 * Selection save and restore module for Rangy.
 * Saves and restores user selections using marker invisible elements in the DOM.
 *
 * Part of Rangy, a cross-browser JavaScript range and selection library
 * https://github.com/timdown/rangy
 *
 * Depends on Rangy core.
 *
 * Copyright 2015, Tim Down
 * Licensed under the MIT license.
 * Version: 1.3.0
 * Build date: 10 May 2015
 */
function(factory,root){"function"==typeof define&&define.amd?define(["./rangy-core"],factory):"undefined"!=typeof module&&"object"==typeof exports?module.exports=factory(require("rangy")):factory(root.rangy)}(function(rangy){return rangy.createModule("SaveRestore",["WrappedRange"],function(api,module){function gEBI(id,doc){return(doc||document).getElementById(id)}function insertRangeBoundaryMarker(range,atStart){var markerEl,markerId="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),doc=dom.getDocument(range.startContainer),boundaryRange=range.cloneRange();return boundaryRange.collapse(atStart),markerEl=doc.createElement("span"),markerEl.id=markerId,markerEl.style.lineHeight="0",markerEl.style.display="none",markerEl.className="rangySelectionBoundary",markerEl.appendChild(doc.createTextNode(markerTextChar)),boundaryRange.insertNode(markerEl),markerEl}function setRangeBoundary(doc,range,markerId,atStart){var markerEl=gEBI(markerId,doc);markerEl?(range[atStart?"setStartBefore":"setEndBefore"](markerEl),removeNode(markerEl)):module.warn("Marker element has been removed. Cannot restore selection.")}function compareRanges(r1,r2){return r2.compareBoundaryPoints(r1.START_TO_START,r1)}function saveRange(range,direction){var startEl,endEl,doc=api.DomRange.getRangeDocument(range),text=range.toString(),backward=isDirectionBackward(direction);return range.collapsed?(endEl=insertRangeBoundaryMarker(range,!1),{document:doc,markerId:endEl.id,collapsed:!0}):(endEl=insertRangeBoundaryMarker(range,!1),startEl=insertRangeBoundaryMarker(range,!0),{document:doc,startMarkerId:startEl.id,endMarkerId:endEl.id,collapsed:!1,backward:backward,toString:function(){return"original text: '"+text+"', new text: '"+range.toString()+"'"}})}function restoreRange(rangeInfo,normalize){var doc=rangeInfo.document;"undefined"==typeof normalize&&(normalize=!0);var range=api.createRange(doc);if(rangeInfo.collapsed){var markerEl=gEBI(rangeInfo.markerId,doc);if(markerEl){markerEl.style.display="inline";var previousNode=markerEl.previousSibling;previousNode&&3==previousNode.nodeType?(removeNode(markerEl),range.collapseToPoint(previousNode,previousNode.length)):(range.collapseBefore(markerEl),removeNode(markerEl))}else module.warn("Marker element has been removed. Cannot restore selection.")}else setRangeBoundary(doc,range,rangeInfo.startMarkerId,!0),setRangeBoundary(doc,range,rangeInfo.endMarkerId,!1);return normalize&&range.normalizeBoundaries(),range}function saveRanges(ranges,direction){var range,doc,rangeInfos=[],backward=isDirectionBackward(direction);ranges=ranges.slice(0),ranges.sort(compareRanges);for(var i=0,len=ranges.length;len>i;++i)rangeInfos[i]=saveRange(ranges[i],backward);for(i=len-1;i>=0;--i)range=ranges[i],doc=api.DomRange.getRangeDocument(range),range.collapsed?range.collapseAfter(gEBI(rangeInfos[i].markerId,doc)):(range.setEndBefore(gEBI(rangeInfos[i].endMarkerId,doc)),range.setStartAfter(gEBI(rangeInfos[i].startMarkerId,doc)));return rangeInfos}function saveSelection(win){if(!api.isSelectionValid(win))return module.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var sel=api.getSelection(win),ranges=sel.getAllRanges(),backward=1==ranges.length&&sel.isBackward(),rangeInfos=saveRanges(ranges,backward);return backward?sel.setSingleRange(ranges[0],backward):sel.setRanges(ranges),{win:win,rangeInfos:rangeInfos,restored:!1}}function restoreRanges(rangeInfos){for(var ranges=[],rangeCount=rangeInfos.length,i=rangeCount-1;i>=0;i--)ranges[i]=restoreRange(rangeInfos[i],!0);return ranges}function restoreSelection(savedSelection,preserveDirection){if(!savedSelection.restored){var rangeInfos=savedSelection.rangeInfos,sel=api.getSelection(savedSelection.win),ranges=restoreRanges(rangeInfos),rangeCount=rangeInfos.length;1==rangeCount&&preserveDirection&&api.features.selectionHasExtend&&rangeInfos[0].backward?(sel.removeAllRanges(),sel.addRange(ranges[0],!0)):sel.setRanges(ranges),savedSelection.restored=!0}}function removeMarkerElement(doc,markerId){var markerEl=gEBI(markerId,doc);markerEl&&removeNode(markerEl)}function removeMarkers(savedSelection){for(var rangeInfo,rangeInfos=savedSelection.rangeInfos,i=0,len=rangeInfos.length;len>i;++i)rangeInfo=rangeInfos[i],rangeInfo.collapsed?removeMarkerElement(savedSelection.doc,rangeInfo.markerId):(removeMarkerElement(savedSelection.doc,rangeInfo.startMarkerId),removeMarkerElement(savedSelection.doc,rangeInfo.endMarkerId))}var dom=api.dom,removeNode=dom.removeNode,isDirectionBackward=api.Selection.isDirectionBackward,markerTextChar="\ufeff";api.util.extend(api,{saveRange:saveRange,restoreRange:restoreRange,saveRanges:saveRanges,restoreRanges:restoreRanges,saveSelection:saveSelection,restoreSelection:restoreSelection,removeMarkerElement:removeMarkerElement,removeMarkers:removeMarkers})}),rangy},this),angular.module("textAngularSetup",["textAngularTokens","textAngularHelpers","textAngularButtons"]).value("taOptions",{toolbar:[["insertToken","insertImage","insertLink","html"],["h1","h2","p","bold","italics","underline","strikeThrough"],["fontColor","ul","ol","redo","undo"],["justifyLeft","justifyCenter","justifyRight"]],classes:{focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},setup:{textEditorSetup:function($element,scope){},htmlEditorSetup:function($element,scope){window.CodeMirror&&setTimeout(function(){var changeTimeout,codemirror=window.codemirror=CodeMirror(function(codemirrorElement){$element.after(codemirrorElement),$element.css("display","none")},{lineNumbers:!0,mode:"htmlmixed"});codemirror.on("change",function(instance){scope.showHtml&&!instance.silent&&(clearTimeout(changeTimeout),changeTimeout=setTimeout(function(){scope.$apply(function(){var value=instance.getValue(),emailBody=scope.contestantTokensService.prepareTokens(scope.customEmailService.getEmailBody(value));scope.setInnerHTML(emailBody),$(scope.displayElements.html).val(emailBody),scope.events.change()})},500))}),codemirror.on("focus",function(){scope.focussed=!0,$element.addClass(scope.classes.focussed),$element.triggerHandler("focus")}),codemirror.syncHtml=function(){if(codemirror.focus(),codemirror.getValue()!==scope.html){var fullEmail=scope.customEmailService.getFullEmail(scope.html);codemirror.getValue()!==fullEmail&&codemirror.setValue(fullEmail)}}},500)}},defaultFileDropHandler:function(file,insertAction){var reader=new FileReader;return"image"===file.type.substring(0,5)?(reader.onload=function(){""!==reader.result&&insertAction("insertImage",reader.result,!0)},reader.readAsDataURL(file),!0):!1}}).value("taSelectableElements",["a:not([ta-insert-button])","img","span","div"]).value("taCustomRenderers",[{selector:"img",customAttribute:"ta-insert-video",renderLogic:function(element){var iframe=angular.element("<iframe></iframe>"),attributes=element.prop("attributes");angular.forEach(attributes,function(attr){iframe.attr(attr.name,attr.value)}),iframe.attr("src",iframe.attr("ta-insert-video")),element.replaceWith(iframe)}}]).value("taTranslations",{html:{tooltip:"Toggle html / Rich Text"},heading:{tooltip:"Heading "},p:{tooltip:"Paragraph"},pre:{tooltip:"Preformatted text"},ul:{tooltip:"Unordered List"},ol:{tooltip:"Ordered List"},quote:{tooltip:"Quote/unqoute selection or paragraph"},undo:{tooltip:"Undo"},redo:{tooltip:"Redo"},bold:{tooltip:"Bold"},italic:{tooltip:"Italic"},underline:{tooltip:"Underline"},strikeThrough:{tooltip:"Strikethrough"},justifyLeft:{tooltip:"Align text left"},justifyRight:{tooltip:"Align text right"},justifyCenter:{tooltip:"Center"},indent:{tooltip:"Increase indent"},outdent:{tooltip:"Decrease indent"},clear:{tooltip:"Clear formatting"},insertImage:{dialogPrompt:"Please enter an image URL to insert",tooltip:"Insert image",hotkey:"the - possibly language dependent hotkey ... for some future implementation"},insertVideo:{tooltip:"Insert video",dialogPrompt:"Please enter a youtube URL to embed"},insertLink:{tooltip:"Insert / edit link",dialogPrompt:"Please enter a URL to insert"},editLink:{reLinkButton:{tooltip:"Relink"},unLinkButton:{tooltip:"Unlink"},targetToggle:{buttontext:"Open in New Window"}},wordcount:{tooltip:"Display words Count"},charcount:{tooltip:"Display characters Count"}}).run(["taRegisterTool","$window","$sanitize","taTranslations","taSelection","$compile","contestantTokensService","Color","buttonDesignerService",function(taRegisterTool,$window,$sanitize,taTranslations,taSelection,$compile,contestantTokensService,Color,buttonDesignerService){function getCaretPosition(input){if(document.selection){var selection=document.selection.createRange();return selection.moveStart("character",-input.value.length),selection.text.length}return input.selectionStart||"0"==input.selectionStart?input.selectionStart:0}function setCaretPosition(input,caretPosition){if(input.createTextRange){var range=input.createTextRange();range.move("character",caretPosition),range.select()}else input.setSelectionRange?(input.focus(),input.setSelectionRange(caretPosition,caretPosition)):input.focus()}taRegisterTool("html",{iconclass:"fa fa-code",tooltiptext:taTranslations.html.tooltip,action:function(){this.$editor().switchView()},activeState:function(){return this.$editor().showHtml}});var selectElementContents=function(el){if(window.getSelection&&document.createRange){var range=document.createRange();range.selectNodeContents(el);var sel=window.getSelection();sel.removeAllRanges(),sel.addRange(range)}else if(document.body.createTextRange){var range=document.body.createTextRange();range.moveToElementText(el),range.select()}};if(window.confirmationEmailTokens&&window.tokensInsertDropdown){var tokensInsertDropdown=window.tokensInsertDropdown,tokensEditDropdown=window.tokensEditDropdown;taRegisterTool("insertToken",{display:tokensInsertDropdown,activeState:function(){return!0},action:function(deferred){var unwatch,textAngular=this,scope=angular.element(".tokens-menu").scope();return unwatch=scope.$watch("currentToken",function(newValue){if(newValue&&""!==newValue){var embed="<span ta-insert-token class='"+scope.currentTokenTag+"'>"+scope.currentToken+"</span>",selection=taSelection.getSelectionElement();if(textAngular.$editor().showHtml)codemirror.replaceSelection(scope.currentToken);else{if($(selection).is("[ta-insert-token]")){var $element=angular.element(selection);$element.attr("class",scope.currentTokenTag),$element.html(scope.currentToken)}else taSelection.insertHtml(embed);setTimeout(function(){selectionElement=taSelection.getSelectionElement(),taSelection.setSelectionAfterElement(selectionElement)},1)}deferred.resolve()}unwatch()}),!1},onElementSelect:{element:"span",onlyWithAttrs:["ta-insert-token"],action:function(event,$element,editorScope){var container=editorScope.displayElements.popoverContainer;clearPopover(editorScope.displayElements.popover,container),editorScope.displayElements.popover.css("width","300px");var finishEdit=function(){editorScope.updateTaBindtaTextElement(),editorScope.hidePopover()};event.preventDefault(),selectElementContents($element[0]),container.empty();var content=angular.element($compile(tokensEditDropdown)(editorScope));$(content).on("click",function(event){var tokenTag=$(event.target).data("token-tag"),tokenName=$(event.target).data("token-name");if(event.preventDefault(),tokenTag&&tokenName){var embed="<span ta-insert-token class='"+tokenTag+"'>"+tokenName+"</span>";$element.replaceWith(embed),finishEdit()}}),container.append(content),container.addClass("tokens-popover"),container.addClass(window.campaignType.toLowerCase()),editorScope.showPopover($element)}}})}var _retActiveStateFunction=function(q){return function(){return this.$editor().queryFormatBlockState(q)}},headerAction=function(){return this.$editor().wrapSelection("formatBlock","<"+this.name.toUpperCase()+">")};angular.forEach(["h1","h2","h3","h4","h5","h6"],function(h){taRegisterTool(h.toLowerCase(),{buttontext:h.toUpperCase(),tooltiptext:taTranslations.heading.tooltip+h.charAt(1),action:headerAction,activeState:_retActiveStateFunction(h.toLowerCase())})}),taRegisterTool("p",{buttontext:"P",tooltiptext:taTranslations.p.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<P>")},activeState:function(){return this.$editor().queryFormatBlockState("p")}}),taRegisterTool("pre",{buttontext:"pre",tooltiptext:taTranslations.pre.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<PRE>")},activeState:function(){return this.$editor().queryFormatBlockState("pre")}});var unwatchButton,unwatchClosed;taRegisterTool("insertButton",{display:"<button type='button' button-designer class='btn btn-default' ng-disabled='showHtml()' ng-model='button'>Button</button>",action:function(deferred,restoreSelection){function endAction(){deferred.resolve(),unwatchClosed(),unwatchButton()}var textAngular=scope=this;return unwatchButton&&unwatchButton(),unwatchClosed&&unwatchClosed(),unwatchButton=scope.$watch("button.html",function(value,oldValue){if(value&&value!=oldValue){restoreSelection();var selection=taSelection.getSelectionElement();$(selection).parents(".ta-text-element").length>0&&($(selection).is("[ta-insert-button]")&&taSelection.setSelectionAfterElement(selection),textAngular.$editor().wrapSelection("insertHTML",value,!0)),endAction()}}),unwatchClosed=scope.$watch("button.closed",function(value){value&&endAction()}),!1},onElementSelect:{element:"a",onlyWithAttrs:["ta-insert-button"],action:function(event,$element,editorScope){editorScope._actionRunning=!0,event.preventDefault(),$element[0].buttonDesigner||($element[0].buttonDesigner=new buttonDesignerService.ButtonDesigner($element,{onApply:function(html){setTimeout(function(){$element.replaceWith(html),editorScope.endAction(),setTimeout(function(){editorScope.updateTaBindtaTextElement(),setTimeout(function(){editorScope.$apply()},1)},1)},1)},beforeShow:function(){this.setLinkConfigurable(!editorScope.$parent.linkPresetted),this.refresh()},onHide:function(html){editorScope.endAction()},onRemove:function(){$element.remove(),editorScope.endAction(),setTimeout(function(){editorScope.updateTaBindtaTextElement()},1)}})),$element[0].buttonDesigner.parseElement($element)}}}),taRegisterTool("fontColor",{display:"<button type='button' colorpicker colorpicker-text-editor='true' colorpicker-with-input='true' colorpicker-without-close-button='true' colorpicker-parent='true' class='btn btn-default font-color' ng-disabled='showHtml()' ng-init='fontColor=\"#000\"' ng-model='fontColor'><i class='fa fa-eyedropper'></i></button>",action:function(deferred,restoreSelection){function endAction(){deferred.resolve(),unwatch()}var applyColorTimeout,closeInterval,textAngular=scope=this,foreColor=this.$editor().queryCommandValue("foreColor"),colorPickerElement=$(".colorpicker.dropdown-menu");return Color.setColor(this.$editor().queryCommandValue("foreColor")),foreColor=Color.toHex(),foreColor&&(scope.fontColor=foreColor),unwatch=scope.$watch("fontColor",function(value,oldValue){""!==value&&value!==oldValue&&(clearTimeout(applyColorTimeout),applyColorTimeout=setTimeout(function(){var inputElement=$(".colorpicker.colorpicker-visible input");inputElement.is(":focus")?(caretPosition=getCaretPosition(inputElement[0]),restoreSelection(),textAngular.$editor().wrapSelection("foreColor",value),textAngular.$editor().startAction(),setCaretPosition(inputElement[0],caretPosition)):(restoreSelection(),textAngular.$editor().wrapSelection("foreColor",value),textAngular.$editor().startAction())},500))}),closeInterval=setInterval(function(){colorPickerElement.hasClass("colorpicker-visible")||(endAction(),clearInterval(closeInterval))},100),!1}}),taRegisterTool("ul",{iconclass:"fa fa-list-ul",tooltiptext:taTranslations.ul.tooltip,action:function(){this.$editor().wrapSelection("insertUnorderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertUnorderedList")}}),taRegisterTool("ol",{iconclass:"fa fa-list-ol",tooltiptext:taTranslations.ol.tooltip,action:function(){this.$editor().wrapSelection("insertOrderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertOrderedList")}}),taRegisterTool("quote",{iconclass:"fa fa-quote-right",tooltiptext:taTranslations.quote.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<BLOCKQUOTE>")},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),taRegisterTool("undo",{iconclass:"fa fa-undo",tooltiptext:taTranslations.undo.tooltip,action:function(){return this.$editor().wrapSelection("undo",null)}}),taRegisterTool("redo",{iconclass:"fa fa-repeat",tooltiptext:taTranslations.redo.tooltip,action:function(){return this.$editor().wrapSelection("redo",null)}}),taRegisterTool("bold",{iconclass:"fa fa-bold",tooltiptext:taTranslations.bold.tooltip,action:function(){this.$editor().wrapSelection("bold",null)},activeState:function(){return this.$editor().queryCommandState("bold")},commandKeyCode:98}),taRegisterTool("justifyLeft",{iconclass:"fa fa-align-left",tooltiptext:taTranslations.justifyLeft.tooltip,action:function(){return this.$editor().wrapSelection("justifyLeft",null)},activeState:function(commonElement){var result=!1;return commonElement&&(result="left"===commonElement.css("text-align")||"left"===commonElement.attr("align")||"right"!==commonElement.css("text-align")&&"center"!==commonElement.css("text-align")&&"justify"!==commonElement.css("text-align")&&!this.$editor().queryCommandState("justifyRight")&&!this.$editor().queryCommandState("justifyCenter")&&!this.$editor().queryCommandState("justifyFull")),result=result||this.$editor().queryCommandState("justifyLeft")}}),taRegisterTool("justifyRight",{iconclass:"fa fa-align-right",tooltiptext:taTranslations.justifyRight.tooltip,action:function(){return this.$editor().wrapSelection("justifyRight",null)},activeState:function(commonElement){var result=!1;return commonElement&&(result="right"===commonElement.css("text-align")),result=result||this.$editor().queryCommandState("justifyRight")}}),taRegisterTool("justifyCenter",{iconclass:"fa fa-align-center",tooltiptext:taTranslations.justifyCenter.tooltip,action:function(){return this.$editor().wrapSelection("justifyCenter",null)},activeState:function(commonElement){var result=!1;return commonElement&&(result="center"===commonElement.css("text-align")),result=result||this.$editor().queryCommandState("justifyCenter")}}),taRegisterTool("indent",{iconclass:"fa fa-indent",tooltiptext:taTranslations.indent.tooltip,action:function(){return this.$editor().wrapSelection("indent",null)},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),taRegisterTool("outdent",{iconclass:"fa fa-outdent",tooltiptext:taTranslations.outdent.tooltip,action:function(){return this.$editor().wrapSelection("outdent",null)},activeState:function(){return!1}}),taRegisterTool("italics",{iconclass:"fa fa-italic",tooltiptext:taTranslations.italic.tooltip,action:function(){this.$editor().wrapSelection("italic",null)},activeState:function(){return this.$editor().queryCommandState("italic")},commandKeyCode:105}),taRegisterTool("underline",{iconclass:"fa fa-underline",tooltiptext:taTranslations.underline.tooltip,action:function(){this.$editor().wrapSelection("underline",null)},activeState:function(){return this.$editor().queryCommandState("underline")},commandKeyCode:117}),taRegisterTool("strikeThrough",{iconclass:"fa fa-strikethrough",action:function(){this.$editor().wrapSelection("strikeThrough",null)},activeState:function(){return document.queryCommandState("strikeThrough")}}),taRegisterTool("clear",{iconclass:"fa fa-ban",tooltiptext:taTranslations.clear.tooltip,action:function(deferred,restoreSelection){var i;this.$editor().wrapSelection("removeFormat",null);var possibleNodes=angular.element(taSelection.getSelectionElement()),removeListElements=function(list){list=angular.element(list);var prevElement=list;angular.forEach(list.children(),function(liElem){var newElem=angular.element("<p></p>");newElem.html(angular.element(liElem).html()),prevElement.after(newElem),prevElement=newElem}),list.remove()};if(angular.forEach(possibleNodes.find("ul"),removeListElements),angular.forEach(possibleNodes.find("ol"),removeListElements),"li"===possibleNodes[0].tagName.toLowerCase()){var _list=possibleNodes[0].parentNode.childNodes,_preLis=[],_postLis=[],_found=!1;for(i=0;i<_list.length;i++)_list[i]===possibleNodes[0]?_found=!0:_found?_postLis.push(_list[i]):_preLis.push(_list[i]);var _parent=angular.element(possibleNodes[0].parentNode),newElem=angular.element("<p></p>");if(newElem.html(angular.element(possibleNodes[0]).html()),0===_preLis.length||0===_postLis.length)0===_postLis.length?_parent.after(newElem):_parent[0].parentNode.insertBefore(newElem[0],_parent[0]),0===_preLis.length&&0===_postLis.length?_parent.remove():angular.element(possibleNodes[0]).remove();else{var _firstList=angular.element("<"+_parent[0].tagName+"></"+_parent[0].tagName+">"),_secondList=angular.element("<"+_parent[0].tagName+"></"+_parent[0].tagName+">");for(i=0;i<_preLis.length;i++)_firstList.append(angular.element(_preLis[i]));for(i=0;i<_postLis.length;i++)_secondList.append(angular.element(_postLis[i]));_parent.after(_secondList),_parent.after(newElem),_parent.after(_firstList),_parent.remove()}taSelection.setSelectionToElementEnd(newElem[0])}var $editor=this.$editor(),recursiveRemoveClass=function(node){node=angular.element(node),node[0]!==$editor.displayElements.text[0]&&node.removeAttr("class"),angular.forEach(node.children(),recursiveRemoveClass)};angular.forEach(possibleNodes,recursiveRemoveClass),"li"!==possibleNodes[0].tagName.toLowerCase()&&"ol"!==possibleNodes[0].tagName.toLowerCase()&&"ul"!==possibleNodes[0].tagName.toLowerCase()&&this.$editor().wrapSelection("formatBlock","default"),restoreSelection()}});var clearPopover=function(popover,container){popover.css("display","none"),popover.css("height",""),popover.removeClass("in"),container.attr("style",""),container.attr("class","popover-content")},imgOnSelectAction=function(event,$element,editorScope){var finishEdit=function(){editorScope.updateTaBindtaTextElement(),editorScope.hidePopover()},container=editorScope.displayElements.popoverContainer;clearPopover(editorScope.displayElements.popover,container),event.preventDefault(),editorScope.displayElements.popover.css("width","375px"),container.empty();var buttonGroup=angular.element('<div class="btn-group" style="padding-right: 6px;">'),fullButton=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">100% </button>');fullButton.on("click",function(event){event.preventDefault(),$element.css({width:"100%",height:""}),finishEdit()});var halfButton=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">50% </button>');halfButton.on("click",function(event){event.preventDefault(),$element.css({width:"50%",height:""}),finishEdit()});var quartButton=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">25% </button>');quartButton.on("click",function(event){event.preventDefault(),$element.css({width:"25%",height:""}),finishEdit()});var resetButton=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">Reset</button>');resetButton.on("click",function(event){event.preventDefault(),$element.css({width:"",height:""}),finishEdit()}),buttonGroup.append(fullButton),buttonGroup.append(halfButton),buttonGroup.append(quartButton),buttonGroup.append(resetButton),container.append(buttonGroup),buttonGroup=angular.element('<div class="btn-group" style="padding-right: 6px;">');var floatLeft=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-left"></i></button>');floatLeft.on("click",function(event){event.preventDefault(),$element.css("float","left"),$element.css("cssFloat","left"),$element.css("styleFloat","left"),finishEdit()});var floatRight=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-right"></i></button>');floatRight.on("click",function(event){event.preventDefault(),$element.css("float","right"),$element.css("cssFloat","right"),$element.css("styleFloat","right"),finishEdit()});var floatNone=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-justify"></i></button>');floatNone.on("click",function(event){event.preventDefault(),$element.css("float",""),$element.css("cssFloat",""),$element.css("styleFloat",""),finishEdit()}),buttonGroup.append(floatLeft),buttonGroup.append(floatNone),buttonGroup.append(floatRight),container.append(buttonGroup),buttonGroup=angular.element('<div class="btn-group">');var remove=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-trash-o"></i></button>');remove.on("click",function(event){event.preventDefault(),$element.remove(),finishEdit()}),buttonGroup.append(remove),container.append(buttonGroup),editorScope.showPopover($element),editorScope.showResizeOverlay($element)};taRegisterTool("insertImage",{iconclass:"fa fa-picture-o",tooltiptext:taTranslations.insertImage.tooltip,action:function(){var imageLink;return imageLink=$window.prompt(taTranslations.insertImage.dialogPrompt,"http://"),imageLink&&""!==imageLink&&"http://"!==imageLink?this.$editor().wrapSelection("insertImage",imageLink,!0):void 0},onElementSelect:{element:"img",action:function(event,$element,editorScope){selectElementContents($element[0])}}}),taRegisterTool("insertVideo",{iconclass:"fa fa-youtube-play",tooltiptext:taTranslations.insertVideo.tooltip,action:function(){var urlPrompt;if(urlPrompt=$window.prompt(taTranslations.insertVideo.dialogPrompt,"https://"),urlPrompt&&""!==urlPrompt&&"https://"!==urlPrompt){var ids=urlPrompt.match(/(\?|&)v=[^&]*/);if(ids&&ids.length>0){var urlLink="https://www.youtube.com/embed/"+ids[0].substring(3),embed='<img class="ta-insert-video" src="https://img.youtube.com/vi/'+ids[0].substring(3)+'/hqdefault.jpg" ta-insert-video="'+urlLink+'" contenteditable="false" src="" allowfullscreen="true" frameborder="0" />';return this.$editor().wrapSelection("insertHTML",embed,!0)}}},onElementSelect:{element:"img",onlyWithAttrs:["ta-insert-video"],action:imgOnSelectAction}}),taRegisterTool("insertLink",{tooltiptext:taTranslations.insertLink.tooltip,iconclass:"fa fa-link",action:function(){var urlLink;return urlLink=$window.prompt(taTranslations.insertLink.dialogPrompt,"http://"),urlLink&&""!==urlLink&&"http://"!==urlLink?this.$editor().wrapSelection("createLink",urlLink,!0):void 0},activeState:function(commonElement){return commonElement?"A"===commonElement[0].tagName:!1},onElementSelect:{element:"a",action:function(event,$element,editorScope){var container=editorScope.displayElements.popoverContainer;clearPopover(editorScope.displayElements.popover,container),editorScope.hideResizeOverlay(),event.preventDefault(),editorScope.displayElements.popover.css("max-width","485px"),editorScope.displayElements.popover.css("width","auto"),editorScope.displayElements.popover.css("height","42px"),container.empty();var link=angular.element($sanitize('<a href="'+$element.attr("href")+'" target="_blank">'+$element.attr("href")+"</a>"));link.css({display:"inline-block","max-width":"250px","margin-right":"20px","margin-top":"3px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle","float":"left"}),container.append(link);var buttonGroup=angular.element('<div class="btn-group pull-right">'),reLinkButton=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+taTranslations.editLink.reLinkButton.tooltip+'"><i class="fa fa-pencil-square-o"></i></button>');reLinkButton.on("click",function(event){event.preventDefault();var urlLink=$window.prompt(taTranslations.insertLink.dialogPrompt,$element.attr("href"));urlLink&&""!==urlLink&&"http://"!==urlLink&&($element.attr("href",urlLink),editorScope.updateTaBindtaTextElement()),editorScope.hidePopover()}),buttonGroup.append(reLinkButton);var unLinkButton=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+taTranslations.editLink.unLinkButton.tooltip+'"><i class="fa fa-chain-broken"></i></button>');unLinkButton.on("click",function(event){event.preventDefault(),$element.replaceWith($element.contents()),editorScope.updateTaBindtaTextElement(),editorScope.hidePopover()}),buttonGroup.append(unLinkButton);var targetToggle=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on">'+taTranslations.editLink.targetToggle.buttontext+"</button>");"_blank"===$element.attr("target")&&targetToggle.addClass("active"),targetToggle.on("click",function(event){event.preventDefault(),$element.attr("target","_blank"===$element.attr("target")?"":"_blank"),targetToggle.toggleClass("active"),editorScope.updateTaBindtaTextElement()}),buttonGroup.append(targetToggle),container.append(buttonGroup),editorScope.showPopover($element)}}}),taRegisterTool("wordcount",{display:'<div id="toolbarWC" style="display:block; min-width:100px;">Words:{{wordcount}}</div>',disabled:!0,wordcount:0,activeState:function(){var textElement=this.$editor().displayElements.text,workingHTML=textElement[0].innerHTML,sourceText=workingHTML.replace(/(<[^>]*?>)/gi," "),sourceTextMatches=sourceText.match(/\S+/g),noOfWords=sourceTextMatches&&sourceTextMatches.length||0;return this.wordcount=noOfWords,this.$editor().wordcount=noOfWords,!1}}),taRegisterTool("charcount",{display:'<div id="toolbarCC" style="display:block; min-width:120px;">Characters:{{charcount}}</div>',disabled:!0,charcount:0,activeState:function(){var textElement=this.$editor().displayElements.text,sourceText=textElement[0].innerText||textElement[0].textContent,noOfChars=sourceText.replace(/(\r\n|\n|\r)/gm,"").replace(/^\s+/g," ").replace(/\s+$/g," ").length;return this.charcount=noOfChars,this.$editor().charcount=noOfChars,!1}})}]),function(){angular.module("textAngularTokens",[]).service("contestantTokensService",["taSelection",function(taSelection){var attributeReg,fixTokenWrapping,fixTokensWrapping,prepareTokens,prepareTokensReg,selectElementContents,token,token_list,tokens,washTokens,washTokensReg;token_list=[];for(token in window.confirmationEmailTokens)token_list.push(token);return tokens=token_list.join("|"),washTokensReg=new RegExp("<(?:span|SPAN) [^>]*ta-insert-token[^>]*>("+tokens+")([^<]*)</(?:span|SPAN)>","g"),prepareTokensReg=new RegExp("(.?.?)(?:###)?("+tokens+")(?:###)?","g"),attributeReg=new RegExp("=['\"]?"),washTokens=function(content){return content.replace(washTokensReg,"$1$2")},prepareTokens=function(content){return content.replace(prepareTokensReg,function(str,prefix,token){var tokenInfo;return prefix.match(attributeReg)||!token?""+prefix+token:(tokenInfo=window.confirmationEmailTokens[token],prefix+"<span ta-insert-token class='"+tokenInfo.tagName+"'>"+token+"</span>")})},selectElementContents=function(el){var range,sel;return window.getSelection&&document.createRange?(range=document.createRange(),range.selectNodeContents(el),sel=window.getSelection(),sel.removeAllRanges(),sel.addRange(range)):document.body.createTextRange?(range=document.body.createTextRange(),range.moveToElementText(el),range.select()):void 0},fixTokenWrapping=function(tokenElement){var child,isSelected,selection,tokenName;return tokenElement.childElementCount>0&&(child=tokenElement.children[0],!$(child).hasClass("rangySelectionBoundary")&&(tokenName=$(child).html(),selection=taSelection.getSelectionElement(),isSelected=$(selection).is("[ta-insert-token]")||$(selection.parentElement).is("[ta-insert-token]"),$(tokenElement).after(child),$(tokenElement).remove(),$(child).html(prepareTokens($(child).html())),isSelected))?setTimeout(function(){return selectElementContents(child)},0):void 0},fixTokensWrapping=function(textElement){return tokens=textElement.find("[ta-insert-token]"),setTimeout(function(){return tokens.each(function(){return fixTokenWrapping(this)})},0)},{washTokens:washTokens,prepareTokens:prepareTokens,fixTokensWrapping:fixTokensWrapping}}])}.call(this),function(){angular.module("textAngularButtons",[]).service("buttonDesignerService",["taSelection","$sanitize",function(taSelection,$sanitize){
var ButtonDesigner,ButtonDesignerContainer,defaults,globalContainer,prepareButtons,prepareButtonsReg,washButtonReg,washButtons;return prepareButtonsReg=new RegExp('<((?:a|A)[^>]*class="[^>]*btn[^>]*)>',"g"),washButtonReg=new RegExp(" (ta-insert-button|contenteditable)[^\\s>]*","g"),defaults={leftIcon:"fa-share-square",rightIcon:"fa-heart",defaultColor:"btn-info",defaultSize:"btn-large",defaultType:"link",placeholderLink:"https://gleam.io",defaultContent:"Click Here"},globalContainer=null,ButtonDesignerContainer=function(){function ButtonDesignerContainer(){var that;that=this,this.render(),this.bindHandlers()}return ButtonDesignerContainer.prototype.render=function(){var that;return that=this,this.container=dom(".button-designer",[dom(".line.preview-row",[dom("label","Preview: "),this.preview=dom("span.preview",[this.previewButton=this.renderPreviewButton()])]),dom(".line.controls",[dom("span",[this.leftIconPickerElement=dom("a.btn.btn-primary",{href:"javascript:void(0)"})]),this.textInput=dom("input.text-input",{value:defaults.defaultContent,type:"text"}),dom("span",[this.rightIconPickerElement=dom("a.btn.btn-primary",{href:"javascript:void(0)"})])]),this.linkWrapper=dom(".line.controls.link-wrapper",[dom("span.url-label","URL: "),this.linkInput=dom("input",{type:"text",placeholder:defaults.placeholderLink})]),dom(".line.controls",[dom(".btn-group.colors",[dom("label.btn.btn-primary",{"data-value":"btn-primary"},[dom("span","Primary")]),dom("label.btn.btn-info",{"data-value":"btn-info"},[dom("span","Info")]),dom("label.btn.btn-success",{"data-value":"btn-success"},[dom("span","Success")]),dom("label.btn.btn-warning",{"data-value":"btn-warning"},[dom("span","Warning")]),dom("label.btn.btn-danger",{"data-value":"btn-danger"},[dom("span","Danger")])])]),dom(".line.controls.insert-line",[this.insertButton=dom("button.btn.btn-primary.btn-large.insert-button","Insert"),this.cancelButton=dom("button.btn.btn-info.btn-large.cancel-button","Cancel")])])},ButtonDesignerContainer.prototype.bindHandlers=function(){var onKeydown,that;return that=this,$(this.container).on("click",".colors label",function(){return that.buttonColor=$(this).data("value"),that.refreshPreview()}),onKeydown=function(event,eventData){return event.stopPropagation(),that.visible&&(13===event.keyCode&&(that.onApply&&that.onApply(that.getButtonHtml()),that.hidePopover()),27===event.keyCode)?that.hidePopover():void 0},$(this.textInput).on("keydown",onKeydown),$(this.linkInput).on("keydown",onKeydown),$(this.textInput).on("keyup change paste",function(){return that.text=$(this).val(),$(that.contentSpan).html(that.text),that.refreshPreview()}),$(this.linkInput).on("keyup change paste",function(){return that.href=$(this).val(),$(that.previewButton).attr("href",that.text),that.refreshPreview()}),$(this.insertButton).on("click",function(event){return that.onApply&&that.onApply(that.getButtonHtml()),that.hidePopover()}),$(this.cancelButton).on("click",function(event){return that.hidePopover()}),this.initIconPickers(),this.href&&$(this.linkInput).val(this.href),this.text&&$(this.textInput).val(this.text),this.leftIcon&&$(this.leftIconPickerElement).iconpicker("setIcon",this.leftIcon),this.rightIcon&&$(this.rightIconPickerElement).iconpicker("setIcon",this.rightIcon),$(document).on("click","body",function(e){return!that.container||$(that.container).is(e.target)||0!==$(that.container).has(e.target).length||0!==$(e.target).parents(".popover").length||$(e.target).is("[button-designer]")||$(e.target).is("[ta-insert-button]")?void 0:that.hidePopover()}),$(document).on("mousedown","[text-angular]",function(e){return!that.container||$(that.container).is(e.target)||0!==$(that.container).has(e.target).length||$(e.target).is("[button-designer]")||$(e.target).is("[ta-insert-button]")?void 0:that.hidePopover()}),$(document).on("keydown",function(event,eventData){return that.visible&&(event.stopPropagation(),event.preventDefault(),13===event.keyCode&&(that.onApply&&that.onApply(that.getButtonHtml()),that.hidePopover()),27===event.keyCode&&that.hidePopover(),46===event.keyCode||8===event.keyCode)?(that.hidePopover(),that.onRemove&&that.onRemove()):void 0})},ButtonDesignerContainer.prototype.renderPreviewButton=function(){var button,buttonType,content;return buttonType=this.buttonType||defaults.defaultType,content=[],this.leftIcon&&content.push(dom("i.fa."+this.leftIcon)),content.push(this.contentSpan=dom("span","&nbsp;&nbsp;"+(this.text||defaults.defaultContent)+"&nbsp;&nbsp;")),this.rightIcon&&content.push(dom("i.fa."+this.rightIcon)),button=dom("a.btn.btn-large.btn-embossed",{href:this.href||""},content),$(button).addClass(this.buttonColor||defaults.defaultColor),button},ButtonDesignerContainer.prototype.leftIconHtml=function(){return this.leftIcon&&"fa-"!==this.leftIcon?"<i class='fa "+this.leftIcon+"'></i>&nbsp;&nbsp;":""},ButtonDesignerContainer.prototype.rightIconHtml=function(){return this.rightIcon&&"fa-"!==this.rightIcon?"&nbsp;&nbsp;<i class='fa "+this.rightIcon+"'></i>":""},ButtonDesignerContainer.prototype.getButtonHtml=function(){return"<a class='btn btn-embossed btn-large "+(this.buttonColor||defaults.defaultColor)+"' href='"+(this.href||"")+"' ta-insert-button contenteditable='false'>"+this.leftIconHtml()+(this.text||defaults.defaultContent)+this.rightIconHtml()+"</a>"},ButtonDesignerContainer.prototype.setLinkConfigurable=function(value){return this.linkConfigurable=value},ButtonDesignerContainer.prototype.refresh=function(){return this.linkConfigurable?$(this.linkWrapper).show():$(this.linkWrapper).hide()},ButtonDesignerContainer.prototype.refreshPreview=function(){return $(this.previewButton).replaceWith(this.previewButton=this.renderPreviewButton())},ButtonDesignerContainer.prototype.initIconPickers=function(){var settings,that;return that=this,settings={iconset:"gleam",placement:"right"},$(this.leftIconPickerElement).iconpicker(settings).change(function(e){return that.leftIcon=e.icon,that.refreshPreview()}),$(this.rightIconPickerElement).iconpicker(settings).change(function(e){return that.rightIcon=e.icon,that.refreshPreview()})},ButtonDesignerContainer.prototype.showPopover=function(){return this.visible=!0,this.$element.popover({animation:!1,trigger:"manual",html:!0,content:this.container,container:"body",placement:"bottom"}),this.$element.popover("show")},ButtonDesignerContainer.prototype.hidePopover=function(){return this.visible?($(this.leftIconPickerElement).popover("destroy"),$(this.rightIconPickerElement).popover("destroy"),this.$element.popover("destroy"),this.onHide&&this.onHide(this.getButtonHtml()),this.visible=!1):void 0},ButtonDesignerContainer.prototype.parseElement=function($element){var html,leftIconMatch,leftIconRegExp,rightIconMatch,rightIconRegExp;return html=$element.html().replace(/&nbsp;/g," "),this.buttonColor=$element.attr("class").replace("btn-embossed","").replace("btn-large","").replace("btn","").trim(),this.href=$element.attr("href"),$(this.linkInput).val(this.href),leftIconRegExp=/^[\s]*<i class="fa (fa-[^"]*)"><\/i>/,leftIconMatch=html.match(leftIconRegExp),leftIconMatch&&"fa-"!==leftIconMatch[1]?(html=html.replace(leftIconMatch[0],""),this.leftIcon=leftIconMatch[1],$(this.leftIconPickerElement).iconpicker("setIcon",this.leftIcon)):$(this.leftIconPickerElement).iconpicker("setIcon","fa-"),rightIconRegExp=/<i class="fa (fa-[^"]*)"><\/i>[\s]*$/,rightIconMatch=html.match(rightIconRegExp),rightIconMatch&&"fa-"!==rightIconMatch[1]?(html=html.replace(rightIconMatch[0],""),this.rightIcon=rightIconMatch[1],$(this.rightIconPickerElement).iconpicker("setIcon",this.rightIcon)):$(this.rightIconPickerElement).iconpicker("setIcon","fa-"),this.text=html.trim(),$(this.textInput).val(this.text),this.refreshPreview()},ButtonDesignerContainer}(),ButtonDesigner=function(){function ButtonDesigner(element1,options){var that;this.element=element1,that=this,this.$element=$(this.element),globalContainer||(globalContainer=new ButtonDesignerContainer),this.container=globalContainer.container,this.refresh=globalContainer.refresh.bind(globalContainer),this.setLinkConfigurable=globalContainer.setLinkConfigurable.bind(globalContainer),this.onApply=options.onApply||function(){},this.beforeShow=options.beforeShow||function(){},this.onHide=options.onHide||function(){},this.onRemove=options.onRemove||function(){},this.$element.on("click",function(e){return e.preventDefault(),globalContainer.visible&&globalContainer.$element===that.$element?that.hidePopover():that.showPopover()})}return ButtonDesigner.prototype.showPopover=function(){return globalContainer.visible&&globalContainer.$element.popover("destroy"),globalContainer.onApply=this.onApply,globalContainer.onHide=this.onHide,globalContainer.beforeShow=this.beforeShow,globalContainer.onRemove=this.onRemove,globalContainer.$element=this.$element,this.beforeShow&&this.beforeShow(),globalContainer.showPopover()},ButtonDesigner.prototype.hidePopover=function(){return globalContainer.hidePopover()},ButtonDesigner.prototype.getButtonHtml=function(){return globalContainer.getButtonHtml()},ButtonDesigner.prototype.parseElement=function($element){return globalContainer.parseElement($element)},ButtonDesigner}(),washButtons=function(content){return content.replace(washButtonReg,"")},prepareButtons=function(content){return content.replace(prepareButtonsReg,function(str,prefix){return prefix.match(/ta-insert-button/),"<"+prefix+" ta-insert-button contenteditable='false'>"})},{ButtonDesigner:ButtonDesigner,washButtons:washButtons,prepareButtons:prepareButtons}}]).directive("buttonDesigner",["buttonDesignerService",function(buttonDesignerService){return{restrict:"A",require:"?ngModel",link:function(scope,element,attrs,ngModel){return scope.button={html:"",closed:!1},new buttonDesignerService.ButtonDesigner(element,{onApply:function(buttonHtml){return scope.$apply(function(){return scope.button.html=buttonHtml})},beforeShow:function(){return this.setLinkConfigurable(!scope.$parent.$parent.linkPresetted),this.refresh(),scope.button.html="",scope.button.closed=!1},onHide:function(){return scope.$apply(function(){return scope.button.closed=!0})}})}}}])}.call(this),function(){var indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};angular.module("textAngularHelpers",[]).service("customEmailService",[function(){var $body,applyBodyAttrs,applyStyles,bodyAttrs,bodyContent,bodyContentReg,bodyStyleReg,brokenBodyContentReg,clearBodyAttrs,doctype,doctypeReg,fireComponentsChange,fullHtmlReg,getEmailBody,getEmailBodyAttrs,getEmailComponents,getFullEmail,handlers,head,headReg,htmlAttrs,htmlReg,injectedBodyAttrs,injectedClass,injectedStyle,injectedStyleElement,isFullHtml,linkReg,links,lockedAttributes,metaReg,metaTags,onComponentsChange,saveEmailComponents,savedComponents,style,styleReg,title,titleReg;return fullHtmlReg=/<html[^>]*>[\s\S]*<body[^>]*>/i,doctypeReg=/<!DOCTYPE[^>]*>/i,htmlReg=/<html([^>]*)>/i,headReg=/<head[^>]*>([\s\S]*)<\/head>/i,titleReg=/<title>[\s\S]*<\/title>/i,metaReg=/<meta[^>]*>/gi,styleReg=/<style[^>]*>[\s\S]*<\/style>/i,linkReg=/<link[^>]*>/,bodyStyleReg=/<body([^>]*)>/i,bodyContentReg=/<body[^>]*>([\s\S]*)<\/body>/i,brokenBodyContentReg=/<body[^>]*>([\s\S]*)$/i,isFullHtml=function(content){return fullHtmlReg.test(content)},doctype=function(content){var found;return found=content.match(doctypeReg),found&&found[0]},htmlAttrs=function(content){var found;return found=content.match(htmlReg),found&&found[1]},head=function(content){var found;return found=content.match(headReg),found&&found[0]},title=function(content){var found;return found=content.match(titleReg),found&&found[0]},metaTags=function(content){return content.match(metaReg)},links=function(content){return content.match(linkReg)},style=function(content){var found;return found=content.match(styleReg),found&&found[0]},bodyAttrs=function(content){var found;return found=content.match(bodyStyleReg),found&&found[1]},bodyContent=function(content){var found,found2;return found=content.match(bodyContentReg),found?found[1]:(found2=content.match(brokenBodyContentReg),found2&&found2[1])},getEmailBody=function(content){return saveEmailComponents(content),isFullHtml(content)?bodyContent(content):content},getEmailBodyAttrs=function(content){return isFullHtml(content)?bodyAttrs(content):""},handlers=[],savedComponents={htmlAttrs:"",bodyAttrs:""},onComponentsChange=function(fun){return handlers.push(fun)},fireComponentsChange=function(){var handler,j,len,results;for(results=[],j=0,len=handlers.length;len>j;j++)handler=handlers[j],results.push(handler(savedComponents));return results},saveEmailComponents=function(content){var headContent,json;return isFullHtml(content)?(headContent=head(content),json={isFullHtml:!0,doctype:doctype(content),htmlAttrs:htmlAttrs(content),metaTags:metaTags(headContent),links:links(headContent),title:title(headContent),style:style(headContent),bodyAttrs:bodyAttrs(content)},JSON.stringify(savedComponents)!==JSON.stringify(json)&&(savedComponents=json,fireComponentsChange())):savedComponents={isFullHtml:!1,htmlAttrs:"",bodyAttrs:""},applyStyles()},injectedStyleElement=!1,injectedStyle="",injectedBodyAttrs="",injectedClass="",lockedAttributes=["id","contenteditable","contentEditable","ta-bind","ng-model","ng-unsafe-sanitizer"],$body=!1,clearBodyAttrs=function(){var attributes;return!$body&&($body=$(".ta-text-element")),attributes=$.map($body[0].attributes,function(item){return item.name}),$.each(attributes,function(i,attrName){var newClass;return"class"===attrName?(newClass=$body.attr(attrName).replace(injectedClass,"").trim(),$body.attr(attrName,newClass)):indexOf.call(lockedAttributes,attrName)<0?$body.removeAttr(attrName):void 0})},applyBodyAttrs=function(attrs){var newAttrs;return!$body&&($body=$(".ta-text-element")),newAttrs=savedComponents.bodyAttrs.trim().split('" '),newAttrs.forEach(function(attr){var e,key,keyvalue,newClass,value;if(keyvalue=attr.split("="),2===keyvalue.length){if(key=keyvalue[0].trim(),value=keyvalue[1].replace(/\"/g,""),"class"===key)return newClass=[$body.attr(key),value].join(" "),$body.attr(key,newClass),injectedClass=value;if(indexOf.call(lockedAttributes,key)<0)try{return $body.attr(key,value)}catch(error){return e=error,console.log(e)}}})},applyStyles=function(){return!$body&&($body=$(".ta-text-element")),savedComponents.style?savedComponents.style!==injectedStyle&&(injectedStyleElement&&injectedStyleElement.remove(),injectedStyle=savedComponents.style,injectedStyleElement=$(savedComponents.style),$("head").append(injectedStyleElement)):injectedStyleElement&&injectedStyleElement.remove(),savedComponents.bodyAttrs?savedComponents.bodyAttrs!==injectedBodyAttrs?(clearBodyAttrs(),injectedBodyAttrs=savedComponents.bodyAttrs,applyBodyAttrs(savedComponents.bodyAttrs)):void 0:clearBodyAttrs()},getEmailComponents=function(content){return savedComponents},getFullEmail=function(content){var fullHtml;return savedComponents.isFullHtml?(fullHtml="",savedComponents.doctype&&(fullHtml+=savedComponents.doctype+"\n"),fullHtml+="<html"+savedComponents.htmlAttrs+">\n",fullHtml+="<head>\n",savedComponents.title&&(fullHtml+=savedComponents.title+"\n"),savedComponents.metaTags&&(fullHtml+=savedComponents.metaTags.join("\n")+"\n"),savedComponents.links&&(fullHtml+=savedComponents.links.join("\n")+"\n"),savedComponents.style&&(fullHtml+=savedComponents.style+"\n"),fullHtml+="</head>\n",fullHtml+="<body"+savedComponents.bodyAttrs+">",fullHtml+=""+content.trim(),fullHtml+="</body>\n",fullHtml+="</html>"):content},{getEmailBody:getEmailBody,getEmailBodyAttrs:getEmailBodyAttrs,saveEmailComponents:saveEmailComponents,getEmailComponents:getEmailComponents,getFullEmail:getFullEmail,onComponentsChange:onComponentsChange}}])}.call(this),function(){"Use Strict";function validElementString(string){try{return 0!==angular.element(string).length}catch(any){return!1}}function registerTextAngularTool(name,toolDefinition){if(!name||""===name||taTools.hasOwnProperty(name))throw"textAngular Error: A unique name is required for a Tool Definition";if(toolDefinition.display&&(""===toolDefinition.display||!validElementString(toolDefinition.display))||!toolDefinition.display&&!toolDefinition.buttontext&&!toolDefinition.iconclass)throw'textAngular Error: Tool Definition for "'+name+'" does not have a valid display/iconclass/buttontext value';taTools[name]=toolDefinition}var _browserDetect={ie:function(){for(var undef,v=3,div=document.createElement("div"),all=div.getElementsByTagName("i");div.innerHTML="<!--[if gt IE "+ ++v+"]><i></i><![endif]-->",all[0];);return v>4?v:undef}(),webkit:/AppleWebKit\/([\d.]+)/i.test(navigator.userAgent)},BLOCKELEMENTS=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video)$/i,LISTELEMENTS=/^(ul|li|ol)$/i,VALIDELEMENTS=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video|li)$/i;String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var sheet,addCSSRule,removeCSSRule,_addCSSRule,_removeCSSRule;if(_browserDetect.ie>8||void 0===_browserDetect.ie){for(var _sheets=document.styleSheets,i=0;i<_sheets.length;i++)if((0===_sheets[i].media.length||_sheets[i].media.mediaText.match(/(all|screen)/gi))&&_sheets[i].href&&_sheets[i].href.match(/textangular\.(min\.|)css/gi)){sheet=_sheets[i];break}sheet&&null!=sheet.rules||(sheet=function(){var style=document.createElement("style");return _browserDetect.webkit&&style.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(style),style.sheet}()),addCSSRule=function(selector,rules){return _addCSSRule(sheet,selector,rules)},_addCSSRule=function(_sheet,selector,rules){var insertIndex;return _sheet.cssRules?insertIndex=Math.max(_sheet.cssRules.length-1,0):_sheet.rules&&(insertIndex=Math.max(_sheet.rules.length-1,0)),_sheet.insertRule?_sheet.insertRule(selector+"{"+rules+"}",insertIndex):_sheet.addRule(selector,rules,insertIndex),insertIndex},removeCSSRule=function(index){_removeCSSRule(sheet,index)},_removeCSSRule=function(sheet,index){sheet.removeRule?sheet.removeRule(index):sheet.deleteRule(index)}}angular.module("textAngular.factories",[]).factory("taBrowserTag",[function(){return function(tag){return tag?""===tag?void 0===_browserDetect.ie?"div":_browserDetect.ie<=8?"P":"p":_browserDetect.ie<=8?tag.toUpperCase():tag:_browserDetect.ie<=8?"P":"p"}}]).factory("taApplyCustomRenderers",["taCustomRenderers","taDOM",function(taCustomRenderers,taDOM){return function(val){var element=angular.element("<div></div>");return element[0].innerHTML=val,angular.forEach(taCustomRenderers,function(renderer){var elements=[];renderer.selector&&""!==renderer.selector?elements=element.find(renderer.selector):renderer.customAttribute&&""!==renderer.customAttribute&&(elements=taDOM.getByAttribute(element,renderer.customAttribute)),angular.forEach(elements,function(_element){_element=angular.element(_element),renderer.selector&&""!==renderer.selector&&renderer.customAttribute&&""!==renderer.customAttribute?void 0!==_element.attr(renderer.customAttribute)&&renderer.renderLogic(_element):renderer.renderLogic(_element)})}),element[0].innerHTML}}]).factory("taFixChrome",function(){var taFixChrome=function(html){if(!html||!angular.isString(html)||html.length<=0)return html;for(var match,styleVal,newTag,spanMatch=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,finalHtml="",lastIndex=0;match=spanMatch.exec(html);)styleVal=match[3]||match[4],styleVal&&styleVal.match(/line-height: 1.428571429;|color: inherit; line-height: 1.1;/i)&&(styleVal=styleVal.replace(/( |)font-family: inherit;|( |)line-height: 1.428571429;|( |)line-height:1.1;|( |)color: inherit;/gi,""),newTag="<"+match[1].trim(),styleVal.length>0&&(newTag+=" style="+match[2].substring(0,1)+styleVal+match[2].substring(0,1)),newTag+=match[5].trim()+">",finalHtml+=html.substring(lastIndex,match.index)+newTag,lastIndex=match.index+match[0].length);return finalHtml+=html.substring(lastIndex),lastIndex>0?finalHtml.replace(/<span\s*>(.*?)<\/span>(<br(\/|)>|)/gi,"$1"):html};return taFixChrome}).factory("taSanitize",["$sanitize","taDOM",function($sanitize,taDOM){function wrapNested(html,wrapTag){for(var match,depth=0,lastIndex=0,tagRegex=/<[^>]*>/gi;match=tagRegex.exec(html);)if(lastIndex=match.index,"/"===match[0].substr(1,1)){if(0===depth)break;depth--}else depth++;return wrapTag+html.substring(0,lastIndex)+angular.element(wrapTag)[0].outerHTML.substring(wrapTag.length)+html.substring(lastIndex)}function transformLegacyStyles(html){if(!html||!angular.isString(html)||html.length<=0)return html;for(var i,match,styleVal,newTag,newHtml,styleElementMatch=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,lastNewTag="",finalHtml="",lastIndex=0;match=styleElementMatch.exec(html);){styleVal=match[3]||match[4];var styleRegex=new RegExp(styleRegexString,"i");if(angular.isString(styleVal)&&styleRegex.test(styleVal)){newTag="";for(var styleRegexExec=new RegExp(styleRegexString,"ig");subMatch=styleRegexExec.exec(styleVal);)for(i=0;i<convert_infos.length;i++)subMatch[2*i+2]&&(newTag+="<"+convert_infos[i].tag+">");newHtml=transformLegacyStyles(html.substring(lastIndex,match.index)),finalHtml+=lastNewTag.length>0?wrapNested(newHtml,lastNewTag):newHtml,styleVal=styleVal.replace(new RegExp(styleRegexString,"ig"),""),finalHtml+="<"+match[1].trim(),styleVal.length>0&&(finalHtml+=' style="'+styleVal+'"'),finalHtml+=match[5]+">",lastIndex=match.index+match[0].length,lastNewTag=newTag}}return finalHtml+=lastNewTag.length>0?wrapNested(html.substring(lastIndex),lastNewTag):html.substring(lastIndex)}for(var convert_infos=[{property:"font-weight",values:["bold"],tag:"b"},{property:"font-style",values:["italic"],tag:"i"}],styleMatch=[],i=0;i<convert_infos.length;i++){var _partialStyle="("+convert_infos[i].property+":\\s*(";for(j=0;j<convert_infos[i].values.length;j++)j>0&&(_partialStyle+="|"),_partialStyle+=convert_infos[i].values[j];_partialStyle+=");)",styleMatch.push(_partialStyle)}var styleRegexString="("+styleMatch.join("|")+")";return function(unsafe,oldsafe,ignore){if(!ignore)try{unsafe=transformLegacyStyles(unsafe)}catch(e){}var safe;try{safe=$sanitize(unsafe),ignore&&(safe=unsafe)}catch(e){safe=oldsafe||""}var _preTags=safe.match(/(<pre[^>]*>.*?<\/pre[^>]*>)/gi);processedSafe=safe.replace(/(&#(9|10);)*/gi,"");var origTag,re=/<pre[^>]*>.*?<\/pre[^>]*>/gi,index=0,lastIndex=0;for(safe="";null!==(origTag=re.exec(processedSafe))&&index<_preTags.length;)safe+=processedSafe.substring(lastIndex,origTag.index)+_preTags[index],lastIndex=origTag.index+origTag[0].length,index++;return safe+processedSafe.substring(lastIndex)}}]).factory("taToolExecuteAction",["$q","$log",function($q,$log){return function(editor){void 0!==editor&&(this.$editor=function(){return editor});var result,deferred=$q.defer(),promise=deferred.promise,_editor=this.$editor();try{result=this.action(deferred,_editor.startAction()),promise["finally"](function(){_editor.endAction.call(_editor)})}catch(exc){$log.error(exc)}(result||void 0===result)&&deferred.resolve()}}]),angular.module("textAngular.DOM",["textAngular.factories"]).factory("taExecCommand",["taSelection","taBrowserTag","$document",function(taSelection,taBrowserTag,$document){var listToDefault=function(listElement,defaultWrap){var $target,i,children=listElement.find("li");for(i=children.length-1;i>=0;i--)$target=angular.element("<"+defaultWrap+">"+children[i].innerHTML+"</"+defaultWrap+">"),listElement.after($target);listElement.remove(),taSelection.setSelectionToElementEnd($target[0])},selectLi=function(liElement){/(<br(|\/)>)$/i.test(liElement.innerHTML.trim())?taSelection.setSelectionBeforeElement(angular.element(liElement).find("br")[0]):taSelection.setSelectionToElementEnd(liElement)},listToList=function(listElement,newListTag){var $target=angular.element("<"+newListTag+">"+listElement[0].innerHTML+"</"+newListTag+">");listElement.after($target),listElement.remove(),selectLi($target.find("li")[0])},childElementsToList=function(elements,listElement,newListTag){for(var html="",i=0;i<elements.length;i++)html+="<"+taBrowserTag("li")+">"+elements[i].innerHTML+"</"+taBrowserTag("li")+">";var $target=angular.element("<"+newListTag+">"+html+"</"+newListTag+">");listElement.after($target),listElement.remove(),selectLi($target.find("li")[0])};return function(taDefaultWrap,topNode){return taDefaultWrap=taBrowserTag(taDefaultWrap),function(command,showUI,options){var i,$target,html,_nodes,next,optionsTagName,selectedElement,defaultWrapper=angular.element("<"+taDefaultWrap+">");try{selectedElement=taSelection.getSelectionElement()}catch(e){}var $selected=angular.element(selectedElement);if(void 0!==selectedElement){var tagName=selectedElement.tagName.toLowerCase();if("insertorderedlist"===command.toLowerCase()||"insertunorderedlist"===command.toLowerCase()){var selfTag=taBrowserTag("insertorderedlist"===command.toLowerCase()?"ol":"ul");if(tagName===selfTag)return listToDefault($selected,taDefaultWrap);if("li"===tagName&&$selected.parent()[0].tagName.toLowerCase()===selfTag&&1===$selected.parent().children().length)return listToDefault($selected.parent(),taDefaultWrap);if("li"===tagName&&$selected.parent()[0].tagName.toLowerCase()!==selfTag&&1===$selected.parent().children().length)return listToList($selected.parent(),selfTag);if(tagName.match(BLOCKELEMENTS)&&!$selected.hasClass("ta-bind")){if("ol"===tagName||"ul"===tagName)return listToList($selected,selfTag);var childBlockElements=!1;return angular.forEach($selected.children(),function(elem){elem.tagName.match(BLOCKELEMENTS)&&(childBlockElements=!0)}),childBlockElements?childElementsToList($selected.children(),$selected,selfTag):childElementsToList([angular.element("<div>"+selectedElement.innerHTML+"</div>")[0]],$selected,selfTag)}if(tagName.match(BLOCKELEMENTS)){if(_nodes=taSelection.getOnlySelectedElements(),0===_nodes.length)$target=angular.element("<"+selfTag+"><li>"+selectedElement.innerHTML+"</li></"+selfTag+">"),$selected.html(""),$selected.append($target);else{if(1===_nodes.length&&("ol"===_nodes[0].tagName.toLowerCase()||"ul"===_nodes[0].tagName.toLowerCase()))return _nodes[0].tagName.toLowerCase()===selfTag?listToDefault(angular.element(_nodes[0]),taDefaultWrap):listToList(angular.element(_nodes[0]),selfTag);html="";var $nodes=[];for(i=0;i<_nodes.length;i++)if(3!==_nodes[i].nodeType){var $n=angular.element(_nodes[i]);if("li"===_nodes[i].tagName.toLowerCase())continue;html+="ol"===_nodes[i].tagName.toLowerCase()||"ul"===_nodes[i].tagName.toLowerCase()?$n[0].innerHTML:"span"!==_nodes[i].tagName.toLowerCase()||"ol"!==_nodes[i].childNodes[0].tagName.toLowerCase()&&"ul"!==_nodes[i].childNodes[0].tagName.toLowerCase()?"<"+taBrowserTag("li")+">"+$n[0].innerHTML+"</"+taBrowserTag("li")+">":$n[0].childNodes[0].innerHTML,$nodes.unshift($n)}$target=angular.element("<"+selfTag+">"+html+"</"+selfTag+">"),$nodes.pop().replaceWith($target),angular.forEach($nodes,function($node){$node.remove()})}return void taSelection.setSelectionToElementEnd($target[0])}}else{if("formatblock"===command.toLowerCase()){for(optionsTagName=options.toLowerCase().replace(/[<>]/gi,""),"default"===optionsTagName.trim()&&(optionsTagName=taDefaultWrap,options="<"+taDefaultWrap+">"),$target="li"===tagName?$selected.parent():$selected;!$target[0].tagName||!$target[0].tagName.match(BLOCKELEMENTS)&&!$target.parent().attr("contenteditable");)$target=$target.parent(),tagName=($target[0].tagName||"").toLowerCase();if(tagName===optionsTagName){_nodes=$target.children();var hasBlock=!1;for(i=0;i<_nodes.length;i++)hasBlock=hasBlock||_nodes[i].tagName.match(BLOCKELEMENTS);hasBlock?($target.after(_nodes),next=$target.next(),$target.remove(),$target=next):(defaultWrapper.append($target[0].childNodes),$target.after(defaultWrapper),$target.remove(),$target=defaultWrapper)}else if($target.parent()[0].tagName.toLowerCase()!==optionsTagName||$target.parent().hasClass("ta-bind"))if(tagName.match(LISTELEMENTS))$target.wrap(options);else{for(_nodes=taSelection.getOnlySelectedElements(),0===_nodes.length&&(_nodes=[$target[0]]),i=0;i<_nodes.length;i++)if(3===_nodes[i].nodeType||!_nodes[i].tagName.match(BLOCKELEMENTS))for(;3===_nodes[i].nodeType||!_nodes[i].tagName||!_nodes[i].tagName.match(BLOCKELEMENTS);)_nodes[i]=_nodes[i].parentNode;if(angular.element(_nodes[0]).hasClass("ta-bind"))$target=angular.element(options),$target[0].innerHTML=_nodes[0].innerHTML,_nodes[0].innerHTML=$target[0].outerHTML;else if("blockquote"===optionsTagName){for(html="",i=0;i<_nodes.length;i++)html+=_nodes[i].outerHTML;for($target=angular.element(options),$target[0].innerHTML=html,_nodes[0].parentNode.insertBefore($target[0],_nodes[0]),i=_nodes.length-1;i>=0;i--)_nodes[i].parentNode&&_nodes[i].parentNode.removeChild(_nodes[i])}else for(i=0;i<_nodes.length;i++)$target=angular.element(options),$target[0].innerHTML=_nodes[i].innerHTML,_nodes[i].parentNode.insertBefore($target[0],_nodes[i]),_nodes[i].parentNode.removeChild(_nodes[i])}else{var blockElement=$target.parent(),contents=blockElement.contents();for(i=0;i<contents.length;i++)blockElement.parent().hasClass("ta-bind")&&3===contents[i].nodeType&&(defaultWrapper=angular.element("<"+taDefaultWrap+">"),defaultWrapper[0].innerHTML=contents[i].outerHTML,contents[i]=defaultWrapper[0]),blockElement.parent()[0].insertBefore(contents[i],blockElement[0]);blockElement.remove()}return void taSelection.setSelectionToElementEnd($target[0])}if("createlink"===command.toLowerCase()){var _selection=taSelection.getSelection();if(_selection.collapsed)return void taSelection.insertHtml('<a href="'+options+'">'+options+"</a>",topNode)}else if("inserthtml"===command.toLowerCase())return void taSelection.insertHtml(options,topNode)}}try{$document[0].execCommand(command,showUI,options)}catch(e){}}}}]).service("taSelection",["$window","$document","taDOM",function($window,$document,taDOM){var _document=$document[0],rangy=$window.rangy,brException=function(element,offset){return element.tagName&&element.tagName.match(/^br$/i)&&0===offset&&!element.previousSibling?{element:element.parentNode,offset:0}:{element:element,offset:offset}},api={getSelection:function(){var range=rangy.getSelection().getRangeAt(0),container=range.commonAncestorContainer,selection={start:brException(range.startContainer,range.startOffset),end:brException(range.endContainer,range.endOffset),collapsed:range.collapsed};return container=3===container.nodeType?container.parentNode:container,container.parentNode===selection.start.element||container.parentNode===selection.end.element?selection.container=container.parentNode:selection.container=container,selection},getOnlySelectedElements:function(){var range=rangy.getSelection().getRangeAt(0),container=range.commonAncestorContainer;return container=3===container.nodeType?container.parentNode:container,range.getNodes([1],function(node){return node.parentNode===container})},getSelectionElement:function(){return api.getSelection().container},setSelection:function(el,start,end){var range=rangy.createRange();range.setStart(el,start),range.setEnd(el,end),rangy.getSelection().setSingleRange(range)},setSelectionBeforeElement:function(el){var range=rangy.createRange();range.selectNode(el),range.collapse(!0),rangy.getSelection().setSingleRange(range)},setSelectionAfterElement:function(el){var range=rangy.createRange();range.selectNode(el),range.collapse(!1),rangy.getSelection().setSingleRange(range)},setSelectionToElementStart:function(el){var range=rangy.createRange();range.selectNodeContents(el),range.collapse(!0),rangy.getSelection().setSingleRange(range)},setSelectionToElementEnd:function(el){var range=rangy.createRange();range.selectNodeContents(el),range.collapse(!1),el.childNodes&&el.childNodes[el.childNodes.length-1]&&"br"===el.childNodes[el.childNodes.length-1].nodeName&&(range.startOffset=range.endOffset=range.startOffset-1),rangy.getSelection().setSingleRange(range)},insertHtml:function(html,topNode,range){var parent,secondParent,_childI,nodes,i,lastNode,_tempFrag,element=angular.element("<div>"+html+"</div>"),range=range||rangy.getSelection().getRangeAt(0),frag=_document.createDocumentFragment(),children=element[0].childNodes,isInline=!0;if(children.length>0){for(nodes=[],_childI=0;_childI<children.length;_childI++)"p"===children[_childI].nodeName.toLowerCase()&&""===children[_childI].innerHTML.trim()||3===children[_childI].nodeType&&""===children[_childI].nodeValue.trim()||(isInline=isInline&&!BLOCKELEMENTS.test(children[_childI].nodeName),nodes.push(children[_childI]));for(var _n=0;_n<nodes.length;_n++)lastNode=frag.appendChild(nodes[_n]);
!isInline&&range.collapsed&&/^(|<br(|\/)>)$/i.test(range.startContainer.innerHTML)&&range.selectNode(range.startContainer)}else isInline=!0,lastNode=frag=_document.createTextNode(html);if(isInline)range.deleteContents();else if(range.collapsed&&range.startContainer!==topNode)if(range.startContainer.innerHTML&&range.startContainer.innerHTML.match(/^<[^>]*>$/i))parent=range.startContainer,1===range.startOffset?(range.setStartAfter(parent),range.setEndAfter(parent)):(range.setStartBefore(parent),range.setEndBefore(parent));else{if(3===range.startContainer.nodeType&&range.startContainer.parentNode!==topNode)for(parent=range.startContainer.parentNode,secondParent=parent.cloneNode(),taDOM.splitNodes(parent.childNodes,parent,secondParent,range.startContainer,range.startOffset);!VALIDELEMENTS.test(parent.nodeName);){angular.element(parent).after(secondParent),parent=parent.parentNode;var _lastSecondParent=secondParent;secondParent=parent.cloneNode(),taDOM.splitNodes(parent.childNodes,parent,secondParent,_lastSecondParent)}else parent=range.startContainer,secondParent=parent.cloneNode(),taDOM.splitNodes(parent.childNodes,parent,secondParent,void 0,void 0,range.startOffset);if(angular.element(parent).after(secondParent),range.setStartAfter(parent),range.setEndAfter(parent),/^(|<br(|\/)>)$/i.test(parent.innerHTML.trim())&&(range.setStartBefore(parent),range.setEndBefore(parent),angular.element(parent).remove()),/^(|<br(|\/)>)$/i.test(secondParent.innerHTML.trim())&&angular.element(secondParent).remove(),"li"===parent.nodeName.toLowerCase()){for(_tempFrag=_document.createDocumentFragment(),i=0;i<frag.childNodes.length;i++)element=angular.element("<li>"),taDOM.transferChildNodes(frag.childNodes[i],element[0]),taDOM.transferNodeAttributes(frag.childNodes[i],element[0]),_tempFrag.appendChild(element[0]);frag=_tempFrag,lastNode&&(lastNode=frag.childNodes[frag.childNodes.length-1],lastNode=lastNode.childNodes[lastNode.childNodes.length-1])}}else range.deleteContents();range.insertNode(frag),lastNode&&api.setSelectionToElementEnd(lastNode)}};return api}]).service("taDOM",function(){var taDOM={getByAttribute:function(element,attribute){var resultingElements=[],childNodes=element.children();return childNodes.length&&angular.forEach(childNodes,function(child){resultingElements=resultingElements.concat(taDOM.getByAttribute(angular.element(child),attribute))}),void 0!==element.attr(attribute)&&resultingElements.push(element),resultingElements},transferChildNodes:function(source,target){for(target.innerHTML="";source.childNodes.length>0;)target.appendChild(source.childNodes[0]);return target},splitNodes:function(nodes,target1,target2,splitNode,subSplitIndex,splitIndex){if(!splitNode&&isNaN(splitIndex))throw new Error("taDOM.splitNodes requires a splitNode or splitIndex");for(var startNodes=document.createDocumentFragment(),endNodes=document.createDocumentFragment(),index=0;nodes.length>0&&(isNaN(splitIndex)||splitIndex!==index)&&nodes[0]!==splitNode;)startNodes.appendChild(nodes[0]),index++;for(!isNaN(subSplitIndex)&&subSplitIndex>=0&&nodes[0]&&(startNodes.appendChild(document.createTextNode(nodes[0].nodeValue.substring(0,subSplitIndex))),nodes[0].nodeValue=nodes[0].nodeValue.substring(subSplitIndex));nodes.length>0;)endNodes.appendChild(nodes[0]);taDOM.transferChildNodes(startNodes,target1),taDOM.transferChildNodes(endNodes,target2)},transferNodeAttributes:function(source,target){for(var i=0;i<source.attributes.length;i++)target.setAttribute(source.attributes[i].name,source.attributes[i].value);return target}};return taDOM}),angular.module("textAngular.validators",[]).directive("taMaxText",function(){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ctrl){function validator(viewValue){var source=angular.element("<div/>");source.html(viewValue);var length=source.text().length;return max>=length?(ctrl.$setValidity("taMaxText",!0),viewValue):void ctrl.$setValidity("taMaxText",!1)}var max=parseInt(scope.$eval(attrs.taMaxText));if(isNaN(max))throw"Max text must be an integer";attrs.$observe("taMaxText",function(value){if(max=parseInt(value),isNaN(max))throw"Max text must be an integer";ctrl.$dirty&&ctrl.$setViewValue(ctrl.$viewValue)}),ctrl.$parsers.unshift(validator)}}}).directive("taMinText",function(){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ctrl){function validator(viewValue){var source=angular.element("<div/>");source.html(viewValue);var length=source.text().length;return!length||length>=min?(ctrl.$setValidity("taMinText",!0),viewValue):void ctrl.$setValidity("taMinText",!1)}var min=parseInt(scope.$eval(attrs.taMinText));if(isNaN(min))throw"Min text must be an integer";attrs.$observe("taMinText",function(value){if(min=parseInt(value),isNaN(min))throw"Min text must be an integer";ctrl.$dirty&&ctrl.$setViewValue(ctrl.$viewValue)}),ctrl.$parsers.unshift(validator)}}}),angular.module("textAngular.taBind",["textAngular.factories","textAngular.DOM"]).service("_taBlankTest",[function(){var INLINETAGS_NONBLANK=/<(a|abbr|acronym|bdi|bdo|big|cite|code|del|dfn|img|ins|kbd|label|map|mark|q|ruby|rp|rt|s|samp|time|tt|var)[^>]*(>|$)/i;return function(_defaultTest){return function(_blankVal){if(!_blankVal)return!0;if(INLINETAGS_NONBLANK.test(_blankVal))return!1;var _firstTagIndex,_firstMatch=/(^[^<]|>)[^<]/i.exec(_blankVal);return _firstMatch?_firstTagIndex=_firstMatch.index:(_blankVal=_blankVal.toString().replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,""),_firstTagIndex=_blankVal.indexOf(">")),_blankVal=_blankVal.trim().substring(_firstTagIndex,_firstTagIndex+1e5),/^[^<>]+$/i.test(_blankVal)?!1:0===_blankVal.length||_blankVal===_defaultTest||/^>(\s|&nbsp;)*<\/[^>]+>$/gi.test(_blankVal)?!0:/>\s*[^\s<]/i.test(_blankVal)||INLINETAGS_NONBLANK.test(_blankVal)?!1:!0}}}]).directive("taBind",["taSanitize","$timeout","$window","$document","taFixChrome","taBrowserTag","taSelection","taSelectableElements","taApplyCustomRenderers","taOptions","_taBlankTest","$parse","taDOM","contestantTokensService","customEmailService","buttonDesignerService",function(taSanitize,$timeout,$window,$document,taFixChrome,taBrowserTag,taSelection,taSelectableElements,taApplyCustomRenderers,taOptions,_taBlankTest,$parse,taDOM,contestantTokensService,customEmailService,buttonDesignerService){return{require:"ngModel",link:function(scope,element,attrs,ngModel){var _lastKey,_pasteHandler,_defaultVal,_defaultTest,_isContentEditable=void 0!==element.attr("contenteditable")&&element.attr("contenteditable"),_isInputFriendly=_isContentEditable||"textarea"===element[0].tagName.toLowerCase()||"input"===element[0].tagName.toLowerCase(),_isReadonly=!1,_focussed=!1,_skipRender=!1,_disableSanitizer=attrs.taUnsafeSanitizer||taOptions.disableSanitizer,BLOCKED_KEYS=/^(9|19|20|27|33|34|35|36|37|38|39|40|45|112|113|114|115|116|117|118|119|120|121|122|123|144|145)$/i,UNDO_TRIGGER_KEYS=/^(8|13|32|46|59|61|107|109|186|187|188|189|190|191|192|219|220|221|222)$/i;void 0===attrs.taDefaultWrap&&(attrs.taDefaultWrap="p"),""===attrs.taDefaultWrap?(_defaultVal="",_defaultTest=void 0===_browserDetect.ie?"<div><br></div>":_browserDetect.ie>=11?"<p><br></p>":_browserDetect.ie<=8?"<P>&nbsp;</P>":"<p>&nbsp;</p>"):(_defaultVal=void 0===_browserDetect.ie||_browserDetect.ie>=11?"<"+attrs.taDefaultWrap+"><br></"+attrs.taDefaultWrap+">":_browserDetect.ie<=8?"<"+attrs.taDefaultWrap.toUpperCase()+"></"+attrs.taDefaultWrap.toUpperCase()+">":"<"+attrs.taDefaultWrap+"></"+attrs.taDefaultWrap+">",_defaultTest=void 0===_browserDetect.ie||_browserDetect.ie>=11?"<"+attrs.taDefaultWrap+"><br></"+attrs.taDefaultWrap+">":_browserDetect.ie<=8?"<"+attrs.taDefaultWrap.toUpperCase()+">&nbsp;</"+attrs.taDefaultWrap.toUpperCase()+">":"<"+attrs.taDefaultWrap+">&nbsp;</"+attrs.taDefaultWrap+">");var _blankTest=_taBlankTest(_defaultTest);attrs.taPaste&&(_pasteHandler=$parse(attrs.taPaste)),element.addClass("ta-bind");var _undoKeyupTimeout;scope["$undoManager"+(attrs.id||"")]=ngModel.$undoManager={_stack:[],_index:0,_max:1e3,push:function(value){return"undefined"==typeof value||null===value||"undefined"!=typeof this.current()&&null!==this.current()&&value===this.current()?value:(this._index<this._stack.length-1&&(this._stack=this._stack.slice(0,this._index+1)),this._stack.push(value),_undoKeyupTimeout&&$timeout.cancel(_undoKeyupTimeout),this._stack.length>this._max&&this._stack.shift(),this._index=this._stack.length-1,value)},undo:function(){return this.setToIndex(this._index-1)},redo:function(){return this.setToIndex(this._index+1)},setToIndex:function(index){return 0>index||index>this._stack.length-1?void 0:(this._index=index,this.current())},current:function(){return this._stack[this._index]}};var _undo=scope["$undoTaBind"+(attrs.id||"")]=function(){if(!_isReadonly&&_isContentEditable){var content=ngModel.$undoManager.undo();"undefined"!=typeof content&&null!==content&&(_setInnerHTML(content),_setViewValue(content,!1),element[0].childNodes.length?taSelection.setSelectionToElementEnd(element[0].childNodes[element[0].childNodes.length-1]):taSelection.setSelectionToElementEnd(element[0]))}},_redo=scope["$redoTaBind"+(attrs.id||"")]=function(){if(!_isReadonly&&_isContentEditable){var content=ngModel.$undoManager.redo();"undefined"!=typeof content&&null!==content&&(_setInnerHTML(content),_setViewValue(content,!1),element[0].childNodes.length?taSelection.setSelectionToElementEnd(element[0].childNodes[element[0].childNodes.length-1]):taSelection.setSelectionToElementEnd(element[0]))}},_compileHtml=function(){if(contestantTokensService.fixTokensWrapping(element),_isContentEditable)return element[0].innerHTML;if(_isInputFriendly)return element.val();throw"textAngular Error: attempting to update non-editable taBind"},_setViewValue=function(_val,triggerUndo){_skipRender=!0,("undefined"==typeof triggerUndo||null===triggerUndo)&&(triggerUndo=_isContentEditable),("undefined"==typeof _val||null===_val)&&(_val=_compileHtml()),_blankTest(_val)?(""!==ngModel.$viewValue&&ngModel.$setViewValue(""),triggerUndo&&""!==ngModel.$undoManager.current()&&ngModel.$undoManager.push("")):(_reApplyOnSelectorHandlers(),ngModel.$viewValue!==_val&&(ngModel.$setViewValue(_val),triggerUndo&&ngModel.$undoManager.push(_val)))};if(scope.setViewValue=_setViewValue,scope["updateTaBind"+(attrs.id||"")]=function(){_isReadonly||_setViewValue()},_isInputFriendly)if(scope.events={},_isContentEditable){var _processingPaste=!1,processpaste=function(text){if(text&&text.trim().length){if(text.match(/class=["']*Mso(Normal|List)/i)){var textFragment=text.match(/<!--StartFragment-->([\s\S]*?)<!--EndFragment-->/i);textFragment=textFragment?textFragment[1]:text,textFragment=textFragment.replace(/<o:p>[\s\S]*?<\/o:p>/gi,"").replace(/class=(["']|)MsoNormal(["']|)/gi,"");var dom=angular.element("<div>"+textFragment+"</div>"),targetDom=angular.element("<div></div>"),_list={element:null,lastIndent:[],lastLi:null,isUl:!1};_list.lastIndent.peek=function(){var n=this.length;return n>0?this[n-1]:void 0};for(var _resetList=function(isUl){_list.isUl=isUl,_list.element=angular.element(isUl?"<ul>":"<ol>"),_list.lastIndent=[],_list.lastIndent.peek=function(){var n=this.length;return n>0?this[n-1]:void 0},_list.lastLevelMatch=null},i=0;i<=dom[0].childNodes.length;i++)if(dom[0].childNodes[i]&&"#text"!==dom[0].childNodes[i].nodeName&&"p"===dom[0].childNodes[i].tagName.toLowerCase()){var el=angular.element(dom[0].childNodes[i]),_listMatch=(el.attr("class")||"").match(/MsoList(Bullet|Number|Paragraph)(CxSp(First|Middle|Last)|)/i);if(_listMatch){if(el[0].childNodes.length<2||el[0].childNodes[1].childNodes.length<1)continue;var isUl="bullet"===_listMatch[1].toLowerCase()||"number"!==_listMatch[1].toLowerCase()&&!(/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(el[0].childNodes[1].innerHTML)||/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(el[0].childNodes[1].childNodes[0].innerHTML)),_indentMatch=(el.attr("style")||"").match(/margin-left:([\-\.0-9]*)/i),indent=parseFloat(_indentMatch?_indentMatch[1]:0),_levelMatch=(el.attr("style")||"").match(/mso-list:l([0-9]+) level([0-9]+) lfo[0-9+]($|;)/i);if(_levelMatch&&_levelMatch[2]&&(indent=parseInt(_levelMatch[2])),_levelMatch&&(!_list.lastLevelMatch||_levelMatch[1]!==_list.lastLevelMatch[1])||!_listMatch[3]||"first"===_listMatch[3].toLowerCase()||null===_list.lastIndent.peek()||_list.isUl!==isUl&&_list.lastIndent.peek()===indent)_resetList(isUl),targetDom.append(_list.element);else if(null!=_list.lastIndent.peek()&&_list.lastIndent.peek()<indent)_list.element=angular.element(isUl?"<ul>":"<ol>"),_list.lastLi.append(_list.element);else if(null!=_list.lastIndent.peek()&&_list.lastIndent.peek()>indent){for(;null!=_list.lastIndent.peek()&&_list.lastIndent.peek()>indent;)if("li"!==_list.element.parent()[0].tagName.toLowerCase()){if(!/[uo]l/i.test(_list.element.parent()[0].tagName.toLowerCase()))break;_list.element=_list.element.parent(),_list.lastIndent.pop()}else _list.element=_list.element.parent();_list.isUl="ul"===_list.element[0].tagName.toLowerCase(),isUl!==_list.isUl&&(_resetList(isUl),targetDom.append(_list.element))}_list.lastLevelMatch=_levelMatch,indent!==_list.lastIndent.peek()&&_list.lastIndent.push(indent),_list.lastLi=angular.element("<li>"),_list.element.append(_list.lastLi),_list.lastLi.html(el.html().replace(/<!(--|)\[if !supportLists\](--|)>[\s\S]*?<!(--|)\[endif\](--|)>/gi,"")),el.remove()}else _resetList(!1),targetDom.append(el)}var _unwrapElement=function(node){node=angular.element(node);for(var _n=node[0].childNodes.length-1;_n>=0;_n--)node.after(node[0].childNodes[_n]);node.remove()};angular.forEach(targetDom.find("span"),function(node){node.removeAttribute("lang"),node.attributes.length<=0&&_unwrapElement(node)}),angular.forEach(targetDom.find("font"),_unwrapElement),text=targetDom.html()}else{if(text=text.replace(/<(|\/)meta[^>]*?>/gi,""),text.match(/<[^>]*?(ta-bind)[^>]*?>/)){if(text.match(/<[^>]*?(text-angular)[^>]*?>/)){var _el=angular.element("<div>"+text+"</div>");_el.find("textarea").remove();for(var binds=taDOM.getByAttribute(_el,"ta-bind"),_b=0;_b<binds.length;_b++){for(var _target=binds[_b][0].parentNode.parentNode,_c=0;_c<binds[_b][0].childNodes.length;_c++)_target.parentNode.insertBefore(binds[_b][0].childNodes[_c],_target);_target.parentNode.removeChild(_target)}text=_el.html().replace('<br class="Apple-interchange-newline">',"")}}else text.match(/^<span/)&&(text=text.replace(/<(|\/)span[^>]*?>/gi,""));text=text.replace(/<br class="Apple-interchange-newline"[^>]*?>/gi,"").replace(/<span class="Apple-converted-space">( |&nbsp;)<\/span>/gi,"&nbsp;")}if(text=taSanitize(text,"",_disableSanitizer),_pasteHandler&&(text=_pasteHandler(scope,{$html:text})||text),_blankTest(taSelection.getSelectionElement().outerHTML)){var range=rangy.getSelection().getRangeAt(0);range.selectNodeContents(range.commonAncestorContainer),taSelection.insertHtml(text,element[0],range)}else taSelection.insertHtml(text,element[0]);$timeout(function(){ngModel.$setViewValue(_compileHtml()),_processingPaste=!1,element.removeClass("processing-paste")},0)}else _processingPaste=!1,element.removeClass("processing-paste")};if(element.on("paste",scope.events.paste=function(e,eventData){if(eventData&&angular.extend(e,eventData),_isReadonly||_processingPaste)return e.stopPropagation(),e.preventDefault(),!1;_processingPaste=!0,element.addClass("processing-paste");var pastedContent,clipboardData=(e.originalEvent||e).clipboardData;if(clipboardData&&clipboardData.getData){for(var _types="",_t=0;_t<clipboardData.types.length;_t++)_types+=" "+clipboardData.types[_t];return/text\/html/i.test(_types)?pastedContent=clipboardData.getData("text/html"):/text\/plain/i.test(_types)&&(pastedContent=clipboardData.getData("text/plain")),processpaste(pastedContent),e.stopPropagation(),e.preventDefault(),!1}var _savedSelection=$window.rangy.saveSelection(),_tempDiv=angular.element('<div class="ta-hidden-input" contenteditable="true"></div>');$document.find("body").append(_tempDiv),_tempDiv[0].focus(),$timeout(function(){$window.rangy.restoreSelection(_savedSelection),processpaste(_tempDiv[0].innerHTML),_tempDiv.remove(),element[0].focus()},0)}),element.on("cut",scope.events.cut=function(e){_isReadonly?e.preventDefault():$timeout(function(){ngModel.$setViewValue(_compileHtml())},0)}),element.on("keydown",scope.events.keydown=function(event,eventData){if(eventData&&angular.extend(event,eventData),!_isReadonly){var selectionElement=taSelection.getSelectionElement(),selection=taSelection.getSelection();if($(selectionElement).is("[ta-insert-token]")){var element=angular.element(selectionElement),token=element.text();if(13===event.keyCode){event.preventDefault();var _new=angular.element(_defaultVal);scope.hidePopover(),element.after(_new),taSelection.setSelectionToElementStart(_new[0])}else 46===event.keyCode?selection.start.offset===$(selection.start.element).text().length||(event.preventDefault(),scope.hidePopover(),element.remove()):8===event.keyCode?0===selection.start.offset||(event.preventDefault(),scope.hidePopover(),scope.hideResizeOverlay(),element.remove()):39===event.keyCode?selection.end.offset===$(selection.end.element).text().length||(event.preventDefault(),taSelection.setSelectionAfterElement(selectionElement)):37===event.keyCode?0===selection.start.offset||(event.preventDefault(),taSelection.setSelectionToElementStart(selectionElement)):38===event.keyCode||40===event.keyCode||(selection.start.offset===$(selection.start.element).text().length?setTimeout(function(){var afterText=element.text().slice(token.length),span=angular.element("<span></span>");element.html(token),span.html(afterText),element.after(span),taSelection.setSelectionToElementEnd(span[0])},0):event.preventDefault())}if(!event.altKey&&event.metaKey||event.ctrlKey)90!==event.keyCode||event.shiftKey?(90===event.keyCode&&event.shiftKey||89===event.keyCode&&!event.shiftKey)&&(_redo(),event.preventDefault()):(_undo(),event.preventDefault());else if(13===event.keyCode&&!event.shiftKey){var selection=taSelection.getSelectionElement();if(!selection.tagName.match(VALIDELEMENTS))return;var _new=angular.element(_defaultVal);if(/^<br(|\/)>$/i.test(selection.innerHTML.trim())&&"blockquote"===selection.parentNode.tagName.toLowerCase()&&!selection.nextSibling){$selection=angular.element(selection);var _parent=$selection.parent();_parent.after(_new),$selection.remove(),0===_parent.children().length&&_parent.remove(),taSelection.setSelectionToElementStart(_new[0]),event.preventDefault()}else/^<[^>]+><br(|\/)><\/[^>]+>$/i.test(selection.innerHTML.trim())&&"blockquote"===selection.tagName.toLowerCase()&&($selection=angular.element(selection),$selection.after(_new),$selection.remove(),taSelection.setSelectionToElementStart(_new[0]),event.preventDefault())}}}),element.on("keyup",scope.events.keyup=function(event,eventData){if(eventData&&angular.extend(event,eventData),_undoKeyupTimeout&&$timeout.cancel(_undoKeyupTimeout),!_isReadonly&&!BLOCKED_KEYS.test(event.keyCode)){if(""!==_defaultVal&&13===event.keyCode&&!event.shiftKey){for(var selection=taSelection.getSelectionElement();!selection.tagName.match(VALIDELEMENTS)&&selection!==element[0];)selection=selection.parentNode;if(selection.tagName.toLowerCase()!==attrs.taDefaultWrap&&"li"!==selection.tagName.toLowerCase()&&(""===selection.innerHTML.trim()||"<br>"===selection.innerHTML.trim())){var _new=angular.element(_defaultVal);angular.element(selection).replaceWith(_new),taSelection.setSelectionToElementStart(_new[0])}}var val=_compileHtml();if(""!==_defaultVal&&""===val.trim())_setInnerHTML(_defaultVal),taSelection.setSelectionToElementStart(element.children()[0]);else if("<"!==val.substring(0,1)&&""!==attrs.taDefaultWrap){var _savedSelection=$window.rangy.saveSelection();val=_compileHtml(),val="<"+attrs.taDefaultWrap+">"+val+"</"+attrs.taDefaultWrap+">",_setInnerHTML(val),$window.rangy.restoreSelection(_savedSelection)}var triggerUndo=_lastKey!==event.keyCode&&UNDO_TRIGGER_KEYS.test(event.keyCode);_setViewValue(val,triggerUndo),triggerUndo||(_undoKeyupTimeout=$timeout(function(){ngModel.$undoManager.push(val)},250)),_lastKey=event.keyCode}}),element.on("blur",scope.events.blur=function(){_focussed=!1,_isReadonly||_setViewValue(),_skipRender=!0,ngModel.$render()}),attrs.placeholder&&(_browserDetect.ie>8||void 0===_browserDetect.ie)){var ruleIndex;if(!attrs.id)throw"textAngular Error: An unique ID is required for placeholders to work";ruleIndex=addCSSRule("#"+attrs.id+".placeholder-text:before",'content: "'+attrs.placeholder+'"; color: #bbb; text-align: left; display: block;'),scope.$on("$destroy",function(){removeCSSRule(ruleIndex)})}element.on("focus",scope.events.focus=function(){_focussed=!0,element.removeClass("placeholder-text")}),element.on("mouseup",scope.events.mouseup=function(){try{var _selection=taSelection.getSelection();_selection.start.element===element[0]&&element.children().length&&taSelection.setSelectionToElementStart(element.children()[0])}catch(e){console.log(e)}}),element.on("mousedown",scope.events.mousedown=function(event,eventData){scope.hidePopover(),scope.hideResizeOverlay(),eventData&&angular.extend(event,eventData)}),element.on("click",function(event,eventData){event.stopPropagation()})}else{element.on("change blur",scope.events.change=scope.events.blur=function(){_isReadonly||ngModel.$setViewValue(_compileHtml())}),element.on("keydown",scope.events.keydown=function(event,eventData){if(eventData&&angular.extend(event,eventData),9===event.keyCode){var start=this.selectionStart,end=this.selectionEnd,value=element.val();if(event.shiftKey){var _linebreak=value.lastIndexOf("\n",start),_tab=value.lastIndexOf("	",start);-1!==_tab&&_tab>=_linebreak&&(element.val(value.substring(0,_tab)+value.substring(_tab+1)),this.selectionStart=this.selectionEnd=start-1)}else element.val(value.substring(0,start)+"	"+value.substring(end)),this.selectionStart=this.selectionEnd=start+1;event.preventDefault()}})}var _sanitize=function(unsafe){return ngModel.$oldViewValue=taSanitize(taFixChrome(unsafe),ngModel.$oldViewValue,_disableSanitizer)},_validity=function(value){return attrs.required&&ngModel.$setValidity("required",!_blankTest(value)),value},_fix_curly_quotes=function(value){return value.replace(/(=\s*)[\u201c\u201d]([^\u201c\u201d>]*)[\u201c\u201d]/g,'$1"$2"').replace(/(=\s*)[\u2018\u2019]([^\u2018\u2019>]*)[\u2018\u2019]/g,"$1'$2'")};ngModel.$parsers.push(_sanitize),ngModel.$parsers.unshift(_validity),ngModel.$parsers.unshift(_fix_curly_quotes),ngModel.$parsers.unshift(contestantTokensService.washTokens),ngModel.$parsers.unshift(buttonDesignerService.washButtons),ngModel.$formatters.push(_sanitize),ngModel.$formatters.unshift(contestantTokensService.prepareTokens),ngModel.$formatters.unshift(buttonDesignerService.prepareButtons),ngModel.$formatters.unshift(function(value){if(_blankTest(value))return value;var domTest=angular.element("<div>"+value+"</div>");return 0===domTest.children().length&&(value="<"+attrs.taDefaultWrap+">"+value+"</"+attrs.taDefaultWrap+">"),value}),ngModel.$formatters.unshift(_validity),ngModel.$formatters.unshift(function(value){return ngModel.$undoManager.push(value||"")});var selectorClickHandler=function(event){return scope.$emit("ta-element-select",this),event.preventDefault(),!1},fileDropHandler=function(event,eventData){if(eventData&&angular.extend(event,eventData),!dropFired&&!_isReadonly){dropFired=!0;var dataTransfer;dataTransfer=event.originalEvent?event.originalEvent.dataTransfer:event.dataTransfer,scope.$emit("ta-drop-event",this,event,dataTransfer),$timeout(function(){dropFired=!1,_setViewValue()},100)}},_reApplyOnSelectorHandlers=scope["reApplyOnSelectorHandlers"+(attrs.id||"")]=function(){_isReadonly||(angular.forEach(taSelectableElements,function(selector){element.find(selector).off("click",selectorClickHandler).on("click",selectorClickHandler)}),element.find("a[ta-insert-button]").off("mousedown",selectorClickHandler).on("mousedown",selectorClickHandler))},_setInnerHTML=function(newval){element[0].innerHTML=newval};scope.setInnerHTML=function(value){$(scope.displayElements.text).html(""===value?_defaultVal:value)},ngModel.$render=function(){var val=ngModel.$viewValue||"";_skipRender||(_isContentEditable&&_focussed&&(element.removeClass("placeholder-text"),element[0].blur(),$timeout(function(){element[0].focus(),taSelection.setSelectionToElementEnd(element.children()[element.children().length-1])},1)),_isContentEditable?(_setInnerHTML(""===val?_defaultVal:val),_isReadonly?element.off("drop",fileDropHandler):(_reApplyOnSelectorHandlers(),element.on("drop",fileDropHandler))):"textarea"!==element[0].tagName.toLowerCase()&&"input"!==element[0].tagName.toLowerCase()?_setInnerHTML(taApplyCustomRenderers(val)):element.val(val)),_isContentEditable&&attrs.placeholder&&(""===val.trim()?_focussed?element.removeClass("placeholder-text"):element.addClass("placeholder-text"):element.removeClass("placeholder-text")),_skipRender=!1},attrs.taReadonly&&(_isReadonly=scope.$eval(attrs.taReadonly),_isReadonly?(element.addClass("ta-readonly"),("textarea"===element[0].tagName.toLowerCase()||"input"===element[0].tagName.toLowerCase())&&element.attr("disabled","disabled"),void 0!==element.attr("contenteditable")&&element.attr("contenteditable")&&element.removeAttr("contenteditable")):(element.removeClass("ta-readonly"),"textarea"===element[0].tagName.toLowerCase()||"input"===element[0].tagName.toLowerCase()?element.removeAttr("disabled"):_isContentEditable&&element.attr("contenteditable","true")),scope.$watch(attrs.taReadonly,function(newVal,oldVal){oldVal!==newVal&&(newVal?(element.addClass("ta-readonly"),("textarea"===element[0].tagName.toLowerCase()||"input"===element[0].tagName.toLowerCase())&&element.attr("disabled","disabled"),void 0!==element.attr("contenteditable")&&element.attr("contenteditable")&&element.removeAttr("contenteditable"),angular.forEach(taSelectableElements,function(selector){element.find(selector).on("click",selectorClickHandler)}),element.find("a[ta-insert-button]").on("mousedown",selectorClickHandler),element.off("drop",fileDropHandler)):(element.removeClass("ta-readonly"),"textarea"===element[0].tagName.toLowerCase()||"input"===element[0].tagName.toLowerCase()?element.removeAttr("disabled"):_isContentEditable&&element.attr("contenteditable","true"),angular.forEach(taSelectableElements,function(selector){element.find(selector).off("click",selectorClickHandler)}),element.find("a[ta-insert-button]").on("mousedown",selectorClickHandler),element.on("drop",fileDropHandler)),_isReadonly=newVal)})),_isContentEditable&&!_isReadonly&&(angular.forEach(taSelectableElements,function(selector){element.find(selector).on("click",selectorClickHandler)}),element.find("a[ta-insert-button]").on("mousedown",selectorClickHandler),element.on("drop",fileDropHandler),element.on("blur",function(){_browserDetect.webkit&&(globalContentEditableBlur=!0)}))}}}]);var dropFired=!1,textAngular=angular.module("textAngular",["ngSanitize","textAngularSetup","textAngularTokens","textAngularButtons","textAngularHelpers","textAngular.factories","textAngular.DOM","textAngular.validators","textAngular.taBind"]),taTools={};textAngular.constant("taRegisterTool",registerTextAngularTool),textAngular.value("taTools",taTools),textAngular.config([function(){angular.forEach(taTools,function(value,key){delete taTools[key]})}]),textAngular.directive("textAngular",["$compile","$timeout","taOptions","taSelection","taExecCommand","textAngularManager","$window","$document","$animate","$log","$q","$parse","contestantTokensService","customEmailService","buttonDesignerService",function($compile,$timeout,taOptions,taSelection,taExecCommand,textAngularManager,$window,$document,$animate,$log,$q,$parse,contestantTokensService,customEmailService,buttonDesignerService){return{require:"?ngModel",scope:{},restrict:"EA",link:function(scope,element,attrs,ngModel){var _keydown,_keyup,_keypress,_mouseup,_focusin,_focusout,_originalContents,_toolbars,_taExecCommand,_resizeMouseDown,_serial=attrs.serial?attrs.serial:Math.floor(1e16*Math.random());scope._name=attrs.name?attrs.name:"textAngularEditor"+_serial,scope.customEmailService=customEmailService,scope.contestantTokensService=contestantTokensService;var oneEvent=function(_element,event,action){$timeout(function(){var _func=function(){_element.off(event,_func),action.apply(this,arguments)};_element.on(event,_func)},100)};_taExecCommand=taExecCommand(attrs.taDefaultWrap),angular.extend(scope,angular.copy(taOptions),{wrapSelection:function(command,opt,isSelectableElementTool){"undo"===command.toLowerCase()?scope["$undoTaBindtaTextElement"+_serial]():"redo"===command.toLowerCase()?scope["$redoTaBindtaTextElement"+_serial]():(_taExecCommand(command,!1,opt),isSelectableElementTool&&scope["reApplyOnSelectorHandlerstaTextElement"+_serial](),scope.displayElements.text[0].focus())},showHtml:scope.$eval(attrs.taShowHtml)||!1}),attrs.taFocussedClass&&(scope.classes.focussed=attrs.taFocussedClass),attrs.taTextEditorClass&&(scope.classes.textEditor=attrs.taTextEditorClass),attrs.taHtmlEditorClass&&(scope.classes.htmlEditor=attrs.taHtmlEditorClass),attrs.taTextEditorSetup&&(scope.setup.textEditorSetup=scope.$parent.$eval(attrs.taTextEditorSetup)),attrs.taHtmlEditorSetup&&(scope.setup.htmlEditorSetup=scope.$parent.$eval(attrs.taHtmlEditorSetup)),attrs.taFileDrop?scope.fileDropHandler=scope.$parent.$eval(attrs.taFileDrop):scope.fileDropHandler=scope.defaultFileDropHandler,_originalContents=element[0].innerHTML,element[0].innerHTML="",$(element).addClass("textangular-wysiwyg"),scope.displayElements={forminput:angular.element("<input type='hidden' tabindex='-1' style='display: none;'>"),html:angular.element("<textarea></textarea>"),text:angular.element("<div></div>"),scrollWindow:angular.element("<div class='ta-scroll-window'></div>"),popover:angular.element('<div class="popover fade bottom" style="max-width: none; width: 305px;"></div>'),popoverArrow:angular.element('<div class="arrow"></div>'),popoverContainer:angular.element('<div class="popover-content"></div>'),resize:{overlay:angular.element('<div class="ta-resizer-handle-overlay"></div>'),background:angular.element('<div class="ta-resizer-handle-background"></div>'),anchors:[angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tr"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-bl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-br"></div>')],info:angular.element('<div class="ta-resizer-handle-info"></div>')}},scope.displayElements.popover.append(scope.displayElements.popoverArrow),scope.displayElements.popover.append(scope.displayElements.popoverContainer),scope.displayElements.scrollWindow.append(scope.displayElements.popover),scope.displayElements.popover.on("mousedown",function(e,eventData){return eventData&&angular.extend(e,eventData),e.preventDefault(),!1}),scope.showPopover=function(_el){scope.displayElements.popover.css("display","block"),scope.reflowPopover(_el),$animate.addClass(scope.displayElements.popover,"in"),oneEvent($document.find("body"),"click keyup",function(){scope.hidePopover()})},scope.reflowPopover=function(_el){var displayElements=scope.displayElements,scrollWindowOffset=displayElements.scrollWindow.offset(),scrollOffset={top:displayElements.scrollWindow.scrollTop(),left:displayElements.scrollWindow.scrollLeft()};textOffset={top:scrollWindowOffset.top+2,left:scrollWindowOffset.left+2},elementOffset=_el.offset(),topOffset=elementOffset.top-textOffset.top+scrollOffset.top,leftOffset=elementOffset.left-textOffset.left+scrollOffset.left,displayElements.text.height()/2>topOffset?(displayElements.popover.css("top",topOffset+_el.height()+"px"),displayElements.popover.removeClass("top").addClass("bottom")):(displayElements.popover.css("top",topOffset-displayElements.popover.height()+"px"),displayElements.popover.removeClass("bottom").addClass("top"),setTimeout(function(){displayElements.popover.css("top",topOffset-displayElements.popover.height()+"px"),displayElements.popover.removeClass("bottom").addClass("top")},200));var isBlockTokenElement=$(_el).is("[ta-insert-token]")&&$(_el).hasClass("div"),_maxLeft=displayElements.scrollWindow.width()-20-displayElements.popover.width(),_targetLeft=leftOffset+(isBlockTokenElement?-20:_el.width()/2-displayElements.popover.width()/2);displayElements.popover.css("left",Math.max(0,Math.min(_maxLeft,_targetLeft))+"px"),displayElements.popoverArrow.css("margin-left",Math.min(_targetLeft,Math.max(0,_targetLeft-_maxLeft))-11+"px")},scope.hidePopover=function(){if("none"!==scope.displayElements.popover.css("display")){var doneCb=function(){
scope.displayElements.popover.css("display",""),scope.displayElements.popoverContainer.attr("style",""),scope.displayElements.popoverContainer.attr("class","popover-content")};$q.when($animate.removeClass(scope.displayElements.popover,"in",doneCb)).then(doneCb)}},scope.displayElements.resize.overlay.append(scope.displayElements.resize.background),angular.forEach(scope.displayElements.resize.anchors,function(anchor){scope.displayElements.resize.overlay.append(anchor)}),scope.displayElements.resize.overlay.append(scope.displayElements.resize.info),scope.displayElements.scrollWindow.append(scope.displayElements.resize.overlay),scope.reflowResizeOverlay=function(_el){var displayElements=scope.displayElements,scrollWindowOffset=displayElements.scrollWindow.offset(),scrollOffset={top:displayElements.scrollWindow.scrollTop(),left:displayElements.scrollWindow.scrollLeft()};textOffset={top:scrollWindowOffset.top+2,left:scrollWindowOffset.left+2},elementOffset=_el.offset(),topOffset=elementOffset.top-textOffset.top+scrollOffset.top,leftOffset=elementOffset.left-textOffset.left+scrollOffset.left,_el=angular.element(_el),displayElements.resize.overlay.css({display:"block",left:leftOffset-5+"px",top:topOffset-5+"px",width:_el.width()+10+"px",height:_el.height()+10+"px"}),displayElements.resize.info.text(_el.width()+" x "+_el.height())},scope.showResizeOverlay=function(_el){var _body=$document.find("body");_resizeMouseDown=function(event){var startPosition={width:parseInt(_el.attr("width")),height:parseInt(_el.attr("height")),x:event.clientX,y:event.clientY};(void 0===startPosition.width||isNaN(startPosition.width))&&(startPosition.width=_el[0].offsetWidth),(void 0===startPosition.height||isNaN(startPosition.height))&&(startPosition.height=_el[0].offsetHeight),scope.hidePopover();var ratio=startPosition.height/startPosition.width,mousemove=function(event){var pos={x:Math.max(0,startPosition.width+(event.clientX-startPosition.x)),y:Math.max(0,startPosition.height+(event.clientY-startPosition.y))};if(event.shiftKey){var newRatio=pos.y/pos.x;pos.x=ratio>newRatio?pos.x:pos.y/ratio,pos.y=ratio>newRatio?pos.x*ratio:pos.y}el=angular.element(_el),el.attr("height",Math.max(0,pos.y)),el.attr("width",Math.max(0,pos.x)),scope.reflowResizeOverlay(_el)};_body.on("mousemove",mousemove),oneEvent(_body,"mouseup",function(event){event.preventDefault(),event.stopPropagation(),_body.off("mousemove",mousemove),scope.showPopover(_el)}),event.stopPropagation(),event.preventDefault()},scope.displayElements.resize.anchors[3].on("mousedown",_resizeMouseDown),scope.reflowResizeOverlay(_el),oneEvent(_body,"click",function(){scope.hideResizeOverlay()})},scope.hideResizeOverlay=function(){scope.displayElements.resize.anchors[3].off("mousedown",_resizeMouseDown),scope.displayElements.resize.overlay.css("display","")},scope.setup.htmlEditorSetup(scope.displayElements.html,scope),scope.setup.textEditorSetup(scope.displayElements.text,scope),scope.displayElements.html.attr({id:"taHtmlElement"+_serial,"ng-show":"showHtml","ta-bind":"ta-bind","ng-model":"html"}),scope.displayElements.text.attr({id:"taTextElement"+_serial,contentEditable:"true","ta-bind":"ta-bind","ng-model":"html","class":"ta-text-element"}),scope.displayElements.scrollWindow.attr({"ng-hide":"showHtml"}),attrs.taDefaultWrap&&scope.displayElements.text.attr("ta-default-wrap",attrs.taDefaultWrap),attrs.taUnsafeSanitizer&&(scope.displayElements.text.attr("ta-unsafe-sanitizer",attrs.taUnsafeSanitizer),scope.displayElements.html.attr("ta-unsafe-sanitizer",attrs.taUnsafeSanitizer)),scope.displayElements.scrollWindow.append(scope.displayElements.text),element.append(scope.displayElements.scrollWindow),element.append(scope.displayElements.html),scope.displayElements.forminput.attr("name",scope._name),element.append(scope.displayElements.forminput),attrs.tabindex&&(element.removeAttr("tabindex"),scope.displayElements.text.attr("tabindex",attrs.tabindex),scope.displayElements.html.attr("tabindex",attrs.tabindex)),attrs.placeholder&&(scope.displayElements.text.attr("placeholder",attrs.placeholder),scope.displayElements.html.attr("placeholder",attrs.placeholder)),attrs.taDisabled&&(scope.displayElements.text.attr("ta-readonly","disabled"),scope.displayElements.html.attr("ta-readonly","disabled"),scope.disabled=scope.$parent.$eval(attrs.taDisabled),scope.$parent.$watch(attrs.taDisabled,function(newVal){scope.disabled=newVal,scope.disabled?element.addClass(scope.classes.disabled):element.removeClass(scope.classes.disabled)})),attrs.taPaste&&(scope._pasteHandler=function(_html){return $parse(attrs.taPaste)(scope.$parent,{$html:_html})},scope.displayElements.text.attr("ta-paste","_pasteHandler($html)")),$compile(scope.displayElements.scrollWindow)(scope),$compile(scope.displayElements.html)(scope),scope.updateTaBindtaTextElement=scope["updateTaBindtaTextElement"+_serial],scope.updateTaBindtaHtmlElement=scope["updateTaBindtaHtmlElement"+_serial],element.addClass("ta-root"),scope.displayElements.scrollWindow.addClass("ta-text ta-editor "+scope.classes.textEditor),scope.displayElements.html.addClass("ta-html ta-editor "+scope.classes.htmlEditor),scope._actionRunning=!1;var _savedSelection=!1;if(scope.startAction=function(){return scope._actionRunning=!0,_savedSelection=$window.rangy.saveSelection(),function(){_savedSelection&&$window.rangy.restoreSelection(_savedSelection)}},scope.endAction=function(){scope._actionRunning=!1,_savedSelection&&$window.rangy.removeMarkers(_savedSelection),_savedSelection=!1;try{scope.updateSelectedStyles()}catch(e){console.log(e)}scope["updateTaBindtaTextElement"+_serial]()},_focusin=function(e){scope.focussed=!0,element.addClass(scope.classes.focussed),_toolbars.focus(),element.triggerHandler("focus")},_focusinmsselect=function(e){$.contains(scope.displayElements.text[0],$document[0].activeElement)&&_focusin()},scope.displayElements.html.on("focus",_focusin),scope.displayElements.text.on("focus",_focusin),scope.displayElements.text.on("mscontrolselect",_focusinmsselect),scope.displayElements.text.on("controlselect",_focusinmsselect),_focusout=function(e){return scope._actionRunning||$document[0].activeElement===scope.displayElements.html[0]||$document[0].activeElement===scope.displayElements.text[0]||$.contains(scope.displayElements.text[0],$document[0].activeElement)||(element.removeClass(scope.classes.focussed),_toolbars.unfocus(),$timeout(function(){scope._bUpdateSelectedStyles=!1,element.triggerHandler("blur"),scope.focussed=!1},0)),e.preventDefault(),!1},scope.displayElements.html.on("blur",_focusout),scope.displayElements.text.on("blur",_focusout),scope.displayElements.text.on("paste",function(event){element.triggerHandler("paste",event)}),scope.queryFormatBlockState=function(command){return!scope.showHtml&&command.toLowerCase()===$document[0].queryCommandValue("formatBlock").toLowerCase()},scope.queryCommandState=function(command){return scope.showHtml?"":$document[0].queryCommandState(command)},scope.queryCommandValue=function(command){return scope.showHtml?"":$document[0].queryCommandValue(command)},scope.switchView=function(){scope.showHtml=!scope.showHtml,$animate.enabled(!1,scope.displayElements.html),$animate.enabled(!1,scope.displayElements.text),scope.events.blur(),scope.showHtml?$timeout(function(){$animate.enabled(!0,scope.displayElements.html),$animate.enabled(!0,scope.displayElements.text),window.codemirror?codemirror.syncHtml():(scope.displayElements.html[0].focus(),scope.displayElements.html.val(ngModel.$viewValue))},100):$timeout(function(){$animate.enabled(!0,scope.displayElements.html),$animate.enabled(!0,scope.displayElements.text),scope.displayElements.text[0].focus(),scope.setViewValue()},100)},attrs.ngModel){var _firstRun=!0;ngModel.$render=function(){if(_firstRun){_firstRun=!1;var _initialValue=scope.$parent.$eval(attrs.ngModel);void 0!==_initialValue&&null!==_initialValue||!_originalContents||""===_originalContents||ngModel.$setViewValue(_originalContents)}scope.displayElements.forminput.val(ngModel.$viewValue),scope._elementSelectTriggered||(scope.html=ngModel.$viewValue||"")};var _validity=function(value){return attrs.required&&ngModel.$setValidity("required",!(!value||""===value.trim())),value};ngModel.$parsers.push(_validity),ngModel.$formatters.push(_validity)}else scope.displayElements.forminput.val(_originalContents),scope.html=_originalContents;if(scope.$watch("html",function(newValue,oldValue){newValue!==oldValue&&(attrs.ngModel&&ngModel.$viewValue!==newValue&&ngModel.$setViewValue(newValue),scope.displayElements.forminput.val(newValue))}),attrs.taTargetToolbars)_toolbars=textAngularManager.registerEditor(scope._name,scope,attrs.taTargetToolbars.split(","));else{var _toolbar=angular.element('<div text-angular-toolbar name="textAngularToolbar'+_serial+'">');attrs.taToolbar&&_toolbar.attr("ta-toolbar",attrs.taToolbar),attrs.taToolbarClass&&_toolbar.attr("ta-toolbar-class",attrs.taToolbarClass),attrs.taToolbarGroupClass&&_toolbar.attr("ta-toolbar-group-class",attrs.taToolbarGroupClass),attrs.taToolbarButtonClass&&_toolbar.attr("ta-toolbar-button-class",attrs.taToolbarButtonClass),attrs.taToolbarActiveButtonClass&&_toolbar.attr("ta-toolbar-active-button-class",attrs.taToolbarActiveButtonClass),attrs.taFocussedClass&&_toolbar.attr("ta-focussed-class",attrs.taFocussedClass),element.prepend(_toolbar),$compile(_toolbar)(scope.$parent),_toolbars=textAngularManager.registerEditor(scope._name,scope,["textAngularToolbar"+_serial])}_toolbars.applyParent(),scope.$on("$destroy",function(){textAngularManager.unregisterEditor(scope._name)}),scope.$on("ta-element-select",function(event,element){_toolbars.triggerElementSelect(event,element)&&scope["reApplyOnSelectorHandlerstaTextElement"+_serial]()}),scope.$on("ta-drop-event",function(event,element,dropEvent,dataTransfer){scope.displayElements.text[0].focus(),dataTransfer&&dataTransfer.files&&dataTransfer.files.length>0?(angular.forEach(dataTransfer.files,function(file){try{$q.when(scope.fileDropHandler(file,scope.wrapSelection)||scope.fileDropHandler!==scope.defaultFileDropHandler&&$q.when(scope.defaultFileDropHandler(file,scope.wrapSelection))).then(function(){scope["updateTaBindtaTextElement"+_serial]()})}catch(error){$log.error(error)}}),dropEvent.preventDefault(),dropEvent.stopPropagation()):$timeout(function(){scope["updateTaBindtaTextElement"+_serial]()},0)}),scope._bUpdateSelectedStyles=!1,angular.element(window).on("blur",function(){scope._bUpdateSelectedStyles=!1,scope.focussed=!1}),scope.updateSelectedStyles=function(){var _selection;void 0!==(_selection=taSelection.getSelectionElement())&&_selection.parentNode!==scope.displayElements.text[0]?_toolbars.updateSelectedStyles(angular.element(_selection)):_toolbars.updateSelectedStyles(),scope._bUpdateSelectedStyles&&$timeout(scope.updateSelectedStyles,200)},fnDelay=function(callback,ms){var timer=0;return function(){var args=Array.prototype.slice.call(arguments);clearTimeout(timer),timer=setTimeout(function(){callback.apply(this,args)},ms)}},_keydown=function(){return scope.focussed?void(scope._bUpdateSelectedStyles||(scope._bUpdateSelectedStyles=!0,scope.$apply(function(){scope.updateSelectedStyles()}))):void(scope._bUpdateSelectedStyles=!1)},scope.displayElements.html.on("keydown",fnDelay(_keydown,500)),scope.displayElements.text.on("keydown",_keydown),_keyup=function(){scope._bUpdateSelectedStyles=!1},scope.displayElements.html.on("keyup",fnDelay(_keyup,502)),scope.displayElements.text.on("keyup",_keyup),_keypress=function(event,eventData){eventData&&angular.extend(event,eventData),scope.$apply(function(){return _toolbars.sendKeyCommand(event)?(scope._bUpdateSelectedStyles||scope.updateSelectedStyles(),event.preventDefault(),!1):void 0})},scope.displayElements.html.on("keypress",fnDelay(_keypress,501)),scope.displayElements.text.on("keypress",_keypress),_mouseup=function(){scope._bUpdateSelectedStyles=!1,scope.$apply(function(){scope.updateSelectedStyles()})},scope.displayElements.html.on("mouseup",_mouseup),scope.displayElements.text.on("mouseup",_mouseup)}}}]),textAngular.service("textAngularManager",["taToolExecuteAction","taTools","taRegisterTool",function(taToolExecuteAction,taTools,taRegisterTool){var toolbars={},editors={};return{registerEditor:function(name,scope,targetToolbars){if(!name||""===name)throw"textAngular Error: An editor requires a name";if(!scope)throw"textAngular Error: An editor requires a scope";if(editors[name])throw'textAngular Error: An Editor with name "'+name+'" already exists';var _toolbars=[];return angular.forEach(targetToolbars,function(_name){toolbars[_name]&&_toolbars.push(toolbars[_name])}),editors[name]={scope:scope,toolbars:targetToolbars,_registerToolbar:function(toolbarScope){this.toolbars.indexOf(toolbarScope.name)>=0&&_toolbars.push(toolbarScope)},editorFunctions:{disable:function(){angular.forEach(_toolbars,function(toolbarScope){toolbarScope.disabled=!0})},enable:function(){angular.forEach(_toolbars,function(toolbarScope){toolbarScope.disabled=!1})},applyParent:function(){angular.forEach(_toolbars,function(toolbarScope){toolbarScope._parent=scope})},focus:function(){angular.forEach(_toolbars,function(toolbarScope){toolbarScope._parent=scope,toolbarScope.disabled=!1,toolbarScope.focussed=!0,scope.focussed=!0})},unfocus:function(){angular.forEach(_toolbars,function(toolbarScope){toolbarScope.disabled=!0,toolbarScope.focussed=!1}),scope.focussed=!1},updateSelectedStyles:function(selectedElement){angular.forEach(_toolbars,function(toolbarScope){angular.forEach(toolbarScope.tools,function(toolScope){toolScope.activeState&&(toolbarScope._parent=scope,toolScope.active=toolScope.activeState(selectedElement))})})},sendKeyCommand:function(event){var result=!1;return(event.ctrlKey||event.metaKey)&&angular.forEach(taTools,function(tool,name){if(tool.commandKeyCode&&tool.commandKeyCode===event.which)for(var _t=0;_t<_toolbars.length;_t++)if(void 0!==_toolbars[_t].tools[name]){taToolExecuteAction.call(_toolbars[_t].tools[name],scope),result=!0;break}}),result},triggerElementSelect:function(event,element){var elementHasAttrs=function(_element,attrs){for(var result=!0,i=0;i<attrs.length;i++)result=result&&_element.is("["+attrs[i]+"]");return result},workerTools=[],unfilteredTools={},result=!1;element=angular.element(element);var onlyWithAttrsFilter=!1;if(angular.forEach(taTools,function(tool,name){!tool.onElementSelect||tool.onElementSelect.element&&(!tool.onElementSelect.element||tool.onElementSelect.element.toLowerCase()!==element[0].tagName.toLowerCase())||tool.onElementSelect.filter&&!tool.onElementSelect.filter(element)||(onlyWithAttrsFilter=onlyWithAttrsFilter||angular.isArray(tool.onElementSelect.onlyWithAttrs)&&elementHasAttrs(element,tool.onElementSelect.onlyWithAttrs),(!tool.onElementSelect.onlyWithAttrs||elementHasAttrs(element,tool.onElementSelect.onlyWithAttrs))&&(unfilteredTools[name]=tool))}),onlyWithAttrsFilter?(angular.forEach(unfilteredTools,function(tool,name){tool.onElementSelect.onlyWithAttrs&&elementHasAttrs(element,tool.onElementSelect.onlyWithAttrs)&&workerTools.push({name:name,tool:tool})}),workerTools.sort(function(a,b){return b.tool.onElementSelect.onlyWithAttrs.length-a.tool.onElementSelect.onlyWithAttrs.length})):angular.forEach(unfilteredTools,function(tool,name){workerTools.push({name:name,tool:tool})}),workerTools.length>0)for(var _i=0;_i<workerTools.length;_i++){for(var tool=workerTools[_i].tool,name=workerTools[_i].name,_t=0;_t<_toolbars.length;_t++)if(void 0!==_toolbars[_t].tools[name]){tool.onElementSelect.action.call(_toolbars[_t].tools[name],event,element,scope),result=!0;break}if(result)break}return result}}},editors[name].editorFunctions},retrieveEditor:function(name){return editors[name]},unregisterEditor:function(name){delete editors[name]},registerToolbar:function(scope){if(!scope)throw"textAngular Error: A toolbar requires a scope";if(!scope.name||""===scope.name)throw"textAngular Error: A toolbar requires a name";if(toolbars[scope.name])throw'textAngular Error: A toolbar with name "'+scope.name+'" already exists';toolbars[scope.name]=scope,angular.forEach(editors,function(_editor){_editor._registerToolbar(scope)})},retrieveToolbar:function(name){return toolbars[name]},retrieveToolbarsViaEditor:function(name){var result=[],_this=this;return angular.forEach(this.retrieveEditor(name).toolbars,function(name){result.push(_this.retrieveToolbar(name))}),result},unregisterToolbar:function(name){delete toolbars[name]},updateToolsDisplay:function(newTaTools){var _this=this;angular.forEach(newTaTools,function(_newTool,key){_this.updateToolDisplay(key,_newTool)})},resetToolsDisplay:function(){var _this=this;angular.forEach(taTools,function(_newTool,key){_this.resetToolDisplay(key)})},updateToolDisplay:function(toolKey,_newTool){var _this=this;angular.forEach(toolbars,function(toolbarScope,toolbarKey){_this.updateToolbarToolDisplay(toolbarKey,toolKey,_newTool)})},resetToolDisplay:function(toolKey){var _this=this;angular.forEach(toolbars,function(toolbarScope,toolbarKey){_this.resetToolbarToolDisplay(toolbarKey,toolKey)})},updateToolbarToolDisplay:function(toolbarKey,toolKey,_newTool){if(!toolbars[toolbarKey])throw'textAngular Error: No Toolbar with name "'+toolbarKey+'" exists';toolbars[toolbarKey].updateToolDisplay(toolKey,_newTool)},resetToolbarToolDisplay:function(toolbarKey,toolKey){if(!toolbars[toolbarKey])throw'textAngular Error: No Toolbar with name "'+toolbarKey+'" exists';toolbars[toolbarKey].updateToolDisplay(toolKey,taTools[toolKey],!0)},removeTool:function(toolKey){delete taTools[toolKey],angular.forEach(toolbars,function(toolbarScope){delete toolbarScope.tools[toolKey];for(var i=0;i<toolbarScope.toolbar.length;i++){for(var toolbarIndex,j=0;j<toolbarScope.toolbar[i].length;j++){if(toolbarScope.toolbar[i][j]===toolKey){toolbarIndex={group:i,index:j};break}if(void 0!==toolbarIndex)break}void 0!==toolbarIndex&&(toolbarScope.toolbar[toolbarIndex.group].slice(toolbarIndex.index,1),toolbarScope._$element.children().eq(toolbarIndex.group).children().eq(toolbarIndex.index).remove())}})},addTool:function(toolKey,toolDefinition,group,index){taRegisterTool(toolKey,toolDefinition),angular.forEach(toolbars,function(toolbarScope){toolbarScope.addTool(toolKey,toolDefinition,group,index)})},addToolToToolbar:function(toolKey,toolDefinition,toolbarKey,group,index){taRegisterTool(toolKey,toolDefinition),toolbars[toolbarKey].addTool(toolKey,toolDefinition,group,index)},refreshEditor:function(name){if(!editors[name])throw'textAngular Error: No Editor with name "'+name+'" exists';editors[name].scope.updateTaBindtaTextElement(),editors[name].scope.$$phase||editors[name].scope.$digest()}}}]),textAngular.directive("textAngularToolbar",["$compile","textAngularManager","taOptions","taTools","taToolExecuteAction","$window",function($compile,textAngularManager,taOptions,taTools,taToolExecuteAction,$window){return{scope:{name:"@"},restrict:"EA",link:function(scope,element,attrs){if(!scope.name||""===scope.name)throw"textAngular Error: A toolbar requires a name";angular.extend(scope,angular.copy(taOptions)),attrs.taToolbar&&(scope.toolbar=scope.$parent.$eval(attrs.taToolbar)),attrs.taToolbarClass&&(scope.classes.toolbar=attrs.taToolbarClass),attrs.taToolbarGroupClass&&(scope.classes.toolbarGroup=attrs.taToolbarGroupClass),attrs.taToolbarButtonClass&&(scope.classes.toolbarButton=attrs.taToolbarButtonClass),attrs.taToolbarActiveButtonClass&&(scope.classes.toolbarButtonActive=attrs.taToolbarActiveButtonClass),attrs.taFocussedClass&&(scope.classes.focussed=attrs.taFocussedClass),scope.disabled=!0,scope.focussed=!1,scope._$element=element,element[0].innerHTML="",element.addClass("ta-toolbar "+scope.classes.toolbar),scope.$watch("focussed",function(){scope.focussed?element.addClass(scope.classes.focussed):element.removeClass(scope.classes.focussed)});var setupToolElement=function(toolDefinition,toolScope){var toolElement;if(toolElement=toolDefinition&&toolDefinition.display?angular.element(toolDefinition.display):angular.element("<button type='button'>"),toolDefinition&&toolDefinition["class"]?toolElement.addClass(toolDefinition["class"]):toolElement.addClass(scope.classes.toolbarButton),toolElement.attr("name",toolScope.name),toolElement.attr("unselectable","on"),toolElement.attr("ng-disabled","isDisabled()"),toolElement.attr("tabindex","-1"),toolElement.attr("ng-click","executeAction()"),toolElement.attr("ng-class","displayActiveToolClass(active)"),toolDefinition&&toolDefinition.tooltiptext&&toolElement.attr("title",toolDefinition.tooltiptext),toolElement.on("mousedown",function(e,eventData){return scope._parent.hidePopover(),eventData&&angular.extend(e,eventData),e.preventDefault(),!1}),toolDefinition&&!toolDefinition.display&&!toolScope._display&&(toolElement[0].innerHTML="",toolDefinition.buttontext&&(toolElement[0].innerHTML=toolDefinition.buttontext),toolDefinition.iconclass)){var icon=angular.element("<i>"),content=toolElement[0].innerHTML;icon.addClass(toolDefinition.iconclass),toolElement[0].innerHTML="",toolElement.append(icon),content&&""!==content&&toolElement.append("&nbsp;"+content)}return toolScope._lastToolDefinition=angular.copy(toolDefinition),$compile(toolElement)(toolScope)};scope.tools={},scope._parent={disabled:!0,showHtml:!1,queryFormatBlockState:function(){return!1},queryCommandState:function(){return!1}};var defaultChildScope={$window:$window,$editor:function(){return scope._parent},isDisabled:function(){return"function"!=typeof this.$eval("disabled")&&this.$eval("disabled")||this.$eval("disabled()")||"html"!==this.name&&"insertToken"!==this.name&&this.$editor().showHtml||"html"!==this.name&&this.$parent.disabled||"html"!==this.name&&this.$editor().disabled},displayActiveToolClass:function(active){return active?scope.classes.toolbarButtonActive:""},executeAction:taToolExecuteAction};angular.forEach(scope.toolbar,function(group){var groupElement=angular.element("<div>");groupElement.addClass(scope.classes.toolbarGroup),angular.forEach(group,function(tool){scope.tools[tool]=angular.extend(scope.$new(!0),taTools[tool],defaultChildScope,{name:tool}),scope.tools[tool].$element=setupToolElement(taTools[tool],scope.tools[tool]),groupElement.append(scope.tools[tool].$element)}),element.append(groupElement)}),scope.updateToolDisplay=function(key,_newTool,forceNew){var toolInstance=scope.tools[key];if(toolInstance){if(toolInstance._lastToolDefinition&&!forceNew&&(_newTool=angular.extend({},toolInstance._lastToolDefinition,_newTool)),null===_newTool.buttontext&&null===_newTool.iconclass&&null===_newTool.display)throw'textAngular Error: Tool Definition for updating "'+key+'" does not have a valid display/iconclass/buttontext value';null===_newTool.buttontext&&delete _newTool.buttontext,null===_newTool.iconclass&&delete _newTool.iconclass,null===_newTool.display&&delete _newTool.display;var toolElement=setupToolElement(_newTool,toolInstance);toolInstance.$element.replaceWith(toolElement),toolInstance.$element=toolElement}},scope.addTool=function(key,_newTool,groupIndex,index){scope.tools[key]=angular.extend(scope.$new(!0),taTools[key],defaultChildScope,{name:key}),scope.tools[key].$element=setupToolElement(taTools[key],scope.tools[key]);var group;void 0===groupIndex&&(groupIndex=scope.toolbar.length-1),group=angular.element(element.children()[groupIndex]),void 0===index?(group.append(scope.tools[key].$element),scope.toolbar[groupIndex][scope.toolbar[groupIndex].length-1]=key):(group.children().eq(index).after(scope.tools[key].$element),scope.toolbar[groupIndex][index]=key)},textAngularManager.registerToolbar(scope),scope.$on("$destroy",function(){textAngularManager.unregisterToolbar(scope.name)})}}}])}(),function(){"use strict";var module;module=angular.module("App",["App.controllers","App.filters","App.directives","App.services","ui.bootstrap","ngSanitize","colorpicker.module","textAngular","checklist-model","rzModule"]),module.config(["$httpProvider",function($httpProvider){return $httpProvider.defaults.headers.common["X-CSRF-Token"]=$("meta[name=csrf-token]").attr("content"),delete $httpProvider.defaults.headers.common["X-Requested-With"]}]).run(["$window","$timeout",function($window,$timeout){return $timeout(function(){return $window.FB?$window.FB.init({appId:$window.facebookAppId,status:!0,cookie:!0,xfbml:!0,version:"v2.7"}):void 0})}]),$(document).on("turbolinks:load",function(){var top_lvl_ng_controllers;return window.rangy.init(),top_lvl_ng_controllers=$("[ng-controller]:not([ng-controller] [ng-controller])"),angular.bootstrap(top_lvl_ng_controllers,["App"])})}.call(this),function(){var androidDevice,facebookApp,facebookIOSApp,iOSDevice,iOSversion,iPhoneDevice,instagramApp,mobileDevice,supportsFacebookApiShare,supportsMessengerApiShare;supportsFacebookApiShare=function(){return!facebookIOSApp()&&!androidDevice()},supportsMessengerApiShare=function(){return!iOSDevice()&&!androidDevice()},facebookIOSApp=function(){return navigator.userAgent.match(/FBForI|FBIOS/)},instagramApp=function(){return navigator.userAgent.match(/WebKit.+Mobile.+Instagram/)},androidDevice=function(){return navigator.userAgent.match(/Android/i)},iOSDevice=function(){return navigator.userAgent.match(/iPad|iPhone|iPod/i)},iPhoneDevice=function(){return navigator.userAgent.match(/iPhone/i)},facebookApp=function(){var ua;return ua=navigator.userAgent||navigator.vendor||window.opera,ua.indexOf("FBAN")>-1||ua.indexOf("FBAV")>-1},iOSversion=function(){var v;return/iP(hone|od|ad)/.test(navigator.userAgent)?(v=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),[parseInt(v[1],10),parseInt(v[2],10),parseInt(v[3]||0,10)]):void 0},mobileDevice=function(){return iOSDevice()||androidDevice()},angular.browser={supportsFacebookApiShare:supportsFacebookApiShare(),supportsMessengerApiShare:supportsMessengerApiShare(),facebookIOSApp:facebookIOSApp(),androidDevice:androidDevice(),iOSDevice:iOSDevice(),iPhoneDevice:iPhoneDevice(),tablessBrowser:instagramApp()||facebookIOSApp(),iOSversion:iOSversion(),mobileDevice:mobileDevice(),appInstallTarget:iOSDevice()?"_top":"_blank",currentWindowMailto:iOSDevice()||androidDevice(),ie:navigator.userAgent.match(/MSIE|Trident/i),safari:navigator.userAgent.match(/AppleWebKit.*Safari/i)&&!navigator.userAgent.match(/CriOS|Chrome/i),snapchatAppEnabled:iOSDevice()||androidDevice()}}.call(this),function(){var indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};angular.module("App.controllers",[]).controller("NullController",["$scope",function($scope){}]).controller("EnterController",["$scope","$http","$sce","$compile","$filter","$window","$templateCache","$timeout","campaignService","eventService","facebookLoginService","randomService","translationService","verifyValueService","shortenerService","actionsConfig","mediaService","fingerprintService","pinterestService","trackingPixelService",function($scope,$http,$sce,$compile,$filter,$window,$templateCache,$timeout,campaignService,eventService,facebookLoginService,randomService,translationService,verifyValueService,shortenerService,actionsConfig,mediaService,fingerprintService,pinterestService,trackingPixelService){var acceptLike,addAutomaticEntry,addCustomActionChecking,addTemplateForm,alertOnIntervalSeconds,appName,applyPrepopulation,attemptEntry,attemptEntryByPostSubmit,autoEnter,autoEntryForm,autoExpandFirstAction,autoExpandLastShareAction,bindVisitActionsTriggers,campaignData,checkActionPerformed,checkSuccessfulEntry,clearCurrentStepFields,confirmAction,defaultLogo,emailLogin,endHastagMatcher,endLinkMatcher,entryCompleteWithoutError,expand,expireAuth,facebookUserId,fileDone,focusFirstContestantInput,getEndHashtags,handleClaimsAfterEntry,handleSpecialCasesForEntry,hashed,hideEntryMethodAndShowPopover,inIframe,initEventModeTimeout,initFingerprint,initFrontEndEntryMethodConfig,initSelectedTab,initTwitterUsernameFallback,isEmailShareAvailable,isFacebookShareAvailable,isGooglePlusShareAvailable,isLinkedinShareAvailable,isMessengerShareAvailable,isPinterestShareAvailable,isSmsShareAvailable,isStepVisible,isTumblrShareAvailable,isTwitterShareAvailable,isWhatsappShareAvailable,linkMatcher,mandatoryFirstEntryMethod,markAsEntered,moveToScreen,nextVisibleStepPresent,nonMandatoryEntriesCount,openAuthentication,parentUrl,pl,popupHeight,popupWidth,postEntryRedirect,probablySharingVideo,propagatePinterestUsername,propogateTwitterUsername,requestDetails,requireOtherLogin,resize,resumeAction,resumeEntry,rewardTypeDescription,shareLink,shareText,showAuthenticationNow,showMessage,showPopover,startExpandedTimer,startVisitActionTimer,t,thirdChoiceReset,timeDifference,toFormName,toTrusted,toTrustedUrl,triggerOnloadPixel,unexpand,unexpectedEnteringError,unforceHtml,updateDefaultAutoEnterText;return $scope.t=t=function(key,map){return null==map&&(map=null),translationService.translate(key,map)},$scope.pl=pl=function(count,singular,plural,map){return null==map&&(map={}),translationService.pluralize(count,singular,plural,map)},$scope.updateLanguage=function(){return $http.get("/"+campaignService.campaign.campaign_type.toLowerCase()+"s/post-tab-lang-bundle/"+campaignService.campaign.key+"/"+campaignService.campaign.site_id+"/"+campaignService.campaign.default_language).success(function(data,status,headers,config){var results,template_path;translationService.updateBundle(data.message_bundle),$(".default-email-preview").html(data.preview),$compile($(".default-email-preview").contents())($scope),results=[];for(template_path in data.templates)results.push($templateCache.put(template_path,data.templates[template_path]));return results})},$scope.previewTemplate=function(){return $templateCache.get("campaigns/confirmation_email/preview.html")},angular.entriesControllerPostEntry($scope,$filter),$scope.appName=appName=$window.actionMarketingAppName,defaultLogo=$scope.defaultLogo="/images/logo-32x32.png",$scope.contestantState=campaignService.contestantState,$scope.choiceState=campaignService.choiceState,$scope.dc=campaignService.dc,$("form.campaign").size()>0&&(campaignData=$("form.campaign").serializeJSON(),campaignService.initEditCampaign(campaignData),$scope.campaign=campaignService.campaign,$scope.incentives=campaignService.incentives,$scope.entry_methods=campaignService.entry_methods,$scope.lead_capture=campaignService.lead_capture,$scope.$watch("campaign.default_language",function(val){return updateDefaultAutoEnterText()}),$scope.$watch("campaign.default_confirmation_email",function(newValue,oldValue){return campaignService.campaign.default_confirmation_email&&(campaignService.campaign.custom_confirmation_email=!1),campaignService.campaign.suppress_email=!campaignService.campaign.default_confirmation_email&&!campaignService.campaign.custom_confirmation_email}),$scope.$watch("campaign.custom_confirmation_email",function(newValue,oldValue){return campaignService.campaign.custom_confirmation_email&&(campaignService.campaign.default_confirmation_email=!1),campaignService.campaign.suppress_email=!campaignService.campaign.default_confirmation_email&&!campaignService.campaign.custom_confirmation_email})),$scope.isAuthenticated=function(entry_method,provider){return campaignService.isAuthenticated(entry_method,provider)},$scope.actionPerformed=function(entry_method){return campaignService.actionPerformed(entry_method)},$scope.canSubmitEntryForm=function(entry_method){return campaignService.canSubmitEntryForm(entry_method)},$scope.enoughEntryDetails=function(entry_method){return campaignService.enoughEntryDetails(entry_method)},$scope.needMoreDetailsBeforeEntry=function(entry_method,resumeAction){return campaignService.needMoreDetailsBeforeEntry(entry_method,resumeAction)},$scope.verifiedAuth=function(){return campaignService.verifiedAuth()},$scope.startDate=function(){return campaignService.startDate()},$scope.endDate=function(){return campaignService.endDate()},$scope.isRunning=function(){return campaignService.isRunning()},$scope.isStarted=function(){return campaignService.isStarted()},$scope.isFinished=function(){return campaignService.isFinished()},$scope.isCampaignEntryLimit=function(){return campaignService.isCampaignEntryLimit()},$scope.manyEntries=function(){return campaignService.manyEntries()},$scope.isCompleted=function(){return campaignService.isCompleted()},$scope.choices=function(entry_method){return campaignService.choices(entry_method)},$scope.useVisitCookie=function(entry_method){return campaignService.useVisitCookie(entry_method)},$scope.hasCustom=function(key){return campaignService.hasCustom(key)},$scope.checkAlreadyEntered=function(entry_method,existing_at){return campaignService.checkAlreadyEntered(entry_method,existing_at)},$scope.isEntered=function(entry_method){return campaignService.isEntered(entry_method)},$scope.canEnter=function(entry_method){
return campaignService.canEnter(entry_method)},$scope.totalEntries=function(){return campaignService.totalEntries()},$scope.continueDisabled=function(entry_method){return campaignService.continueDisabled(entry_method)},$scope.requiresInitialLogin=function(){return campaignService.requiresInitialLogin()},$scope.socialLoginRequired=function(){return campaignService.socialLoginRequired()},$scope.contestantEntries=function(){return campaignService.contestantEntries()},$scope.contestantActionTypes=function(){return campaignService.contestantActionTypes()},$scope.bestCouponCode=function(){return campaignService.bestCouponCode()},$scope.showPromotionEnded=function(){return campaignService.showPromotionEnded()},$scope.showPromotionStartsIn=function(){return campaignService.showPromotionStartsIn()},$scope.verifyStatus=function(entry_method){return campaignService.verifyStatus(entry_method)},$scope.challengeCompleted=function(){return $scope.resumeEntry($scope.entry_method)},$scope.isReward=function(){return campaignService.isReward()},$scope.actionsStillNeededToUnlockReward=function(){return campaignService.actionsStillNeededToUnlockReward()},$scope.entryMethodColor=function(entry_method){return campaignService.entryMethodColor(entry_method)},$scope.removerColor=function(){return campaignService.removerColor()},$scope.multipleCodes=function(){return campaignService.multipleCodes()},$scope.requiresMandatoryActions=function(){return campaignService.requiresMandatoryActions()},$scope.isTestMode=function(){return campaignService.isTestMode()},$scope.files=function(entry_method){return campaignService.files(entry_method)},$scope.isChoiceSelected=function(entry_method,imageSrc){return campaignService.isChoiceSelected(entry_method,imageSrc)},$scope.landingPage=function(){return campaignService.landingPage()},$scope.getAuthentication=function(provider){return campaignService.getAuthentication(provider)},resumeAction=!1,inIframe=function(){return $window.self!==$window.top},popupWidth=function(provider){switch(provider){case"soundcloud":return 958;case"instagram":return 640;case"youtube":return 850;case"steam":return 974;case"eventbrite":return 974;default:return 780}},popupHeight=function(provider){switch(provider){case"soundcloud":return 500;case"twitter":return 570;case"twitchtv":return 540;case"instagram":return 355;case"youtube":case"googleplus":return 550;case"steam":return 578;case"eventbrite":return 480;case"spotify":return 590;default:return 410}},parentUrl=function(){return Cookies.get("L-"+campaignService.campaign.key)},$scope.openAuthentication=openAuthentication=function(provider,entry_method,auth_scope){var authParams,authUrl,baseUrl,len,n,providerName,providerPath,ref;if(0===provider.indexOf("email"))return emailLogin();for(baseUrl="steam"===provider&&campaignService.campaign.steam_login_base_url?campaignService.campaign.steam_login_base_url:location.protocol+"//"+location.host,providerPath=provider,ref=campaignService.campaign.all_possible_login_providers,n=0,len=ref.length;len>n;n++)providerName=ref[n],0===providerName.indexOf(provider)&&(providerPath=providerName);return authParams=0===provider.indexOf("soundcloud")?"?scope=non-expiring&grant_type=authorization_code":"",authParams=auth_scope?"?scope="+auth_scope:"",authUrl=baseUrl+"/auth/"+providerPath+authParams,angular.browser.tablessBrowser?(Cookies.set("AuthReturn",$window.location.href,{expires:1}),$window.location.href=authUrl):(Cookies.set("AuthKey",campaignService.campaign.key,{expires:1}),0===provider.indexOf("pinterest")&&campaignService.campaign.pinterest_app_banned?($scope.updateEntryMethodView(entry_method),expand(entry_method)):$window.open(authUrl,"_blank","width="+popupWidth(provider)+",height="+popupHeight(provider)+",toolbar=0,scrollbars=0,status=0,resizable=0,location=0,menuBar=0,left=10,top=10")),!0},facebookUserId=function(){return $window.FB?FB.getUserID():null},unforceHtml=function(str){return str.replace(/<[a-z][^>]*>/gi,"")},$scope.isAnyShareMethodAvailable=function(entry_method){return isEmailShareAvailable(entry_method)||isFacebookShareAvailable(entry_method)||isTwitterShareAvailable(entry_method)||isGooglePlusShareAvailable(entry_method)||isTumblrShareAvailable(entry_method)||isLinkedinShareAvailable(entry_method)||isWhatsappShareAvailable(entry_method)||isSmsShareAvailable(entry_method)||isPinterestShareAvailable(entry_method)},$scope.availableShareMethodCount=function(entry_method){return(isEmailShareAvailable(entry_method)&&1)+(isFacebookShareAvailable(entry_method)&&1)+(isTwitterShareAvailable(entry_method)&&1)+(isGooglePlusShareAvailable(entry_method)&&1)+(isTumblrShareAvailable(entry_method)&&1)+(isLinkedinShareAvailable(entry_method)&&1)+(isWhatsappShareAvailable(entry_method)&&1)+(isSmsShareAvailable(entry_method)&&1)+(isPinterestShareAvailable(entry_method)&&1)},$scope.isEmailShareAvailable=isEmailShareAvailable=function(entry_method){return indexOf.call(entry_method.config_selections,"EMAIL")>=0},$scope.isFacebookShareAvailable=isFacebookShareAvailable=function(entry_method){return indexOf.call(entry_method.config_selections,"FACEBOOK")>=0},$scope.isTwitterShareAvailable=isTwitterShareAvailable=function(entry_method){return indexOf.call(entry_method.config_selections,"TWITTER")>=0},$scope.isGooglePlusShareAvailable=isGooglePlusShareAvailable=function(entry_method){return indexOf.call(entry_method.config_selections,"GOOGLE_PLUS")>=0},$scope.isTumblrShareAvailable=isTumblrShareAvailable=function(entry_method){return indexOf.call(entry_method.config_selections,"TUMBLR")>=0},$scope.isLinkedinShareAvailable=isLinkedinShareAvailable=function(entry_method){return indexOf.call(entry_method.config_selections,"LINKEDIN")>=0},$scope.isWhatsappShareAvailable=isWhatsappShareAvailable=function(entry_method){return indexOf.call(entry_method.config_selections,"WHATSAPP")>=0&&!(!angular.browser.androidDevice&&!angular.browser.iPhoneDevice)},$scope.isMessengerShareAvailable=isMessengerShareAvailable=function(entry_method){return indexOf.call(entry_method.config_selections,"MESSENGER")>=0&&!(!angular.browser.androidDevice&&!angular.browser.iPhoneDevice)},$scope.isSmsShareAvailable=isSmsShareAvailable=function(entry_method){return indexOf.call(entry_method.config_selections,"SMS")>=0&&!(!angular.browser.androidDevice&&!angular.browser.iPhoneDevice)},$scope.isPinterestShareAvailable=isPinterestShareAvailable=function(entry_method){return indexOf.call(entry_method.config_selections,"PINTEREST")>=0},$scope.shareText=shareText=function(entry_method){return entry_method.config3?entry_method.config3.replace("%{link}",shareLink(entry_method)).replace("%{incentive}",campaignService.incentives[0].name):t(campaignService.isReward()?"share_reward_body":"share_competition_body",{link:shareLink(entry_method),incentive:campaignService.incentives[0].name})},$scope.mailtoTarget=function(entry_method){return angular.browser.currentWindowMailto?inIframe()?"_top":null:"_blank"},$scope.mailtoShareLink=function(entry_method){return"mailto:?body="+encodeURIComponent(shareText(entry_method))+"&subject="+encodeURIComponent(entry_method.config2||"")},$scope.whatsappShareLink=function(entry_method){return"whatsapp://send?text="+encodeURIComponent(shareText(entry_method))},$scope.messengerShare=function(entry_method){var displayType,link,shareData,url;return displayType=angular.browser.androidDevice?"page":"popup",link=shareLink(entry_method),shareData={method:"send",display:displayType,link:link},angular.browser.supportsMessengerApiShare?FB.ui(shareData):(url="fb-messenger://share?link="+encodeURIComponent(link),$window.open(url,"_facebook_share"))},$scope.smsShareLink=function(entry_method){var j,ua,version;return ua=navigator.userAgent.toLowerCase(),j="?",angular.browser.iPhoneDevice&&(version=angular.browser.iOSversion,version[0]<=7&&(j=";"),version[0]>7&&(j="&")),"sms:"+j+"body="+encodeURIComponent(shareText(entry_method))},$scope.trackViralShareClick=function(network){return $window.trackEvent(appName+" Shares|Viral Share Click|"+network)},$scope.initCookiesEnabled=function(){return Cookies.set("c","t"),$scope.cookiesEnabled="t"===Cookies.get("c"),Cookies.remove("c")},$scope.cookieFixUrl=function(){return"/cookiefix?sa="+(campaignService.campaign.stand_alone_url+encodeURIComponent($window.location.search||""))},$scope.facebookShare=function(entry_method){var displayType,picture,shareData,url;return displayType=angular.browser.androidDevice?"page":"popup",shareData={method:"feed",display:displayType,link:shareLink(entry_method),name:entry_method.config2||campaignService.campaign.name,description:$(".incentive-description .user-fragment").text()||""},picture=entry_method.image||campaignService.incentives[0].url,picture&&(shareData.picture=picture.replace(/https:/,"http:")),campaignService.incentives[0].youtube_video_id&&(shareData.source="https://www.youtube.com/v/"+campaignService.incentives[0].youtube_video_id+"?version=3&autohide=1&autoplay=1",shareData.picture||(shareData.picture="http://img.youtube.com/vi/"+campaignService.incentives[0].youtube_video_id+"/0.jpg")),angular.browser.supportsFacebookApiShare?FB.ui(shareData):(url="http://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(shareData.link),$window.open(url,"_facebook_share"))},$scope.twitterShare=function(entry_method){return $window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(entry_method.config2||campaignService.campaign.name)+"&url="+encodeURIComponent(shareLink(entry_method)),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")},$scope.tumblrShare=function(entry_method){return $window.open("https://www.tumblr.com/widgets/share/tool?canonicalUrl="+encodeURIComponent(shareLink(entry_method))+"&caption="+encodeURIComponent(entry_method.config2||campaignService.campaign.name),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")},$scope.googlePlusShare=function(entry_method){return $window.open("https://plus.google.com/share?url="+encodeURIComponent(shareLink(entry_method)),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")},$scope.linkedinShare=function(entry_method){var picture;return picture=entry_method.image||campaignService.incentives[0].url,$window.open("https://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(shareLink(entry_method))+"&summary="+encodeURIComponent(entry_method.config2||campaignService.campaign.name)+"&submitted-image-url="+encodeURIComponent(picture))},$scope.pinterestShare=function(entry_method){var picture;return picture=entry_method.image||campaignService.incentives[0].url,$window.open("https://pinterest.com/pin/create/link/?url="+encodeURIComponent(shareLink(entry_method))+"&media="+encodeURIComponent(picture)+"&description="+encodeURIComponent(entry_method.config2||campaignService.campaign.name))},$scope.linkedInCompanyUrl=function(company_id){return $sce.trustAsResourceUrl("https://www.linkedin.com/cws/followcompany?companyIdentifier="+parseInt(company_id)+"&counterPosition=top&token=&isFramed=true&lang=en_US")},linkMatcher=/(https?:\/\/(?!pic\.twitter\.com|t\.co)[^ ]+[^ ,.)\]\r\n])/gi,endLinkMatcher=/(https?:\/\/(?!pic\.twitter\.com|t\.co)[^ ]+[^ ,.)\]\r\n])\s*$/gi,endHastagMatcher=/((?:^|\s)+#[a-z0-9_]+\s*)+$/gi,getEndHashtags=function(str){var m;return m=str.replace(endLinkMatcher,"").match(/(\s*#[a-z0-9_]+\s*)+$/gi),m?m[0].replace(/\s*#/,"").split(/\s*#/g):[]},$scope.prepareTweet=function(passedTweet,defaultUrl,hashtags){var data,endLinkMatch,len,middleLinkMatch,n,remaining_tags,tag,tags,tweet;if(data={},tweet=passedTweet||"",data.text=tweet.replace(endHastagMatcher,"").replace(endLinkMatcher,"").replace(endHastagMatcher,"").strip(),data.hashtags=getEndHashtags(tweet).join(","),middleLinkMatch=tweet.replace(endHastagMatcher,"").replace(endLinkMatcher,"").match(linkMatcher),middleLinkMatch?(data.link="",data.full=tweet):(endLinkMatch=tweet.replace(endHastagMatcher,"").match(endLinkMatcher),endLinkMatch?(data.link=endLinkMatch[0],data.full=tweet):(data.link=defaultUrl,data.full=tweet+" "+defaultUrl)),hashtags){for(tags=hashtags.split(","),remaining_tags=[],n=0,len=tags.length;len>n;n++)tag=tags[n],data.text.match(new RegExp("#"+tag))||remaining_tags.push(tag);data.hashtags=remaining_tags.join()}return data},$scope.parseLinkedIn=function(){return $window.IN&&$window.IN.parse?$window.IN.parse():void 0},probablySharingVideo=function(entry_method){return entry_method.config1&&entry_method.config2&&entry_method.config2.match(/share.* video/i)},requestDetails=function(entry_method){var shareData;return"facebook_share"!==entry_method.entry_type||campaignService.enoughEntryDetails(entry_method)?"facebook_media"===entry_method.entry_type?campaignService.contestantState.facebooks?expand(entry_method):(entry_method.entering=!0,mediaService.getFacebookMedia(entry_method,campaignService.contestantState.facebookPermissions,{login:function(response){return campaignService.contestantState.facebookAccessToken=response.authResponse.accessToken},success:function(data){return $scope.$apply(function(){return entry_method.entering=!1,campaignService.contestantState.facebooks=data,entry_method.config.enterOnSingleMedia&&entry_method.config.enterOnSingleMedia(entry_method)?1===data.length?($scope.mediaChoice(entry_method,data[0]),$scope.confirmFacebookMediaChoice(entry_method,entry_method.selected)):($scope.mediaChoice(entry_method,data[0]),expand(entry_method)):expand(entry_method),resize(500)})},denied:function(permissions){return campaignService.contestantState.facebookPermissions=permissions,entry_method.entering=!1}})):"media_action"===entry_method.entry_type&&entry_method.mediaSourceAuth?$scope.setMediaSource(entry_method,entry_method.mediaSourceAuth):("facebook_enter"!==entry_method.entry_type||"Like"===entry_method.config2||campaignService.enoughEntryDetails(entry_method))&&("pinterest_enter"!==entry_method.entry_type||"Follow"===entry_method.config2||campaignService.enoughEntryDetails(entry_method))?"pinterest_choose_board"===entry_method.entry_type&&campaignService.campaign.pinterest_app_banned?expand(entry_method):entry_method.config.requiresMedia?entry_method.media?expand(entry_method):(entry_method.entering=!0,mediaService.getMedia(entry_method,{success:function(data){return entry_method.entering=!1,entry_method.media=data,entry_method.config.enterOnSingleMedia&&entry_method.config.enterOnSingleMedia(entry_method)?1===data.length?($scope.mediaChoice(entry_method,data[0]),$scope.mediaChoiceContinue(entry_method)):(campaignService.entryState.formData[entry_method.id]=data[0],expand(entry_method)):expand(entry_method)},authExpired:function(){return expireAuth(entry_method)},accountPrivate:function(){return entry_method.entering=!1,showMessage(entry_method,t("account_private_error"))},error:function(data){var provider;return entry_method.entering=!1,provider=entry_method.entry_type.split("_")[0],alert(t("feed_error",{service:provider}))}})):expand(entry_method):(campaignService.entryDetailsState[entry_method.id]="Done",attemptEntry(entry_method)):(shareData={method:"feed",display:"popup",link:entry_method.config1||campaignService.campaign.landing_page,name:campaignService.campaign.name,caption:entry_method.config3||campaignService.incentives[0].name.replace(/^\d+ x /,""),description:entry_method.config4||$(".incentive-description .user-fragment").text()||""},campaignService.incentives[0].url&&!probablySharingVideo(entry_method)&&(shareData.picture=campaignService.incentives[0].url.replace(/https:/,"http:")),FB.ui(shareData,function(response){return response?$scope.$apply(function(){return confirmAction(entry_method,response.post_id)}):void 0}))},$scope.resize=resize=function(timeoutMs,removeTooltip){return null==timeoutMs&&(timeoutMs=100),null==removeTooltip&&(removeTooltip=!0),!campaignService.editMode&&(removeTooltip&&$(".tooltip").remove(),$window[appName]&&$window[appName].resizeContent)?$window[appName].resizeContent(timeoutMs):void 0},$scope.demandingOtherLogins=function(){return campaignService.contestantState.otherLogins},$scope.demandingChallenge=function(){return $scope.challenge.demand&&!$scope.challenge.userResponse&&!$scope.demandingAuth()},$scope.demandingAuth=function(){return campaignService.contestantState.demandAuth&&!campaignService.verifiedAuth()},$scope.editingContesant=function(){return campaignService.contestantState.editMode&&!$scope.demandingOtherLogins()&&!$scope.demandingAuth()&&!$scope.demandingChallenge()},$scope.hideEntriesPanel=function(){return $scope.demandingOtherLogins()||$scope.demandingAuth()||$scope.demandingChallenge()||$scope.editingContesant()},$scope.ensureInstagramScript=function(){return $window.instgrm?$window.instgrm.Embeds.process():0===$("#instagram-embed-script").length&&$("head").append('<script id="instagram-embed-script" async defer src="//platform.instagram.com/en_US/embeds.js"></script>'),!0},$scope.ensureVimeoScript=function(){var script;return 0===$("#vimeo-root").length&&(script='<div id="vimeo-root"></div> <script src="https://player.vimeo.com/api/player.js"></script>',$("head").append(script)),!0},$scope.instagramPostHeight=function(entry_method){var height,width;return width=parseInt(entry_method.config4),height=parseInt(entry_method.config5),width>0&&height>0?($scope.widgetWidth()-20)*(height/width)+86+"px":"auto"},$scope.setMediaSource=function(entry_method,provider){var callbackConfig;if(entry_method.mediaSourceAuth=null,"upload"!==provider&&!campaignService.isAuthenticated(entry_method,provider))return entry_method.mediaSourceAuth=provider,void("facebook"===provider?openAuthentication(provider,entry_method,"email,user_tagged_places,user_photos,user_videos,user_status"):openAuthentication(provider,entry_method));switch(unexpand(entry_method),entry_method.entering=!0,entry_method.mediaSource=provider,provider){case"instagram":case"twitter":mediaService.getMedia(entry_method,{provider:provider,success:function(data){return entry_method.entering=!1,entry_method.media=data,entry_method.config.enterOnSingleMedia&&entry_method.config.enterOnSingleMedia(entry_method)?1===data.length?($scope.mediaChoice(entry_method,data[0]),$scope.mediaChoiceContinue(entry_method)):($scope.mediaChoice(entry_method,data[0]),expand(entry_method)):expand(entry_method)},authExpired:function(){return expireAuth(entry_method,provider)},accountPrivate:function(){return entry_method.entering=!1,alert(t("account_private_error"))},error:function(data){return entry_method.entering=!1,alert(t("feed_error",{service:provider}))}});break;case"facebook":callbackConfig={login:function(response){return campaignService.contestantState.facebookAccessToken=response.authResponse.accessToken},success:function(data){return $scope.$apply(function(){return campaignService.contestantState.facebooks=data,entry_method.entering=!1,entry_method.config.enterOnSingleMedia&&entry_method.config.enterOnSingleMedia(entry_method)?1===data.length?($scope.mediaChoice(entry_method,data[0]),$scope.confirmFacebookMediaChoice(entry_method,entry_method.selected)):($scope.mediaChoice(entry_method,data[0]),expand(entry_method)):expand(entry_method),resize(500)})},denied:function(permissions){return campaignService.contestantState.facebookPermissions=permissions,entry_method.entering=!1}},campaignService.contestantState.facebookPermissions?mediaService.getFacebookMedia(entry_method,campaignService.contestantState.facebookPermissions,callbackConfig):FB.getLoginStatus(function(data){return $scope.facebookContestantLoginStatus(data,function(){return mediaService.getFacebookMedia(entry_method,campaignService.contestantState.facebookPermissions,callbackConfig)})},!0);break;case"upload":entry_method.entering=!1,expand(entry_method)}return resize()},$scope.confirmFacebookMediaChoice=function(entry_method,media){var big_image,type;return type=media.embed_html?"video/mp4":"image/jpeg",big_image=$filter("orderBy")(media.images||[media],"width",!0)[0],campaignService.entryDetailsState[entry_method.id]={id:media.id,url:big_image.source,thumb:media.picture,post_url:media.link,uid:media.from.id,reference:media.from.name,name:media.from.name,text:media.description||media.name,created:Date.parse(media.created_time.replace(/-/g,"/").replace("T"," "))/1e3,file_type:type,provider:"facebook"},$scope.updateEntryMethodView(entry_method),attemptEntry(entry_method)},expand=function(entry_method){return campaignService.entryState.expanded=entry_method,resize(),setTimeout(function(){return entry_method.onExpand?entry_method.onExpand.call():void 0},1)},unexpand=function(entry_method){var em,len,n,ref,results;if(campaignService.entryState.expanded=null,!entry_method){for(ref=campaignService.entry_methods,results=[],n=0,len=ref.length;len>n;n++)em=ref[n],results.push(unexpand(em));return results}return entry_method.information_expanded=!1,entry_method.onUnexpand?entry_method.onUnexpand.call():void 0},$scope.unableToEnter=function(){return!(campaignService.campaign.banned||campaignService.contestantState.location_allowed&&campaignService.isRunning()||campaignService.isTestMode()||!$scope.cookiesEnabled)},$scope.imageChoiceClasses=function(entry_method){var count;switch(count=campaignService.choices(entry_method).length){case 1:return"one-row";case 2:return"two-row";case 3:case 6:return"three-row";case 4:case 7:case 11:case 12:return"four-row";default:return"five-row"}},$scope.hasVisited=function(entryMethod){return Cookies.get("V-"+entryMethod.id)||Cookies.get("D-"+entryMethod.id)},$scope.triggerVisit=function(entryMethodId,apply,value){var entry_method,visitedAt;return null==apply&&(apply=!0),null==value&&(value=null),entry_method=campaignService.getEntryMethod(entryMethodId),campaignService.useVisitCookie(entry_method)?Cookies.set("V-"+entryMethodId,value||"V",{expires:1}):Cookies.set("D-"+entryMethodId,value||"V",{expires:7}),campaignService.isTimerAction(entry_method)&&(visitedAt=Math.floor(Date.now()/1e3),entry_method.secondsOpen&&(visitedAt-=entry_method.secondsOpen),Cookies.set("T-"+entryMethodId,visitedAt,{expires:1})),trackPageview($window.pageViewOveride+("/visited/"+entry_method.id).replace(/\/$/,"")),"VisitAuto"===entry_method.workflow&&attemptEntry(entry_method),entry_method.config.completeAfterVisit&&entry_method.config.completeAfterVisit(entry_method)&&$scope.saveEntryDetails(entry_method),apply&&$scope.$apply(),resize(),ifvisible.blur()},$scope.bestCampaignUrl=function(entry_method){return"Gleam"===campaignService.campaign.stand_alone_option?shareLink(entry_method)||parentUrl()||campaignService.campaign.short_url||campaignService.campaign.landing_page:shareLink(entry_method)||campaignService.campaign.landing_page_override||parentUrl()||campaignService.campaign.short_url||campaignService.campaign.landing_page},$scope.markAsEntered=markAsEntered=function(entry_method,existing_at,worth){return campaignService.contestantState.contestant.entered[entry_method.id].push({t:existing_at,w:worth,c:1})},postEntryRedirect=function(){var postEntryUrl;return postEntryUrl=campaignService.campaign.post_entry_url,postEntryUrl&&campaignService.isAllEntered()?setTimeout(function(){return window.top.location.href=campaignService.campaign.post_entry_url},50):void 0},$scope.instagramMediaType=function(entry_method){return t("video"===entry_method.config3?"instagram_media_video":"instagram_media_photo")},$scope.facebookMediaType=function(entry_method){return t("video"===entry_method.config3?"media_object_video":"photo"===entry_method.config3?"media_object_photo":"media_object_post")},$scope.nameRegex=function(){return campaignService.campaign.first_and_last_name?/[^ ]+ [^ ]+/:/.*/},$scope.widgetWidth=function(){return $(".popup-blocks-container").width()||540},$scope.shareLink=shareLink=function(entry_method,hide_original){var c,l;return null==hide_original&&(hide_original=!1),c=campaignService.contestantState.contestant,campaignService.campaign.share&&campaignService.contestantState.contestant.id&&(l=location.protocol+"//"+location.host+"/"+campaignService.campaign.key+"-"+campaignService.contestantState.contestant.share_key,campaignService.campaign.multiple_shares&&entry_method.share_suffix&&(l+="-"+entry_method.share_suffix),"Gleam"===campaignService.campaign.stand_alone_option&&parentUrl()||campaignService.campaign.shortener_url?(parentUrl()&&(l+="?l="+encodeURIComponent(parentUrl())),!c.gettingShareLink&&entry_method.uses_shortener&&campaignService.isExpanded(entry_method)&&(c.gettingShareLink=!0,campaignService.campaign.shortener_url?(setTimeout(function(){return c.shareLink?void 0:$scope.$apply(function(){return c.shareLink=l})},5e3),shortenerService.shorten(l,campaignService.campaign.shortener_url,campaignService.campaign.shortener_username,campaignService.campaign.shortener_api_key,{success:function(data){return $scope.$apply(function(){return c.shareLink=data.data.url})}})):c.shareLink=l)):c.shareLink=l),hide_original?c.shareLink:c.shareLink||c.originalShareLink},$scope.continueTooltip=function(entry_method){return entry_method.config.continueTooltip?entry_method.config.continueTooltip(entry_method):"good"!==campaignService.verifyStatus(entry_method)&&campaignService.continueDisabled(entry_method)?t("youtube_video"===entry_method.entry_type?"youtube_invalid_video":"pinterest_choose_board"===entry_method.entry_type?"pinterest_invalid_board":"tooltip_invalid_value"):"twitter"===entry_method.provider?t("tooltip_twitter_username"):null},$scope.entryMethodView=function(entry_method){return campaignService.entryState.currentView&&campaignService.entryState.currentView[entry_method.id]||$scope.updateEntryMethodView(entry_method),"empty"===campaignService.entryState.currentView[entry_method.id]?null:campaignService.entryState.currentView[entry_method.id]},$scope.updateEntryMethodView=function(entry_method){var base,canSubmit,displayInformation,requireContactInfoNow;return(base=campaignService.entryState).currentView||(base.currentView={}),campaignService.entryState.currentView[entry_method.id]=(canSubmit=campaignService.canSubmitEntryForm(entry_method),requireContactInfoNow=campaignService.requireContactInfo(entry_method)&&(campaignService.contestantState.unconfirmed||entry_method.config.alwaysRequireContactInfoFirst),displayInformation=campaignService.displayInformationRequired(entry_method,resumeAction),displayInformation||campaignService.enoughUserDetails(entry_method)&&!campaignService.contestantState.unconfirmed||!(canSubmit||campaignService.enoughEntryDetails(entry_method)||requireContactInfoNow)?0===entry_method.entry_type.indexOf("pinterest")&&campaignService.campaign.pinterest_app_banned&&!$scope.getAuthentication("pinterest")?"/"+campaignService.campaign.key+"/ng-view/enter/pinterest-username.html":entry_method.requires_details||entry_method.api_denied||entry_method.display_information||displayInformation?(entry_method.information_expanded=!0,entry_method.template.match("choose_image|multiple_choice|choose_option|blog_comment|visit")?"views/entry-details/templates/"+entry_method.template.replace(/_/,"-")+".html":($("body").trigger("widget:thirdpartyparse"),"views/entry-details/"+entry_method.entry_type+".html")):"empty":"/"+campaignService.campaign.key+"/ng-view/enter/contestant-details.html"),resize()},$scope.postDetailsResize=function(){return $window.postDetailsResize||(resize(),$window.postDetailsResize=!0),null},$scope.youtubeVideoStateChange=function(entry_method,event){return event.data===YT.PlayerState.ENDED?entry_method.timePassed=!0:void 0},$scope.videoFinishedPlaying=function(entry_method){return entry_method.timePassed=!0},$scope.vimeoPlayer=function(entry_method){return $sce.trustAsResourceUrl("//player.vimeo.com/video/"+encodeURIComponent(entry_method.config3)+"?api=1&player_id=vimeoVideo"+encodeURIComponent(entry_method.id))},$scope.kickstarterEmbed=function(entry_method){var matches;return matches=entry_method.config2.match(/\/projects\/(.+)\/([^\/?&#]+)/i),$sce.trustAsResourceUrl("https://www.kickstarter.com/projects/"+matches[1]+"/"+matches[2]+"/widget/video.html")},$scope.indiegogoEmbed=function(entry_method){var matches;return matches=entry_method.config2.match(/\/projects\/([^\/?&#]+)/i),$sce.trustAsResourceUrl("https://www.indiegogo.com/project/"+matches[1]+"/embedded")},$scope.visitAndComplete=function(entry_method){return $scope.triggerVisit(entry_method.id,!1),attemptEntry(entry_method)},$scope.songListened=function(entry_method){return entry_method.listened?confirmAction(entry_method,"W"):void 0},$scope.videoWatched=function(entry_method){return entry_method.timePassed?confirmAction(entry_method,"W"):void 0},$scope.entryContentView=function(){return campaignService.isCompleted()?"views/completed.html":"views/entry.html"},$scope.iframeUrl=function(entry_method){return $sce.trustAsResourceUrl(entry_method.iframe_url)},autoEntryForm=function(){return $("[data-generated=AutoEnter]")},updateDefaultAutoEnterText=function(){var desiredTranslation,existingValue,locale,ref,results,text;if($scope.auto_enter_translation&&(existingValue=autoEntryForm().find("input[name$='[config1]']").val(),desiredTranslation=$scope.auto_enter_translation[campaignService.campaign.default_language])){ref=$scope.auto_enter_translation,results=[];for(locale in ref)text=ref[locale],text===existingValue?results.push(autoEntryForm().find("input[name$='[config1]']").val(desiredTranslation)):results.push(void 0);return results}},$scope.autoEnterChanged=function(){return $timeout(function(){return campaignService.campaign.auto_enter&&campaignService.campaign.login_first?addAutomaticEntry():autoEntryForm().find(".remove").click()})},autoEnter=function(){var em,len,n,ref,results,try_facebook;if(campaignService.campaign.login_first&&campaignService.campaign.auto_enter){for(try_facebook=!0,ref=campaignService.entry_methods,results=[],n=0,len=ref.length;len>n;n++)em=ref[n],campaignService.canEnter(em)&&"custom_action"===em.entry_type&&!em.auth_for_details&&campaignService.enoughEntryDetails(em)&&campaignService.enoughUserDetails(em)?results.push(attemptEntry(em)):results.push(void 0);return results}},addAutomaticEntry=function(){return addTemplateForm($("#entry-methods"),$("#auto-enter-template"),"entry_method","campaign[entry_methods_attributes][0]",{insertFirst:!0,reuseExisting:!0}),autoEntryForm().find('[name$="[_destroy]"]').val("false"),updateDefaultAutoEnterText(),$timeout(function(){return $('[name$="[mandatory]"]:checked').size()>0?$('[data-generated=AutoEnter] [name$="[mandatory]"][type=checkbox]').prop("checked",!0).trigger("update").closest("label").addClass("checked"):void 0})},emailLogin=function(){return campaignService.contestantState.emailLogin=!0,focusFirstContestantInput(),resize()},focusFirstContestantInput=function(){return setTimeout(function(){return $("form.contestant :input:visible:not(.ng-valid)").first().focus()},1)},hashed=function(entry_method){return $window.jsmd5([-campaignService.contestantState.contestant.id,entry_method.id,entry_method.entry_type,campaignService.campaign.key].join("-"))},$scope.facebookContestantLoginStatus=function(loginResponse,callback){return"connected"===loginResponse.status?(campaignService.contestantState.facebookAccessToken=loginResponse.authResponse.accessToken,FB.api("/me/permissions?fields=permission,status",function(response){return campaignService.contestantState.facebookPermissions=facebookLoginService.parsePermissions(response),callback?callback.call():void 0})):void 0},$scope.cancelEntry=function(tracking,unexpandAction){var emId,entry_method;return null==unexpandAction&&(unexpandAction=!0),unexpandAction&&unexpand(),$scope.screen=1,$scope.contestantStep=0,campaignService.contestantState.emailLogin=!1,campaignService.contestantState.otherLogins=null,campaignService.contestantState.pinterestValidatedUsername=null,campaignService.entryState.toEnter&&(entry_method=campaignService.entryState.toEnter,$scope.resetEntryDetails(entry_method),emId=entry_method.id,campaignService.entryState.files[emId]&&(campaignService.entryState.files[emId].$cancel(),campaignService.entryState.files[emId]=null)),$window.trackEvent(tracking),resize()},$scope.requireOtherLogin=requireOtherLogin=function(data){return campaignService.contestantState.otherLogins=data,trackPageview($window.pageViewOveride+"/contestant/other-login"),resize()},$scope.contestantStep=0,$scope.nextStepAvailable=function(){return $scope.contestantStep<campaignService.campaign.contestant_steps-1&&nextVisibleStepPresent()},isStepVisible=function(step){var field,group,key,ref,ref1;group=campaignService.campaign.contestant_details_groups[step];for(key in group){if(field=group[key],"select"!==(ref=field.type)&&"largeselect"!==ref&&"separator"!==ref)return!0;if("select"===(ref1=field.type)||"largeselect"===ref1){if(!field.dependent)return!0;
if(field.options[campaignService.contestantState.form[field.dependent_form_name]])return!0}}return!1},nextVisibleStepPresent=function(){var step;for(step=$scope.contestantStep+1;step<campaignService.campaign.contestant_steps;){if(isStepVisible(step))return!0;step++}return!1},clearCurrentStepFields=function(){var key,results;results=[];for(key in campaignService.campaign.contestant_details_groups[$scope.contestantStep])results.push(delete campaignService.contestantState.form[key]);return results},$scope.currentStepIsVisible=function(){return isStepVisible($scope.contestantStep)},$scope.setNextStep=function(){for($scope.contestantStep++;!$scope.currentStepIsVisible();)clearCurrentStepFields(),$scope.contestantStep++;return resize()},$scope.initializeSelect=function(model,defaultValue,possibleValues){var value;return value=model||defaultValue,indexOf.call(possibleValues,value)>=0?model||(model=defaultValue):""},$scope.setContestant=function(){var contestant,key,ref,value;contestant={},ref=campaignService.contestantState.form;for(key in ref)value=ref[key],contestant[key]=value;return campaignService.contestantState.sending=!0,campaignService.contestantState.unconfirmed=!1,$http.post("/set-contestant",{campaign_key:campaignService.campaign.key,contestant:contestant,additional_details:campaignService.campaign.additional_contestant_details}).success(function(data,status,headers,config){return campaignService.contestantState.sending=!1,data.errors&&data.errors.email?(campaignService.contestantState.emailError=data.errors.email.join(" and "),campaignService.contestantState.failedEmail=campaignService.contestantState.form.email,campaignService.contestantState.failedEmailKey="invalid_email_error",$(".expanded input[name=email]:visible").focus()):data.require_other_login?$scope.requireOtherLogin(data.require_other_login):(campaignService.contestantState.contestant=data.contestant,campaignService.entryState.toEnter?$scope.resumeEntry():autoEnter(),trackPageview($window.pageViewOveride+"/contestant/new"),$scope.loginEvent()),resize()}).error(function(data,status,headers,config){return alert(t("generic_error")),campaignService.contestantState.sending=!1,resize()})},$scope.contestantButtonTooltip=function(valid){return campaignService.contestantState.sending?t("tooltip_sending"):valid?null:t("tooltip_complete_details")},$scope.enterLinkClick=function(entry_method){return campaignService.isExpanded(entry_method)?(unexpand(),resize()):(attemptEntry(entry_method),trackPageview($window.pageViewOveride+("/entry-details/"+entry_method.id+"/"+entry_method.entry_type).replace(/\/$/,"")))},expireAuth=function(entry_method,provider){var authentication,len,n,ref;if(null==provider&&(provider=null),entry_method.entering=!1,provider||(provider=entry_method.provider),campaignService.contestantState.contestant&&campaignService.contestantState.contestant.authentications)for(ref=campaignService.contestantState.contestant.authentications,n=0,len=ref.length;len>n;n++)authentication=ref[n],0===authentication.provider.indexOf(provider)&&(authentication.expired=!0);return alert(t("login_expired_error",{provider:provider.toProperCase()})),openAuthentication(provider,entry_method)},$scope.showPopover=showPopover=function(entry_method,delay){var $tally;return null==delay&&(delay=2e3),$tally=$("#em"+entry_method.id).find(".tally"),setTimeout(function(){return $tally.trigger("mouseover")},0),$tally.data("popover-timeout")&&clearTimeout($tally.data("popover-timeout")),$tally.data("popover-timeout",setTimeout(function(){return $("#em"+entry_method.id).find(".tally").trigger("mouseout")},delay))},$scope.showMessage=showMessage=function(entry_method,error){return entry_method.error=error,showPopover(entry_method,5e3),!0},$scope.copySuccess=function(entry_method){var $button;return $button=$("#em"+entry_method.id).find(".copy"),$button.tooltip({title:t("share_copied"),trigger:"manual",placement:"right"}).tooltip("show"),setTimeout(function(){return $button.tooltip("hide")},2e3)},$scope.copyFallback=function(text){return prompt("",text)},$scope.resetEntryDetails=function(entry_method,resetMedia){return null==resetMedia&&(resetMedia=!0),campaignService.entryState.verifyStatus&&(campaignService.entryState.verifyStatus[entry_method.id]=null),campaignService.entryState.formData[entry_method.id]=null,campaignService.entryDetailsState[entry_method.id]=null,resetMedia&&(entry_method.media=null),entry_method.selected=null,resetMedia?entry_method.mediaSource=null:void 0},$scope.attemptEntry=attemptEntry=function(entry_method){return entry_method.entering||!campaignService.canEnter(entry_method)?$scope.hideEntryMethodAndShowPopover(entry_method):(campaignService.isExpanded(entry_method)||unexpand(),campaignService.entryState.toEnter=entry_method,!entry_method.requires_authentication&&!campaignService.expiredAuthentication(entry_method.provider)||campaignService.isAuthenticated(entry_method)||campaignService.displayInformationRequired(entry_method,resumeAction)?campaignService.needMoreDetailsBeforeEntry(entry_method,resumeAction)?requestDetails(entry_method):(entry_method.entering=!0,unexpand(),resize(),$scope.attemptEntryByPostSubmit(entry_method)):$scope.showAuthenticationNow(entry_method)),$scope.updateEntryMethodView(entry_method)},$scope.hideEntryMethodAndShowPopover=hideEntryMethodAndShowPopover=function(entry_method){return unexpand(),resize(),showPopover(entry_method,1e3)},$scope.showAuthenticationNow=showAuthenticationNow=function(entry_method){return unexpand(),openAuthentication(entry_method.provider,entry_method)},unexpectedEnteringError=function(entry_method,default_message){var error;return null==default_message&&(default_message="generic_error"),error=entry_method.config.errorMessage?entry_method.config.errorMessage(entry_method):t(entry_method.entry_type+"_error")?t(entry_method.entry_type+"_error"):t(default_message,{provider:entry_method.provider.toProperCase()}),showMessage(entry_method,error),expand(entry_method)},$scope.attemptEntryByPostSubmit=attemptEntryByPostSubmit=function(entry_method){var cookie,hash;return cookie=Cookies.get("D-"+entry_method.id),cookie&&entry_method.entry_type.indexOf("twitter_")>=0&&("TWEET"===cookie||"FOLLOW"===cookie||"null"===cookie||"V"===cookie)&&Cookies.remove("D-"+entry_method.id),hash={details:Cookies.get("D-"+entry_method.id)||campaignService.entryDetailsState[entry_method.id],l:parentUrl(),h:hashed(entry_method),fingerprint:fingerprintService.hash($scope.fingerprint),grecaptcha_response:$scope.challenge.userResponse},$http.post("/enter/"+campaignService.campaign.key+"/"+entry_method.id,hash).success(function(data,status,headers,config){return $scope.checkSuccessfulEntry(campaignService.campaign,data,entry_method)}).error(function(data,status,headers,config){return entry_method.entering=!1,unexpectedEnteringError(entry_method)})},$scope.checkSuccessfulEntry=checkSuccessfulEntry=function(campaign,data,entry_method){if(entry_method.entering=!1,entry_method.error=null,!data.error)return entryCompleteWithoutError(data,entry_method);switch(data.error){case"error_auth_expired":return entry_method.config&&entry_method.config.resetBeforeAuth&&thirdChoiceReset(entry_method),expireAuth(entry_method);case"error_unique_value":return thirdChoiceReset(entry_method),entry_method.not_unique_error=!0,attemptEntry(entry_method),showMessage(entry_method,t("not_unique_error"));case"error_limit_reached":return entry_method.limit=data.limit,showMessage(entry_method,t("tooltip_entry_limit_hit",{count:data.limit}));case"error_previously_entered":return showMessage(entry_method,t("previously_entered_entry"));case"error_upload_failed":return thirdChoiceReset(entry_method),attemptEntry(entry_method),showMessage(entry_method,t("upload_error"));case"error_not_found":return showMessage(entry_method,t("not_found_error"));case"error_submission_not_found":return campaignService.entryDetailsState[entry_method.id]=null,showMessage(entry_method,t("submission_not_found_error")),Cookies.remove("D-"+entry_method.id),$scope.updateEntryMethodView(entry_method),expand(entry_method),$scope.triggerVisit(entry_method.id,!1);case"error_too_long":return campaignService.entryDetailsState[entry_method.id]=null,showMessage(entry_method,t("too_long_error")),entry_method.entering=!0,null!=entry_method.too_long_timeout&&clearTimeout(entry_method.too_long_timeout),entry_method.too_long_timeout=setTimeout(function(){return $scope.attemptEntryByPostSubmit(entry_method)},5e3);case"error_invalid_username":return campaignService.entryDetailsState[entry_method.id]=null,showMessage(entry_method,t("not_found_error")),$scope.updateEntryMethodView(entry_method),expand(entry_method);case"error_no_profile":return showMessage(entry_method,t("no_steam_profile_error"));case"error_api_denied":return entry_method.api_denied=!0,$scope.updateEntryMethodView(entry_method),requestDetails(entry_method);case"error_action_forbidden":if(entry_method.api_denied=!0,data.message&&data.message.match(/cannot perform write actions/)||showMessage(entry_method,t("rejected_error",{provider:entry_method.provider.toProperCase(),message:data.message})),data.message.match(/Application cannot perform write actions. Contact Twitter Platform Operations/)&&showMessage(entry_method,t("tooltip_twitter_use_button")),entry_method.api_fallback)return $scope.updateEntryMethodView(entry_method),requestDetails(entry_method);break;case"error_google_plus":return entry_method.api_denied=!0,showMessage(entry_method,t("google_plus_error")),$scope.updateEntryMethodView(entry_method),expand(entry_method);case"error_privacy":return showMessage(entry_method,t(data.message)),$scope.updateEntryMethodView(entry_method),expand(entry_method);case"error_action_not_completed":return"twitchtv_follow"===entry_method.entry_type?(showMessage(entry_method,t("generic_error")),$scope.updateEntryMethodView(entry_method)):"twitchtv_subscribe"===entry_method.entry_type?(campaignService.entryState.formData[entry_method.id]=!1,$scope.updateEntryMethodView(entry_method),expand(entry_method)):(showMessage(entry_method,t("action_not_completed_error")),$scope.updateEntryMethodView(entry_method),expand(entry_method));case"error_steam_community":return entry_method.api_denied=!0,showMessage(entry_method,t("steam_community_error")),$scope.updateEntryMethodView(entry_method),expand(entry_method);case"error_twitter_duplicated":return entry_method.api_denied=!0,showMessage(entry_method,t("twitter_duplicated_error")),$scope.updateEntryMethodView(entry_method),expand(entry_method);case"error_throwaway_account":return showMessage(entry_method,t("steam_throwaway_error"));case"not_logged_in":return showMessage(entry_method,t("logged_in_error")),$window.location.reload();case"error_twitchtv_self_subscribe":return showMessage(entry_method,t("twitchtv_self_subscribe_error")),$scope.updateEntryMethodView(entry_method);case"error_twitchtv_max_follow":return showMessage(entry_method,t("twitchtv_max_follow_error")),$scope.updateEntryMethodView(entry_method);default:return thirdChoiceReset(entry_method),t(data.error)?showMessage(entry_method,t(data.error)):unexpectedEnteringError(entry_method,"third_party_error")}},entryCompleteWithoutError=function(data,entry_method){var base,name1;return(base=campaignService.contestantState.contestant.entered)[name1=entry_method.id]||(base[name1]=[]),Cookies.remove("A-"+campaignService.campaign.key),$scope.handleSpecialCasesForEntry(data,entry_method)||(campaignService.checkAlreadyEntered(entry_method,data.existing_at)||($scope.markAsEntered(entry_method,data.existing_at,data.worth),showPopover(entry_method)),$scope.alertOnIntervalSeconds(entry_method,data.difference)),$scope.handleClaimsAfterEntry(data),$window.trackEvent(appName+" Enter|"+entry_method.entry_type.replace(/_/,"|")),$scope.autoExpandLastShareAction(),1===campaignService.timesEntered(entry_method)&&postEntryRedirect(),1===entry_method.interval_seconds&&(entry_method.justEntered=!0,expand(entry_method),setTimeout(function(){return $scope.$apply(function(){return entry_method.justEntered=!1})},2e3)),resize()},$scope.alertOnIntervalSeconds=alertOnIntervalSeconds=function(entry_method,difference){return entry_method.interval_seconds>0?alert(t("clock_sync_error",{seconds:difference})):alert(t("already_entered_error"))},$scope.handleSpecialCasesForEntry=handleSpecialCasesForEntry=function(data,entry_method){var len,n,ref,trackingCallback;if(data.ended)campaignService.campaign.finished=!0,campaignService.isReward()?showMessage(entry_method,t("just_missed_error",{reward_description:rewardTypeDescription()})):showMessage(entry_method,t("promotion_ended_error"));else if(data.cheater||data.contestant_ban)showMessage(entry_method,t("cheater_error"));else if(data.ip_ban||data.dodgy_share||data.bounced_email)campaignService.contestantState.demandAuth=!0,resize();else if(data.reward_limit_error)showMessage(entry_method,t("reward_limit_error"));else if(data.bad_location)showMessage(entry_method,t("bad_location_error"));else if(data.hash_error)$window.location.reload();else if(data.require_social_login)alert(t("logged_in_error")),$window.location.reload();else if(data.error_challenge_failed)$scope.challenge.userResponse=null,$scope.challenge.demand=!0,$window.grecapcha&&$window.grecapcha.reset(),$scope.updateEntryMethodView(entry_method);else{if(!data["new"]&&!data.new_but_in_list)return!1;if($window.parent&&$window.postMessage&&$window.parent.postMessage(appName+"Entry="+entry_method.id,"*"),data["new"]&&(trackingPixelService.trackAction(entry_method,campaignService.campaign.tracking_pixels,0===campaignService.contestantEntries()),$window.conversionTracking))for(ref=$window.conversionTracking,n=0,len=ref.length;len>n;n++)trackingCallback=ref[n],trackingCallback.call(null,entry_method,0===campaignService.contestantEntries());campaignService.contestantState.contestant.entered[entry_method.id].push({t:data["new"],w:data.worth,c:1}),Cookies.remove("D-"+entry_method.id),campaignService.canEnter(entry_method)&&$scope.resetEntryDetails(entry_method,!1),showPopover(entry_method)}return!0},$scope.handleClaimsAfterEntry=handleClaimsAfterEntry=function(data){var base,claim_data,incentive_id,ref,results;if(data.claims){ref=data.claims,results=[];for(incentive_id in ref)claim_data=ref[incentive_id],(base=campaignService.contestantState.contestant.claims)[incentive_id]||(base[incentive_id]=[]),campaignService.contestantState.contestant.claims[incentive_id].push(claim_data[0]),"Redirect"===campaignService.incentives[0].data_type?results.push(setTimeout(function(){return $window.parent?$window.parent.location.href=claim_data[0]:$window.location.href=claim_data[0]},1e3)):results.push(void 0);return results}},$scope.tallyIcon=function(entry_method){return campaignService.isExpanded(entry_method)?"fa-chevron-down":entry_method.entering?"fa-refresh fa-spin":0!==entry_method.interval_seconds&&campaignService.hasTimeToEnterAgain(entry_method)||campaignService.canEnter(entry_method)||!campaignService.isEntered(entry_method)?entry_method.interval_seconds>0&&!campaignService.canEnter(entry_method)&&campaignService.isEntered(entry_method)?campaignService.entryMethodLimitHit(entry_method)?"fa-check":"fa-clock-o":campaignService.canEnter(entry_method)||campaignService.isEntered(entry_method)?campaignService.isReward()?"fa-question":"":"fa-lock":"fa-check"},$scope.showExtra=function(entry_method){return entry_method.show_extra=!0,resize()},$scope.verifiedValueChanged=function(entry_method){var base,base1,name1,value;return value=campaignService.entryState.formData[entry_method.id]+"",entry_method.entry_type.match(/youtube_video|pinterest_choose_board/)||(value=value.toUpperCase()),value&&(entry_method.config6&&entry_method.must_verify&&value.match(new RegExp(entry_method.config6))||entry_method.entry_type.match(/youtube_video|pinterest_choose_board/))&&((base=campaignService.entryState).verifyStatus||(base.verifyStatus={}),(base1=campaignService.entryState.verifyStatus)[name1=entry_method.id]||(base1[name1]={}),campaignService.entryState.verifyStatus[entry_method.id][value]||(campaignService.entryState.verifyStatus[entry_method.id][value]="checking",verifyValueService.check(value,entry_method,{success:function(status){return status.match("good|bad|unique")?campaignService.entryState.verifyStatus[entry_method.id][value]=status:campaignService.entryState.verifyStatus[entry_method.id][value]="bad",resize()},error:function(){return alert(t("generic_error"))}}))),resize()},$scope.tallyText=function(entry_method){var len,n,ref,show_entries_number,v,values;if(show_entries_number=["share_action","facebook_media","instagram_choose","twitter_media","upload_action","media_action"],$.inArray(entry_method.entry_type,show_entries_number)>=0&&campaignService.contestantState.contestant.entered[entry_method.id]){for(v=0,ref=campaignService.contestantState.contestant.entered[entry_method.id],n=0,len=ref.length;len>n;n++)values=ref[n],v+=values.w;return $filter("kShorten")(v,t("thousand_suffix"))}return entry_method.worth>=1e3?t("worth",{count:$filter("kShorten")(entry_method.worth,t("thousand_suffix"))}):t("worth",{count:entry_method.worth})},$scope.hideTallyNumber=function(entry_method){return campaignService.isReward()||campaignService.isExpanded(entry_method)||entry_method.entering||!campaignService.canEnter(entry_method)},timeDifference=function(time,now){var days,hours,minutes,seconds;return days=Math.floor((time-now)/864e5),hours=Math.floor((time-now)/36e5),minutes=Math.floor((time-now)/6e4),seconds=Math.floor((time-now)/1e3),days>=2?days+t("days"):hours>=2?hours+" "+t("hours"):minutes>=2?minutes+" "+t("minutes"):seconds+" "+pl(seconds,"second","seconds")},$scope.hideTally=function(entry_method){return entry_method.entering||campaignService.isExpanded(entry_method)?!1:(entry_method.mandatory&&campaignService.isOneMandatory()&&campaignService.isAllMandatory()||campaignService.isReward()&&campaignService.bestCouponCode())&&campaignService.canEnter(entry_method)},$scope.tallyTooltip=function(entry_method){var diff;return $scope.hideTally(entry_method)?"":entry_method.error?entry_method.error:campaignService.canEnter(entry_method)?entry_method.entering?t("tooltip_entering"):campaignService.isExpanded(entry_method)?(entry_method.entry_type.match(/youtube_watch|vimeo_watch|wistia_watch/)&&t("tooltip_watch_video"),t("share_action"===entry_method.entry_type?campaignService.isReward()?"tooltip_share_for_action":"tooltip_share_for_entries":entry_method.justEntered&&1===entry_method.interval_seconds?"tooltip_enter_again_now":"tooltip_enter_details")):"share_action"===entry_method.entry_type?t(campaignService.isReward()?"tooltip_share_for_action":"tooltip_share_for_entries"):campaignService.isReward()?0===campaignService.contestantEntries()?pl(campaignService.actionsStillNeededToUnlockReward(),"tooltip_undone_entries_to_unlock_singular","tooltip_undone_entries_to_unlock_plural",{reward_type:rewardTypeDescription()}):pl(campaignService.actionsStillNeededToUnlockReward(),"tooltip_undone_more_entries_to_unlock_singular","tooltip_undone_more_entries_to_unlock_plural",{reward_type:rewardTypeDescription()}):3600===entry_method.interval_seconds?pl(entry_method.worth,"tooltip_enter_each_hour_singular","tooltip_enter_each_hour_plural"):86400===entry_method.interval_seconds?pl(entry_method.worth,"tooltip_enter_each_day_singular","tooltip_enter_each_day_plural"):campaignService.currentEntries(entry_method)>0?pl(campaignService.currentEntries(entry_method),"tooltip_done_singular","tooltip_done_plural"):pl(entry_method.worth,"tooltip_worth_singular","tooltip_worth_plural"):campaignService.isEntered(entry_method)?campaignService.entryMethodLimitHit(entry_method)?t("tooltip_entry_limit_hit",{count:entry_method.limit}):campaignService.hasTimeToEnterAgain(entry_method)?(diff=timeDifference((new Date).getTime()+campaignService.nextEntryMilliseconds(entry_method),(new Date).getTime()),t("tooltip_enter_again_in",{delay:diff})):campaignService.isReward()?campaignService.bestCouponCode()?t("tooltip_see_reward",{reward_type:rewardTypeDescription()}):pl(campaignService.actionsStillNeededToUnlockReward(),"tooltip_more_entries_to_unlock_singular","tooltip_more_entries_to_unlock_plural",{reward_type:rewardTypeDescription()}):entry_method.double_opt_in?pl(campaignService.currentEntries(entry_method),"tooltip_double_opt_in_singular","tooltip_double_opt_in_plural"):pl(campaignService.currentEntries(entry_method),"tooltip_done_singular","tooltip_done_plural"):(diff=entry_method.actions_required-campaignService.contestantActionTypes(),pl(diff,"tooltip_more_entries_for_entry_singular","tooltip_more_entries_for_entry_plural"))},$scope.confirmAction=confirmAction=function(entry_method,detail_value){return campaignService.entryDetailsState[entry_method.id]=detail_value,Cookies.set("D-"+entry_method.id,detail_value,{expires:7}),$scope.updateEntryMethodView(entry_method),attemptEntry(entry_method)},$scope.handleLike=function(url){var entry_method,len,n,noSlash,ref,results;if(noSlash=url.replace(/\/$/,""),campaignService.campaign.facebook_url&&campaignService.campaign.facebook_url===noSlash&&$("[data-campaign-facebook]:visible").size()>0)return eventService.createLikeEvent(campaignService.campaign.key,"Facebook Like (via user details)",url),campaignService.campaign.liked=!0;if(!campaignService.entryState.expanded||campaignService.entryState.expanded.config1.replace(/\/$/,"")!==noSlash&&campaignService.entryState.expanded.config3.replace(/\/$/,"")!==noSlash){for(ref=campaignService.entry_methods,results=[],n=0,len=ref.length;len>n;n++)entry_method=ref[n],entry_method.config1.replace(/\/$/,"")===noSlash?results.push(acceptLike(entry_method,noSlash)):results.push(void 0);return results}return acceptLike(campaignService.entryState.expanded,noSlash)},acceptLike=function(entry_method,url){return"facebook_enter"===entry_method.entry_type?(eventService.createLikeEvent(campaignService.campaign.key,entry_method.config3+" Facebook Like (via enter action)",url),entry_method.liked=!0,$scope.$apply(function(){return confirmAction(entry_method,"LIKED")})):(eventService.createLikeEvent(campaignService.campaign.key,entry_method.config2+" Facebook Like (via visit action)",url),entry_method.liked=!0,$scope.saveEntryDetails(entry_method))},$scope.customActionText=function(entry_method){var split;return split=entry_method.config1.split("//"),campaignService.isEntered(entry_method)?split[split.length-1]:split[0]},$scope.handleSoundCloudRepost=function(entry_method){return $scope.$apply(function(){return confirmAction(entry_method,"REPOST")})},$scope.handlePlusOne=function(entry_method){return $scope.$apply(function(){return"googleplus_plusone"===entry_method.entry_type?confirmAction(entry_method,"+1"):(eventService.createEvent(campaignService.campaign.key,"Google+ +1","+1 "+entry_method.config2+" on Google+",entry_method.config1),$scope.saveEntryDetails(entry_method))})},$scope.rewardTypeDescription=rewardTypeDescription=function(){return t("reward_description_"+campaignService.incentives[0].data_type.toLowerCase())},$scope.resumeEntry=resumeEntry=function(entry_method){return null==entry_method&&(entry_method=null),$scope.resumeAction=!0,entry_method&&(campaignService.entryState.toEnter=entry_method),campaignService.entryState.toEnter&&attemptEntry(campaignService.entryState.toEnter),$scope.resumeAction=!1},propagatePinterestUsername=function(entry_method){var auth;return entry_method.entry_type.match(/pinterest(_pin|_follow)/)&&(auth=$scope.getAuthentication("pinterest"))?campaignService.entryState.formData[entry_method.id]=auth.reference:void 0},propogateTwitterUsername=function(entry_method){var len,n,other_em,ref,results;if(entry_method.entry_type.match(/twitter_/)&&campaignService.entryState.formData[entry_method.id]&&campaignService.entryState.formData[entry_method.id].twitter_username){for(ref=campaignService.entry_methods,results=[],n=0,len=ref.length;len>n;n++)other_em=ref[n],other_em.entry_type.match(/twitter_/)&&!other_em.config.requiresMedia?results.push(campaignService.entryState.formData[other_em.id]=campaignService.entryState.formData[entry_method.id]):results.push(void 0);return results}},$scope.moveToScreen=moveToScreen=function(screen){return $scope.screen=screen,resize()},$scope.saveEntryDetails=function(entry_method){var name,ref,state,strs;if(!campaignService.continueDisabled(entry_method)){if("custom_action"===entry_method.entry_type&&"None"===entry_method.method_type||entry_method.entry_type.match(/(pinterest|facebook)_enter/)||entry_method.timePassed&&parseInt(entry_method.timer_action)>0)campaignService.entryDetailsState[entry_method.id]="Done";else{if("multiple_choice"===entry_method.template){strs=[],ref=campaignService.entryState.formData[entry_method.id];for(name in ref)state=ref[name],state&&strs.push(name);campaignService.entryDetailsState[entry_method.id]=strs.join("\n")}else campaignService.entryDetailsState[entry_method.id]=campaignService.entryState.formData[entry_method.id];propagatePinterestUsername(entry_method),propogateTwitterUsername(entry_method)}return $scope.resumeEntry()}},$scope.inputDimensions=function(entry_method){var s;return s=entry_method.config3.split(/x/),"width: "+s[0]+"px; height: "+Math.min(30,parseInt(s[1]))+"px;"},$scope.toggleTermsAndConditions=function(){return campaignService.campaign.showTermsAndConditions=!campaignService.campaign.showTermsAndConditions,resize()},$scope.campaignType=function(){return t("campaign_type_"+campaignService.campaign.campaign_type.toLowerCase())},$scope.entryMethodIconColor=function(entry_method){var background;return background=campaignService.entryMethodColor(entry_method),!background&&entry_method.provider.match(/^snapchat/)?$filter("visibleTextColor")("#FFFC00"):$filter("visibleTextColor")(background)},$scope.entryMethodIcon=function(entry_method){switch(entry_method.entry_type){case"email_subscribe":return entry_method.normal_icon||"fa-envelope";case"share_action":return entry_method.normal_icon||"fa-heart";case"custom_action":return entry_method.config4&&!entry_method.config2?entry_method.normal_icon||"fa-pencil-square-o":entry_method.unlocked_icon!==entry_method.normal_icon&&campaignService.enoughEntryDetails(entry_method)&&(campaignService.canEnter(entry_method)||campaignService.isEntered(entry_method))?entry_method.unlocked_icon||"fa-unlock":entry_method.normal_icon||"fa-lock";case"vimeo_watch":return entry_method.normal_icon||"fa-vimeo-square";default:return entry_method.normal_icon||"fa-"+entry_method.provider}},$scope.pinterestInit=function(){return window.pinterestInit?setTimeout(function(){return window.pinterestInit()},100):void 0},$scope.initSoundcloudTrack=function(){return window.initSoundcloudTrack?setTimeout(function(){return window.initSoundcloudTrack()},100):void 0},$scope.validatePinterestUsername=function(entry_method,username){return unexpand(entry_method),entry_method.entering=!0,pinterestService.validateUsername(username,{valid:function(){return campaignService.contestantState.pinterestValidatedUsername=username,entry_method.entering=!1,expand(entry_method),$scope.pinterestInit(),$scope.$apply(),resize()},error:function(){return entry_method.entering=!1,expand(entry_method),showMessage(entry_method,t("pinterest_invalid_username"))}})},$scope.pinterestLogin=function(entry_method,username){var authUrl,baseUrl,len,n,providerName,providerPath,ref;for(providerPath="pinterest",ref=campaignService.campaign.all_possible_login_providers,n=0,len=ref.length;len>n;n++)providerName=ref[n],0===providerName.indexOf("pinterest")&&(providerPath=providerName);return baseUrl=location.protocol+"//"+location.host,authUrl=baseUrl+("/auth/"+providerPath+"/callback?reference="+username),unexpand(entry_method),$window.open(authUrl,"_blank","width=780,height=410,toolbar=0,scrollbars=0,status=0,resizable=0,location=0,menuBar=0,left=10,top=10"),!0},$scope.login=function(contestant,newContestantFlag){return campaignService.contestantState.contestant=JSON.parse(contestant),campaignService.contestantState.form.email=campaignService.contestantState.contestant.email,campaignService.contestantState.form.name=campaignService.contestantState.contestant.name,campaignService.contestantState.form.opt_in=campaignService.contestantState.contestant.opt_in,campaignService.contestantState.form.competition_subscription=campaignService.contestantState.contestant.competition_subscription,campaignService.campaign.key!==campaignService.contestantState.contestant.auth_key?setTimeout(function(){return $window.location.reload()},1):campaignService.contestantState.otherLogins=null,newContestantFlag&&(trackPageview($window.pageViewOveride+"/contestant/new"),campaignService.contestantState.unconfirmed=!0),initTwitterUsernameFallback(),$scope.resumeEntry(),$scope.$apply(),focusFirstContestantInput(),resize(),campaignService.campaign.additional_contestant_details?$http.get("/"+campaignService.campaign.key+"/completed-details").success(function(data){return"true"===data?(campaignService.contestantState.contestant.completed_details=!0,resumeEntry(),autoEnter()):void 0}):autoEnter(),$scope.loginEvent()},$scope.loginEvent=function(){return $window.parent.postMessage(appName+"Login"+campaignService.campaign.key,"*")},$scope.tallyType=function(){return t(campaignService.isReward()?"actions":"entries")},$scope.nonMandatoryEntriesCount=nonMandatoryEntriesCount=function(){var entries,entry_method,len,n,ref;for(entries=0,ref=campaignService.entry_methods,n=0,len=ref.length;len>n;n++)entry_method=ref[n],entry_method.mandatory||(entries+=entry_method.worth);return entries},fileDone=function(event,obj){var $form,base,contentType,entry_method,key,name1;return entry_method=obj.scope.entry_method,$form=$(event.target),key=$form.find('input[name="key"]').val(),contentType=$form.find('input[name="Content-Type"]').val(),(base=campaignService.entryState.formData)[name1=entry_method.id]||(base[name1]={}),campaignService.entryState.formData[entry_method.id].file_type=contentType,campaignService.entryState.formData[entry_method.id].url=key,campaignService.entryState.formData[entry_method.id].provider="upload",$scope.isImage(key)||"1"===entry_method.config5?void 0:$scope.saveEntryDetails(entry_method)},$scope.isImage=function(url){return/.+(jpeg|jpg|gif|png|bmp)$/i.test(url)},$scope.uploadOptions={dataType:"xml",always:function(event,obj){return obj.errorThrown&&"TypeError"!==obj.errorThrown.name||fileDone.call(this,event,obj),resize(),obj.scope.entry_method.uploading=!1},add:function(event,obj){var $form,contentType,entryMethod,file,filename,match,megLimit,size,submit;return entryMethod=obj.scope.entry_method,entryMethod.uploading=!0,file=obj.files[0],submit=function(){return obj.submit()},angular.forEach(obj.files,function(file,index){return file._index=index,file.$state=function(){return obj.state()},file.$progress=function(){return resize(),obj.progress()},file.$response=function(){return obj.response()}}),file.$cancel=function(){return obj.scope.clear(obj.files),obj.abort()},"rejected"===file.$state()?file._$submit=submit:file.$submit=submit,$form=$(event.target),contentType=file.type,size=file.size,megLimit="media_action"===entryMethod.entry_type?150:entryMethod.config4||10,filename=file.name,campaignService.entryState.errors[entryMethod.id]=[],$("#em"+entryMethod.id+" [data-file-upload-progress]").scope().num=0,(entryMethod.config2||"media_action"===entryMethod.entry_type)&&(match=filename.match(/\.([a-z0-9]+)$/i),match&&-1!==entryMethod.allowed_file_extensions.indexOf(match[1].toUpperCase())||campaignService.entryState.errors[entryMethod.id].push(t("upload_filetype_error",{formats:entryMethod.allowed_file_extensions.join(", ")}))),size&&size>megLimit*Math.pow(2,20)&&campaignService.entryState.errors[entryMethod.id].push(t("upload_size_error",{megabytes:megLimit})),0===campaignService.entryState.errors[entryMethod.id].length?(campaignService.entryState.files[parseInt(entryMethod.id)]=file,$.ajax({headers:{"Content-Type":"application/vnd.api+json",Accept:"application/vnd.api+json"},url:"/api/v1/signed_urls",type:"POST",dataType:"json",data:JSON.stringify({data:{type:"signed_url",attributes:{title:filename,content_type:contentType,size:size},relationships:{entry_method:{data:{type:"entry_method",id:""+entryMethod.id}}}}}),success:function(data){return $form.find("input[name=key]").val(data.data.attributes.key),$form.find("input[name=policy]").val(data.data.attributes.policy),$form.find("input[name=signature]").val(data.data.attributes.signature),$form.find('input[name="Content-Type"]').val(data.data.attributes.content_type),resize(),obj.process().done(function(){return obj.scope.queue.push(file),obj.submit(),resize()})},error:function(data){return alert("An unexpected error occurred uploading a file");
}})):entryMethod.uploading=!1,resize(),$scope.$apply()}},$scope.mediaChoice=function(entry_method,media,needs_resize){return null==needs_resize&&(needs_resize=!1),entry_method.selected=media,needs_resize?resize(50):void 0},$scope.imageChoice=function(entry_method,src){var base,count,elementIndex,max,name1;return entry_method.workflow&&/^ChooseUpTo\d+$/.test(entry_method.workflow)?(max=parseInt(/ChooseUpTo(\d+)/.exec(entry_method.workflow)[1]),(base=campaignService.choiceState)[name1=entry_method.id]||(base[name1]=[]),elementIndex=campaignService.choiceState[entry_method.id].indexOf(src),-1===elementIndex?campaignService.choiceState[entry_method.id].push(src):campaignService.choiceState[entry_method.id].splice(elementIndex,1),count=campaignService.choiceState[entry_method.id].length,campaignService.choiceState[entry_method.id]=campaignService.choiceState[entry_method.id].slice(Math.max(0,count-max),max+1)):campaignService.choiceState[entry_method.id]=src},$scope.nextImage=function(entry_method){var c,position;return c=campaignService.choices(entry_method),position=$.inArray(campaignService.choiceState[entry_method.id],c),position===c.length-1?campaignService.choiceState[entry_method.id]=c[0]:campaignService.choiceState[entry_method.id]=c[position+1]},$scope.prevImage=function(entry_method){var c,position;return c=campaignService.choices(entry_method),position=$.inArray(campaignService.choiceState[entry_method.id],c),0===position?campaignService.choiceState[entry_method.id]=c[c.length-1]:campaignService.choiceState[entry_method.id]=c[position-1]},$scope.initChoice=function(entry_method){return entry_method.config_toggle?campaignService.choiceState[entry_method.id]=campaignService.choices(entry_method)[0]:void 0},$scope.mediaChoiceContinue=function(entry_method){var media;return media=entry_method.selected,campaignService.entryDetailsState[entry_method.id]=media,$scope.updateEntryMethodView(entry_method),attemptEntry(entry_method)},thirdChoiceReset=function(entry_method){return("upload_action"===entry_method.entry_type||"media_action"===entry_method.entry_type&&"upload"===entry_method.mediaSource)&&$scope.resetEntryDetails(entry_method),campaignService.entryDetailsState[entry_method.id]=null,entry_method.not_unique_error=null,$scope.updateEntryMethodView(entry_method)},$scope.imageChoiceContinue=function(entry_method){return entry_method.workflow?campaignService.entryDetailsState[entry_method.id]=campaignService.choiceState[entry_method.id].join("\n"):campaignService.entryDetailsState[entry_method.id]=campaignService.choiceState[entry_method.id],$scope.updateEntryMethodView(entry_method),attemptEntry(entry_method)},$scope.previewImageSrc=function(){var defaultImage,divide,img,src;return defaultImage="https://js.out.sh/images/"+campaignService.campaign.campaign_type.toLowerCase()+"-overlay@2X.png",src=$(".user-asset-overlay-image-original .user-asset__preview img").not("[src^=data]").attr("src")||defaultImage,$scope.previewImageSizes[src]||(divide=src.match(/@2x\.[a-z0-9]+$/i)?2:1,img=new Image,img.onload=function(){var h,w;return h=this.height,w=this.width,$scope.$apply(function(){return $scope.previewImageSizes[src]={},$scope.previewImageSizes[src].height=h/divide,$scope.previewImageSizes[src].width=w/divide})},img.src=src),src},$scope.inFrame=function(){return $window.parent!==$window},$scope.landingPageOption=function(){return"Page"===campaignService.campaign.stand_alone_option?"Override":"Full"===campaignService.campaign.stand_alone_option?"IFrame":"Automatic"},$scope.previewImageSizes={"https://js.out.sh/images/reward-overlay@2X.png":{height:70,width:200},"https://js.out.sh/images/competition-overlay@2X.png":{height:70,width:200}},$scope.previewImageMarginTop=function(){return campaignService.campaign.overlay_position.match(/^center-/)?"Image"===campaignService.campaign.theme&&$scope.previewImageSizes[$scope.previewImageSrc()]?$scope.previewImageSizes[$scope.previewImageSrc()].height/-2:32-$("#c9-button").width():0},$scope.toTrusted=toTrusted=function(html_code,removeProtocol){return $sce.trustAsHtml(removeProtocol?(html_code+"").replace(/https?:\/\//,"//"):html_code)},$scope.toTrustedUrl=toTrustedUrl=function(url){return $sce.trustAsResourceUrl(url)},$scope.logoutLink=function(){return $window.logoutPath||"/entry/logout"},$scope.toggleEdit=function(){var authentication,len,n,ref;for(campaignService.contestantState.editMode=!campaignService.contestantState.editMode,ref=campaignService.contestantState.contestant.authentications,n=0,len=ref.length;len>n;n++)authentication=ref[n],authentication.toRemove=!1;return resize()},$scope.prepareUnlink=function(authentication){return authentication.toRemove=!authentication.toRemove,resize()},$scope.updateContestant=function(){var contestant,form;return campaignService.contestantState.updating=!0,form=campaignService.contestantState.form,contestant=campaignService.contestantState.contestant,$http.post("/update-contestant",{campaign_key:campaignService.campaign.key,competition_subscription:form.competition_subscription,contestant:{id:contestant.id,name:form.name,email:form.email,authentications:contestant.authentications}}).success(function(data,status,headers,config){return data.details?(campaignService.contestantState.contestant.name=data.details.name,campaignService.contestantState.contestant.email=data.details.email,campaignService.contestantState.contestant.authentications=data.details.authentications,campaignService.contestantState.updating=!1,campaignService.contestantState.editMode=!1,resize()):void 0}).error(function(data,status,headers,config){switch(campaignService.contestantState.updating=!1,resize(),data.error){case"not_logged_in":return alert(t("logged_in_error"));case"cheater_error":return alert(t("cheater_error"));case"not_logged_in":return alert(t("logged_in_error"));case"invalid_email":return campaignService.contestantState.failedEmail=data.details.failed_email,campaignService.contestantState.failedEmailKey=data.details.message_key;default:return alert(t("generic_error"))}})},toFormName=function(name){return name.toLowerCase().strip().replace(/[^a-z0-9 _]/gi,"").replace(/( |_)+/gi,"_")},applyPrepopulation=function(apply){var formName,k,prepopStr,ref,v;if(prepopStr=Cookies.get("Prepop-"+campaignService.campaign.key),prepopStr&&$scope.contestantState&&campaignService.contestantState.form){ref=angular.fromJson(prepopStr);for(k in ref)v=ref[k],formName=toFormName(k),formName&&(campaignService.contestantState.form[formName]=v);if(apply)return $scope.$apply()}},addCustomActionChecking=function(){var em,len,n,ref;if(campaignService.entry_methods)for(ref=campaignService.entry_methods,n=0,len=ref.length;len>n;n++)if(em=ref[n],"custom_action"===em.entry_type&&em.config2)return void setInterval(function(){return $scope.$apply()},2e3)},$scope.addTemplate=function($event,subTemplates){var $add,$element,$target,$template,len,n,template;if(null==subTemplates&&(subTemplates=[]),$event.preventDefault(),$add=$($event.target),!$add.hasClass("disabled")){for($target=$add.closest(".template-add").children(".template-add-to"),$template=$($add.data("template")),$element=addTemplateForm($target,$template,$add.data("replace-prefix"),$add.data("replacement")),n=0,len=subTemplates.length;len>n;n++)template=subTemplates[n],addTemplateForm($element.find(".template-add-to"),$(template),$add.data("replace-prefix"),$add.data("replacement"));return subTemplates&&$element.find(":input:visible").not(".chzn-control-group :input").first().focus(),null}},addTemplateForm=function($target,$template,replacePrefix,prefixReplacer,options){var $element,$existing,$new,insertFirst,limited,replacement,reuseExisting,template,unique;return null==options&&(options={}),insertFirst=options.insertFirst,reuseExisting=options.reuseExisting,unique=$template.data("removable-unique"),unique&&($existing=$target.find("[data-unique-key="+unique+"]"),$existing.size()>0)?void(reuseExisting?($existing.removeClass("removed"),$existing.find('[name$="[_destroy]"]').val("false")):($existing.hasClass("closed")?$existing.find(".handle").click():$("html, body").animate({scrollTop:$existing.offset().top},500),$existing.find(":input:visible").not(".chzn-control-group :input").first().focus())):(limited=$template.data("removable-limit"),limited&&(unique=$template.data("unique-key"),$existing=$target.find("[data-unique-key="+unique+"]:not(.removed)"),$existing.size()>=parseInt(limited))?void alert($template.data("removable-limit-message")):(template=$template.html(),replacement=prefixReplacer.replace("[0]","["+$target.children().length+"]"),template=template.replace(new RegExp("((?:name|id|for)=(?:\"|'))"+replacePrefix+"([^\"']*(?:\"|'))","gi"),"$1"+replacement+"$2"),$element=angular.element(template),insertFirst?$target.prepend($element):$target.append($element),$compile($element)($scope),$target.trigger("reorder"),$target.parents(".sortable, .unsortable").trigger("reorder"),$target.find(".sortable, .unsortable").trigger("reorder"),window.inits.datePicker($target),$new=insertFirst?$target.children().first():$target.children().last(),$new.find(".chzn-select").chosen().parents(".control-group").addClass("chzn-control-group"),$new.find(".chzn-select-dynamic").chosen({create_option:!0,persistent_create_option:!0,skip_no_results:!0,create_option_text:"Add",placeholder_text_multiple:"Click to add",width:"100%"}).parents(".control-group").addClass("chzn-control-group"),$new.find(":input:visible").not(".chzn-control-group :input").first().focus(),$new.find("select").not(".chzn-select, .chzn-select-dynamic, .no-dropkick").each(function(){return $(this).data("random-id")&&$(this).attr("id",("dropkick"+Math.random()).replace(/\./,"")),$(this).dropkick()}),$new.find("i.help-hover").popover(),setTimeout(function(){return $new.find("[checked=checked]").click(),$new.find(":checked, [checked=checked]").trigger("click").trigger("change"),$new.find("select").trigger("change"),$new.find(".chzn-select").trigger("chosen:updated")},0),$element))},$scope.isTimerAction=function(entry_method){return campaignService.isTimerAction(entry_method)},checkActionPerformed=function(entry_method){var result;return entry_method.config.actionKey&&(result=$.inArray(entry_method.config.actionKey(entry_method),(campaignService.contestantState.contestant.actions+","+(Cookies.get("A-"+campaignService.campaign.key)||"")).split(/,/))>=0,result&&campaignService.canSubmitEntryForm(entry_method))?$scope.saveEntryDetails(entry_method):void 0},startExpandedTimer=function(){var em,len,n,ref;if(campaignService.entry_methods)for(ref=campaignService.entry_methods,n=0,len=ref.length;len>n;n++)if(em=ref[n],campaignService.isTimerAction(em)&&!em.config.isTimerTriggered)return setInterval(function(){var timed_em;return timed_em=campaignService.entryState.expanded,timed_em&&campaignService.isTimerAction(timed_em)&&!timed_em.config.isTimerTriggered?$scope.$apply(function(){return timed_em.secondsOpen||(timed_em.secondsOpen=0),timed_em.secondsOpen+=1,campaignService.checkIfTimePassed(timed_em)}):void 0},1e3)},startVisitActionTimer=function(){var array,em,key,len,n,needTimer,ref;if(campaignService.entry_methods){for(needTimer=!1,ref=campaignService.entry_methods,n=0,len=ref.length;len>n;n++)em=ref[n],em.config.actionKey&&em.config.actionKey(em)&&(key=em.config.actionKey(em),array=(campaignService.contestantState.contestant.actions+","+(Cookies.get("A-"+campaignService.campaign.key)||"")).split(/,/),$.inArray(key,array)<0&&(needTimer=!0));return needTimer?setInterval(function(){var expanded_em;return expanded_em=campaignService.entryState.expanded,expanded_em&&expanded_em.config.actionKey&&expanded_em.config.actionKey(expanded_em)&&"Done"!==campaignService.entryDetailsState[expanded_em.id]?$scope.$apply(function(){return checkActionPerformed(expanded_em)}):void 0},1e3):void 0}},bindVisitActionsTriggers=function(){var em,last_time_visited,len,len1,n,o,ref,ref1;if(campaignService.entry_methods){for(ref=campaignService.entry_methods,n=0,len=ref.length;len>n;n++)em=ref[n],em.config.isTimerTriggered&&(last_time_visited=Cookies.get("T-"+em.id),last_time_visited&&(em.secondsOpen=Math.floor(Date.now()/1e3)-last_time_visited,campaignService.checkIfTimePassed(em)));for(ref1=campaignService.entry_methods,o=0,len1=ref1.length;len1>o;o++)if(em=ref1[o],em.config.isTimerTriggered)return ifvisible.on("idle",function(){return campaignService.entryState.expanded?campaignService.entryState.expanded.pausedTimestamp=Math.floor(Date.now()/1e3):void 0}),void ifvisible.on("wakeup",function(){var sleepSeconds,sleep_em;return sleep_em=campaignService.entryState.expanded,sleep_em&&sleep_em.pausedTimestamp&&sleep_em.config.isTimerTriggered&&campaignService.isTimerAction(sleep_em)&&campaignService.isTimerTriggered(sleep_em)?(sleepSeconds=Math.floor(Date.now()/1e3)-sleep_em.pausedTimestamp,sleep_em.secondsOpen||(sleep_em.secondsOpen=0),sleep_em.secondsOpen+=sleepSeconds,$scope.$apply(function(){return campaignService.checkIfTimePassed(sleep_em),resize()})):void 0})}},mandatoryFirstEntryMethod=function(){var m;return 1===campaignService.entry_methods.length?campaignService.entry_methods[0]:(m=$filter("filter")(campaignService.entry_methods,{mandatory:!0}),1===m.length&&m[0].completable?m[0]:null)},autoExpandFirstAction=function(){var em;return em=mandatoryFirstEntryMethod(),em&&em.auto_expandable&&(em.display_information||!em.requires_authentication||campaignService.isAuthenticated(em))&&campaignService.canEnter(em)&&(em.expandable||!campaignService.enoughUserDetails(em))?(campaignService.entryState.toEnter=em,$scope.updateEntryMethodView(em),requestDetails(em)):void 0},$scope.autoExpandLastShareAction=autoExpandLastShareAction=function(){var entry_method,i,incomplete,last;return last=campaignService.entry_methods.length-1,incomplete=function(){var len,n,ref,results;for(ref=campaignService.entry_methods,results=[],i=n=0,len=ref.length;len>n;i=++n)entry_method=ref[i],campaignService.canEnter(entry_method)&&results.push(i);return results}(),1!==incomplete.length||campaignService.bestCouponCode()?void 0:"share_action"===campaignService.entry_methods[incomplete[0]].entry_type?attemptEntry(campaignService.entry_methods[incomplete[0]]):void 0},triggerOnloadPixel=function(){return trackingPixelService.onLoad(campaignService.campaign.tracking_pixels)},$scope.initContestant=function(contestantData){return campaignService.initContestant(contestantData),$scope.contestantState=campaignService.contestantState},$scope.initEntryCount=function(c){return setTimeout(function(){return $scope.$apply(function(){return campaignService.campaign.entry_count=c||0})},1)},$scope.hasFeature=function(feature){return $scope.features&&!!$scope.features[feature]},$scope.setFeatures=function(features){return $scope.$apply(function(){return $scope.features=features})},initFrontEndEntryMethodConfig=function(){var entry_method,len,n,ref,results;for(ref=campaignService.entry_methods,results=[],n=0,len=ref.length;len>n;n++)entry_method=ref[n],results.push(entry_method.config=actionsConfig(entry_method.entry_type));return results},initFingerprint=function(){return fingerprintService.fingerprint(function(response){return $scope.fingerprint=response})},initEventModeTimeout=function(){var eventTimeoutInterval;return campaignService.campaign.event_mode?($(document).on("keydown mousedown","body",function(){return $scope.lastUserInteraction=new Date}),eventTimeoutInterval=setInterval(function(){return $scope.lastUserInteraction&&$scope.lastUserInteraction.getTime()<(new Date).getTime()-12e4?(clearInterval(eventTimeoutInterval),$("[data-logout-link]").click()):void 0},1e3)):void 0},initTwitterUsernameFallback=function(){var authentication,base,base1,entry_method,len,len1,n,name1,o,ref,ref1,results,twitterUsername;if(campaignService.contestantState.contestant&&campaignService.contestantState.contestant.authentications){for(twitterUsername=null,ref=campaignService.contestantState.contestant.authentications,n=0,len=ref.length;len>n;n++)authentication=ref[n],authentication.provider.match(/twitter/)&&(twitterUsername=authentication.reference);if(twitterUsername){for(ref1=campaignService.entry_methods,results=[],o=0,len1=ref1.length;len1>o;o++)entry_method=ref1[o],entry_method.provider.match(/twitter/)&&$scope.isAuthenticated(entry_method,"twitter")&&!entry_method.config.requiresMedia?(entry_method.config=actionsConfig(entry_method.entry_type),(base=campaignService.entryState.formData)[name1=entry_method.id]||(base[name1]={}),results.push((base1=campaignService.entryState.formData[entry_method.id]).twitter_username||(base1.twitter_username=twitterUsername))):results.push(void 0);return results}}},$scope.cookieFix=function(){var attempts,prepopulateChecker;return $scope.initCookiesEnabled(),window&&window.parent&&window.parent.postMessage?(window.parent.postMessage("request-prefill","*"),attempts=1,prepopulateChecker=setInterval(function(){var prepopulate;return attempts+=1,prepopulate=Cookies.get("PP-"+campaignService.campaign.key),prepopulate||attempts>50?(applyPrepopulation(!0),clearInterval(prepopulateChecker)):void 0},200)):void 0},$scope.initCampaign=function(campaignData){var cookieChecker;return $scope.initCookiesEnabled(),$scope.cookiesEnabled||(cookieChecker=setInterval(function(){return $scope.cookiesEnabled?($scope.$apply(),clearInterval(cookieChecker)):void 0},2500)),campaignService.initCampaign(campaignData),$scope.campaign=campaignService.campaign,$scope.incentives=campaignService.incentives,$scope.entry_methods=campaignService.entry_methods,$scope.entryMethodMap=campaignService.entryMethodMap,$scope.entryState=campaignService.entryState,$scope.entryDetailsState=campaignService.entryDetailsState,$scope.appName=campaignData.appName,$scope.browser=angular.browser,$scope.challenge={userResponse:null,demand:!1},initFrontEndEntryMethodConfig(),startExpandedTimer(),bindVisitActionsTriggers(),startVisitActionTimer(),applyPrepopulation(),addCustomActionChecking(),autoExpandFirstAction(),autoExpandLastShareAction(),triggerOnloadPixel(),initFingerprint(),initEventModeTimeout(),initTwitterUsernameFallback()},(initSelectedTab=function(){return $timeout(function(){return"user-tab"===window.location.hash.replace(/^#\/?/,"")?campaignService.campaign.selectedTab="user":void 0})})()}])}.call(this),function(){angular.module("App.directives",[]).directive("glCountdown",["$timeout","translationService",function($timeout,translationService){return{scope:!0,link:function(scope,element,attrs){return scope.dateState={},scope.i18n={},attrs.$observe("starts",function(value){return scope.dateState.starts=new Date(1e3*parseInt(value)),setTimeout(function(){return scope.start()},1)}),attrs.$observe("ends",function(value){return scope.dateState.ends=new Date(1e3*parseInt(value))})},controller:["$rootScope","$scope",function($rootScope,$scope){return $scope.isStarted=function(){return new Date>$scope.dateState.starts},$scope.isEnded=function(){return new Date>$scope.dateState.ends},$scope.start=function(){var tick;return tick=function(){var days,end,hours,minutes,now,seconds;return now=new Date,end=now<$scope.dateState.starts?$scope.dateState.starts:$scope.dateState.ends,now>end?($scope.status=translationService.translate("campaign_ended"),$scope.description=""):(days=Math.floor((end-now)/864e5),hours=Math.floor((end-now)/36e5),minutes=Math.floor((end-now)/6e4),seconds=Math.floor((end-now)/1e3),days>=2?($scope.status=days,$scope.description=translationService.translate("days")):hours>=2?($scope.status=hours,$scope.description=translationService.translate("hours")):minutes>=2?($scope.status=minutes,$scope.description=translationService.translate("minutes")):($scope.status=seconds,$scope.description=translationService.translate("seconds"))),!0},setInterval(function(){var previousDescription,previousStatus;return previousStatus=$scope.status,previousDescription=$scope.description,tick(),previousStatus!==$scope.status||previousDescription!==$scope.description?(previousDescription!==$scope.description&&window[window.actionMarketingAppName].resizeContent(),$scope.$apply()):void 0},1e3),$scope.$apply(tick)}}]}}]).directive("ngFocus",["$timeout",function($timeout){return{link:function(scope,element,attrs){return scope.$watch(attrs.ngFocus,function(val){return angular.isDefined(val)&&val?$timeout(function(){return element[0].focus()}):void 0},!0)}}}]).directive("backImg",function(){return{restrict:"A",scope:{backImg:"="},link:function(scope,element,attrs){return scope.$watch("backImg",function(n,o){return element.css({"background-image":"url('"+n+"')"})})}}}).directive("preventClick",function(){return function(scope,element,attrs){return angular.element(element).bind("click",function(event){return event.preventDefault()})}}).directive("restrict",["$parse",function($parse){return{restrict:"A",require:"ngModel",link:function(scope,iElement,iAttrs,controller){return scope.$watch(iAttrs.ngModel,function(value){return value&&iAttrs.restrict?$parse(iAttrs.ngModel).assign(scope,value.replace(new RegExp(iAttrs.restrict,"g"),"")):void 0})}}}]).directive("minimumAge",function(){var DMY_REGEX,MDY_REGEX;return MDY_REGEX=/^(0?[1-9]|1[012])\/(0?[1-9]|[12][0-9]|3[01])\/(19|20)(\d\d)$/,DMY_REGEX=/^(0?[1-9]|[12][0-9]|3[01])\/(0?[1-9]|1[012])\/(19|20)(\d\d)$/,{restrict:"A",scope:{minimumAge:"@",ageFormat:"@"},require:"ngModel",link:function(scope,elm,attrs,ctrl){return ctrl.$parsers.unshift(function(viewValue){var dateOfBirth,day,format,match,maximumDateOfBirth,mdy,month,year;return mdy="DMY"!==scope.ageFormat,format=mdy?MDY_REGEX:DMY_REGEX,viewValue&&scope.minimumAge?format.test(viewValue)?(ctrl.$setValidity("ageFormat",!0),match=viewValue.match(format),mdy?(day=match[2],month=match[1],year=match[3]+match[4]):(day=match[1],month=match[2],year=match[3]+match[4]),dateOfBirth=new Date(parseInt(year),parseInt(month)-1,parseInt(day),0,0,0,0),maximumDateOfBirth=new Date,maximumDateOfBirth.setFullYear(maximumDateOfBirth.getFullYear()-parseInt(scope.minimumAge)),maximumDateOfBirth>dateOfBirth?(ctrl.$setValidity("minimumAge",!0),viewValue):void ctrl.$setValidity("minimumAge",!1)):void ctrl.$setValidity("ageFormat",!1):(ctrl.$setValidity("minimumAge",!0),viewValue)})}}}).directive("ngLoad",["$parse",function($parse){return{restrict:"A",compile:function($element,attr){var fn;return fn=$parse(attr.ngLoad),function(scope,element,attr){return element.on("load",function(event){return scope.$apply(function(){return fn(scope,{$event:event})})})}}}}]).directive("xfbmlParse",["$window","$timeout",function($window,$timeout){var reparseParentElement;return reparseParentElement=function(element){return $timeout(function(){var e;if($window.FB&&$window.FB.XFBML)try{if($window.FB.XFBML.parse(element.parent()[0]),element.hasClass("fb-like")&&(element.find("> span").css("width","100%"),element.find("> span").css("height","20px"),element.find("> span").css("overflow",""),element.find("iframe").length>0))return element.find("iframe").css("width",element.find("iframe body").width()||450),element.find("iframe").css("height",""),element.find("iframe")[0].onload=function(){return element.find("iframe").css("width",element.find("iframe body").width()||450),element.find("iframe").css("height","")}}catch(error){if(e=error,$window.console)return $window.console.log("Failed to re-parse fb like",e)}},100)},{restrict:"A",link:function(scope,element,attrs){return reparseParentElement(element)}}}]).directive("imageonload",function(){return{restrict:"A",link:function(scope,element,attrs){return element.bind("load",function(){return scope.$apply(attrs.imageonload)})}}}).directive("snapchatResize",function(){var snapchatHeightCalc;return snapchatHeightCalc=function(scope,element,width,height){var ratio,ratio2;return null==scope.snapchat_width&&(scope.snapchat_width=.8*element.width()),ratio=width()/height(),ratio2=width()/scope.snapchat_width,ratio>=1?Math.floor(scope.snapchat_width/ratio).toString()+"px":Math.floor(height/ratio2)+"px"},{restrict:"A",scope:{width:"&",height:"&"},link:function(scope,element,attrs){var eventListener,newHeight;return newHeight=snapchatHeightCalc(scope,element,scope.width,scope.height),element.css("min-height",newHeight),(eventListener=window.attachEvent||window.addEventListener)("resize",function(){return scope.snapchat_width=null,element.css("min-height","inherit")})}}}).directive("grecaptcha",["$window","$timeout","$parse",function($window,$interval,$parse){var initCaptchas,initElement;return initElement=function(scope,element,attrs){return grecaptcha.render(element,{sitekey:attrs.grecaptchaSiteKey,callback:function(response){return scope.$apply(function(){return $parse(attrs.grecaptcha).assign(scope,response),scope.challengeCompleted()})}}),$window.setInterval(function(){var $iframe;return $iframe=$('iframe[title*="challenge"]'),$iframe.size()>0&&$iframe.is(":visible")?($iframe.closest("body > div").hasClass("grecaptcha-container")||$iframe.closest("body > div").addClass("grecaptcha-container"),0===$(".enter-page").size()?$(".challenge").css({"min-height":$iframe.height()-52}).scope().resize(100,!1):void 0):$(".challenge").css({"min-height":"0"})},1e3)},initCaptchas=function(scope,element,attrs){var s;return $window.grecaptcha?initElement(scope,element[0],attrs):($window.toGrecaptcha||($window.toGrecaptcha=[]),$window.toGrecaptcha.push(element[0]),$window.grecaptchaCallback?void 0:(s=document.createElement("script"),s.src="https://www.google.com/recaptcha/api.js?onload=grecaptchaCallback&render=explicit",document.body.appendChild(s),$window.grecaptchaCallback=function(){var e,j,len,ref,results;for(ref=$window.toGrecaptcha,results=[],j=0,len=ref.length;len>j;j++)e=ref[j],results.push(initElement(scope,e,attrs));return results}))},{restrict:"A",link:function(scope,element,attrs){return initCaptchas(scope,element,attrs)}}}]).directive("autogrow",["$timeout",function($timeout){return{restrict:"A",link:function(scope,element,attrs){return $timeout(function(){return $(element).data("autogrowed")?void 0:$(element).autogrow().data("autogrowed",!0)})}}}]).directive("ngEnter",function(){return{restrict:"A",link:function(scope,element,attrs){return element.bind("keydown keypress",function(event){return 13===event.which?(scope.$apply(function(){return scope.$eval(attrs.ngEnter,{event:event})}),event.preventDefault()):void 0})}}}).directive("ngZapierApiKeyViewer",function(){return{restrict:"A",scope:{},link:function(scope,element,attrs){var EMPTY_KEY;return EMPTY_KEY="XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",scope.apiKey={apiKey:EMPTY_KEY,isLoading:!1,errorText:null,isPlaceholder:!0,isCurrentUser:!1,user:null},element.addClass("zapier-api-key-viewer")},controller:["$scope","$http","$timeout",function($scope,$http,$timeout){var setApiKey,setError;return setApiKey=function(response){return $scope.apiKey.user&&$scope.apiKey.user.id!==response.data.user.id?($scope.apiKey.isLoading=!1,$scope.apiKey.errorText="Something went wrong."):$scope.apiKey={apiKey:response.data.zapier_api_key,user:response.data.user,isCurrentUser:response.data.is_current_user,isLoading:!1,errorText:null,isPlaceholder:!1}},setError=function(response){return $scope.apiKey.isLoading=!1,$scope.apiKey.errorText="Something went wrong: "+response.statusText,$timeout(function(){return $scope.apiKey.errorText=null},3e3)},{getZapierApiKey:function(evt){return evt.preventDefault(),$scope.apiKey.isLoading=!0,$http.get("/zapier_api_key").then(setApiKey,setError)},resetZapierApiKey:function(evt){return evt.preventDefault(),confirm("Do you really want to reset api key? It will invalidate all connections as well.")?($scope.apiKey.isLoading=!0,$http.post("/zapier_api_key/reset").then(setApiKey,setError)):void 0}}}],controllerAs:"ctrl",template:'<div class="zapier-api-key-label">Zapier Api Key (<a href="/docs/integrations/zapier" target="_blank">How to use it?</a>):</div>\n<div class="zapier-api-key-controls">\n  <div class="zapier-api-key-value" ng-class="{\'zapier-api-key-value-hidden\': apiKey.isPlaceholder}" ng-bind="apiKey.apiKey"></div>\n  <button ng-if="apiKey.isPlaceholder" class="zapier-api-key-get" ng-class="{\'zapier-api-key-get-loading\': apiKey.isLoading}" ng-disabled="apiKey.isLoading" ng-click="ctrl.getZapierApiKey($event)">\n    <i ng-if="apiKey.isLoading" class="fa fa-refresh" aria-hidden="true"></i>\n    <i ng-if="!apiKey.isLoading" class="fa fa-eye" aria-hidden="true"></i>\n  </button>\n  <button ng-if="!apiKey.isPlaceholder" class="zapier-api-key-reset" ng-class="{\'zapier-api-key-reset-loading\': apiKey.isLoading, \'zapier-api-key-reset-locked\': !apiKey.isCurrentUser}" ng-disabled="apiKey.isLoading || !apiKey.isCurrentUser" title="{{!apiKey.isCurrentUser ? \'You can\\\'t reset api key of this user\'  : \'\'}}" ng-click="ctrl.resetZapierApiKey($event)">\n    <i class="fa fa-refresh" aria-hidden="true"></i>\n  </button>\n  <div class="zapier-api-key-error" ng-if="!apiKey.isLoading && apiKey.errorText" ng-bind="apiKey.errorText">Something went wrong</div>\n</div>\n<div class="zapier-api-key-notice" ng-if="!apiKey.isCurrentUser && apiKey.user">Note that this api key belongs to <a ng-href="/users/{{apiKey.user.id}}/edit" ng-bind="apiKey.user.name"></a></div>'}}).directive("clickOutside",["$document","$parse","$timeout",function($document,$parse,$timeout){return{restrict:"A",link:function($scope,elem,attr){$timeout(function(){var _hasTouch,classList,eventHandler,fn;classList=void 0!==attr.outsideIfNot?attr.outsideIfNot.split(/[ ,]+/):[],fn=void 0,eventHandler=function(e){var classNames,element,i,id,l,r;if(i=void 0,element=void 0,r=void 0,id=void 0,classNames=void 0,l=void 0,!angular.element(elem).hasClass("ng-hide")&&e&&e.target){for(element=e.target;element;){if(element===elem[0])return;if(id=element.id,classNames=element.className,l=classList.length,classNames&&void 0!==classNames.baseVal&&(classNames=classNames.baseVal),classNames||id)for(i=0;l>i;){if(r=new RegExp("\\b"+classList[i]+"\\b"),void 0!==id&&id===classList[i]||classNames&&r.test(classNames))return;i++}element=element.parentNode}$timeout(function(){(fn=$parse(attr.clickOutside))($scope,{event:e})})}},_hasTouch=function(){return"ontouchstart"in window||navigator.maxTouchPoints},_hasTouch()&&$document.on("touchstart",eventHandler),$document.on("click",eventHandler),$scope.$on("$destroy",function(){_hasTouch()&&$document.off("touchstart",eventHandler),$document.off("click",eventHandler)})})}}}]).directive("amountSelect",["$timeout",function($timeout){return{restrict:"A",scope:{options:"=",model:"=ngModel",onSelection:"=?"},link:function(scope,element){var _actionsClassNames,el,modelIndex;return el=element[0],modelIndex=scope.options.indexOf(scope.model),_actionsClassNames=function(){return 0===modelIndex?(angular.element(el.querySelector(".js-minus")).addClass("is-disable"),angular.element(el.querySelector(".js-plus")).removeClass("is-disable")):modelIndex===scope.options.length-1?(angular.element(el.querySelector(".js-plus")).addClass("is-disable"),angular.element(el.querySelector(".js-minus")).removeClass("is-disable")):(angular.element(el.querySelector(".js-minus")).removeClass("is-disable"),angular.element(el.querySelector(".js-plus")).removeClass("is-disable"))},$timeout(function(){return _actionsClassNames(),scope.$watch("model",function(){modelIndex!==scope.options.indexOf(scope.model)&&(modelIndex=scope.options.indexOf(scope.model)),_actionsClassNames(),scope.onSelection&&scope.onSelection()},!0),angular.element(element).on("click",function(event){var targetClassName;return targetClassName=event.target.className,-1!==targetClassName.indexOf("js-action")?(-1!==targetClassName.indexOf("js-minus")?modelIndex--:modelIndex++,scope.model=scope.options[modelIndex],scope.$apply()):void 0})})}}}]).directive("customSelect",["$timeout",function($timeout){return{restrict:"A",scope:{isOpen:"=",model:"=ngModel",onSelection:"=?"},link:function(scope,element){var _valueClassNames,el;return el=element[0],_valueClassNames=function(){return scope.isOpen?element.addClass("is-select-open"):element.removeClass("is-select-open")},scope.$watch("isOpen",function(){_valueClassNames()},!0),$timeout(function(){return _valueClassNames(),angular.element(element).on("click",function(event){var targetClassName;return targetClassName=event.target.className,-1!==targetClassName.indexOf("js-value")&&(scope.isOpen=!scope.isOpen),-1!==targetClassName.indexOf("js-option")&&(scope.model=JSON.parse(event.target.attributes.data.value),scope.isOpen=!1,scope.onSelection&&scope.onSelection()),scope.$apply()})})}}}]).directive("tip",["$timeout",function($timeout){return{restrict:"A",scope:{charLength:"=?",value:"="},link:function(scope,element){return $timeout(function(){return scope.charLength?scope.value.length>Number(scope.charLength)&&element.addClass("is-multiline"):scope.value.length>50&&element.addClass("is-multiline"),
element.html(scope.value)})}}}]).directive("customCollapse",["$timeout",function($timeout){return{restrict:"A",scope:{className:"@",isCollapsable:"@",isOpen:"@",toggleClass:"@"},link:function(scope,element){var _classNames,el;return el=element[0],_classNames=function(){return scope.isOpen===!0?element.addClass(scope.toggleClass):element.removeClass(scope.toggleClass)},scope.$watch("isOpen",function(){_classNames()},!0),$timeout(function(){return scope.isCollapsable="true"===scope.isCollapsable,scope.isOpen="true"===scope.isOpen,scope.isCollapsable?(_classNames(),angular.element(element).on("click",function(event){var targetClassName;return targetClassName=event.target.className,-1!==targetClassName.indexOf(scope.className)&&(scope.isOpen=!scope.isOpen),scope.$apply()})):void 0})}}}])}.call(this),function(){var debounce,debouncedTouchBody,linkFunction,touchBody,slice=[].slice;touchBody=function(){return $(document.body).trigger("click")},debounce=function(func,threshold,execAsap){var timeout;return timeout=null,function(){var args,delayed,obj;return args=1<=arguments.length?slice.call(arguments,0):[],obj=this,delayed=function(){return execAsap||func.apply(obj,args),timeout=null},timeout?clearTimeout(timeout):execAsap&&func.apply(obj,args),timeout=setTimeout(delayed,threshold||100)}},debouncedTouchBody=debounce(touchBody),linkFunction=function(scope,element,attrs){var input,inputModel,refresh,refreshRadioGroup;return input=element.find("input"),inputModel=input.attr("ng-model"),(0===element.find(".icon").length||0===element.find(".icon-to-fade").length)&&element.prepend("<span class='icon'></span><span class='icon-to-fade'></span>"),refreshRadioGroup=function(name){return $("[name='"+name+"']").each(function(){var wrapper;return wrapper=$(this).closest(".radio"),wrapper.removeClass("checked"),$(this).is(":checked")&&wrapper.addClass("checked"),$(this).is(":disabled")?wrapper.addClass("disabled"):void 0})},refresh=function(){var name;return element.removeClass("checked"),input.is(":checked")&&element.addClass("checked"),input.is(":disabled")&&element.addClass("disabled"),"radio"!==input.attr("type")||inputModel?void 0:(name=input.attr("name"),refreshRadioGroup(name))},refresh(),input.on("change",refresh),inputModel&&scope.$watch(inputModel,refresh),debouncedTouchBody()},angular.module("App.directives").directive("checkbox",function(){return{restrict:"C",link:linkFunction}}).directive("radio",function(){return{restrict:"C",link:linkFunction}})}.call(this),function(){angular.module("App.directives").directive("prizeArea",["$window","$sce",function($window,$sce){return{restrict:"EAC",scope:!0,template:"<div class='incentive-wrapper clearfix relative grey-bg incentive-layout-{{incentives[0].layout}}' ng-class=\"{'no-image': !imageSrc() || has_embedded_youtube(), 'full-image': !has_side_image(), center: !has_side_image()}\" ng-style=\"{'min-height': imageHeight()}\"><img ng-if='show_image_above_name() && has_single_image()' class='crisp incentive-banner' ng-src='{{imageSrc()}}' ng-style='{height: imageHeight()}' alt='{{incentives[0].name}}' ng-class=\"{top: incentives[0].description, center: !incentives[0].description && incentives[0].layout == 'SideImage'}\" imageonload='resize(0)'><div ng-if='show_image_above_name() && has_image_gallery()' class='prize-slider' images='{{imageGroup()}}' navigation-colour=\"{{incentives[0].navigation_colour || '#b4b4b4'}}\"></div><div ng-show=\"incentives[0].layout != 'OnlyImage'\" class='incentive-description' ng-class=\"{'center': !imageSrc() || !incentives[0].description, middle: !incentives[0].description}\"><h3 ng-if='show_name_text()'>{{ incentives[0].name }}</h3><img ng-if='!show_image_above_name() && has_single_image()' class='crisp incentive-banner' ng-src='{{imageSrc()}}' ng-style='{height: imageHeight()}' alt='{{incentives[0].name}}' ng-class='{top: incentives[0].description}' imageonload='resize(0)'><div ng-if='!show_image_above_name() && has_image_gallery()' class='prize-slider' images='{{imageGroup()}}' navigation-colour=\"{{incentives[0].navigation_colour || '#b4b4b4'}}\"></div><iframe ng-if='has_embedded_twitch()' id='twitchPrizePlayer' type='text/html' src='about:blank' frameborder='0' scrolling='no' ng-src='{{twitchUrl()}}'></iframe><div ng-if='has_embedded_youtube()' class='cover-video-container'><div class='cover-video youtube youtube-auto-init' id='youtubeVideoPrize' frameBorder='0'></div></div><div ng-if='has_embedded_vimeo()' class='cover-video-container'><div ng-init='ensureVimeoScript()' class='cover-video vimeo' id='vimeoVideoPrize'></div></div><div ng-if='has_embedded_wistia()' class='cover-video-container'><div class='cover-video wistia wistia-lazy-init' id='wistiaVideoPrize' frameBorder='0' ng-class=\"'wistia_embed wistia_async_{{incentives[0].wistia_video_id}}'\"></div></div><div ng-show='show_description_text()' class='user-fragment' ng-bind-html='descriptionText() | forceHTML' ng-class=\"{'no-bottom-margin': descriptionWithoutBottomMargin()}\"></div></div><div ng-if='isReward()'><div ng-include=\"'views/enter/reward.html'\"></div> </div></div>",link:function(scope){var imageCount,lastPageWidth,topContainer;topContainer=$(".popup-blocks-container"),lastPageWidth=0,scope.imageSrc=function(){return scope.campaign.editMode?scope.incentives[0].single_image:"SideImage"===scope.incentives[0].layout?scope.incentives[0].medium_url:scope.incentives[0].image_group?scope.incentives[0].image_group[0].medium_url?scope.incentives[0].image_group[0].medium_url:scope.incentives[0].image_group[0].original_url:scope.incentives[0].url},imageCount=function(){return scope.incentives[0].image_group?scope.incentives[0].image_group.length:scope.imageSrc()?1:0},scope.imageGroup=function(){return scope.incentives[0].image_group?scope.incentives[0].image_group:void 0},scope.has_embedded_player=function(){return scope.incentives[0].embedded_layout},scope.has_embedded_youtube=function(){return scope.incentives[0].youtube_video_id},scope.has_embedded_vimeo=function(){return scope.incentives[0].vimeo_video_id},scope.has_embedded_wistia=function(){return scope.incentives[0].wistia_video_id},scope.has_embedded_twitch=function(){return scope.incentives[0].twitch_embed},scope.twitchUrl=function(){return $sce.trustAsResourceUrl(scope.incentives[0].twitch_embed)},scope.has_side_image=function(){return"SideImage"===scope.incentives[0].layout},scope.has_single_image=function(){return!scope.incentives[0].embedded_layout&&1===imageCount()},scope.has_image_gallery=function(){return!scope.incentives[0].embedded_layout&&imageCount()>1},scope.show_image_above_name=function(){return"NameImageDesc"!==scope.incentives[0].layout},scope.show_name_text=function(){return"YouTubeOnly"!==scope.incentives[0].layout},scope.show_description_text=function(){return scope.descriptionText()&&"YouTubeOnly"!==scope.incentives[0].layout},scope.descriptionText=function(){var current,required;return scope.incentives[0].description?scope.incentives[0].description:scope.isReward()?scope.campaign.editMode?"Instructions will go here":(required=parseInt(scope.incentives[0].actions_required),current=scope.contestantActionTypes(),current>=required||scope.bestCouponCode()?null:required>1?scope.pl(scope.actionsStillNeededToUnlockReward(),"description_complete_some_singular","description_complete_some_plural",{reward_type:scope.rewardTypeDescription()}):scope.pl(scope.entry_methods.length,"description_complete_one_singular","description_complete_one_plural",{reward_type:scope.rewardTypeDescription()})):null},scope.descriptionWithoutBottomMargin=function(){var ref;return("NameImageDesc"===(ref=scope.incentives[0].layout)||"YouTube"===ref||"Twitch"===ref)&&scope.requiresInitialLogin()&&!scope.contestantState.contestant.id&&!scope.campaign.paused&&(!scope.showPromotionEnded()||scope.isTestMode())&&(!scope.showPromotionStartsIn()||scope.isTestMode())&&!scope.campaign.banned&&scope.contestantState.location_allowed&&scope.cookiesEnabled},scope.imageHeight=function(){var widgetWidth;return widgetWidth=Math.min($($window).width(),topContainer.width()),0===widgetWidth?widgetWidth=0===lastPageWidth?540:lastPageWidth:(lastPageWidth!==widgetWidth&&scope.resize(),lastPageWidth=widgetWidth),scope.incentives[0].medium_url||scope.incentives[0].single_image?"SideImage"===scope.incentives[0].layout?widgetWidth/540*175/scope.incentives[0].image_width*scope.incentives[0].image_height+"px":widgetWidth/scope.incentives[0].image_width*scope.incentives[0].image_height+"px":""}}}}]).directive("prizeSlider",["$timeout",function($timeout){return{restrict:"C",scope:{images:"@images",autoSlideInterval:"@autoSlideInterval",navigationColour:"@navigationColour"},template:"<nav class='prize-slider__nav'> <ul class='prize-slider__dots'> <li class='prize-slider__dot' ng-repeat='image in imageArray track by $index'> <a class='fa' ng-class=\"{'fa-circle':currentSlide==$index+1, 'fa-circle-o':currentSlide!=$index+1}\" ng-click='activateImage($index + 1)'></a> </li> </ul> </nav> <div class='prize-slider__slide-control prize-slider__left-slide' ng-mousedown='slideLeft()'><div class='fa fa-angle-left prize-slider__arrow prize-slider__left-arrow'></div></div> <div class='prize-slider__slide-control prize-slider__right-slide' ng-mousedown='slideRight()'><div class='fa fa-angle-right prize-slider__arrow prize-slider__right-arrow'></div></div> <div class='prize-slider__slideshow'><div class='prize-slider__content {{animate}} slide_{{$index + 1}}' ng-repeat='image in imageArray track by $index'> <div class='prize-slider__image'> <img ng-src='{{image.original_url}}'> </div> </div></div>",link:function(scope,element){var destroyed,hexToRgbA,hideSlide,isTouch,navigationColour,navigationColourHover,oldSlide,resetTimer,resizeElements,runTransition,setAnimate,showSlide,slideFocus,slideTimeout,slideTimer,sliderWidth,slidesInSlideshow,slidesTimeIntervalInMs,zCounter;slidesTimeIntervalInMs=scope.autoSlideInterval||1e4,zCounter=1,oldSlide=1,sliderWidth=540,slideTimer=null,slideFocus=!0,destroyed=!1,scope.currentSlide=1,scope.animate="animate",scope.imageArray=JSON.parse(scope.images),slidesInSlideshow=scope.imageArray.length,isTouch=!!("ontouchstart"in window)||window.navigator.msMaxTouchPoints>0,isTouch?element.addClass("prize-slider__fake-hover"):element.addClass("prize-slider__real-hover"),element.on("$destroy",function(){return destroyed=!0,$timeout.cancel(slideTimer)}),hexToRgbA=function(hex,alpha){var c;if(null==alpha&&(alpha=1),/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex))return c=hex.substring(1).split(""),3===c.length&&(c=[c[0],c[0],c[1],c[1],c[2],c[2]]),c="0x"+c.join(""),"rgba("+[c>>16&255,c>>8&255,255&c].join(",")+","+alpha+")";throw new Error("Bad Hex")},navigationColour=hexToRgbA(scope.navigationColour,.6),navigationColourHover=hexToRgbA(scope.navigationColour,1),element.find(".prize-slider__slide-control").css({color:navigationColour}),element.find(".prize-slider__slide-control").hover(function(){return $(this).css("color",navigationColourHover)},function(){return $(this).css("color",navigationColour)}),$timeout(function(){return element.find(".prize-slider__dot > a").css("color",navigationColour),element.find(".prize-slider__dot > a").hover(function(){return $(this).css("color",navigationColourHover)},function(){return $(this).css("color",navigationColour)})},0),$timeout(function(){var slide_1;slide_1=element.find(".slide_1"),slide_1.css("z-index",0),slide_1.show(),slide_1.addClass("slide-active")},0),$(window).on("blur focus",function(e){var prevType;if(prevType=$(this).data("prevType"),prevType!==e.type)switch(e.type){case"blur":slideFocus=!1;break;case"focus":slideFocus=!0}return $(this).data("prevType",e.type)}),resizeElements=function(){var height,width;if(!destroyed)return width=element.width(),width!==sliderWidth&&(sliderWidth=width,height=Math.round(3*width/4),element.height(height),element.find(".prize-slider__image").css("width",width),element.find(".prize-slider__image").css("height",height)),$timeout(resizeElements,2e3)},showSlide=function(i){var img,prev_img;if(img=element.find(".slide_"+i),prev_img=void 0,img.hasClass("prize-slider__animating")){if(element.find(".prize-slider__content.clone").size()>10)return;prev_img=img,img=prev_img.clone(),img.off("transitionend webkitTransitionEnd oTransitionEnd"),prev_img.addClass("clone").removeClass("slide_"+i),img.removeClass("prize-slider__animating"),img.insertAfter(prev_img)}img.css("z-index",zCounter),zCounter++,element.find(".prize-slider__content").addClass("hide-me"),img.removeClass("ng-leave ng-leave-active ng-enter-active hide-me").addClass("prize-slider__animating ng-enter slide-active").show(),element.find(".slide-active.hide-me").each(function(){return hideSlide($(this))}),$timeout(function(){img.addClass("ng-enter-active"),img.one("transitionend webkitTransitionEnd oTransitionEnd",function(){img.hasClass("ng-enter")&&(img.removeClass("ng-enter ng-enter-active prize-slider__animating"),img.hasClass("hide-me")?hideSlide(img):img.hasClass("clone")&&$timeout(function(){return img.remove()},200))})},50)},hideSlide=function(img){img.hasClass("prize-slider__animating")||(img.removeClass("ng-enter ng-enter-active ng-leave-active slide-active").addClass("prize-slider__animating ng-leave"),$timeout(function(){img.addClass("ng-leave-active end-once"),img.one("transitionend webkitTransitionEnd oTransitionEnd",function(){img.hasClass("end-once")&&(img.removeClass("end-once"),$timeout(function(){img.removeClass("ng-leave ng-leave-active prize-slider__animating hide-me"),img.hide(),img.hasClass("clone")&&img.remove()},200))})},60))},runTransition=function(){showSlide(scope.currentSlide),oldSlide=scope.currentSlide},setAnimate=function(newAnimate){newAnimate!==scope.animate&&(element.find(".prize-slider__content").removeClass(scope.animate).addClass(newAnimate),scope.animate=newAnimate)},slideTimeout=function(){destroyed||(slideFocus&&(setAnimate("animate"),scope.currentSlide=scope.currentSlide%slidesInSlideshow+1,runTransition()),slideTimer=$timeout(slideTimeout,slidesTimeIntervalInMs))},resetTimer=function(){$timeout.cancel(slideTimer),slideTimer=$timeout(slideTimeout,slidesTimeIntervalInMs)},scope.slideLeft=function(){setAnimate("lanimate"),scope.currentSlide=(scope.currentSlide+slidesInSlideshow-2)%slidesInSlideshow+1,runTransition(),resetTimer(),document.getSelection().removeAllRanges()},scope.slideRight=function(){setAnimate("ranimate"),scope.currentSlide=scope.currentSlide%slidesInSlideshow+1,runTransition(),resetTimer(),document.getSelection().removeAllRanges()},scope.activateImage=function(index){index!==scope.currentSlide&&(setAnimate(index>=scope.currentSlide?"ranimate":"lanimate"),scope.currentSlide=index,runTransition(),resetTimer())},slideTimer=$timeout(slideTimeout,slidesTimeIntervalInMs),$timeout(resizeElements,0)}}}])}.call(this),function(){angular.entriesControllerPostEntry=function($scope,$filter){var allEntries,capitalize,confirmationImproveChanges,currentEntries,currentEntriesList,currentRedemptionsList,entryCount,entryMethodActionText,initPostEntryPreview,pl,prospectiveEntriesList,remainingEntries,splitEntriesOn,t;return t=$scope.t,pl=$scope.pl,$scope.$watch("campaign.default_confirmation_email",function(newValue,oldValue){return $scope.campaign?($scope.campaign.default_confirmation_email&&($scope.campaign.custom_confirmation_email=!1),$scope.campaign.suppress_email=!$scope.campaign.default_confirmation_email&&!$scope.campaign.custom_confirmation_email):void 0}),$scope.$watch("campaign.custom_confirmation_email",function(newValue,oldValue){return $scope.campaign?($scope.campaign.custom_confirmation_email&&($scope.campaign.default_confirmation_email=!1),$scope.campaign.suppress_email=!$scope.campaign.default_confirmation_email&&!$scope.campaign.custom_confirmation_email):void 0}),splitEntriesOn=function(){var entriesCount;return entriesCount=$scope.preview.allEntries.length,2>=entriesCount?1:5>=entriesCount?2:3},allEntries=function(){return($scope.entry_methods||[]).filter(function(entry_method){return"true"!==entry_method._destroy})},currentEntries=function(){return $scope.preview.allEntries.slice(0,+(splitEntriesOn()-1)+1||9e9)},remainingEntries=function(){return $scope.preview.allEntries.slice(splitEntriesOn())},currentEntriesList=function(){return $scope.preview.currentEntries.length>0?$scope.preview.currentEntries.map(function(entry_method){return"<li>"+entryMethodActionText(entry_method)+" - "+entryCount(entry_method)+"</li>"}).join(""):void 0},confirmationImproveChanges=function(){var current_entries_count,remaining_entries_count;return remaining_entries_count=$scope.preview.remainingEntries.reduce(function(total,entry_method){return total+parseInt(entry_method.worth)},0),current_entries_count=$scope.preview.currentEntries.reduce(function(total,entry_method){return total+parseInt(entry_method.worth)},0),remaining_entries_count>0?pl($scope.preview.remainingEntries.length,"confirmation_improve_chances_singular","confirmation_improve_chances_plural",{percentage:Math.round(1*remaining_entries_count/current_entries_count*100)}):""},prospectiveEntriesList=function(){var entries;return entries=$scope.preview.remainingEntries,entries.length>0?entries.map(function(entry_method){return"<li>"+entryMethodActionText(entry_method)+" - "+pl(entry_method.worth,"entry_worth_singular","entry_worth_plural")+"</li>"}).join(""):""},currentRedemptionsList=function(){return $scope.preview.currentEntries.map(function(entry_method){return"<li>"+entryMethodActionText(entry_method)+"</li>"}).join("")},$scope.initPostEntryPreview=initPostEntryPreview=function(){return $scope.preview={allEntries:allEntries()},$scope.preview.currentEntries=currentEntries(),$scope.preview.remainingEntries=remainingEntries(),$scope.isReward()?$scope.preview.currentRedemptionsList=currentRedemptionsList():($scope.preview.currentEntriesList=currentEntriesList(),$scope.preview.prospectiveEntriesList=prospectiveEntriesList(),$scope.preview.confirmationImproveChanges=confirmationImproveChanges()),$scope.preview.shareEntryPresent=$scope.entry_methods&&$scope.entry_methods.filter(function(entry_method){return"share_action"===entry_method.entry_type&&"true"!==entry_method._destroy}).length>0},$scope.refreshPostEntryPreview=function(){return $scope.entry_methods=$("form.campaign").serializeJSON().campaign.entry_methods_attributes,initPostEntryPreview()},capitalize=function(string){return string.charAt(0).toUpperCase()+string.slice(1)},entryMethodActionText=function(entry_method){var media,text;return text=function(){switch(entry_method.entry_type){case"facebook_like":return t("action_facebook_like",{page_name:entry_method.config2});case"facebook_visit":return t("action_facebook_visit",{page_name:entry_method.config2});case"facebook_check_in":return t("action_facebook_check_in",{location_name:entry_method.config2});case"facebook_view_post":return t("action_facebook_view_post",{media:entry_method.config3.capitalize});case"facebook_share":return t("action_facebook_share");case"twitter_follow":return t("action_twitter_follow",{username:entry_method.config1});case"twitter_retweet":return t("action_twitter_retweet",{username:$filter("pathPart")(entry_method.config1,0,!1)});case"twitter_tweet":return t("action_twitter_tweet");case"soundcloud_follow":return t("action_soundcloud_follow",{username:$filter("pathPart")(entry_method.config1)});case"soundcloud_listen":return t("action_soundcloud_listen",{song_name:entry_method.config4});case"soundcloud_like":return t("action_soundcloud_like",{song_name:entry_method.config4});case"soundcloud_repost":return t("action_soundcloud_repost",{song_name:entry_method.config4});case"spotify_follow":return t("action_spotify_follow",{itemname:entry_method.config2});case"spotify_save":return t("action_spotify_save",{itemname:entry_method.config2});case"pinterest_follow":return t("action_pinterest_follow",{username:entry_method.config1});case"pinterest_visit":return t("action_pinterest_visit",{username:entry_method.config1});case"pinterest_pin":return t("action_pinterest_pin");case"instagram_follow":return t("action_instagram_follow",{username:entry_method.config3});case"instagram_like":return media="video"===entry_method.config1?"Video":"Photo",t("action_instagram_like",{media:media});case"instagram_visit_profile":return t("action_instagram_visit_profile",{username:entry_method.config1});case"instagram_view_post":return media="video"===entry_method.config3?"Video":"Photo",t("action_instagram_view_post",{media:media});case"googleplus_plusone":return t("action_googleplus_plusone",{page_name:entry_method.config2});case"googleplus_visit":return t("action_googleplus_visit",{page_name:entry_method.config2});case"twitchtv_follow":return t("action_twitchtv_follow",{username:entry_method.config1});case"custom_action":return entry_method.config1.replace(/.*\/\//,"");case"tumblr_follow":return t("action_tumblr_follow",{domain:entry_method.config2});case"tumblr_like":return t("action_tumblr_like");case"tumblr_reblog":return t("action_tumblr_reblog");case"eventbrite_attend_event":return t("action_eventbrite_attend_event",{event:entry_method.config2});case"eventbrite_attend_venue":return t("action_eventbrite_attend_venue",{venue:entry_method.config2});case"steam_play_game":return t("action_steam_play_game",{game:entry_method.config2});case"steam_join_group":return t("action_steam_join_group",{group:entry_method.config2});default:return"question"===entry_method.template?entry_method.config1+": "+entry_method.config4:""+entry_method.config1}}(),capitalize(text)},entryCount=function(entry_method){var entries_for_this_type,entries_worth;return parseInt(entry_method.interval_seconds)>0||"share_action"===entry_method.entry_type?(entries_for_this_type=2,entries_worth=entry_method.worth*entries_for_this_type,pl(entries_worth,"entry_worth_singular","entry_worth_plural")+t("confirmation_for_times_entering",{count:entries_for_this_type})):pl(entry_method.worth,"entry_worth_singular","entry_worth_plural")}}}.call(this),function(){angular.module("App.filters",[]).filter("stripUrlStart",function(){return function(input){return input.replace(/https?:\/\/(www\.)?/,"")}}).filter("cut",function(){return function(input,max){return input.length<=max?input:input.substr(0,max).replace(/[. ]$/,"")+" ..."}}).filter("trueFalse",function(){return function(input){return"1"===input?"true":"false"}}).filter("prettyDate",function(){return function(date){var day,monthIndex,monthNames,year;return date=new Date(date),day=date.getDate(),monthIndex=date.getMonth(),monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],year=date.getFullYear(),day+" "+monthNames[monthIndex]+", "+year}}).filter("cloudfront",function(){return function(input,domain){return/amazonaws/.test(input)?input.replace(/https?:\/\/[^\/]+/i,"https://"+domain):input}}).filter("prettyNumber",function(){return function(input){return input?(input+"").replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"):"0"}}).filter("tProvider",["translationService",function(translationService){return function(input){return"email"===input?translationService.translate(input):input&&input.toCapitalStart?input.toCapitalStart():input}}]).filter("onlyOnDesktop",function(){return function(input){return angular.browser.mobileDevice?null:input}}).filter("fixedColour",function(){return function(input){var result;return input?(result=(input+"").strip().replace(/#+/,"#"),result.match(/^([a-f0-9]{3}|[a-f0-9]{6})$/i)?"#"+result:result):void 0}}).filter("pathPart",function(){return function(input,index,replaceHyphens){var s;return null==index&&(index=0),null==replaceHyphens&&(replaceHyphens=!0),input?(s=input.replace(/[\?#&].*/,"").match(/^(?:https?:\/\/)?[^\/]+\/([^\/]+)\/?([^\/]+)?\/?([^\/]+)?\/?/)[index+1],replaceHyphens?s.replace(/-/g," "):s):""}}).filter("visibleTextColor",function(){return function(input){var cleaned,g;return input&&input.match(/^#?[0-9a-f]{6}$/i)&&(cleaned=input.replace(/#/,""),g=parseInt(cleaned[2]+cleaned[3],16),g>224)?"#333":void 0}}).filter("myTz",function(){return function(dateTime,myOffsetSeconds){return new Date(dateTime.getTime()- -1e3*myOffsetSeconds)}}).filter("shortPlanName",function(){return function(input){return input.replace(/\s(Competitions|Rewards|Galleries|Captures|Package)$/,"").replace(/^Free /i,"")}}).filter("hideCreditCardNumbers",function(){return function(input){return input.replace(/.*(\d{4})$/,"\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 $1")}}).filter("planClassNameSuffix",function(){return function(input){var cleaned;return cleaned=input.toLowerCase().replace(/^Free /i,"").split(" "),cleaned[1]+"-"+cleaned[0]}}).filter("providerIcon",function(){return function(input){switch(input){case"twitchtv":return"twitch";case"email":return"envelope-o";case"steam":return"steam-square";default:return input}}}).filter("validClassName",function(){return function(input){return input.toLowerCase().replace(new RegExp(" ","g"),"-")}}).filter("capitalStart",function(){return function(input){return input&&input.toCapitalStart?input.toCapitalStart():input}}).filter("firstPart",function(){return function(input){return(input+"").split(/[^a-z0-9]/i)[0]}}).filter("firstCode",function(){return function(input){return(input+"").strip().split(/[\n ,]/i)[0]}}).filter("simpleUrl",function(){return function(input){return input.replace(/https?:\/\//,"").replace(/[\?#&].*/,"")}}).filter("forceHTML",function(){return function(input){var s;return s=input?input:"",s.match(/<[^<]+>/)?s:s.replace(/\n/g,"<br/> ")}}).filter("maintainNewlines",function(){return function(input){return(input||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\r?\n/g,"<br>")}}).filter("rgb",function(){return function(input){var match;return match=(input+"").match(/([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/i),match?parseInt(match[1],16)+","+parseInt(match[2],16)+","+parseInt(match[3],16):"0,0,0"}}).filter("encodeUrl",function(){return function(input){return encodeURIComponent(input)}}).filter("shortCycle",function(){return function(input){return new String(input).toLowerCase().replace(/ly/,"")}}).filter("appReferralLink",function(){return function(path,baseUrl,id){var p;return p=(path||"/").replace(/^(https?:\/\/)?(gleam.io)?/,"").replace(/^([^\/])/,"/$1"),baseUrl+p+"?via="+id}}).filter("permalink",function(){return function(input){return input.toPermalink()}}).filter("hashtags",function(){return function(input){return input.replace(/^|,/g," #").strip()}}).filter("removeProtocol",function(){return function(input){return input?input.replace(/https?:\/\//,"//"):void 0}}).filter("facebookCDN",function(){return function(input){return input?input.replace(/^https?:\/\/sphotos[^\/]+/,"https://fbcdn-sphotos-b-a.akamaihd.net"):void 0}}).filter("i18nr",function(){return function(input,key1,value1,key2,value2){return key1?key2?input.replace(new RegExp("%\\{"+key1+"\\}","gi"),value1).replace(new RegExp("%\\{"+key2+"\\}","gi"),value2):input.replace(new RegExp("%\\{"+key1+"\\}","gi"),value1):input}}).filter("commaSplitHashtags",function(){return function(input){var j,len,ref,strs,t;if(strs=[],input){for(ref=input.split(/\s*,\s*/),j=0,len=ref.length;len>j;j++)t=ref[j],t&&strs.push("#"+t.replace(/^#/,""));return strs.join(" ")}return input}}).filter("forceAbsoluteLink",function(){return function(input){return input?input.replace(/^(?!h?t?t?p?s?:?\/\/)/,"http://"):void 0}}).filter("numberShorthand",function(){return function(input,fractionSize){var abs,i,isNegative,key,labels,reduced,rounder;if(null===input)return null;if(0===input)return"0";for((!fractionSize||0>fractionSize)&&(fractionSize=1),abs=Math.abs(input),rounder=Math.pow(10,fractionSize),isNegative=0>input,key="",labels=[{key:"Q",value:Math.pow(10,15)},{key:"t",value:Math.pow(10,12)},{key:"b",value:Math.pow(10,9)},{key:"m",value:Math.pow(10,6)},{key:"k",value:1e3}],i=0;i<labels.length;){if(reduced=abs/labels[i].value,reduced=Math.round(reduced*rounder)/rounder,reduced>=1){abs=reduced,key=labels[i].key;break}i++}return(isNegative?"-":"")+abs+key}}).filter("kShorten",function(){return function(input,character){var s;return input?(s=String(input),s.match(/^\d+$/)?s.match(/^\d[1-9]\d\d$/)?s.replace(/^(\d+)(\d)\d\d$/,"$1.$2"+character):s.replace(/^(\d+)\d\d\d$/,"$1"+character):input):input}}).filter("commaSplit",function(){return function(input){return input?input.split(/, */):[]}}).filter("wrapPattern",function(){return function(input){return"/"!==input[0]&&(input="/"+input),"/"!==input[input.length-1]&&(input+="/"),input}})}.call(this),function(){!function(root,factory){return"function"==typeof define&&define.amd?define(function(){return factory()}):"object"==typeof exports?module.exports=factory():root.ifvisible=factory()}(this,function(){var addEvent,customEvent,doc,fireEvent,hidden,idleStartedTime,idleTime,ie,ifvisible,init,initialized,status,trackIdleStatus,visibilityChange;return ifvisible={},doc=document,initialized=!1,status="active",idleTime=6e4,idleStartedTime=!1,customEvent=function(){var S4,addCustomEvent,cgid,fireCustomEvent,guid,listeners,removeCustomEvent;return S4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},guid=function(){return S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4()},listeners={},cgid="__ceGUID",addCustomEvent=function(obj,event,callback){return obj[cgid]=void 0,obj[cgid]||(obj[cgid]="ifvisible.object.event.identifier"),listeners[obj[cgid]]||(listeners[obj[cgid]]={}),listeners[obj[cgid]][event]||(listeners[obj[cgid]][event]=[]),listeners[obj[cgid]][event].push(callback)},fireCustomEvent=function(obj,event,memo){var ev,j,len,ref,results;if(obj[cgid]&&listeners[obj[cgid]]&&listeners[obj[cgid]][event]){for(ref=listeners[obj[cgid]][event],results=[],j=0,len=ref.length;len>j;j++)ev=ref[j],results.push(ev(memo||{}));return results}},removeCustomEvent=function(obj,event,callback){var cl,i,j,len,ref;if(callback){if(obj[cgid]&&listeners[obj[cgid]]&&listeners[obj[cgid]][event])for(ref=listeners[obj[cgid]][event],i=j=0,len=ref.length;len>j;i=++j)if(cl=ref[i],cl===callback)return listeners[obj[cgid]][event].splice(i,1),cl}else if(obj[cgid]&&listeners[obj[cgid]]&&listeners[obj[cgid]][event])return delete listeners[obj[cgid]][event]},{add:addCustomEvent,remove:removeCustomEvent,fire:fireCustomEvent}}(),addEvent=function(){var setListener;return setListener=!1,function(el,ev,fn){return setListener||(setListener=el.addEventListener?function(el,ev,fn){return el.addEventListener(ev,fn,!1)}:el.attachEvent?function(el,ev,fn){return el.attachEvent("on"+ev,fn,!1)}:function(el,ev,fn){return el["on"+ev]=fn}),setListener(el,ev,fn)}}(),fireEvent=function(element,event){var evt;return doc.createEventObject?element.fireEvent("on"+event,evt):(evt=doc.createEvent("HTMLEvents"),evt.initEvent(event,!0,!0),!element.dispatchEvent(evt))},ie=function(){var all,check,div,undef,v;for(undef=void 0,v=3,div=doc.createElement("div"),all=div.getElementsByTagName("i"),check=function(){return div.innerHTML="<!--[if gt IE "+ ++v+"]><i></i><![endif]-->",all[0]};check(););return v>4?v:undef}(),hidden=!1,visibilityChange=void 0,"undefined"!=typeof doc.hidden?(hidden="hidden",visibilityChange="visibilitychange"):"undefined"!=typeof doc.mozHidden?(hidden="mozHidden",visibilityChange="mozvisibilitychange"):"undefined"!=typeof doc.msHidden?(hidden="msHidden",visibilityChange="msvisibilitychange"):"undefined"!=typeof doc.webkitHidden&&(hidden="webkitHidden",visibilityChange="webkitvisibilitychange"),trackIdleStatus=function(){var timer,wakeUp;return timer=!1,wakeUp=function(){return clearTimeout(timer),"active"!==status&&ifvisible.wakeup(),idleStartedTime=+new Date,timer=setTimeout(function(){return"active"===status?ifvisible.idle():void 0},idleTime)},wakeUp(),addEvent(doc,"mousemove",wakeUp),addEvent(doc,"keyup",wakeUp),addEvent(doc,"touchstart",wakeUp),addEvent(window,"scroll",wakeUp),ifvisible.focus(wakeUp),ifvisible.wakeup(wakeUp)},init=function(){var blur;return initialized?!0:(hidden===!1?(blur="blur",9>ie&&(blur="focusout"),addEvent(window,blur,function(){return ifvisible.blur()}),addEvent(window,"focus",function(){return ifvisible.focus()})):addEvent(doc,visibilityChange,function(){return doc[hidden]?ifvisible.blur():ifvisible.focus()},!1),initialized=!0,trackIdleStatus())},ifvisible={setIdleDuration:function(seconds){return idleTime=1e3*seconds},getIdleDuration:function(){return idleTime},getIdleInfo:function(){var now,res;return now=+new Date,res={},"idle"===status?(res.isIdle=!0,res.idleFor=now-idleStartedTime,res.timeLeft=0,res.timeLeftPer=100):(res.isIdle=!1,res.idleFor=now-idleStartedTime,res.timeLeft=idleStartedTime+idleTime-now,res.timeLeftPer=(100-100*res.timeLeft/idleTime).toFixed(2)),
res},focus:function(callback){return"function"==typeof callback?this.on("focus",callback):(status="active",customEvent.fire(this,"focus"),customEvent.fire(this,"wakeup"),customEvent.fire(this,"statusChanged",{status:status})),this},blur:function(callback){return"function"==typeof callback?this.on("blur",callback):(status="hidden",customEvent.fire(this,"blur"),customEvent.fire(this,"idle"),customEvent.fire(this,"statusChanged",{status:status})),this},idle:function(callback){return"function"==typeof callback?this.on("idle",callback):(status="idle",customEvent.fire(this,"idle"),customEvent.fire(this,"statusChanged",{status:status})),this},wakeup:function(callback){return"function"==typeof callback?this.on("wakeup",callback):(status="active",customEvent.fire(this,"wakeup"),customEvent.fire(this,"statusChanged",{status:status})),this},on:function(name,callback){return init(),customEvent.add(this,name,callback),this},off:function(name,callback){return init(),customEvent.remove(this,name,callback),this},onEvery:function(seconds,callback){var paused,t;return init(),paused=!1,callback&&(t=setInterval(function(){return"active"===status&&paused===!1?callback():void 0},1e3*seconds)),{stop:function(){return clearInterval(t)},pause:function(){return paused=!0},resume:function(){return paused=!1},code:t,callback:callback}},now:function(check){return init(),status===(check||"active")}}})}.call(this),/*! ngclipboard - v1.1.1 - 2016-02-26
* https://github.com/sachinchoolur/ngclipboard
* Copyright (c) 2016 Sachin; Licensed MIT */
function(){"use strict";var angular,Clipboard,MODULE_NAME="ngclipboard";"object"==typeof module&&module.exports?(angular=require("angular"),Clipboard=require("clipboard"),module.exports=MODULE_NAME):(angular=window.angular,Clipboard=window.Clipboard),angular.module(MODULE_NAME,[]).directive("ngclipboard",function(){return{restrict:"A",scope:{ngclipboardSuccess:"&",ngclipboardError:"&"},link:function(scope,element){var clipboard=new Clipboard(element[0]);clipboard.on("success",function(e){scope.$apply(function(){scope.ngclipboardSuccess({e:e})})}),clipboard.on("error",function(e){scope.$apply(function(){scope.ngclipboardError({e:e})})})}}})}(),/*! angularjs-slider - v6.2.3 - 
 (c) Rafal Zajac <rzajac@gmail.com>, Valentin Hervieu <valentin@hervieu.me>, Jussi Saarivirta <jusasi@gmail.com>, Angelin Sirbu <angelin.sirbu@gmail.com> - 
 https://github.com/angular-slider/angularjs-slider - 
 2017-07-08 */
function(root,factory){"use strict";if("function"==typeof define&&define.amd)define(["angular"],factory);else if("object"==typeof module&&module.exports){var angularObj=angular||require("angular");angularObj&&angularObj.module||"undefined"==typeof angular||(angularObj=angular),module.exports=factory(angularObj)}else factory(root.angular)}(this,function(angular){"use strict";var module=angular.module("rzModule",[]).factory("RzSliderOptions",function(){var defaultOptions={floor:0,ceil:null,step:1,precision:0,minRange:null,maxRange:null,pushRange:!1,minLimit:null,maxLimit:null,id:null,translate:null,getLegend:null,stepsArray:null,bindIndexForStepsArray:!1,draggableRange:!1,draggableRangeOnly:!1,showSelectionBar:!1,showSelectionBarEnd:!1,showSelectionBarFromValue:null,hidePointerLabels:!1,hideLimitLabels:!1,autoHideLimitLabels:!0,readOnly:!1,disabled:!1,interval:350,showTicks:!1,showTicksValues:!1,ticksArray:null,ticksTooltip:null,ticksValuesTooltip:null,vertical:!1,getSelectionBarColor:null,getTickColor:null,getPointerColor:null,keyboardSupport:!0,scale:1,enforceStep:!0,enforceRange:!1,noSwitching:!1,onlyBindHandles:!1,onStart:null,onChange:null,onEnd:null,rightToLeft:!1,boundPointerLabels:!0,mergeRangeLabelsIfSame:!1,customTemplateScope:null,logScale:!1,customValueToPosition:null,customPositionToValue:null,selectionBarGradient:null,ariaLabel:null,ariaLabelledBy:null,ariaLabelHigh:null,ariaLabelledByHigh:null},globalOptions={},factory={};return factory.options=function(value){angular.extend(globalOptions,value)},factory.getOptions=function(options){return angular.extend({},defaultOptions,globalOptions,options)},factory}).factory("rzThrottle",["$timeout",function($timeout){return function(func,wait,options){var context,args,result,getTime=Date.now||function(){return(new Date).getTime()},timeout=null,previous=0;options=options||{};var later=function(){previous=getTime(),timeout=null,result=func.apply(context,args),context=args=null};return function(){var now=getTime(),remaining=wait-(now-previous);return context=this,args=arguments,0>=remaining?($timeout.cancel(timeout),timeout=null,previous=now,result=func.apply(context,args),context=args=null):timeout||options.trailing===!1||(timeout=$timeout(later,remaining)),result}}}]).factory("RzSlider",["$timeout","$document","$window","$compile","RzSliderOptions","rzThrottle",function($timeout,$document,$window,$compile,RzSliderOptions,rzThrottle){var Slider=function(scope,sliderElem){this.scope=scope,this.lowValue=0,this.highValue=0,this.sliderElem=sliderElem,this.range=void 0!==this.scope.rzSliderModel&&void 0!==this.scope.rzSliderHigh,this.dragging={active:!1,value:0,difference:0,position:0,lowLimit:0,highLimit:0},this.positionProperty="left",this.dimensionProperty="width",this.handleHalfDim=0,this.maxPos=0,this.precision=0,this.step=1,this.tracking="",this.minValue=0,this.maxValue=0,this.valueRange=0,this.intermediateTicks=!1,this.initHasRun=!1,this.firstKeyDown=!1,this.internalChange=!1,this.cmbLabelShown=!1,this.currentFocusElement=null,this.fullBar=null,this.selBar=null,this.minH=null,this.maxH=null,this.flrLab=null,this.ceilLab=null,this.minLab=null,this.maxLab=null,this.cmbLab=null,this.ticks=null,this.init()};return Slider.prototype={init:function(){var thrLow,thrHigh,self=this,calcDimFn=function(){self.calcViewDimensions()};this.applyOptions(),this.syncLowValue(),this.range&&this.syncHighValue(),this.initElemHandles(),this.manageElementsStyle(),this.setDisabledState(),this.calcViewDimensions(),this.setMinAndMax(),this.addAccessibility(),this.updateCeilLab(),this.updateFloorLab(),this.initHandles(),this.manageEventsBindings(),this.scope.$on("reCalcViewDimensions",calcDimFn),angular.element($window).on("resize",calcDimFn),this.initHasRun=!0,thrLow=rzThrottle(function(){self.onLowHandleChange()},self.options.interval),thrHigh=rzThrottle(function(){self.onHighHandleChange()},self.options.interval),this.scope.$on("rzSliderForceRender",function(){self.resetLabelsValue(),thrLow(),self.range&&thrHigh(),self.resetSlider()}),this.scope.$watch("rzSliderOptions()",function(newValue,oldValue){newValue!==oldValue&&(self.applyOptions(),self.syncLowValue(),self.range&&self.syncHighValue(),self.resetSlider())},!0),this.scope.$watch("rzSliderModel",function(newValue,oldValue){self.internalChange||newValue!==oldValue&&thrLow()}),this.scope.$watch("rzSliderHigh",function(newValue,oldValue){self.internalChange||newValue!==oldValue&&(null!=newValue&&thrHigh(),(self.range&&null==newValue||!self.range&&null!=newValue)&&(self.applyOptions(),self.resetSlider()))}),this.scope.$on("$destroy",function(){self.unbindEvents(),angular.element($window).off("resize",calcDimFn),self.currentFocusElement=null})},findStepIndex:function(modelValue){for(var index=0,i=0;i<this.options.stepsArray.length;i++){var step=this.options.stepsArray[i];if(step===modelValue){index=i;break}if(angular.isDate(step)){if(step.getTime()===modelValue.getTime()){index=i;break}}else if(angular.isObject(step)&&(angular.isDate(step.value)&&step.value.getTime()===modelValue.getTime()||step.value===modelValue)){index=i;break}}return index},syncLowValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.lowValue=this.scope.rzSliderModel:this.lowValue=this.findStepIndex(this.scope.rzSliderModel):this.lowValue=this.scope.rzSliderModel},syncHighValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.highValue=this.scope.rzSliderHigh:this.highValue=this.findStepIndex(this.scope.rzSliderHigh):this.highValue=this.scope.rzSliderHigh},getStepValue:function(sliderValue){var step=this.options.stepsArray[sliderValue];return angular.isDate(step)?step:angular.isObject(step)?step.value:step},applyLowValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.scope.rzSliderModel=this.lowValue:this.scope.rzSliderModel=this.getStepValue(this.lowValue):this.scope.rzSliderModel=this.lowValue},applyHighValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.scope.rzSliderHigh=this.highValue:this.scope.rzSliderHigh=this.getStepValue(this.highValue):this.scope.rzSliderHigh=this.highValue},onLowHandleChange:function(){this.syncLowValue(),this.range&&this.syncHighValue(),this.setMinAndMax(),this.updateLowHandle(this.valueToPosition(this.lowValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCmbLabel()},onHighHandleChange:function(){this.syncLowValue(),this.syncHighValue(),this.setMinAndMax(),this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateCmbLabel(),this.updateAriaAttributes()},applyOptions:function(){var sliderOptions;sliderOptions=this.scope.rzSliderOptions?this.scope.rzSliderOptions():{},this.options=RzSliderOptions.getOptions(sliderOptions),this.options.step<=0&&(this.options.step=1),this.range=void 0!==this.scope.rzSliderModel&&void 0!==this.scope.rzSliderHigh,this.options.draggableRange=this.range&&this.options.draggableRange,this.options.draggableRangeOnly=this.range&&this.options.draggableRangeOnly,this.options.draggableRangeOnly&&(this.options.draggableRange=!0),this.options.showTicks=this.options.showTicks||this.options.showTicksValues||!!this.options.ticksArray,this.scope.showTicks=this.options.showTicks,(angular.isNumber(this.options.showTicks)||this.options.ticksArray)&&(this.intermediateTicks=!0),this.options.showSelectionBar=this.options.showSelectionBar||this.options.showSelectionBarEnd||null!==this.options.showSelectionBarFromValue,this.options.stepsArray?this.parseStepsArray():(this.options.translate?this.customTrFn=this.options.translate:this.customTrFn=function(value){return String(value)},this.getLegend=this.options.getLegend),this.options.vertical&&(this.positionProperty="bottom",this.dimensionProperty="height"),this.options.customTemplateScope&&(this.scope.custom=this.options.customTemplateScope)},parseStepsArray:function(){this.options.floor=0,this.options.ceil=this.options.stepsArray.length-1,this.options.step=1,this.options.translate?this.customTrFn=this.options.translate:this.customTrFn=function(modelValue){return this.options.bindIndexForStepsArray?this.getStepValue(modelValue):modelValue},this.getLegend=function(index){var step=this.options.stepsArray[index];return angular.isObject(step)?step.legend:null}},resetSlider:function(){this.manageElementsStyle(),this.addAccessibility(),this.setMinAndMax(),this.updateCeilLab(),this.updateFloorLab(),this.unbindEvents(),this.manageEventsBindings(),this.setDisabledState(),this.calcViewDimensions(),this.refocusPointerIfNeeded()},refocusPointerIfNeeded:function(){this.currentFocusElement&&(this.onPointerFocus(this.currentFocusElement.pointer,this.currentFocusElement.ref),this.focusElement(this.currentFocusElement.pointer))},initElemHandles:function(){angular.forEach(this.sliderElem.children(),function(elem,index){var jElem=angular.element(elem);switch(index){case 0:this.fullBar=jElem;break;case 1:this.selBar=jElem;break;case 2:this.minH=jElem;break;case 3:this.maxH=jElem;break;case 4:this.flrLab=jElem;break;case 5:this.ceilLab=jElem;break;case 6:this.minLab=jElem;break;case 7:this.maxLab=jElem;break;case 8:this.cmbLab=jElem;break;case 9:this.ticks=jElem}},this),this.selBar.rzsp=0,this.minH.rzsp=0,this.maxH.rzsp=0,this.flrLab.rzsp=0,this.ceilLab.rzsp=0,this.minLab.rzsp=0,this.maxLab.rzsp=0,this.cmbLab.rzsp=0},manageElementsStyle:function(){this.range?this.maxH.css("display",""):this.maxH.css("display","none"),this.alwaysHide(this.flrLab,this.options.showTicksValues||this.options.hideLimitLabels),this.alwaysHide(this.ceilLab,this.options.showTicksValues||this.options.hideLimitLabels);var hideLabelsForTicks=this.options.showTicksValues&&!this.intermediateTicks;this.alwaysHide(this.minLab,hideLabelsForTicks||this.options.hidePointerLabels),this.alwaysHide(this.maxLab,hideLabelsForTicks||!this.range||this.options.hidePointerLabels),this.alwaysHide(this.cmbLab,hideLabelsForTicks||!this.range||this.options.hidePointerLabels),this.alwaysHide(this.selBar,!this.range&&!this.options.showSelectionBar),this.options.vertical&&this.sliderElem.addClass("rz-vertical"),this.options.draggableRange?this.selBar.addClass("rz-draggable"):this.selBar.removeClass("rz-draggable"),this.intermediateTicks&&this.options.showTicksValues&&this.ticks.addClass("rz-ticks-values-under")},alwaysHide:function(el,hide){el.rzAlwaysHide=hide,hide?this.hideEl(el):this.showEl(el)},manageEventsBindings:function(){this.options.disabled||this.options.readOnly?this.unbindEvents():this.bindEvents()},setDisabledState:function(){this.options.disabled?this.sliderElem.attr("disabled","disabled"):this.sliderElem.attr("disabled",null)},resetLabelsValue:function(){this.minLab.rzsv=void 0,this.maxLab.rzsv=void 0},initHandles:function(){this.updateLowHandle(this.valueToPosition(this.lowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateSelectionBar(),this.range&&this.updateCmbLabel(),this.updateTicksScale()},translateFn:function(value,label,which,useCustomTr){useCustomTr=void 0===useCustomTr?!0:useCustomTr;var valStr="",getDimension=!1,noLabelInjection=label.hasClass("no-label-injection");useCustomTr?(this.options.stepsArray&&!this.options.bindIndexForStepsArray&&(value=this.getStepValue(value)),valStr=String(this.customTrFn(value,this.options.id,which))):valStr=String(value),(void 0===label.rzsv||label.rzsv.length!==valStr.length||label.rzsv.length>0&&0===label.rzsd)&&(getDimension=!0,label.rzsv=valStr),noLabelInjection||label.html(valStr),this.scope[which+"Label"]=valStr,getDimension&&this.getDimension(label)},setMinAndMax:function(){if(this.step=+this.options.step,this.precision=+this.options.precision,this.minValue=this.options.floor,this.options.logScale&&0===this.minValue)throw Error("Can't use floor=0 with logarithmic scale");this.options.enforceStep&&(this.lowValue=this.roundStep(this.lowValue),this.range&&(this.highValue=this.roundStep(this.highValue))),null!=this.options.ceil?this.maxValue=this.options.ceil:this.maxValue=this.options.ceil=this.range?this.highValue:this.lowValue,this.options.enforceRange&&(this.lowValue=this.sanitizeValue(this.lowValue),this.range&&(this.highValue=this.sanitizeValue(this.highValue))),this.applyLowValue(),this.range&&this.applyHighValue(),this.valueRange=this.maxValue-this.minValue},addAccessibility:function(){this.minH.attr("role","slider"),this.updateAriaAttributes(),!this.options.keyboardSupport||this.options.readOnly||this.options.disabled?this.minH.attr("tabindex",""):this.minH.attr("tabindex","0"),this.options.vertical&&this.minH.attr("aria-orientation","vertical"),this.options.ariaLabel?this.minH.attr("aria-label",this.options.ariaLabel):this.options.ariaLabelledBy&&this.minH.attr("aria-labelledby",this.options.ariaLabelledBy),this.range&&(this.maxH.attr("role","slider"),!this.options.keyboardSupport||this.options.readOnly||this.options.disabled?this.maxH.attr("tabindex",""):this.maxH.attr("tabindex","0"),this.options.vertical&&this.maxH.attr("aria-orientation","vertical"),this.options.ariaLabelHigh?this.maxH.attr("aria-label",this.options.ariaLabelHigh):this.options.ariaLabelledByHigh&&this.maxH.attr("aria-labelledby",this.options.ariaLabelledByHigh))},updateAriaAttributes:function(){this.minH.attr({"aria-valuenow":this.scope.rzSliderModel,"aria-valuetext":this.customTrFn(this.scope.rzSliderModel,this.options.id,"model"),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue}),this.range&&this.maxH.attr({"aria-valuenow":this.scope.rzSliderHigh,"aria-valuetext":this.customTrFn(this.scope.rzSliderHigh,this.options.id,"high"),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue})},calcViewDimensions:function(){var handleWidth=this.getDimension(this.minH);if(this.handleHalfDim=handleWidth/2,this.barDimension=this.getDimension(this.fullBar),this.maxPos=this.barDimension-handleWidth,this.getDimension(this.sliderElem),this.sliderElem.rzsp=this.sliderElem[0].getBoundingClientRect()[this.positionProperty],this.initHasRun){this.updateFloorLab(),this.updateCeilLab(),this.initHandles();var self=this;$timeout(function(){self.updateTicksScale()})}},updateTicksScale:function(){if(this.options.showTicks){var ticksArray=this.options.ticksArray||this.getTicksArray(),translate=this.options.vertical?"translateY":"translateX",self=this;this.options.rightToLeft&&ticksArray.reverse(),this.scope.ticks=ticksArray.map(function(value){var position=self.valueToPosition(value);self.options.vertical&&(position=self.maxPos-position);var translation=translate+"("+Math.round(position)+"px)",tick={selected:self.isTickSelected(value),style:{"-webkit-transform":translation,"-moz-transform":translation,"-o-transform":translation,"-ms-transform":translation,transform:translation}};if(tick.selected&&self.options.getSelectionBarColor&&(tick.style["background-color"]=self.getSelectionBarColor()),!tick.selected&&self.options.getTickColor&&(tick.style["background-color"]=self.getTickColor(value)),self.options.ticksTooltip&&(tick.tooltip=self.options.ticksTooltip(value),tick.tooltipPlacement=self.options.vertical?"right":"top"),self.options.showTicksValues&&(tick.value=self.getDisplayValue(value,"tick-value"),self.options.ticksValuesTooltip&&(tick.valueTooltip=self.options.ticksValuesTooltip(value),tick.valueTooltipPlacement=self.options.vertical?"right":"top")),self.getLegend){var legend=self.getLegend(value,self.options.id);legend&&(tick.legend=legend)}return tick})}},getTicksArray:function(){var step=this.step,ticksArray=[];this.intermediateTicks&&(step=this.options.showTicks);for(var value=this.minValue;value<=this.maxValue;value+=step)ticksArray.push(value);return ticksArray},isTickSelected:function(value){if(!this.range)if(null!==this.options.showSelectionBarFromValue){var center=this.options.showSelectionBarFromValue;if(this.lowValue>center&&value>=center&&value<=this.lowValue)return!0;if(this.lowValue<center&&center>=value&&value>=this.lowValue)return!0}else if(this.options.showSelectionBarEnd){if(value>=this.lowValue)return!0}else if(this.options.showSelectionBar&&value<=this.lowValue)return!0;return this.range&&value>=this.lowValue&&value<=this.highValue?!0:!1},updateFloorLab:function(){this.translateFn(this.minValue,this.flrLab,"floor"),this.getDimension(this.flrLab);var position=this.options.rightToLeft?this.barDimension-this.flrLab.rzsd:0;this.setPosition(this.flrLab,position)},updateCeilLab:function(){this.translateFn(this.maxValue,this.ceilLab,"ceil"),this.getDimension(this.ceilLab);var position=this.options.rightToLeft?0:this.barDimension-this.ceilLab.rzsd;this.setPosition(this.ceilLab,position)},updateHandles:function(which,newPos){"lowValue"===which?this.updateLowHandle(newPos):this.updateHighHandle(newPos),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCmbLabel()},getHandleLabelPos:function(labelName,newPos){var labelRzsd=this[labelName].rzsd,nearHandlePos=newPos-labelRzsd/2+this.handleHalfDim,endOfBarPos=this.barDimension-labelRzsd;return this.options.boundPointerLabels?this.options.rightToLeft&&"minLab"===labelName||!this.options.rightToLeft&&"maxLab"===labelName?Math.min(nearHandlePos,endOfBarPos):Math.min(Math.max(nearHandlePos,0),endOfBarPos):nearHandlePos},updateLowHandle:function(newPos){if(this.setPosition(this.minH,newPos),this.translateFn(this.lowValue,this.minLab,"model"),this.setPosition(this.minLab,this.getHandleLabelPos("minLab",newPos)),this.options.getPointerColor){var pointercolor=this.getPointerColor("min");this.scope.minPointerStyle={backgroundColor:pointercolor}}this.options.autoHideLimitLabels&&this.shFloorCeil()},updateHighHandle:function(newPos){if(this.setPosition(this.maxH,newPos),this.translateFn(this.highValue,this.maxLab,"high"),this.setPosition(this.maxLab,this.getHandleLabelPos("maxLab",newPos)),this.options.getPointerColor){var pointercolor=this.getPointerColor("max");this.scope.maxPointerStyle={backgroundColor:pointercolor}}this.options.autoHideLimitLabels&&this.shFloorCeil()},shFloorCeil:function(){if(!this.options.hidePointerLabels){var flHidden=!1,clHidden=!1,isMinLabAtFloor=this.isLabelBelowFloorLab(this.minLab),isMinLabAtCeil=this.isLabelAboveCeilLab(this.minLab),isMaxLabAtCeil=this.isLabelAboveCeilLab(this.maxLab),isCmbLabAtFloor=this.isLabelBelowFloorLab(this.cmbLab),isCmbLabAtCeil=this.isLabelAboveCeilLab(this.cmbLab);if(isMinLabAtFloor?(flHidden=!0,this.hideEl(this.flrLab)):(flHidden=!1,this.showEl(this.flrLab)),isMinLabAtCeil?(clHidden=!0,this.hideEl(this.ceilLab)):(clHidden=!1,this.showEl(this.ceilLab)),this.range){var hideCeil=this.cmbLabelShown?isCmbLabAtCeil:isMaxLabAtCeil,hideFloor=this.cmbLabelShown?isCmbLabAtFloor:isMinLabAtFloor;hideCeil?this.hideEl(this.ceilLab):clHidden||this.showEl(this.ceilLab),hideFloor?this.hideEl(this.flrLab):flHidden||this.showEl(this.flrLab)}}},isLabelBelowFloorLab:function(label){var isRTL=this.options.rightToLeft,pos=label.rzsp,dim=label.rzsd,floorPos=this.flrLab.rzsp,floorDim=this.flrLab.rzsd;return isRTL?pos+dim>=floorPos-2:floorPos+floorDim+2>=pos},isLabelAboveCeilLab:function(label){var isRTL=this.options.rightToLeft,pos=label.rzsp,dim=label.rzsd,ceilPos=this.ceilLab.rzsp,ceilDim=this.ceilLab.rzsd;return isRTL?ceilPos+ceilDim+2>=pos:pos+dim>=ceilPos-2},updateSelectionBar:function(){var position=0,dimension=0,isSelectionBarFromRight=this.options.rightToLeft?!this.options.showSelectionBarEnd:this.options.showSelectionBarEnd,positionForRange=this.options.rightToLeft?this.maxH.rzsp+this.handleHalfDim:this.minH.rzsp+this.handleHalfDim;if(this.range)dimension=Math.abs(this.maxH.rzsp-this.minH.rzsp),position=positionForRange;else if(null!==this.options.showSelectionBarFromValue){var center=this.options.showSelectionBarFromValue,centerPosition=this.valueToPosition(center),isModelGreaterThanCenter=this.options.rightToLeft?this.lowValue<=center:this.lowValue>center;isModelGreaterThanCenter?(dimension=this.minH.rzsp-centerPosition,position=centerPosition+this.handleHalfDim):(dimension=centerPosition-this.minH.rzsp,position=this.minH.rzsp+this.handleHalfDim)}else isSelectionBarFromRight?(dimension=Math.abs(this.maxPos-this.minH.rzsp)+this.handleHalfDim,position=this.minH.rzsp+this.handleHalfDim):(dimension=this.minH.rzsp+this.handleHalfDim,position=0);if(this.setDimension(this.selBar,dimension),this.setPosition(this.selBar,position),this.options.getSelectionBarColor){var color=this.getSelectionBarColor();this.scope.barStyle={backgroundColor:color}}else if(this.options.selectionBarGradient){var offset=null!==this.options.showSelectionBarFromValue?this.valueToPosition(this.options.showSelectionBarFromValue):0,reversed=offset-position>0^isSelectionBarFromRight,direction=this.options.vertical?reversed?"bottom":"top":reversed?"left":"right";this.scope.barStyle={backgroundImage:"linear-gradient(to "+direction+", "+this.options.selectionBarGradient.from+" 0%,"+this.options.selectionBarGradient.to+" 100%)"},this.options.vertical?(this.scope.barStyle.backgroundPosition="center "+(offset+dimension+position+(reversed?-this.handleHalfDim:0))+"px",this.scope.barStyle.backgroundSize="100% "+(this.barDimension-this.handleHalfDim)+"px"):(this.scope.barStyle.backgroundPosition=offset-position+(reversed?this.handleHalfDim:0)+"px center",this.scope.barStyle.backgroundSize=this.barDimension-this.handleHalfDim+"px 100%")}},getSelectionBarColor:function(){return this.range?this.options.getSelectionBarColor(this.scope.rzSliderModel,this.scope.rzSliderHigh):this.options.getSelectionBarColor(this.scope.rzSliderModel)},getPointerColor:function(pointerType){return"max"===pointerType?this.options.getPointerColor(this.scope.rzSliderHigh,pointerType):this.options.getPointerColor(this.scope.rzSliderModel,pointerType)},getTickColor:function(value){return this.options.getTickColor(value)},updateCmbLabel:function(){var isLabelOverlap=null;if(isLabelOverlap=this.options.rightToLeft?this.minLab.rzsp-this.minLab.rzsd-10<=this.maxLab.rzsp:this.minLab.rzsp+this.minLab.rzsd+10>=this.maxLab.rzsp){var lowTr=this.getDisplayValue(this.lowValue,"model"),highTr=this.getDisplayValue(this.highValue,"high"),labelVal="";labelVal=this.options.mergeRangeLabelsIfSame&&lowTr===highTr?lowTr:this.options.rightToLeft?highTr+" - "+lowTr:lowTr+" - "+highTr,this.translateFn(labelVal,this.cmbLab,"cmb",!1);var pos=this.options.boundPointerLabels?Math.min(Math.max(this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2,0),this.barDimension-this.cmbLab.rzsd):this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2;this.setPosition(this.cmbLab,pos),this.cmbLabelShown=!0,this.hideEl(this.minLab),this.hideEl(this.maxLab),this.showEl(this.cmbLab)}else this.cmbLabelShown=!1,this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateLowHandle(this.valueToPosition(this.lowValue)),this.showEl(this.maxLab),this.showEl(this.minLab),this.hideEl(this.cmbLab);this.options.autoHideLimitLabels&&this.shFloorCeil()},getDisplayValue:function(value,which){return this.options.stepsArray&&!this.options.bindIndexForStepsArray&&(value=this.getStepValue(value)),this.customTrFn(value,this.options.id,which)},roundStep:function(value,customStep){var step=customStep?customStep:this.step,steppedDifference=parseFloat((value-this.minValue)/step).toPrecision(12);steppedDifference=Math.round(+steppedDifference)*step;var newValue=(this.minValue+steppedDifference).toFixed(this.precision);return+newValue},hideEl:function(element){return element.css({visibility:"hidden"})},showEl:function(element){return element.rzAlwaysHide?element:element.css({visibility:"visible"})},setPosition:function(elem,pos){elem.rzsp=pos;var css={};return css[this.positionProperty]=Math.round(pos)+"px",elem.css(css),pos},getDimension:function(elem){var val=elem[0].getBoundingClientRect();return this.options.vertical?elem.rzsd=(val.bottom-val.top)*this.options.scale:elem.rzsd=(val.right-val.left)*this.options.scale,elem.rzsd},setDimension:function(elem,dim){elem.rzsd=dim;var css={};return css[this.dimensionProperty]=Math.round(dim)+"px",elem.css(css),dim},sanitizeValue:function(val){return Math.min(Math.max(val,this.minValue),this.maxValue)},valueToPosition:function(val){var fn=this.linearValueToPosition;this.options.customValueToPosition?fn=this.options.customValueToPosition:this.options.logScale&&(fn=this.logValueToPosition),val=this.sanitizeValue(val);var percent=fn(val,this.minValue,this.maxValue)||0;return this.options.rightToLeft&&(percent=1-percent),percent*this.maxPos},linearValueToPosition:function(val,minVal,maxVal){var range=maxVal-minVal;return(val-minVal)/range},logValueToPosition:function(val,minVal,maxVal){val=Math.log(val),minVal=Math.log(minVal),maxVal=Math.log(maxVal);var range=maxVal-minVal;return(val-minVal)/range},positionToValue:function(position){var percent=position/this.maxPos;this.options.rightToLeft&&(percent=1-percent);var fn=this.linearPositionToValue;return this.options.customPositionToValue?fn=this.options.customPositionToValue:this.options.logScale&&(fn=this.logPositionToValue),fn(percent,this.minValue,this.maxValue)||0},linearPositionToValue:function(percent,minVal,maxVal){return percent*(maxVal-minVal)+minVal},logPositionToValue:function(percent,minVal,maxVal){minVal=Math.log(minVal),maxVal=Math.log(maxVal);var value=percent*(maxVal-minVal)+minVal;return Math.exp(value)},getEventAttr:function(event,attr){return void 0===event.originalEvent?event[attr]:event.originalEvent[attr]},getEventXY:function(event,targetTouchId){var clientXY=this.options.vertical?"clientY":"clientX";if(void 0!==event[clientXY])return event[clientXY];var touches=this.getEventAttr(event,"touches");if(void 0!==targetTouchId)for(var i=0;i<touches.length;i++)if(touches[i].identifier===targetTouchId)return touches[i][clientXY];return touches[0][clientXY]},getEventPosition:function(event,targetTouchId){var sliderPos=this.sliderElem.rzsp,eventPos=0;return eventPos=this.options.vertical?-this.getEventXY(event,targetTouchId)+sliderPos:this.getEventXY(event,targetTouchId)-sliderPos,eventPos*this.options.scale-this.handleHalfDim},getEventNames:function(event){var eventNames={moveEvent:"",endEvent:""};return this.getEventAttr(event,"touches")?(eventNames.moveEvent="touchmove",eventNames.endEvent="touchend"):(eventNames.moveEvent="mousemove",eventNames.endEvent="mouseup"),eventNames},getNearestHandle:function(event){if(!this.range)return this.minH;var position=this.getEventPosition(event),distanceMin=Math.abs(position-this.minH.rzsp),distanceMax=Math.abs(position-this.maxH.rzsp);return distanceMax>distanceMin?this.minH:distanceMin>distanceMax?this.maxH:this.options.rightToLeft?position>this.minH.rzsp?this.minH:this.maxH:position<this.minH.rzsp?this.minH:this.maxH},focusElement:function(el){var DOM_ELEMENT=0;el[DOM_ELEMENT].focus()},bindEvents:function(){var barTracking,barStart,barMove;this.options.draggableRange?(barTracking="rzSliderDrag",barStart=this.onDragStart,barMove=this.onDragMove):(barTracking="lowValue",barStart=this.onStart,barMove=this.onMove),this.options.onlyBindHandles||(this.selBar.on("mousedown",angular.bind(this,barStart,null,barTracking)),this.selBar.on("mousedown",angular.bind(this,barMove,this.selBar))),this.options.draggableRangeOnly?(this.minH.on("mousedown",angular.bind(this,barStart,null,barTracking)),this.maxH.on("mousedown",angular.bind(this,barStart,null,barTracking))):(this.minH.on("mousedown",angular.bind(this,this.onStart,this.minH,"lowValue")),this.range&&this.maxH.on("mousedown",angular.bind(this,this.onStart,this.maxH,"highValue")),this.options.onlyBindHandles||(this.fullBar.on("mousedown",angular.bind(this,this.onStart,null,null)),this.fullBar.on("mousedown",angular.bind(this,this.onMove,this.fullBar)),this.ticks.on("mousedown",angular.bind(this,this.onStart,null,null)),this.ticks.on("mousedown",angular.bind(this,this.onTickClick,this.ticks)))),this.options.onlyBindHandles||(this.selBar.on("touchstart",angular.bind(this,barStart,null,barTracking)),this.selBar.on("touchstart",angular.bind(this,barMove,this.selBar))),this.options.draggableRangeOnly?(this.minH.on("touchstart",angular.bind(this,barStart,null,barTracking)),this.maxH.on("touchstart",angular.bind(this,barStart,null,barTracking))):(this.minH.on("touchstart",angular.bind(this,this.onStart,this.minH,"lowValue")),this.range&&this.maxH.on("touchstart",angular.bind(this,this.onStart,this.maxH,"highValue")),this.options.onlyBindHandles||(this.fullBar.on("touchstart",angular.bind(this,this.onStart,null,null)),this.fullBar.on("touchstart",angular.bind(this,this.onMove,this.fullBar)),this.ticks.on("touchstart",angular.bind(this,this.onStart,null,null)),this.ticks.on("touchstart",angular.bind(this,this.onTickClick,this.ticks)))),this.options.keyboardSupport&&(this.minH.on("focus",angular.bind(this,this.onPointerFocus,this.minH,"lowValue")),this.range&&this.maxH.on("focus",angular.bind(this,this.onPointerFocus,this.maxH,"highValue")))},unbindEvents:function(){this.minH.off(),this.maxH.off(),this.fullBar.off(),this.selBar.off(),this.ticks.off()},onStart:function(pointer,ref,event){var ehMove,ehEnd,eventNames=this.getEventNames(event);event.stopPropagation(),event.preventDefault(),this.calcViewDimensions(),pointer?this.tracking=ref:(pointer=this.getNearestHandle(event),this.tracking=pointer===this.minH?"lowValue":"highValue"),pointer.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(pointer),ehMove=angular.bind(this,this.dragging.active?this.onDragMove:this.onMove,pointer),ehEnd=angular.bind(this,this.onEnd,ehMove),$document.on(eventNames.moveEvent,ehMove),$document.on(eventNames.endEvent,ehEnd),this.endHandlerToBeRemovedOnEnd=ehEnd,this.callOnStart();var changedTouches=this.getEventAttr(event,"changedTouches");changedTouches&&(this.touchId||(this.isDragging=!0,this.touchId=changedTouches[0].identifier))},onMove:function(pointer,event,fromTick){var touchForThisSlider,changedTouches=this.getEventAttr(event,"changedTouches");if(changedTouches)for(var i=0;i<changedTouches.length;i++)if(changedTouches[i].identifier===this.touchId){touchForThisSlider=changedTouches[i];break}if(!changedTouches||touchForThisSlider){var newValue,newPos=this.getEventPosition(event,touchForThisSlider?touchForThisSlider.identifier:void 0),ceilValue=this.options.rightToLeft?this.minValue:this.maxValue,flrValue=this.options.rightToLeft?this.maxValue:this.minValue;0>=newPos?newValue=flrValue:newPos>=this.maxPos?newValue=ceilValue:(newValue=this.positionToValue(newPos),newValue=fromTick&&angular.isNumber(this.options.showTicks)?this.roundStep(newValue,this.options.showTicks):this.roundStep(newValue)),this.positionTrackingHandle(newValue)}},onEnd:function(ehMove,event){var changedTouches=this.getEventAttr(event,"changedTouches");if(!changedTouches||changedTouches[0].identifier===this.touchId){this.isDragging=!1,this.touchId=null,this.options.keyboardSupport||(this.minH.removeClass("rz-active"),this.maxH.removeClass("rz-active"),this.tracking=""),this.dragging.active=!1;var eventName=this.getEventNames(event);$document.off(eventName.moveEvent,ehMove),$document.off(eventName.endEvent,this.endHandlerToBeRemovedOnEnd),this.endHandlerToBeRemovedOnEnd=null,this.callOnEnd()}},onTickClick:function(pointer,event){this.onMove(pointer,event,!0)},onPointerFocus:function(pointer,ref){this.tracking=ref,pointer.one("blur",angular.bind(this,this.onPointerBlur,pointer)),pointer.on("keydown",angular.bind(this,this.onKeyboardEvent)),pointer.on("keyup",angular.bind(this,this.onKeyUp)),this.firstKeyDown=!0,pointer.addClass("rz-active"),this.currentFocusElement={pointer:pointer,ref:ref}},onKeyUp:function(){this.firstKeyDown=!0,this.callOnEnd()},onPointerBlur:function(pointer){pointer.off("keydown"),pointer.off("keyup"),pointer.removeClass("rz-active"),this.isDragging||(this.tracking="",this.currentFocusElement=null)},getKeyActions:function(currentValue){var increaseStep=currentValue+this.step,decreaseStep=currentValue-this.step,increasePage=currentValue+this.valueRange/10,decreasePage=currentValue-this.valueRange/10,actions={UP:increaseStep,DOWN:decreaseStep,LEFT:decreaseStep,RIGHT:increaseStep,PAGEUP:increasePage,PAGEDOWN:decreasePage,HOME:this.minValue,END:this.maxValue};return this.options.rightToLeft&&(actions.LEFT=increaseStep,actions.RIGHT=decreaseStep,this.options.vertical&&(actions.UP=decreaseStep,actions.DOWN=increaseStep)),actions},onKeyboardEvent:function(event){var currentValue=this[this.tracking],keyCode=event.keyCode||event.which,keys={38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"},actions=this.getKeyActions(currentValue),key=keys[keyCode],action=actions[key];if(null!=action&&""!==this.tracking){event.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.callOnStart());var self=this;$timeout(function(){
var newValue=self.roundStep(self.sanitizeValue(action));if(self.options.draggableRangeOnly){var newMinValue,newMaxValue,difference=self.highValue-self.lowValue;"lowValue"===self.tracking?(newMinValue=newValue,newMaxValue=newValue+difference,newMaxValue>self.maxValue&&(newMaxValue=self.maxValue,newMinValue=newMaxValue-difference)):(newMaxValue=newValue,newMinValue=newValue-difference,newMinValue<self.minValue&&(newMinValue=self.minValue,newMaxValue=newMinValue+difference)),self.positionTrackingBar(newMinValue,newMaxValue)}else self.positionTrackingHandle(newValue)})}},onDragStart:function(pointer,ref,event){var position=this.getEventPosition(event);this.dragging={active:!0,value:this.positionToValue(position),difference:this.highValue-this.lowValue,lowLimit:this.options.rightToLeft?this.minH.rzsp-position:position-this.minH.rzsp,highLimit:this.options.rightToLeft?position-this.maxH.rzsp:this.maxH.rzsp-position},this.onStart(pointer,ref,event)},getValue:function(type,newPos,outOfBounds,isAbove){var isRTL=this.options.rightToLeft,value=null;return value="min"===type?outOfBounds?isAbove?isRTL?this.minValue:this.maxValue-this.dragging.difference:isRTL?this.maxValue-this.dragging.difference:this.minValue:isRTL?this.positionToValue(newPos+this.dragging.lowLimit):this.positionToValue(newPos-this.dragging.lowLimit):outOfBounds?isAbove?isRTL?this.minValue+this.dragging.difference:this.maxValue:isRTL?this.maxValue:this.minValue+this.dragging.difference:isRTL?this.positionToValue(newPos+this.dragging.lowLimit)+this.dragging.difference:this.positionToValue(newPos-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(value)},onDragMove:function(pointer,event){var newMinValue,newMaxValue,ceilLimit,flrLimit,isUnderFlrLimit,isOverCeilLimit,flrH,ceilH,newPos=this.getEventPosition(event);if(this.options.rightToLeft?(ceilLimit=this.dragging.lowLimit,flrLimit=this.dragging.highLimit,flrH=this.maxH,ceilH=this.minH):(ceilLimit=this.dragging.highLimit,flrLimit=this.dragging.lowLimit,flrH=this.minH,ceilH=this.maxH),isUnderFlrLimit=flrLimit>=newPos,isOverCeilLimit=newPos>=this.maxPos-ceilLimit,isUnderFlrLimit){if(0===flrH.rzsp)return;newMinValue=this.getValue("min",newPos,!0,!1),newMaxValue=this.getValue("max",newPos,!0,!1)}else if(isOverCeilLimit){if(ceilH.rzsp===this.maxPos)return;newMaxValue=this.getValue("max",newPos,!0,!0),newMinValue=this.getValue("min",newPos,!0,!0)}else newMinValue=this.getValue("min",newPos,!1),newMaxValue=this.getValue("max",newPos,!1);this.positionTrackingBar(newMinValue,newMaxValue)},positionTrackingBar:function(newMinValue,newMaxValue){null!=this.options.minLimit&&newMinValue<this.options.minLimit&&(newMinValue=this.options.minLimit,newMaxValue=newMinValue+this.dragging.difference),null!=this.options.maxLimit&&newMaxValue>this.options.maxLimit&&(newMaxValue=this.options.maxLimit,newMinValue=newMaxValue-this.dragging.difference),this.lowValue=newMinValue,this.highValue=newMaxValue,this.applyLowValue(),this.range&&this.applyHighValue(),this.applyModel(!0),this.updateHandles("lowValue",this.valueToPosition(newMinValue)),this.updateHandles("highValue",this.valueToPosition(newMaxValue))},positionTrackingHandle:function(newValue){var valueChanged=!1;newValue=this.applyMinMaxLimit(newValue),this.range&&(this.options.pushRange?(newValue=this.applyPushRange(newValue),valueChanged=!0):(this.options.noSwitching&&("lowValue"===this.tracking&&newValue>this.highValue?newValue=this.applyMinMaxRange(this.highValue):"highValue"===this.tracking&&newValue<this.lowValue&&(newValue=this.applyMinMaxRange(this.lowValue))),newValue=this.applyMinMaxRange(newValue),"lowValue"===this.tracking&&newValue>this.highValue?(this.lowValue=this.highValue,this.applyLowValue(),this.applyModel(),this.updateHandles(this.tracking,this.maxH.rzsp),this.updateAriaAttributes(),this.tracking="highValue",this.minH.removeClass("rz-active"),this.maxH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.maxH),valueChanged=!0):"highValue"===this.tracking&&newValue<this.lowValue&&(this.highValue=this.lowValue,this.applyHighValue(),this.applyModel(),this.updateHandles(this.tracking,this.minH.rzsp),this.updateAriaAttributes(),this.tracking="lowValue",this.maxH.removeClass("rz-active"),this.minH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.minH),valueChanged=!0))),this[this.tracking]!==newValue&&(this[this.tracking]=newValue,"lowValue"===this.tracking?this.applyLowValue():this.applyHighValue(),this.applyModel(),this.updateHandles(this.tracking,this.valueToPosition(newValue)),this.updateAriaAttributes(),valueChanged=!0),valueChanged&&this.applyModel(!0)},applyMinMaxLimit:function(newValue){return null!=this.options.minLimit&&newValue<this.options.minLimit?this.options.minLimit:null!=this.options.maxLimit&&newValue>this.options.maxLimit?this.options.maxLimit:newValue},applyMinMaxRange:function(newValue){var oppositeValue="lowValue"===this.tracking?this.highValue:this.lowValue,difference=Math.abs(newValue-oppositeValue);return null!=this.options.minRange&&difference<this.options.minRange?"lowValue"===this.tracking?this.highValue-this.options.minRange:this.lowValue+this.options.minRange:null!=this.options.maxRange&&difference>this.options.maxRange?"lowValue"===this.tracking?this.highValue-this.options.maxRange:this.lowValue+this.options.maxRange:newValue},applyPushRange:function(newValue){var difference="lowValue"===this.tracking?this.highValue-newValue:newValue-this.lowValue,minRange=null!==this.options.minRange?this.options.minRange:this.options.step,maxRange=this.options.maxRange;return minRange>difference?("lowValue"===this.tracking?(this.highValue=Math.min(newValue+minRange,this.maxValue),newValue=this.highValue-minRange,this.applyHighValue(),this.updateHandles("highValue",this.valueToPosition(this.highValue))):(this.lowValue=Math.max(newValue-minRange,this.minValue),newValue=this.lowValue+minRange,this.applyLowValue(),this.updateHandles("lowValue",this.valueToPosition(this.lowValue))),this.updateAriaAttributes()):null!==maxRange&&difference>maxRange&&("lowValue"===this.tracking?(this.highValue=newValue+maxRange,this.applyHighValue(),this.updateHandles("highValue",this.valueToPosition(this.highValue))):(this.lowValue=newValue-maxRange,this.applyLowValue(),this.updateHandles("lowValue",this.valueToPosition(this.lowValue))),this.updateAriaAttributes()),newValue},applyModel:function(callOnChange){this.internalChange=!0,this.scope.$apply(),callOnChange&&this.callOnChange(),this.internalChange=!1},callOnStart:function(){if(this.options.onStart){var self=this,pointerType="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){self.options.onStart(self.options.id,self.scope.rzSliderModel,self.scope.rzSliderHigh,pointerType)})}},callOnChange:function(){if(this.options.onChange){var self=this,pointerType="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){self.options.onChange(self.options.id,self.scope.rzSliderModel,self.scope.rzSliderHigh,pointerType)})}},callOnEnd:function(){if(this.options.onEnd){var self=this,pointerType="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){self.options.onEnd(self.options.id,self.scope.rzSliderModel,self.scope.rzSliderHigh,pointerType)})}this.scope.$emit("slideEnded")}},Slider}]).directive("rzslider",["RzSlider",function(RzSlider){return{restrict:"AE",replace:!0,scope:{rzSliderModel:"=?",rzSliderHigh:"=?",rzSliderOptions:"&?",rzSliderTplUrl:"@"},templateUrl:function(elem,attrs){return attrs.rzSliderTplUrl||"rzSliderTpl.html"},link:function(scope,elem){scope.slider=new RzSlider(scope,elem)}}}]);return module.run(["$templateCache",function($templateCache){$templateCache.put("rzSliderTpl.html",'<div class=rzslider><span class=rz-bar-wrapper><span class=rz-bar></span></span> <span class=rz-bar-wrapper><span class="rz-bar rz-selection" ng-style=barStyle></span></span> <span class="rz-pointer rz-pointer-min" ng-style=minPointerStyle></span> <span class="rz-pointer rz-pointer-max" ng-style=maxPointerStyle></span> <span class="rz-bubble rz-limit rz-floor"></span> <span class="rz-bubble rz-limit rz-ceil"></span> <span class=rz-bubble></span> <span class=rz-bubble></span> <span class=rz-bubble></span><ul ng-show=showTicks class=rz-ticks><li ng-repeat="t in ticks track by $index" class=rz-tick ng-class="{\'rz-selected\': t.selected}" ng-style=t.style ng-attr-uib-tooltip="{{ t.tooltip }}" ng-attr-tooltip-placement={{t.tooltipPlacement}} ng-attr-tooltip-append-to-body="{{ t.tooltip ? true : undefined}}"><span ng-if="t.value != null" class=rz-tick-value ng-attr-uib-tooltip="{{ t.valueTooltip }}" ng-attr-tooltip-placement={{t.valueTooltipPlacement}}>{{ t.value }}</span> <span ng-if="t.legend != null" class=rz-tick-legend>{{ t.legend }}</span></li></ul></div>')}]),module.name}),function(){angular.module("App.services",[],["$provide",function($provide){return $provide.factory("jQuery",["$window",function($window){return $window.jQuery}]),$provide.factory("moment",["$window",function($window){return $window.moment}]),$provide.factory("GleamAPI",["$window",function($window){return $window.API}]),$provide.factory("eventService",["$http",function($http){var createEvent;return createEvent=function(key,type,description,data){return $http.post("/events",{campaign_key:key,event_type:type,description:description,data:data})},{createEvent:createEvent,createLikeEvent:function(key,description,data){return createEvent(key,"Facebook Visit Like",description,data)}}}]),$provide.factory("translationService",[function(){var _bundle,key,ref,translate,value;if(_bundle={},window.messageBundle){ref=window.messageBundle;for(key in ref)value=ref[key],_bundle[key]=value}return{translate:translate=function(key,replacements){var str,token;if(str=_bundle[key],str&&replacements)for(token in replacements)value=replacements[token],str=str.replace(new RegExp("%\\{"+token+"\\}","gi"),value);return str&&str.replace(/%%/gi,"%")},pluralize:function(count,singular,plural,map){return null==map&&(map={}),count=parseInt(count),map.count=count,translate(1===count?singular:plural,map)},updateBundle:function(messageBundle){var ref1,results;_bundle={},window.messageBundle=messageBundle,ref1=window.messageBundle,results=[];for(key in ref1)value=ref1[key],results.push(_bundle[key]=value);return results}}}]),$provide.factory("verifyValueService",["$http",function($http){return{check:function(value,entry_method,options){return $http.get("/verify-value/"+entry_method.id,{params:{v:value}}).success(function(data,status,headers,config){return options.success(data)}).error(function(data,status,headers,config){return options.error(data)})}}}]),$provide.factory("randomService",[function(){var f,symbols;return f=function(count){var s;return s=symbols[16*Math.random()|0],count>1&&(s+=f(count-1)),s},symbols=["!","@","#","$","%","^","&","*","(",")","_","=","-","|","~","."],{hexSymbols:function(count){return f(count)}}}]),$provide.factory("formService",[function(){return{postForm:function(action,params){var $submitForm,id,name,value;id="form"+(new Date).getTime(),$submitForm=$('<form method=post><input name="utf8" type="hidden" value="&#x2713;" /></form>').attr("action",action).attr("id",id).append($("<input name='authenticity_token' type='hidden'>").val($("meta[name=csrf-token]").attr("content")));for(name in params)value=params[name],$submitForm.append("<input type='hidden' name='"+name+"' />"),$submitForm.find("[name='"+name+"']").val(value);return $("body").append($submitForm),$("#"+id).submit()}}}]),$provide.factory("userService",["$http","formService",function($http,formService){var accessToken,emailDomainExcudes,parseCompanyUrl,parseUserName,signedRequest;return signedRequest=function(){return window.FB&&FB.getAuthResponse()?FB.getAuthResponse().signedRequest:void 0},accessToken=function(){return window.FB&&FB.getAuthResponse()?FB.getAuthResponse().accessToken:void 0},emailDomainExcudes=/@(gmail|googlemail|hotmail|aol|live|bigpond|yahoo|me|ymail)\./,parseUserName=function(email){return(email||"").replace(/[+@].*/,"").replace(/[^a-z]+/gi," ").strip().toProperCase()},parseCompanyUrl=function(email,url){var best;if(url)best=url;else{if(!email||email.match(emailDomainExcudes))return null;best=email.replace(/.*@/,"")}return best.replace(/^(?!https?:\/\/)/i,"http://")},{emailExists:function(email,options){return $http.get("/users/email-exists",{params:{email:email}}).success(function(data,status,headers,config){return"Y"===data?options.existing(data):options["new"](data),options.complete(data)})},login:function(email,password){return formService.postForm("/login",{"user[email]":email,"user[password]":password})},submitUser:function(email,name,password,siteName,siteUrl,facebookLogin){var params;return params={"user[email]":email,"user[name]":name,"user[sites_attributes][0][name]":siteName,"user[sites_attributes][0][url]":siteUrl},facebookLogin?params.signed_request=signedRequest():params["user[password]"]=password,formService.postForm("/signup",params)},sendLead:function(email,leadType,name,site_name,site_url){return $http.post("/leads",{email:email,name:name,site_name:site_name,site_url:site_name,signed_request:signedRequest(),access_token:accessToken(),lead_type:leadType})},parseUserName:parseUserName,parseCompanyUrl:parseCompanyUrl,parseCompanyName:function(email,url){return(url||parseCompanyUrl(email,url)||"").replace(/https?:\/\//i,"").toProperCase()||parseUserName(email)}}}]),$provide.factory("facebookLoginService",["$http","userService",function($http,userService){var _parsePermissions,accessToken,signedRequest;return signedRequest=function(){return FB.getAuthResponse().signedRequest},accessToken=function(){return FB.getAuthResponse().accessToken},_parsePermissions=function(response){var i,len,p,ref,v;if(response&&response.data){if(response.data[0].permission){for(v={},ref=response.data,i=0,len=ref.length;len>i;i++)p=ref[i],"granted"===p.status&&(v[p.permission]=1);return v}return response.data[0]}return{}},{parsePermissions:_parsePermissions,gleamLogin:function(){var $submitForm;return $("#facebook-login").remove(),$submitForm=$('<form id="facebook-login" action="/facebook-login" method=post><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="" /><input name="signed_request" type="hidden" value="" /><input name="access_token" type="hidden" value="" /></form>'),$submitForm.find("[name=authenticity_token]").val($("meta[name=csrf-token]").attr("content")),$submitForm.find("[name=signed_request]").val(signedRequest()),$submitForm.find("[name=access_token]").val(accessToken()),$("body").append($submitForm),$("#facebook-login").submit()},getDetails:function(callback){return FB.api("/me?fields=name,email,website",function(response){var email,firstWebsite,name,siteName,siteUrl;return name=response.name||userService.parseUserName(email),email=response.email,firstWebsite=response.website?response.website.split(/\n/)[0]:null,siteUrl=firstWebsite||userService.parseCompanyUrl(email,firstWebsite),siteName=userService.parseCompanyName(email,siteUrl),callback.call(this,email,name,siteName,siteUrl)})},existingUserCheck:function(options){return $http.get("/existing-facebook-user",{params:{signed_request:signedRequest(),access_token:accessToken()}}).success(function(data,status,headers,config){return"Y"===data?options.existing(data):options["new"](data)})}}}]),$provide.factory("pinterestService",["$http",function($http){return{validateUsername:function(username,options){return $.ajax({type:"HEAD",async:!0,dataType:"jsonp",url:"https://api.pinterest.com/v3/pidgets/users/"+username+"/pins"}).success(function(data,status,headers,config){return"success"===data.status?options.valid(data):options.error(data)}).error(function(data,status,headers,config){return options.error(data)})}}}]),$provide.factory("shortenerService",["$http",function($http){return{shorten:function(long_url,url,username,api_key,options){return $.ajax({url:url,dataType:"jsonp",data:{login:username,apiKey:api_key,longUrl:long_url,format:"json"},success:function(data){return options.success(data)}})}}}]),$provide.factory("fingerprintService",["$window",function($window){var badStrs,goodStr,hashed,intsToStr,isBad;return intsToStr=function(ints){return ints.map(function(int){return String.fromCharCode(int)}).join("")},badStrs=[intsToStr([46,103,115,95,95,119,105,110,95,99,104,97,110,99,101]),intsToStr([35,119,105,110,110,105,110,103,45,99,104,97,110,99,101])],goodStr=intsToStr([53,101,96,105,124,88,86,59,62,119,54,68,116,113,80,90,39]),isBad=function(){return $window.jQuery(badStrs.join(",")).size()>0},hashed=function(base){return base+"."+$window.jsmd5(goodStr+base+(isBad()?"+":""))},{hash:function(fingerprint){return fingerprint?hashed(fingerprint):void 0},fingerprint:function(callback){return new $window.Fingerprint2({excludeJsFonts:!0,excludeFlashFonts:!0,detectScreenOrientation:!1}).get(function(result,components){return callback.call($window,result,components)})}}}])}])}.call(this),function(){angular.module("App.services").service("actionsConfig",["$injector",function($injector){return function(entry_type){var config,provider;provider=entry_type.split("_")[0];try{config=$injector.get(provider+"ConfigService")}catch(error){config={}}return config&&config[entry_type]||{}}}])}.call(this),function(){angular.module("App.services").factory("customConfigService",["translationService","campaignService",function(translationService,campaignService){var actionPerformed;return actionPerformed=function(entry_method){return entry_method.config.actionKey&&entry_method.config.actionKey(entry_method)?campaignService.actionPerformed(entry_method):!1},{custom_action:{continueDisabled:function(entry_method){var name,ref,ref1,state;if(this.timerAction(entry_method)&&!entry_method.timePassed)return!0;if("Ask a question"===entry_method.method_type)return"good"!==campaignService.verifyStatus(entry_method)||!campaignService.entryState.formData[entry_method.id];if(entry_method.template){if("blog_comment"===entry_method.template)return"good"!==campaignService.verifyStatus(entry_method)||!campaignService.entryState.formData[entry_method.id];if("visit"===entry_method.template){if(campaignService.entryState.formData[entry_method.id])return!1}else{if("choose_option"===entry_method.template){ref=campaignService.entryState.formData[entry_method.id];for(name in ref)if(state=ref[name])return!1;return!0}if("multiple_choice"===entry_method.template){ref1=campaignService.entryState.formData[entry_method.id];for(name in ref1)if(state=ref1[name])return!1;return!0}}}else{if("None"===entry_method.method_type)return!1;if("Allow question or tracking"===entry_method.method_type)return actionPerformed(entry_method)?!1:"good"!==campaignService.verifyStatus(entry_method)||!campaignService.entryState.formData[entry_method.id]}},canSubmitForm:function(entry_method){return campaignService.enoughEntryDetails(entry_method)?null:!1},timerAction:function(entry_method){return("VisitDelay"===entry_method.workflow||""===entry_method.template)&&parseInt(entry_method.config7)>0},isTimerTriggered:function(entry_method){return("VisitDelay"===entry_method.workflow||""===entry_method.template)&&parseInt(entry_method.config7)>0},remainingSeconds:function(entry_method){return entry_method.secondsOpen?entry_method.config7-entry_method.secondsOpen:entry_method.config7},continueTooltip:function(entry_method){return campaignService.continueDisabled(entry_method)?"visit"===entry_method.template?translationService.translate("tooltip_visit"):"VisitDelay"===entry_method.workflow&&parseInt(entry_method.config7)>0&&!entry_method.timePassed?translationService.pluralize(entry_method.config.remainingSeconds(entry_method),"tooltip_delay_singular","tooltip_delay_plural"):"good"!==campaignService.verifyStatus(entry_method)?translationService.translate("tooltip_invalid_value"):translationService.translate("tooltip_complete_action"):void 0},actionKey:function(entry_method){return entry_method.config2},placeholder:function(entry_method){return"blog_post"===entry_method.template?"https://blog.yourwebsite.com/link-to-blog-post/":void 0}}}}])}.call(this),function(){angular.module("App.services").factory("emailConfigService",function(){return{email_subscribe:{alwaysRequireContactInfo:!0}}})}.call(this),function(){angular.module("App.services").factory("facebookConfigService",["translationService","campaignService",function(translationService,campaignService){return{facebook_enter:{continueDisabled:function(entry_method){return!1}},facebook_visit:{canSubmitForm:function(entry_method){return"Question"===entry_method.config5?Cookies.get("D-"+entry_method.id)&&!!campaignService.entryState.formData[entry_method.id]:"Delay"===entry_method.config5?Cookies.get("D-"+entry_method.id)&&entry_method.timePassed&&campaignService.isExpanded(entry_method):null},timerAction:function(entry_method){return"Delay"===entry_method.config5},isTimerTriggered:function(entry_method){return"Delay"===entry_method.config5&&Cookies.get("D-"+entry_method.id)},remainingSeconds:function(entry_method){return entry_method.secondsOpen?entry_method.config6-entry_method.secondsOpen:entry_method.config6},continueTooltip:function(entry_method){return campaignService.continueDisabled(entry_method)?Cookies.get("D-"+entry_method.id)?"Delay"===entry_method.config5?translationService.pluralize(entry_method.config.remainingSeconds(entry_method),"tooltip_delay_singular","tooltip_delay_plural"):void 0:translationService.translate("tooltip_facebook_visit"):void 0},completeAfterVisit:function(entry_method){return"Complete"===entry_method.config4&&"Complete"===entry_method.config5}},facebook_media:{enterOnSingleMedia:function(entry_method){return entry_method.config4&&entry_method.config4.length>0}},facebook_view_post:{canSubmitForm:function(entry_method){return"video"===entry_method.config3?entry_method.timePassed&&campaignService.isExpanded(entry_method):null},timerAction:function(entry_method){return"video"===entry_method.config3?!0:"5"}}}}])}.call(this),function(){angular.module("App.services").factory("googleplusConfigService",["translationService","campaignService",function(translationService,campaignService){return{googleplus_visit:{canSubmitForm:function(entry_method){return"Question"===entry_method.config4?Cookies.get("D-"+entry_method.id)&&!!campaignService.entryState.formData[entry_method.id]:"Delay"===entry_method.config4?Cookies.get("D-"+entry_method.id)&&entry_method.timePassed&&campaignService.isExpanded(entry_method):null},timerAction:function(entry_method){return"Delay"===entry_method.config4},isTimerTriggered:function(entry_method){return"Delay"===entry_method.config4&&Cookies.get("D-"+entry_method.id)},remainingSeconds:function(entry_method){return entry_method.secondsOpen?entry_method.config5-entry_method.secondsOpen:entry_method.config5},continueTooltip:function(entry_method){return campaignService.continueDisabled(entry_method)?Cookies.get("D-"+entry_method.id)?"Delay"===entry_method.config4?translationService.pluralize(entry_method.config.remainingSeconds(entry_method),"tooltip_delay_singular","tooltip_delay_plural"):void 0:translationService.translate("tooltip_facebook_visit"):void 0}}}}])}.call(this),function(){angular.module("App.services").factory("indiegogoConfigService",["translationService","campaignService",function(translationService,campaignService){return{indiegogo_visit:{canSubmitForm:function(entry_method){return"Question"===entry_method.config3?Cookies.get("D-"+entry_method.id)&&!!campaignService.entryState.formData[entry_method.id]:"Delay"===entry_method.config3?Cookies.get("D-"+entry_method.id)&&entry_method.timePassed&&campaignService.isExpanded(entry_method):null},timerAction:function(entry_method){return"Delay"===entry_method.config3},isTimerTriggered:function(entry_method){return"Delay"===entry_method.config3&&Cookies.get("D-"+entry_method.id)},remainingSeconds:function(entry_method){return entry_method.secondsOpen?entry_method.config4-entry_method.secondsOpen:entry_method.config4},continueTooltip:function(entry_method){return campaignService.continueDisabled(entry_method)?Cookies.get("D-"+entry_method.id)?"Delay"===entry_method.config3?translationService.pluralize(entry_method.config.remainingSeconds(entry_method),"tooltip_delay_singular","tooltip_delay_plural"):void 0:translationService.translate("tooltip_facebook_visit"):void 0},completeAfterVisit:function(entry_method){return"Complete"===entry_method.config3}}}}])}.call(this),function(){angular.module("App.services").factory("instagramConfigService",["translationService","campaignService",function(translationService,campaignService){return{instagram_choose:{requiresMedia:!0,enterOnSingleMedia:function(entry_method){return entry_method.config2&&entry_method.config2.length>0}},instagram_follow:{errorMessage:function(entry_method){return translationService.translate("instagram_follow_error",{username:entry_method.config1})}},instagram_visit_profile:{canSubmitForm:function(entry_method){return"Question"===entry_method.config5?Cookies.get("D-"+entry_method.id)&&!!campaignService.entryState.formData[entry_method.id]:"Delay"===entry_method.config5?Cookies.get("D-"+entry_method.id)&&entry_method.timePassed&&campaignService.isExpanded(entry_method):null},timerAction:function(entry_method){return"Delay"===entry_method.config5},isTimerTriggered:function(entry_method){return"Delay"===entry_method.config5&&Cookies.get("D-"+entry_method.id)},remainingSeconds:function(entry_method){return entry_method.secondsOpen?entry_method.config6-entry_method.secondsOpen:entry_method.config6},continueTooltip:function(entry_method){return campaignService.continueDisabled(entry_method)?Cookies.get("D-"+entry_method.id)?"Delay"===entry_method.config5?translationService.pluralize(entry_method.config.remainingSeconds(entry_method),"tooltip_delay_singular","tooltip_delay_plural"):void 0:translationService.translate("tooltip_facebook_visit"):void 0},completeAfterVisit:function(entry_method){return"Complete"===entry_method.config5}}}}])}.call(this),function(){angular.module("App.services").factory("kickstarterConfigService",["translationService","campaignService",function(translationService,campaignService){return{kickstarter_visit:{canSubmitForm:function(entry_method){return"Question"===entry_method.config3?Cookies.get("D-"+entry_method.id)&&!!campaignService.entryState.formData[entry_method.id]:"Delay"===entry_method.config3?Cookies.get("D-"+entry_method.id)&&entry_method.timePassed&&campaignService.isExpanded(entry_method):null},timerAction:function(entry_method){return"Delay"===entry_method.config3},isTimerTriggered:function(entry_method){return"Delay"===entry_method.config3&&Cookies.get("D-"+entry_method.id)},remainingSeconds:function(entry_method){return entry_method.secondsOpen?entry_method.config4-entry_method.secondsOpen:entry_method.config4},continueTooltip:function(entry_method){return campaignService.continueDisabled(entry_method)?Cookies.get("D-"+entry_method.id)?"Delay"===entry_method.config3?translationService.pluralize(entry_method.config.remainingSeconds(entry_method),"tooltip_delay_singular","tooltip_delay_plural"):void 0:translationService.translate("tooltip_facebook_visit"):void 0},completeAfterVisit:function(entry_method){return"Complete"===entry_method.config3}}}}])}.call(this),function(){angular.module("App.services").factory("mediaConfigService",["campaignService",function(campaignService){return{media_action:{canSubmitForm:function(entry_method){var formData;return"upload"!==entry_method.mediaSource?null:(formData=campaignService.entryState.formData[entry_method.id],"1"===entry_method.config5?formData&&formData.url&&formData.text:formData&&formData.url)},enterOnSingleMedia:function(entry_method){return entry_method.config4&&entry_method.config4.length>0}}}}])}.call(this),function(){angular.module("App.services").factory("pinterestConfigService",["translationService","campaignService",function(translationService,campaignService){return{pinterest_pin:{continueDisabled:function(entry_method){return!1}},pinterest_enter:{continueDisabled:function(entry_method){return!1}},pinterest_choose_pin:{requiresMedia:!0,enterOnSingleMedia:function(entry_method){return entry_method.config2&&entry_method.config2.length>0}},pinterest_choose_board:{requiresMedia:!0},pinterest_visit:{canSubmitForm:function(entry_method){return"Question"===entry_method.config3?Cookies.get("D-"+entry_method.id)&&!!campaignService.entryState.formData[entry_method.id]:"Delay"===entry_method.config3?Cookies.get("D-"+entry_method.id)&&entry_method.timePassed&&campaignService.isExpanded(entry_method):null},timerAction:function(entry_method){return"Delay"===entry_method.config3},isTimerTriggered:function(entry_method){return"Delay"===entry_method.config3&&Cookies.get("D-"+entry_method.id)},remainingSeconds:function(entry_method){return entry_method.secondsOpen?entry_method.config4-entry_method.secondsOpen:entry_method.config4},continueTooltip:function(entry_method){return campaignService.continueDisabled(entry_method)?Cookies.get("D-"+entry_method.id)?"Delay"===entry_method.config3?translationService.pluralize(entry_method.config.remainingSeconds(entry_method),"tooltip_delay_singular","tooltip_delay_plural"):void 0:translationService.translate("tooltip_facebook_visit"):void 0},completeAfterVisit:function(entry_method){return"Complete"===entry_method.config2&&"Complete"===entry_method.config3}}}}])}.call(this),function(){angular.module("App.services").factory("secretConfigService",["translationService","campaignService",function(translationService,campaignService){return{secret_code:{canSubmitForm:function(entry_method){return"good"===campaignService.verifyStatus(entry_method)},continueTooltip:function(entry_method){if(campaignService.continueDisabled(entry_method))switch(campaignService.verifyStatus(entry_method)){case"bad":return entry_method.config7?entry_method.config7:translationService.translate("value_bad_error");case"unique":return entry_method.config8?entry_method.config8:translationService.translate("value_unique_error")}}}}}])}.call(this),function(){angular.module("App.services").factory("shareConfigService",function(){return{share_action:{alwaysRequireContactInfo:!0,alwaysRequireContactInfoFirst:!0}}})}.call(this),function(){angular.module("App.services").factory("soundcloudConfigService",function(){return{soundcloud_choose:{requiresMedia:!0}}})}.call(this),function(){angular.module("App.services").factory("tumblrConfigService",["campaignService",function(campaignService){var canSubmitForm;return canSubmitForm=function(entry_method){var name,ref,state;if(!campaignService.isExpanded(entry_method))return!1;if(!campaignService.entryState.formData[entry_method.id])return!1;ref=campaignService.entryState.formData[entry_method.id];for(name in ref)if(state=ref[name],!state)return!1;return!0},{tumblr_reblog_campaign:{canSubmitForm:canSubmitForm,requiresMedia:!0},tumblr_reblog:{canSubmitForm:function(entry_method){return entry_method.media&&1===entry_method.media.length||canSubmitForm(entry_method)},requiresMedia:!0,enterOnSingleMedia:function(entry_method){return!0}}}}])}.call(this),function(){angular.module("App.services").factory("twitchtvConfigService",["translationService","campaignService",function(translationService,campaignService){return{twitchtv_subscribe:{errorMessage:function(entry_method){return translationService.translate("twitchtv_subscribe_error",{username:entry_method.config2})},displayInformation:function(entry_method){var formData;return formData=campaignService.entryState.formData[entry_method.id],formData===!1?!0:void 0}}}}])}.call(this),function(){angular.module("App.services").factory("twitterConfigService",["campaignService",function(campaignService){var canSubmitForm;return canSubmitForm=function(entry_method){var formData;return formData=campaignService.entryState.formData[entry_method.id],!campaignService.isAuthenticated(entry_method)||entry_method.api_denied||entry_method.not_unique_error?formData&&!!formData.twitter_username&&campaignService.isExpanded(entry_method):!0},{twitter_retweet:{canSubmitForm:canSubmitForm,resetBeforeAuth:!0},twitter_tweet:{canSubmitForm:canSubmitForm,resetBeforeAuth:!0},twitter_hashtags:{canSubmitForm:function(entry_method){var formData;return formData=campaignService.entryState.formData[entry_method.id],campaignService.isExpanded(entry_method)&&(campaignService.isAuthenticated(entry_method)||formData&&!!formData.twitter_username)},resetBeforeAuth:!0},twitter_follow:{canSubmitForm:canSubmitForm,resetBeforeAuth:!0},twitter_media:{requiresMedia:!0,enterOnSingleMedia:function(entry_method){return entry_method.config2&&entry_method.config2.length>0;
}}}}])}.call(this),function(){angular.module("App.services").factory("typeformConfigService",["campaignService",function(campaignService){return{typeform_completed:{alwaysRequireContactInfo:!0,alwaysRequireContactInfoFirst:!0,canSubmitForm:function(entry_method){return campaignService.isExpanded(entry_method)},actionKey:function(entry_method){return entry_method.config2}}}}])}.call(this),function(){angular.module("App.services").factory("uploadConfigService",["campaignService",function(campaignService){return{upload_action:{canSubmitForm:function(entry_method){var formData;return formData=campaignService.entryState.formData[entry_method.id],"1"===entry_method.config5?formData&&formData.url&&formData.text:formData&&formData.url}}}}])}.call(this),function(){angular.module("App.services").factory("youtubeConfigService",["campaignService",function(campaignService){return{youtube_video:{canSubmitForm:function(entry_method){return campaignService.isExpanded(entry_method)&&campaignService.entryState.formData[entry_method.id]&&"good"===campaignService.verifyStatus(entry_method)}}}}])}.call(this),function(){angular.module("App.services").factory("campaignService",function(){return{contestantState:{contestant:{}},choiceState:{},dc:{},initCampaign:function(campaignData){var entryMethod,i,len,ref,results;for(this.campaign=campaignData.campaign,this.incentives=campaignData.incentives,this.entryState=campaignData.entryState,this.entryDetailsState=campaignData.entryDetailsState,this.entry_methods=campaignData.entry_methods,this.entryMethodMap={},ref=this.entry_methods,results=[],i=0,len=ref.length;len>i;i++)entryMethod=ref[i],results.push(this.entryMethodMap[entryMethod.id]=entryMethod);return results},initEditCampaign:function(campaignData){return this.editMode=!0,this.campaign=campaignData.campaign,this.incentives=this.campaign.incentives_attributes,this.entry_methods=this.campaign.entry_methods_attributes,this.lead_capture=this.campaign.lead_capture_attributes},initContestant:function(contestantData){return this.contestantState=contestantData},getEntryMethod:function(entryMethodId){return this.entryMethodMap[entryMethodId]},authenticationCurrent:function(authentication){return"facebook"===authentication.provider.split(/_/)[0]?new Date(authentication.updated_at).getTime()+5184e6>new Date:!0},expiredAuthentication:function(provider){var authentication,i,len,ref;if(this.contestantState.contestant.id)for(ref=this.contestantState.contestant.authentications,i=0,len=ref.length;len>i;i++)if(authentication=ref[i],authentication.provider.split(/_/)[0]===provider&&authentication.expired)return!0;return!1},isAuthenticated:function(entry_method,provider){var authentication,i,len,ref;if(provider||(provider=entry_method.provider),!entry_method.can_authenticate)return!0;if(this.contestantState.contestant.id)for(ref=this.contestantState.contestant.authentications,i=0,len=ref.length;len>i;i++)if(authentication=ref[i],authentication.provider.split(/_/)[0]===provider&&this.authenticationCurrent(authentication)&&!authentication.expired)return!0;return!1},getAuthentication:function(provider){var authentication,i,len,ref;if(this.contestantState.contestant.id)for(ref=this.contestantState.contestant.authentications,i=0,len=ref.length;len>i;i++)if(authentication=ref[i],authentication.provider.split(/_/)[0]===provider&&this.authenticationCurrent(authentication)&&!authentication.expired)return authentication},enoughOptIn:function(entry_method){return"Competition"===this.campaign.campaign_type?!this.campaign.require_opt_in||this.contestantState.contestant.opt_in:!0},actionPerformed:function(entry_method){var a,key;return entry_method.config.actionKey&&(key=entry_method.config.actionKey(entry_method))?(a=(this.contestantState.contestant.actions+","+(Cookies.get("A-"+this.campaign.key)||"")).split(/,/),$.inArray(key,a)>=0):!1},isExpanded:function(entry_method){return this.entryState.expanded===entry_method},verifyStatus:function(entry_method){var value;return value=this.entryState.formData[entry_method.id]+"",entry_method.entry_type.match(/youtube_video|pinterest_choose_board/)||(value=value.toUpperCase()),entry_method.must_verify||entry_method.entry_type.match(/youtube_video|pinterest_choose_board/)?this.entryState.verifyStatus&&this.entryState.verifyStatus[entry_method.id]&&this.entryState.verifyStatus[entry_method.id][value]?this.entryState.verifyStatus[entry_method.id][value]:"unknown":!entry_method.config6||"Ask a question"!==entry_method.method_type&&"Allow question or tracking"!==entry_method.method_type?"good":value.match(new RegExp(entry_method.config6))?"good":"unknown"},isOneMandatory:function(){return"One Mandatory"===this.campaign.workflow},isTimerAction:function(entry_method){return entry_method?entry_method.timer_action||entry_method.config.timerAction&&entry_method.config.timerAction(entry_method):!1},isTimerTriggered:function(entry_method){return entry_method.config.isTimerTriggered?entry_method.config.actionKey&&entry_method.config.actionKey(entry_method)?entry_method.config.isTimerTriggered(entry_method):entry_method.config.isTimerTriggered(entry_method):!0},checkIfTimePassed:function(entry_method){var requiredSeconds;if(!entry_method.timePassed)if(entry_method.config.remainingSeconds){if(entry_method.config.remainingSeconds(entry_method)<1)return entry_method.timePassed=!0}else if(entry_method.config.timerAction&&parseInt(entry_method.config.timerAction(entry_method))>0){if(requiredSeconds=parseInt(entry_method.config.timerAction(entry_method)),requiredSeconds>0&&entry_method.secondsOpen>=requiredSeconds)return entry_method.timePassed=!0}else if(requiredSeconds=parseInt(entry_method.timer_action),requiredSeconds>0&&entry_method.secondsOpen>=requiredSeconds)return entry_method.timePassed=!0},checkAlreadyEntered:function(entry_method,existing_at){var i,len,ref,values;for(ref=this.contestantState.contestant.entered[entry_method.id],i=0,len=ref.length;len>i;i++)if(values=ref[i],parseInt(values.t)===parseInt(existing_at))return!0;return!1},isEntered:function(entry_method){var e;return e=this.contestantState.contestant.entered[entry_method.id],e&&e.length>0},isAllEntered:function(){var entry_method,i,len,ref;for(ref=this.entry_methods,i=0,len=ref.length;len>i;i++)if(entry_method=ref[i],"share_action"!==entry_method.entry_type&&!this.isEntered(entry_method))return!1;return!0},totalEntries:function(){return this.isCampaignEntryLimit()?Math.min(this.campaign.entry_limit,this.campaign.entry_count):this.campaign.entry_count},requireContactInfo:function(entry_method){return"Competition"===this.campaign.campaign_type||entry_method&&entry_method.config.alwaysRequireContactInfo||this.campaign.require_contact_info},enoughUserDetails:function(entry_method){return this.requireContactInfo(entry_method)?this.contestantState.contestant.id&&this.contestantState.contestant.email&&this.contestantState.contestant.name&&(!this.campaign.additional_contestant_details||!!this.contestantState.contestant.completed_details):!0},displayInformationRequired:function(entry_method,resumeAction){var displayRequired;return displayRequired=entry_method.display_information||entry_method.config.displayInformation&&entry_method.config.displayInformation(entry_method),displayRequired&&!entry_method.information_expanded&&!resumeAction},needMoreDetailsBeforeEntry:function(entry_method,resumeAction){return!this.canSubmitEntryForm(entry_method)||!this.enoughUserDetails(entry_method)||!this.enoughOptIn(entry_method)||this.requireContactInfo(entry_method)&&this.contestantState.unconfirmed||this.displayInformationRequired(entry_method,resumeAction)},contestantEntries:function(){var count,entry_method_id,i,len,ref,value,values;count=0,ref=this.contestantState.contestant.entered;for(entry_method_id in ref)for(values=ref[entry_method_id],i=0,len=values.length;len>i;i++)value=values[i],count+=value.w;return count},currentEntries:function(entry_method){var count,i,len,ref,values;if(this.contestantState.contestant.entered[entry_method.id]){for(count=0,ref=this.contestantState.contestant.entered[entry_method.id],i=0,len=ref.length;len>i;i++)values=ref[i],count+=values.w;return count}return 0},timesEntered:function(entry_method){var count,i,len,ref,values;if(count=0,this.contestantState.contestant.entered[entry_method.id])for(ref=this.contestantState.contestant.entered[entry_method.id],i=0,len=ref.length;len>i;i++)values=ref[i],count+=values.c||1;return count},contestantActionTypes:function(){var count,entry_method_id,ref,values;count=0,ref=this.contestantState.contestant.entered;for(entry_method_id in ref)values=ref[entry_method_id],count+=1;return count},lastEntered:function(entry_method){var l;return l=this.contestantState.contestant.entered[entry_method.id],l&&l[l.length-1]?1e3*l[l.length-1].t:null},requiresMandatoryActions:function(){var em,i,len,mandatory,nonMandatoryOrDone,ref;for(mandatory=0,nonMandatoryOrDone=0,ref=this.entry_methods,i=0,len=ref.length;len>i;i++)em=ref[i],em.mandatory&&!this.isEntered(em)&&em.completable?mandatory+=1:nonMandatoryOrDone+=1;return mandatory>0&&mandatory!==this.entry_methods.length},isAllMandatory:function(){var entry_method,i,len,mandatory,ref;for(mandatory=0,ref=this.entry_methods,i=0,len=ref.length;len>i;i++)entry_method=ref[i],entry_method.mandatory&&(mandatory+=1);return mandatory===this.entry_methods.length},entryMethodLimitHit:function(entry_method){return entry_method.limit&&entry_method.limit>0&&this.timesEntered(entry_method)>=entry_method.limit},nextEntryMilliseconds:function(entry_method){var campaignOffsetMS,fakeCampaignTime,fakeUtcTime,last,localOffsetMS,locallyAdjustedNextEntryTime,nextEntryFakeCampaignTime;return 0===entry_method.interval_seconds||1===this.campaign.time_zone_offset_seconds?0:(last=this.lastEntered(entry_method),last?(campaignOffsetMS=1e3*this.campaign.time_zone_offset_seconds,localOffsetMS=6e4*(new Date).getTimezoneOffset(),fakeUtcTime=new Date((new Date).getTime()+localOffsetMS),fakeCampaignTime=new Date(fakeUtcTime.getTime()+campaignOffsetMS),3600===entry_method.interval_seconds?nextEntryFakeCampaignTime=new Date(fakeCampaignTime.setMinutes(0,0,0,0)):86400===entry_method.interval_seconds&&(nextEntryFakeCampaignTime=new Date(fakeCampaignTime.setHours(0,0,0,0))),locallyAdjustedNextEntryTime=new Date(nextEntryFakeCampaignTime-localOffsetMS-campaignOffsetMS),last>locallyAdjustedNextEntryTime.getTime()?locallyAdjustedNextEntryTime.getTime()+1e3*entry_method.interval_seconds-(new Date).getTime():0):0)},hasTimeToEnterAgain:function(entry_method){return 0===entry_method.interval_seconds?!1:this.nextEntryMilliseconds(entry_method)<1e3*this.campaign.ends_at-(new Date).getTime()},canEnter:function(entry_method){var last;return entry_method.actions_required>0&&this.contestantActionTypes()<entry_method.actions_required?!1:!entry_method.mandatory&&this.requiresMandatoryActions()?!1:this.entryMethodLimitHit(entry_method)?!1:entry_method.completable?entry_method.interval_seconds>0?(last=this.lastEntered(entry_method),!last||this.nextEntryMilliseconds(entry_method)<=0):!this.isEntered(entry_method):!0},cantEnterAgain:function(entry_method){return this.isEntered(entry_method)&&!this.canEnter(entry_method)},hasEntryDetails:function(entry_method){if(this.cantEnterAgain(entry_method)||Cookies.get("D-"+entry_method.id))return!0;switch(entry_method.entry_type){case"custom_action":return this.entryDetailsState[entry_method.id]?!0:entry_method.config.actionKey(entry_method)?this.actionPerformed(entry_method):!1;default:return!!this.entryDetailsState[entry_method.id]}},enoughAuth:function(entry_method){return entry_method.auth_for_details&&this.isAuthenticated(entry_method)},enoughEntryDetails:function(entry_method){return entry_method?entry_method.api_fallback&&this.isAuthenticated(entry_method)?!0:entry_method.api_denied&&!this.isExpanded(entry_method)?this.hasEntryDetails(entry_method):entry_method.requires_details?this.enoughAuth(entry_method)?!0:this.hasEntryDetails(entry_method):!0:!0},canSubmitEntryForm:function(entry_method){var result;return result=null,entry_method.config.canSubmitForm&&(result=entry_method.config.canSubmitForm(entry_method)),null===result?this.isTimerAction(entry_method)&&!entry_method.timePassed?!1:this.entryState.formData[entry_method.id]||this.enoughEntryDetails(entry_method):result},verifiedAuth:function(){var a,i,j,len,len1,p,ref,ref1;for(ref=this.contestantState.contestant.authentications,i=0,len=ref.length;len>i;i++)for(a=ref[i],ref1=this.campaign.verified_login_providers,j=0,len1=ref1.length;len1>j;j++)if(p=ref1[j],a.provider===p)return!0;return!1},startDate:function(){return new Date(1e3*this.campaign.starts_at)},endDate:function(){return new Date(1e3*this.campaign.ends_at)},isStarted:function(){return new Date>this.startDate()},isFinished:function(){return this.campaign.finished||new Date>this.endDate()},isRunning:function(){return this.isStarted()&&!this.isFinished()&&!this.campaign.paused},isCampaignEntryLimit:function(){return 0!==this.campaign.entry_limit},manyEntries:function(){return this.campaign.entry_count>2e3},isCompleted:function(){return this.isOneMandatory()&&this.isAllMandatory()&&this.contestantEntries()>0},continueDisabled:function(entry_method){var result;return entry_method.config.continueDisabled&&(result=entry_method.config.continueDisabled(entry_method),"undefined"!=typeof result)?result:!this.canSubmitEntryForm(entry_method)},useVisitCookie:function(entry_method){return"download_app"!==entry_method.entry_type&&"typeform_completed"!==entry_method.entry_type&&"linkedin_follow"!==entry_method.entry_type&&"linkedin_share"!==entry_method.entry_type&&"pinterest_enter"!==entry_method.entry_type&&!entry_method.entry_type.match(/_visit/)&&entry_method.config4},hasCustom:function(key){return!!this.campaign.messages[key]},socialLoginRequired:function(){var authentications,i,j,len,len1,login_provider,ref,ref1;if(this.campaign.login_types&&0!==this.campaign.login_types.length&&this.campaign.login_first){for(ref=this.campaign.login_types,i=0,len=ref.length;len>i;i++){if(login_provider=ref[i],"email"===login_provider)return!1;for(ref1=this.contestantState.contestant.authentications||[],j=0,len1=ref1.length;len1>j;j++)if(authentications=ref1[j],authentications.provider===login_provider)return!1}return!0}return!1},requiresInitialLogin:function(){return this.socialLoginRequired()||(this.campaign.login_first||this.contestantState.emailLogin)&&!this.enoughUserDetails()},bestCouponCode:function(){var all_claims,claims;return this.contestantState?(all_claims=this.contestantState.contestant.claims,all_claims?(claims=all_claims[this.incentives[0].id],claims?claims[claims.length-1]:null):void 0):null},showPromotionEnded:function(){return this.isFinished()&&!this.bestCouponCode()},showPromotionStartsIn:function(){return!this.isStarted()&&!this.isTestMode()},isTestMode:function(){return!this.isStarted()&&this.contestantState.campaignManager},isReward:function(){return"Reward"===this.campaign.campaign_type},actionsStillNeededToUnlockReward:function(){return this.incentives[0].actions_required-this.contestantActionTypes()},entryMethodColor:function(entry_method){return entry_method.unlocked_icon_color!==entry_method.normal_icon_color&&"custom_action"===entry_method.entry_type&&(this.isEntered(entry_method)||this.canEnter(entry_method))&&this.enoughEntryDetails(entry_method)?entry_method.unlocked_icon_color||entry_method.normal_icon_color:entry_method.normal_icon_color},removerColor:function(){return"Floating"===this.campaign.theme?this.campaign.overlay_text_color||"white":""},multipleCodes:function(){return!(!this.incentives[0].data||!(this.incentives[0].data+"").strip().match(/[,\n ]/))},files:function(entry_method){var v;return v=this.entryState.files[entry_method.id],v?[v]:[]},isChoiceSelected:function(entry_method,imageSrc){return entry_method.workflow?this.choiceState[entry_method.id]&&this.choiceState[entry_method.id].indexOf(imageSrc)>=0:this.choiceState[entry_method.id]===imageSrc},landingPage:function(){return"Gleam"===this.campaign.stand_alone_option?this.campaign.stand_alone_url:this.campaign.landing_page_override},choices:function(entry_method){return entry_method.config5.strip().split(/\s*\n\s*/).getUnique()}}})}.call(this),function(){angular.module("App.services").factory("mediaService",["$http","facebookLoginService",function($http,facebookLoginService){return{getMedia:function(entry_method,options){var provider;return provider=options.provider||entry_method.entry_type.split("_")[0],$http.get("/get-media/"+entry_method.id+"/"+provider).success(function(data,status,headers,config){return"AuthExpired"===data?options.authExpired(data):"AccountPrivate"===data?options.accountPrivate(data):options.success(data)}).error(function(data,status,headers,config){return options.error(data)})},getFacebookMedia:function(entry_method,permissions,options){var allowed,handleResponse,hasMediaPermissions,includesTags,result,withAccess;return result=[],hasMediaPermissions=function(){return permissions&&permissions.user_photos&&permissions.user_videos&&(!window.facebookAppId.match(/520916077950649|152351391599356/)||permissions.user_status)},withAccess=function(allowed){return hasMediaPermissions()?allowed.call(this,permissions):FB.login(function(response){return"connected"===response.status?(options.login.call(this,response),FB.api("/me/permissions?fields=permission,status",function(data){return permissions=facebookLoginService.parsePermissions(data),hasMediaPermissions()?allowed.call(this,permissions):options.denied.call(this,permissions)})):options.denied.call(this,{})},{auth_type:"rerequest",scope:"user_photos,user_videos,user_status",return_scopes:!0})},includesTags=function(media,tags){var caption,i,len,not_tagged,ref,tag;for(not_tagged=!1,caption=media.description||media.name,caption&&(caption=caption.toLowerCase()),ref=tags.split(/\s*,\s*/),i=0,len=ref.length;len>i;i++)if(tag=ref[i],tag&&(tag="#"+tag.replace(/^#/,"").toLowerCase()),tag&&(!caption||caption.indexOf(tag)<0)){not_tagged=!0;break}return!not_tagged},handleResponse=function(response){var i,len,media,ref,results;for(ref=response.data,results=[],i=0,len=ref.length;len>i&&(media=ref[i],!(result.length>20));i++)entry_method.config4?includesTags(media,entry_method.config4)?results.push(result.push(media)):results.push(void 0):results.push(result.push(media));return results},allowed=function(permissions){var common_fields,video_fields;return common_fields="id,picture,images,from,created_time,source",video_fields=common_fields+",description,embed_html",FB.api("/me/videos?limit=5&type=uploaded&fields="+video_fields,function(response){var photo_fields;return handleResponse(response),photo_fields=common_fields+",name,link",FB.api("/me/photos?limit=100&type=uploaded&fields="+photo_fields,function(response){return handleResponse(response),options.success(result)})})},hasMediaPermissions()?allowed.call():withAccess(allowed)}}}])}.call(this),function(){angular.module("App.services").factory("trackingPixelService",["$http","facebookLoginService",function($http,facebookLoginService){var replaceTokens,track;return replaceTokens=function(src,entryMethod){return src.replace(/###ID###/gi,entryMethod.id).replace(/###TYPE###/gi,entryMethod.entry_type).replace(/###PROVIDER###/gi,entryMethod.provider)},track=function(srcs,entryMethod){var i,len,replacedSrc,results,src;if(null==entryMethod&&(entryMethod=null),srcs){for(results=[],i=0,len=srcs.length;len>i;i++)src=srcs[i],replacedSrc=entryMethod?replaceTokens(src,entryMethod):src,results.push($("<img/>").attr("src",replacedSrc));return results}},{trackAction:function(entryMethod,config,firstAction){return config?(firstAction&&track(config["default"],entryMethod),track(config[entryMethod.id]),track(config.all)):void 0},onLoad:function(config){return config?track(config.load):void 0}}}])}.call(this),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dialog","ui.bootstrap.dropdownToggle","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.position","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/dialog/message.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/rating/rating.html","template/tabs/pane.html","template/tabs/tabs.html","template/typeahead/typeahead.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(t,e,n){function o(t){for(var e in t)if(void 0!==i.style[e])return t[e]}var a=function(o,i,r){r=r||{};var l=t.defer(),s=a[r.animation?"animationEndEventName":"transitionEndEventName"],c=function(){n.$apply(function(){o.unbind(s,c),l.resolve(o)})};return s&&o.bind(s,c),e(function(){angular.isString(i)?o.addClass(i):angular.isFunction(i)?i(o):angular.isObject(i)&&o.css(i),s||l.resolve(o)}),l.promise.cancel=function(){s&&o.unbind(s,c),l.reject("Transition cancelled")},l.promise},i=document.createElement("trans"),r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},l={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return a.transitionEndEventName=o(r),a.animationEndEventName=o(l),a}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(t){var e=function(t,e,n){e.removeClass("collapse"),e.css({height:n}),e[0].offsetWidth,e.addClass("collapse")};return{link:function(n,o,a){var i,r=!0;n.$watch(function(){return o[0].scrollHeight},function(){0!==o[0].scrollHeight&&(i||(r?e(n,o,o[0].scrollHeight+"px"):e(n,o,"auto")))}),n.$watch(a.collapse,function(t){t?u():c()});var l,s=function(e){return l&&l.cancel(),l=t(o,e),l.then(function(){l=void 0},function(){l=void 0}),l},c=function(){r?(r=!1,i||e(n,o,"auto")):s({height:o[0].scrollHeight+"px"}).then(function(){i||e(n,o,"auto")}),i=!1},u=function(){i=!0,r?(r=!1,e(n,o,0)):(e(n,o,o[0].scrollHeight+"px"),s({height:"0"}))}}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(t,e,n){this.groups=[],this.closeOthers=function(o){var a=angular.isDefined(e.closeOthers)?t.$eval(e.closeOthers):n.closeOthers;a&&angular.forEach(this.groups,function(t){t!==o&&(t.isOpen=!1)})},this.addGroup=function(t){var e=this;this.groups.push(t),t.$on("$destroy",function(){e.removeGroup(t)})},this.removeGroup=function(t){var e=this.groups.indexOf(t);-1!==e&&this.groups.splice(this.groups.indexOf(t),1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",["$parse","$transition","$timeout",function(t){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@"},controller:["$scope",function(){this.setHeading=function(t){this.heading=t}}],link:function(e,n,o,a){var i,r;a.addGroup(e),e.isOpen=!1,o.isOpen&&(i=t(o.isOpen),r=i.assign,e.$watch(function(){return i(e.$parent)},function(t){e.isOpen=t}),e.isOpen=i?i(e.$parent):!1),e.$watch("isOpen",function(t){t&&a.closeOthers(e),r&&r(e.$parent,t)})}}}]).directive("accordionHeading",function(){return{restrict:"E",transclude:!0,template:"",replace:!0,require:"^accordionGroup",compile:function(t,e,n){return function(t,e,o,a){a.setHeading(n(t,function(){}))}}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(t,e,n,o){t.$watch(function(){return o[n.accordionTransclude]},function(t){t&&(e.html(""),e.append(t))})}}}),angular.module("ui.bootstrap.alert",[]).directive("alert",function(){return{restrict:"EA",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"=",close:"&"},link:function(t,e,n){t.closeable="close"in n}}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).directive("btnRadio",["buttonConfig",function(t){var e=t.activeClass||"active",n=t.toggleEvent||"click";return{require:"ngModel",link:function(t,o,a,i){var r=t.$eval(a.btnRadio);t.$watch(function(){return i.$modelValue},function(t){angular.equals(t,r)?o.addClass(e):o.removeClass(e)}),o.bind(n,function(){o.hasClass(e)||t.$apply(function(){i.$setViewValue(r)})})}}}]).directive("btnCheckbox",["buttonConfig",function(t){var e=t.activeClass||"active",n=t.toggleEvent||"click";return{require:"ngModel",link:function(t,o,a,i){var r=t.$eval(a.btnCheckboxTrue),l=t.$eval(a.btnCheckboxFalse);r=angular.isDefined(r)?r:!0,l=angular.isDefined(l)?l:!1,t.$watch(function(){return i.$modelValue},function(t){angular.equals(t,r)?o.addClass(e):o.removeClass(e)}),o.bind(n,function(){t.$apply(function(){i.$setViewValue(o.hasClass(e)?l:r)})})}}}]),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$q",function(t,e,n){function o(){function n(){i?(t.next(),o()):t.pause()}a&&e.cancel(a);var r=+t.interval;!isNaN(r)&&r>=0&&(a=e(n,r))}var a,i,r=this,l=r.slides=[],s=-1;r.currentSlide=null,r.select=function(a,i){function c(){r.currentSlide&&angular.isString(i)&&!t.noTransition&&a.$element?(a.$element.addClass(i),a.$element[0].offsetWidth=a.$element[0].offsetWidth,angular.forEach(l,function(t){angular.extend(t,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(a,{direction:i,active:!0,entering:!0}),angular.extend(r.currentSlide||{},{direction:i,leaving:!0}),t.$currentTransition=n(a.$element,{}),function(e,n){t.$currentTransition.then(function(){u(e,n)},function(){u(e,n)})}(a,r.currentSlide)):u(a,r.currentSlide),r.currentSlide=a,s=p,o()}function u(e,n){angular.extend(e,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(n||{},{direction:"",active:!1,leaving:!1,entering:!1}),t.$currentTransition=null}var p=l.indexOf(a);void 0===i&&(i=p>s?"next":"prev"),a&&a!==r.currentSlide&&(t.$currentTransition?(t.$currentTransition.cancel(),e(c)):c())},r.indexOfSlide=function(t){return l.indexOf(t)},t.next=function(){var t=(s+1)%l.length;return r.select(l[t],"next")},t.prev=function(){var t=0>s-1?l.length-1:s-1;return r.select(l[t],"prev")},t.select=function(t){r.select(t)},t.isActive=function(t){return r.currentSlide===t},t.slides=function(){return l},t.$watch("interval",o),t.play=function(){i||(i=!0,o())},t.pause=function(){i=!1,a&&e.cancel(a)},r.addSlide=function(e,n){e.$element=n,l.push(e),1===l.length||e.active?(r.select(l[l.length-1]),1==l.length&&t.play()):e.active=!1},r.removeSlide=function(t){var e=l.indexOf(t);l.splice(e,1),l.length>0&&t.active&&(e>=l.length?r.select(l[e-1]):r.select(l[e]))}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"="}}}]).directive("slide",[function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"="},link:function(t,e,n,o){o.addSlide(t,e),t.$on("$destroy",function(){o.removeSlide(t)}),t.$watch("active",function(e){e&&o.select(t)})}}}]);var dialogModule=angular.module("ui.bootstrap.dialog",["ui.bootstrap.transition"]);dialogModule.controller("MessageBoxController",["$scope","dialog","model",function(t,e,n){t.title=n.title,t.message=n.message,t.buttons=n.buttons,t.close=function(t){e.close(t)}}]),dialogModule.provider("$dialog",function(){var t={backdrop:!0,dialogClass:"modal",backdropClass:"modal-backdrop",transitionClass:"fade",triggerClass:"in",dialogOpenClass:"modal-open",resolve:{},backdropFade:!1,dialogFade:!1,keyboard:!0,backdropClick:!0},e={},n={value:0};this.options=function(t){e=t},this.$get=["$http","$document","$compile","$rootScope","$controller","$templateCache","$q","$transition","$injector",function(o,a,i,r,l,s,c,u,p){function d(t){var e=angular.element("<div>");return e.addClass(t),e}function f(n){var o=this,a=this.options=angular.extend({},t,e,n);this._open=!1,this.backdropEl=d(a.backdropClass),a.backdropFade&&(this.backdropEl.addClass(a.transitionClass),this.backdropEl.removeClass(a.triggerClass)),this.modalEl=d(a.dialogClass),a.dialogFade&&(this.modalEl.addClass(a.transitionClass),this.modalEl.removeClass(a.triggerClass)),this.handledEscapeKey=function(t){27===t.which&&(o.close(),t.preventDefault(),o.$scope.$apply())},this.handleBackDropClick=function(t){o.close(),t.preventDefault(),o.$scope.$apply()},this.handleLocationChange=function(){o.close()}}var g=a.find("body");return f.prototype.isOpen=function(){return this._open},f.prototype.open=function(t,e){var n=this,o=this.options;if(t&&(o.templateUrl=t),e&&(o.controller=e),!o.template&&!o.templateUrl)throw Error("Dialog.open expected template or templateUrl, neither found. Use options or open method to specify them.");return this._loadResolves().then(function(t){var e=t.$scope=n.$scope=t.$scope?t.$scope:r.$new();if(n.modalEl.html(t.$template),n.options.controller){var o=l(n.options.controller,t);n.modalEl.children().data("ngControllerController",o)}i(n.modalEl)(e),n._addElementsToDom(),g.addClass(n.options.dialogOpenClass),setTimeout(function(){n.options.dialogFade&&n.modalEl.addClass(n.options.triggerClass),n.options.backdropFade&&n.backdropEl.addClass(n.options.triggerClass)}),n._bindEvents()}),this.deferred=c.defer(),this.deferred.promise},f.prototype.close=function(t){function e(t){t.removeClass(o.options.triggerClass)}function n(){o._open&&o._onCloseComplete(t)}var o=this,a=this._getFadingElements();if(g.removeClass(o.options.dialogOpenClass),a.length>0)for(var i=a.length-1;i>=0;i--)u(a[i],e).then(n);else this._onCloseComplete(t)},f.prototype._getFadingElements=function(){var t=[];return this.options.dialogFade&&t.push(this.modalEl),this.options.backdropFade&&t.push(this.backdropEl),t},f.prototype._bindEvents=function(){this.options.keyboard&&g.bind("keydown",this.handledEscapeKey),this.options.backdrop&&this.options.backdropClick&&this.backdropEl.bind("click",this.handleBackDropClick),this.$scope.$on("$locationChangeSuccess",this.handleLocationChange)},f.prototype._unbindEvents=function(){this.options.keyboard&&g.unbind("keydown",this.handledEscapeKey),this.options.backdrop&&this.options.backdropClick&&this.backdropEl.unbind("click",this.handleBackDropClick)},f.prototype._onCloseComplete=function(t){this._removeElementsFromDom(),this._unbindEvents(),this.deferred.resolve(t)},f.prototype._addElementsToDom=function(){g.append(this.modalEl),this.options.backdrop&&(0===n.value&&g.append(this.backdropEl),n.value++),this._open=!0},f.prototype._removeElementsFromDom=function(){this.modalEl.remove(),this.options.backdrop&&(n.value--,0===n.value&&this.backdropEl.remove()),this._open=!1},f.prototype._loadResolves=function(){var t,e=[],n=[],a=this;return this.options.template?t=c.when(this.options.template):this.options.templateUrl&&(t=o.get(this.options.templateUrl,{cache:s}).then(function(t){return t.data})),angular.forEach(this.options.resolve||[],function(t,o){n.push(o),e.push(angular.isString(t)?p.get(t):p.invoke(t))}),n.push("$template"),e.push(t),c.all(e).then(function(t){var e={};return angular.forEach(t,function(t,o){e[n[o]]=t}),e.dialog=a,e})},{dialog:function(t){return new f(t)},messageBox:function(t,e,n){return new f({templateUrl:"template/dialog/message.html",controller:"MessageBoxController",resolve:{model:function(){return{title:t,message:e,buttons:n}}}})}}}]}),angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location","$window",function(t){var e=null,n=angular.noop;return{restrict:"CA",link:function(o,a){o.$watch("$location.path",function(){n()}),a.parent().bind("click",function(){n()}),a.bind("click",function(o){o.preventDefault(),o.stopPropagation();var i=a===e;e&&n(),i||(a.parent().addClass("open"),e=a,n=function(o){o&&(o.preventDefault(),o.stopPropagation()),t.unbind("click",n),a.parent().removeClass("open"),n=angular.noop,e=null},t.bind("click",n))})}}}]),angular.module("ui.bootstrap.modal",["ui.bootstrap.dialog"]).directive("modal",["$parse","$dialog",function(t,e){
return{restrict:"EA",terminal:!0,link:function(n,o,a){var i,r=angular.extend({},n.$eval(a.uiOptions||a.bsOptions||a.options)),l=a.modal||a.show;r=angular.extend(r,{template:o.html(),resolve:{$scope:function(){return n}}});var s=e.dialog(r);o.remove(),i=a.close?function(){t(a.close)(n)}:function(){angular.isFunction(t(l).assign)&&t(l).assign(n,!1)},n.$watch(l,function(t){t?s.open().then(function(){i()}):s.isOpen()&&s.close()})}}}]),angular.module("ui.bootstrap.pagination",[]).constant("paginationConfig",{boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last"}).directive("pagination",["paginationConfig",function(t){return{restrict:"EA",scope:{numPages:"=",currentPage:"=",maxSize:"=",onSelectPage:"&"},templateUrl:"template/pagination/pagination.html",replace:!0,link:function(e,n,o){function a(t,e,n,o){return{number:t,text:e,active:n,disabled:o}}var i=angular.isDefined(o.boundaryLinks)?e.$eval(o.boundaryLinks):t.boundaryLinks,r=angular.isDefined(o.directionLinks)?e.$eval(o.directionLinks):t.directionLinks,l=angular.isDefined(o.firstText)?o.firstText:t.firstText,s=angular.isDefined(o.previousText)?o.previousText:t.previousText,c=angular.isDefined(o.nextText)?o.nextText:t.nextText,u=angular.isDefined(o.lastText)?o.lastText:t.lastText;e.$watch("numPages + currentPage + maxSize",function(){e.pages=[];var t=1,n=e.numPages;e.maxSize&&e.maxSize<e.numPages&&(t=Math.max(e.currentPage-Math.floor(e.maxSize/2),1),n=t+e.maxSize-1,n>e.numPages&&(n=e.numPages,t=n-e.maxSize+1));for(var o=t;n>=o;o++){var p=a(o,o,e.isActive(o),!1);e.pages.push(p)}if(r){var d=a(e.currentPage-1,s,!1,e.noPrevious());e.pages.unshift(d);var f=a(e.currentPage+1,c,!1,e.noNext());e.pages.push(f)}if(i){var g=a(1,l,!1,e.noPrevious());e.pages.unshift(g);var m=a(e.numPages,u,!1,e.noNext());e.pages.push(m)}e.currentPage>e.numPages&&e.selectPage(e.numPages)}),e.noPrevious=function(){return 1===e.currentPage},e.noNext=function(){return e.currentPage===e.numPages},e.isActive=function(t){return e.currentPage===t},e.selectPage=function(t){!e.isActive(t)&&t>0&&e.numPages>=t&&(e.currentPage=t,e.onSelectPage({page:t}))}}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(t,e){function n(t,n){return t.currentStyle?t.currentStyle[n]:e.getComputedStyle?e.getComputedStyle(t)[n]:t.style[n]}function o(t){return"static"===(n(t,"position")||"static")}var a=function(e){for(var n=t[0],a=e.offsetParent||n;a&&a!==n&&o(a);)a=a.offsetParent;return a||n};return{position:function(e){var n=this.offset(e),o={top:0,left:0},i=a(e[0]);return i!=t[0]&&(o=this.offset(angular.element(i)),o.top+=i.clientTop,o.left+=i.clientLeft),{width:e.prop("offsetWidth"),height:e.prop("offsetHeight"),top:n.top-o.top,left:n.left-o.left}},offset:function(n){var o=n[0].getBoundingClientRect();return{width:n.prop("offsetWidth"),height:n.prop("offsetHeight"),top:o.top+(e.pageYOffset||t[0].body.scrollTop),left:o.left+(e.pageXOffset||t[0].body.scrollLeft)}}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position"]).provider("$tooltip",function(){function t(t){var e=/[A-Z]/g,n="-";return t.replace(e,function(t,e){return(e?n:"")+t.toLowerCase()})}var e={placement:"top",animation:!0,popupDelay:0},n={mouseenter:"mouseleave",click:"click",focus:"blur"},o={};this.options=function(t){angular.extend(o,t)},this.$get=["$window","$compile","$timeout","$parse","$document","$position",function(a,i,r,l,s,c){return function(a,u,p){function d(t){var e,o;return e=t||f.trigger||p,o=angular.isDefined(f.trigger)?n[f.trigger]||e:n[e]||e,{show:e,hide:o}}var f=angular.extend({},e,o),g=t(a),m=d(void 0),h="<"+g+'-popup title="{{tt_title}}" content="{{tt_content}}" placement="{{tt_placement}}" animation="tt_animation()" is-open="tt_isOpen"></'+g+"-popup>";return{restrict:"EA",scope:!0,link:function(t,e,n){function o(){t.tt_isOpen?g():p()}function p(){t.tt_popupDelay?y=r(v,t.tt_popupDelay):t.$apply(v)}function g(){t.$apply(function(){b()})}function v(){var n,o,a,i;if(t.tt_content){switch($&&r.cancel($),C.css({top:0,left:0,display:"block"}),f.appendToBody?(k=k||s.find("body"),k.append(C)):e.after(C),n=c.position(e),o=C.prop("offsetWidth"),a=C.prop("offsetHeight"),t.tt_placement){case"right":i={top:n.top+n.height/2-a/2+"px",left:n.left+n.width+"px"};break;case"bottom":i={top:n.top+n.height+"px",left:n.left+n.width/2-o/2+"px"};break;case"left":i={top:n.top+n.height/2-a/2+"px",left:n.left-o+"px"};break;default:i={top:n.top-a+"px",left:n.left+n.width/2-o/2+"px"}}C.css(i),t.tt_isOpen=!0}}function b(){t.tt_isOpen=!1,r.cancel(y),angular.isDefined(t.tt_animation)&&t.tt_animation()?$=r(function(){C.remove()},500):C.remove()}var $,y,k,C=i(h)(t);t.tt_isOpen=!1,n.$observe(a,function(e){t.tt_content=e}),n.$observe(u+"Title",function(e){t.tt_title=e}),n.$observe(u+"Placement",function(e){t.tt_placement=angular.isDefined(e)?e:f.placement}),n.$observe(u+"Animation",function(e){t.tt_animation=angular.isDefined(e)?l(e):function(){return f.animation}}),n.$observe(u+"PopupDelay",function(e){var n=parseInt(e,10);t.tt_popupDelay=isNaN(n)?f.popupDelay:n}),n.$observe(u+"Trigger",function(t){e.unbind(m.show),e.unbind(m.hide),m=d(t),m.show===m.hide?e.bind(m.show,o):(e.bind(m.show,p),e.bind(m.hide,g))})}}}}]}).directive("tooltipPopup",function(){return{restrict:"E",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(t){return t("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"E",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(t){return t("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$compile","$timeout","$parse","$window","$tooltip",function(t,e,n,o,a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",["ui.bootstrap.transition"]).constant("progressConfig",{animate:!0,autoType:!1,stackedTypes:["success","info","warning","danger"]}).controller("ProgressBarController",["$scope","$attrs","progressConfig",function(t,e,n){function o(t){return r[t]}var a=angular.isDefined(e.animate)?t.$eval(e.animate):n.animate,i=angular.isDefined(e.autoType)?t.$eval(e.autoType):n.autoType,r=angular.isDefined(e.stackedTypes)?t.$eval("["+e.stackedTypes+"]"):n.stackedTypes;this.makeBar=function(t,e,n){var r=angular.isObject(t)?t.value:t||0,l=angular.isObject(e)?e.value:e||0,s=angular.isObject(t)&&angular.isDefined(t.type)?t.type:i?o(n||0):null;return{from:l,to:r,type:s,animate:a}},this.addBar=function(e){t.bars.push(e),t.totalPercent+=e.to},this.clearBars=function(){t.bars=[],t.totalPercent=0},this.clearBars()}]).directive("progress",function(){return{restrict:"EA",replace:!0,controller:"ProgressBarController",scope:{value:"=",onFull:"&",onEmpty:"&"},templateUrl:"template/progressbar/progress.html",link:function(t,e,n,o){t.$watch("value",function(t,e){if(o.clearBars(),angular.isArray(t))for(var n=0,a=t.length;a>n;n++)o.addBar(o.makeBar(t[n],e[n],n));else o.addBar(o.makeBar(t,e))},!0),t.$watch("totalPercent",function(e){e>=100?t.onFull():0>=e&&t.onEmpty()},!0)}}}).directive("progressbar",["$transition",function(t){return{restrict:"EA",replace:!0,scope:{width:"=",old:"=",type:"=",animate:"="},templateUrl:"template/progressbar/bar.html",link:function(e,n){e.$watch("width",function(o){e.animate?(n.css("width",e.old+"%"),t(n,{width:o+"%"})):n.css("width",o+"%")})}}}]),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5}).directive("rating",["ratingConfig","$parse",function(t,e){return{restrict:"EA",scope:{value:"="},templateUrl:"template/rating/rating.html",replace:!0,link:function(n,o,a){var i=angular.isDefined(a.max)?n.$eval(a.max):t.max;n.range=[];for(var r=1;i>=r;r++)n.range.push(r);n.rate=function(t){n.readonly||(n.value=t)},n.enter=function(t){n.readonly||(n.val=t)},n.reset=function(){n.val=angular.copy(n.value)},n.reset(),n.$watch("value",function(t){n.val=t}),n.readonly=!1,a.readonly&&n.$parent.$watch(e(a.readonly),function(t){n.readonly=!!t})}}}]),angular.module("ui.bootstrap.tabs",[]).controller("TabsController",["$scope","$element",function(t){var e=t.panes=[];this.select=t.select=function(t){angular.forEach(e,function(t){t.selected=!1}),t.selected=!0},this.addPane=function(n){e.length||t.select(n),e.push(n)},this.removePane=function(n){var o=e.indexOf(n);e.splice(o,1),n.selected&&e.length>0&&t.select(e[e.length>o?o:o-1])}}]).directive("tabs",function(){return{restrict:"EA",transclude:!0,scope:{},controller:"TabsController",templateUrl:"template/tabs/tabs.html",replace:!0}}).directive("pane",["$parse",function(t){return{require:"^tabs",restrict:"EA",transclude:!0,scope:{heading:"@"},link:function(e,n,o,a){var i,r;e.selected=!1,o.active&&(i=t(o.active),r=i.assign,e.$watch(function(){return i(e.$parent)},function(t){e.selected=t}),e.selected=i?i(e.$parent):!1),e.$watch("selected",function(t){t&&a.select(e),r&&r(e.$parent,t)}),a.addPane(e),e.$on("$destroy",function(){a.removePane(e)})},templateUrl:"template/tabs/pane.html",replace:!0}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position"]).factory("typeaheadParser",["$parse",function(t){var e=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(n){var o=n.match(e);if(!o)throw Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+n+"'.");return{itemName:o[3],source:t(o[4]),viewMapper:t(o[2]||o[1]),modelMapper:t(o[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$document","$position","typeaheadParser",function(t,e,n,o,a,i){var r=[9,13,27,38,40];return{require:"ngModel",link:function(l,s,c,u){var p,d=l.$eval(c.typeaheadMinLength)||1,f=i.parse(c.typeahead),g=l.$eval(c.typeaheadEditable)!==!1,m=e(c.typeaheadLoading).assign||angular.noop,h=angular.element("<typeahead-popup matches='matches' active='activeIdx' select='select(activeIdx)' query='query' position='position'></typeahead-popup>"),v=l.$new();l.$on("$destroy",function(){v.$destroy()});var b=function(){v.matches=[],v.activeIdx=-1},$=function(t){var e={$viewValue:t};m(l,!0),n.when(f.source(v,e)).then(function(n){if(t===u.$viewValue){if(n.length>0){v.activeIdx=0,v.matches.length=0;for(var o=0;n.length>o;o++)e[f.itemName]=n[o],v.matches.push({label:f.viewMapper(v,e),model:n[o]});v.query=t,v.position=a.position(s),v.position.top=v.position.top+s.prop("offsetHeight")}else b();m(l,!1)}},function(){b(),m(l,!1)})};b(),v.query=void 0,u.$parsers.push(function(t){return b(),p?t:(t&&t.length>=d&&$(t),g?t:void 0)}),u.$render=function(){var t={};t[f.itemName]=p||u.$viewValue,s.val(f.viewMapper(v,t)||u.$viewValue),p=void 0},v.select=function(t){var e={};e[f.itemName]=p=v.matches[t].model,u.$setViewValue(f.modelMapper(v,e)),u.$render()},s.bind("keydown",function(t){0!==v.matches.length&&-1!==r.indexOf(t.which)&&(t.preventDefault(),40===t.which?(v.activeIdx=(v.activeIdx+1)%v.matches.length,v.$digest()):38===t.which?(v.activeIdx=(v.activeIdx?v.activeIdx:v.matches.length)-1,v.$digest()):13===t.which||9===t.which?v.$apply(function(){v.select(v.activeIdx)}):27===t.which&&(t.stopPropagation(),b(),v.$digest()))}),o.bind("click",function(){b(),v.$digest()}),s.after(t(h)(v))}}}]).directive("typeaheadPopup",function(){return{restrict:"E",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead.html",link:function(t){t.isOpen=function(){return t.matches.length>0},t.isActive=function(e){return t.active==e},t.selectActive=function(e){t.active=e},t.selectMatch=function(e){t.select({activeIdx:e})}}}}).filter("typeaheadHighlight",function(){function t(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(e,n){return n?e.replace(RegExp(t(n),"gi"),"<strong>$&</strong>"):n}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(t){t.put("template/accordion/accordion-group.html",'<div class="accordion-group">\n  <div class="accordion-heading" ><a class="accordion-toggle" ng-click="isOpen = !isOpen" accordion-transclude="heading">{{heading}}</a></div>\n  <div class="accordion-body" collapse="!isOpen">\n    <div class="accordion-inner" ng-transclude></div>  </div>\n</div>')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(t){t.put("template/accordion/accordion.html",'<div class="accordion" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(t){t.put("template/alert/alert.html","<div class='alert' ng-class='type && \"alert-\" + type'>\n    <button ng-show='closeable' type='button' class='close' ng-click='close()'>&times;</button>\n    <div ng-transclude></div>\n</div>\n")}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(t){t.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel">\n    <ol class="carousel-indicators" ng-show="slides().length > 1">\n        <li ng-repeat="slide in slides()" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a ng-click="prev()" class="carousel-control left" ng-show="slides().length > 1">&lsaquo;</a>\n    <a ng-click="next()" class="carousel-control right" ng-show="slides().length > 1">&rsaquo;</a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(t){t.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item\" ng-transclude></div>\n")}]),angular.module("template/dialog/message.html",[]).run(["$templateCache",function(t){t.put("template/dialog/message.html",'<div class="modal-header">\n	<h1>{{ title }}</h1>\n</div>\n<div class="modal-body">\n	<p>{{ message }}</p>\n</div>\n<div class="modal-footer">\n	<button ng-repeat="btn in buttons" ng-click="close(btn.result)" class=btn ng-class="btn.cssClass">{{ btn.label }}</button>\n</div>\n')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(t){t.put("template/pagination/pagination.html",'<div class="pagination"><ul>\n  <li ng-repeat="page in pages" ng-class="{active: page.active, disabled: page.disabled}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  </ul>\n</div>\n')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(t){t.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(t){t.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(t){t.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(t){t.put("template/progressbar/bar.html",'<div class="bar" ng-class=\'type && "bar-" + type\'></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(t){t.put("template/progressbar/progress.html",'<div class="progress"><progressbar ng-repeat="bar in bars" width="bar.to" old="bar.from" animate="bar.animate" type="bar.type"></progressbar></div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(t){t.put("template/rating/rating.html",'<span ng-mouseleave="reset()">\n	<i ng-repeat="number in range" ng-mouseenter="enter(number)" ng-click="rate(number)" ng-class="{\'icon-star\': number <= val, \'icon-star-empty\': number > val}"></i>\n</span>\n')}]),angular.module("template/tabs/pane.html",[]).run(["$templateCache",function(t){t.put("template/tabs/pane.html",'<div class="tab-pane" ng-class="{active: selected}" ng-show="selected" ng-transclude></div>\n')}]),angular.module("template/tabs/tabs.html",[]).run(["$templateCache",function(t){t.put("template/tabs/tabs.html",'<div class="tabbable">\n  <ul class="nav nav-tabs">\n    <li ng-repeat="pane in panes" ng-class="{active:pane.selected}">\n      <a ng-click="select(pane)">{{pane.heading}}</a>\n    </li>\n  </ul>\n  <div class="tab-content" ng-transclude></div>\n</div>\n')}]),angular.module("template/typeahead/match.html",[]).run(["$templateCache",function(t){t.put("template/typeahead/match.html",'<a tabindex="-1" ng-bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead.html",[]).run(["$templateCache",function(t){t.put("template/typeahead/typeahead.html",'<ul class="typeahead dropdown-menu" ng-style="{display: isOpen()&&\'block\' || \'none\', top: position.top+\'px\', left: position.left+\'px\'}">\n    <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)">\n        <a tabindex="-1" ng-click="selectMatch($index)" ng-bind-html-unsafe="match.label | typeaheadHighlight:query"></a>\n    </li>\n</ul>')}]),function(){angular.module("App.directives").directive("switch",["$timeout","$parse",function($timeout,$parse){return{restrict:"C",link:function(scope,element,attrs){var inputModel,ngModel;return element.bootstrapSwitch(),inputModel=element.find("input").attr("ng-model"),inputModel?(ngModel=$parse(inputModel),element.on("switch-change",function(event,state){return $timeout(function(){return scope.$apply(function(){return ngModel.assign(scope,state.status)})})}),scope.$watch(inputModel,function(newValue,oldValue){return newValue!==oldValue?element.bootstrapSwitch("setState",!!newValue,!0):void 0})):void 0}}}])}.call(this),function(){var CreditPurchaseService;CreditPurchaseService=function($http,PlanSelectionHelpers){var CreditPurchase;return CreditPurchase=function(creditType,siteId){this.creditType=creditType,this.headers={Accept:"application/vnd.api+json","Content-Type":"application/vnd.api+json"},this.http=$http,this.siteId=siteId},CreditPurchase.prototype.post=function(creditStatus){var creditType;return creditType=this.creditType,this.http({headers:this.headers,params:PlanSelectionHelpers.formatCreditParams(creditStatus,this.siteId),method:"POST",url:"/credits-purchase"}).then(function(response){var successData;return successData=PlanSelectionHelpers.formatCreditSuccess(response,creditType),PlanSelectionHelpers.formatCreditTransition(successData)})["catch"](function(response){return PlanSelectionHelpers.formatError(response)})},CreditPurchase},angular.module("App.services").service("CreditPurchaseService",CreditPurchaseService)}.call(this),function(){angular.module("App.services").service("dateService",[function(){return{removeTimezone:function(date,offset){return new Date(date.getTime()+6e4*(new Date).getTimezoneOffset()+1e3*offset)}}}])}.call(this),function(){var indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};angular.module("App.services").service("fontsService",[function(){var font,googleFonts,key,load,loadFontsLabel,loaded,loadedLabels;loaded=[],loadedLabels=[],googleFonts=[];for(key in window.fontsConfig)font=window.fontsConfig[key],font.google&&googleFonts.push(font.family);return loadFontsLabel=function(fonts){var newFonts;return newFonts=fonts.filter(function(font){return!(indexOf.call(loadedLabels,font)>=0)&&indexOf.call(googleFonts,font)>=0}),newFonts.length>0?(WebFont.load({google:{families:newFonts,text:newFonts}}),loadedLabels.push.apply(loadedLabels,newFonts)):void 0},load=function(fonts){var newFonts;return newFonts=fonts.filter(function(font){return!(indexOf.call(loaded,font)>=0)&&indexOf.call(googleFonts,font)>=0}),newFonts.length>0?(WebFont.load({google:{families:newFonts}}),loaded.push.apply(loaded,newFonts)):void 0},{load:load,loadFontsLabel:loadFontsLabel,fonts:function(){return window.fontsConfig},fontFamily:function(font){return window.fontsConfig[font].family},isGoogleFont:function(font){return!!window.fontsConfig[font].google}}}])}.call(this),function(){angular.module("App.services").service("gradientService",[function(){var gradient,isDirection,legacyDirection,linearGradient,radialGradient,unit;return unit=function(value){return value.replace(/^\d*/,"")},isDirection=function(value){var isAngle,isValueDirection,ref;return isValueDirection="to top"===value||"to top right"===value||"to right top"===value||"to right"===value||"to bottom right"===value||"to right bottom"===value||"to bottom"===value||"to bottom left"===value||"to left bottom"===value||"to left"===value||"to left top"===value||"to top left"===value,isAngle=!isNaN(parseInt(value))&&("deg"===(ref=unit(value))||"grad"===ref||"turn"===ref||"rad"===ref),isValueDirection||isAngle},legacyDirection=function(value){var conversionMap;return conversionMap={"to top":"bottom","to top right":"bottom left","to right top":"left bottom","to right":"left","to bottom right":"top left","to right bottom":"left top","to bottom":"top","to bottom left":"top right","to left bottom":"right top","to left":"right","to left top":"right bottom","to top left":"bottom right"},conversionMap[value]?conversionMap[value]:90-parseInt(value)+"deg"},linearGradient=function(direction,start,end){return isDirection(direction)||(end=start,start=direction,direction="180deg"),"background: "+start+";\nbackground: -webkit-linear-gradient("+legacyDirection(direction)+", "+start+", "+end+");\nbackground: linear-gradient("+direction+", "+start+", "+end+");"},radialGradient=function(start,end){return"background: "+start+";\nbackground: -webkit-radial-gradient(center, circle cover, "+start+" 0%, "+end+" 100%);\nbackground: radial-gradient(center, circle cover, "+start+" 0%, "+end+" 100%);"},gradient=function(direction,start,end){return"center"===direction?radialGradient(start,end):linearGradient(direction,start,end)},{linearGradient:linearGradient,radialGradient:radialGradient,gradient:gradient}}])}.call(this),function(){angular.module("App.services").service("lcBackgroundService",["gradientService",function(gradientService){var backgroundColor,backgroundStyles,hexToRgba;return hexToRgba=function(hex,opacity){var match,value;return match=(""+hex).match(/([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/i),value=match?parseInt(match[1],16)+","+parseInt(match[2],16)+","+parseInt(match[3],16):"0,0,0","rgba("+value+","+opacity+")"},backgroundStyles=function(lead_capture){var backgroundColor,bgOverlayColor,rules;return backgroundColor=lead_capture.background_opacity?hexToRgba(lead_capture.background_color,lead_capture.background_opacity/100):lead_capture.background_color,rules=["background-color: "+backgroundColor+";"],lead_capture.background_gradient?rules.push(gradientService.gradient(lead_capture.background_gradient_direction,lead_capture.background_gradient_start,lead_capture.background_gradient_end)):lead_capture.background_image&&(lead_capture.background_overlay_color?(bgOverlayColor=hexToRgba(lead_capture.background_overlay_color,lead_capture.background_overlay_opacity/100),rules.push("background-image: linear-gradient(\n  "+bgOverlayColor+",\n  "+bgOverlayColor+"\n),\nurl("+lead_capture.background_image+");")):rules.push("background-image: url("+lead_capture.background_image+");")),rules.join("")},backgroundColor=function(lead_capture){return backgroundColor=lead_capture.background_opacity?hexToRgba(lead_capture.background_color,lead_capture.background_opacity/100):lead_capture.background_color,"background-color: "+backgroundColor+";"},{backgroundStyles:backgroundStyles,backgroundColor:backgroundColor}}])}.call(this),function(){angular.module("App.services").service("lcDesignTabs",[function(){var config,getDesignTabs;return config={defaults:[{title:"General","default":!0}],coupon:[{title:"Capture",features:["text_color","font","background","background_gradient","background_image","background_opacity","background_overlay","close_button","coupon_icon","heading","main_text","inputs","button","no_thanks_button"]},{title:"Coupon",features:["coupon_success","coupon_codes","success_button"],modifier:"gcap-done"}],countdown:[{title:"Countdown",features:["text_color","font","background","background_gradient","background_image","background_opacity","background_overlay","close_button","heading","main_text","countdown","button","no_thanks_button"],modifier:"gcap-first-step"},{title:"Capture",features:["heading","main_text","inputs","success_button","no_thanks_button"]}],two_steps:[{title:"First step",features:["bar_behaviour","bar_logo","image","font","text_color","background","background_gradient","background_image","background_opacity","background_overlay","close_button","heading","main_text","first_step"],modifier:"gcap-first-step"},{title:"Second step",features:["heading","image","main_text","inputs","button","call_to_action"]}]},getDesignTabs=function(scope){return scope.template.coupon?config.coupon:scope.template.countdown?config.countdown:scope.template.two_steps&&scope.lead_capture.two_steps?config.two_steps:config.defaults},{getDesignTabs:getDesignTabs}}])}.call(this),function(){angular.module("App.services").service("lcImageHintsService",[function(){var backgroundImageHint,backgroundImageSizes,callToActionImageSizes,gradientImageHeight,gradientImageHeightMap,imageHint,imageHintFormat,imageSizes,mobileGradientImageHeight,mobileGradientImageHeightMap,mobileImageHint,mobileImageSizes;return imageSizes={Popup:500,PopupImageLight:540,PopupImageAndText:300,Box:240,BoxImage:250,NotificationImage:360,NotificationMessages:460,EmbeddableImage:640},callToActionImageSizes={BoxImage:340},mobileImageSizes={PopupImageAndText:330},backgroundImageSizes={PopupTextLight:400,NotificationText:330,BoxMini:354},gradientImageHeightMap={PopupImageLight:300,Popup:300,PopupImageAndText:400,FloatingImageLight:240,Box:240,NotificationImage:180,NotificationMessages:180,EmbeddableImageLight:200,EmbeddableImageSquare:300,EmbeddableBox:200},mobileGradientImageHeightMap={PopupImageAndText:200},imageHintFormat=function(width){return width?"Will be resized to "+width+"px wide":""},imageHint=function(lc){var width;return width=lc.call_to_action?callToActionImageSizes[lc.theme]||imageSizes[lc.theme]||240:imageSizes[lc.theme]||240,imageHintFormat(width)},mobileImageHint=function(lc){return imageHintFormat(mobileImageSizes[lc.theme]||330)},backgroundImageHint=function(lc){return imageHintFormat(backgroundImageSizes[lc.theme])},gradientImageHeight=function(lc){return gradientImageHeightMap[lc.theme]},mobileGradientImageHeight=function(lc){return mobileGradientImageHeightMap[lc.theme]},{imageHint:imageHint,mobileImageHint:mobileImageHint,backgroundImageHint:backgroundImageHint,gradientImageHeight:gradientImageHeight,mobileGradientImageHeight:mobileGradientImageHeight}}])}.call(this),function(){function arraysEqual(a,b){if(a===b)return!0;if(null==a||null==b)return!1;if(a.length!=b.length)return!1;for(var i=0;i<a.length;++i)if(a[i]!==b[i])return!1;return!0}angular.module("App.services").factory("lcStyleEditingService",["$timeout",function($timeout){var EditorRule,StyleEditor,gcapModifiers,messanger,rootRegExp,ruleId,scope,startWithModifierRegExp,styleEditor;return ruleId=1,scope=null,messanger=null,styleEditor=null,gcapModifiers=["gcap-first-step","gcap-call-to-action","gcap-special-button","gcap-sending","gcap-done","gcap-bar-bottom","gcap-bar-top","gcap-bar-sticky","gcap-bar-smart","gcap-bar-static","name-and-email","email-only","no-details","gcap-shown","gcap-floating-left","gcap-floating-right"],startWithModifierRegExp=new RegExp("^.("+gcapModifiers.join("|")+")"),rootRegExp=new RegExp("(^.gcap$|^.gcap.[^ ]*$|^.("+gcapModifiers.join("|")+")$)"),EditorRule=function(){function EditorRule(path1,modifiers,root1,content1,directRules,relatedRules){this.path=null!=path1?path1:"",null==modifiers&&(modifiers=[]),this.root=null!=root1?root1:!1,this.content=null!=content1?content1:"",this.directRules=null!=directRules?directRules:[],this.relatedRules=null!=relatedRules?relatedRules:[],this.modifiers=modifiers.slice(),this.id=ruleId,this.path||this.root?(this.explorePath(),this.exploreStyleSheet()):this.pathEditing=!0,ruleId++}return EditorRule.prototype.explorePath=function(){var i,j,parents,parts,ref,results;if(this.root)return this.selector=".gcap",this.parents=[];if(parts=this.path.split(/\s+/),parents=parts.slice(0,-1),this.selector=parts.slice(-1)[0],this.parents=[],parents.length>0){for(results=[],i=j=0,ref=parents.length-1;ref>=0?ref>=j:j>=ref;i=ref>=0?++j:--j)results.push(this.parents[i]={selector:parents[i],path:(this.parents.map(function(parent){return parent.selector}).join(" ")+" "+parents[i]).trim()});return results}},EditorRule.prototype["import"]=function(from){return this.path=from.path,this.selector=from.selector,this.modifiers=from.modifiers,this.root=from.root,this.parents=from.parents?from.parents.slice():[]},EditorRule.prototype.exploreStyleSheet=function(){return messanger.send("exploreStyleSheet",this.path,this.path)},EditorRule.prototype.editPath=function(){var that;return that=this,this.pathEditing=!0,$timeout(function(){return $("#rule-line-"+that.id+" input",window.parent.document).focus()})},EditorRule.prototype.getPathForUpdate=function(){return this.root?this.modifiers.length>0?this.modifiersClass():".gcap":(this.modifiersClass()+" "+this.path).trim()},EditorRule.prototype.remove=function(){var index;return index=styleEditor.rules.indexOf(this),styleEditor.rules.splice(index,1),styleEditor.applyChanges()},EditorRule.prototype.modifiersClass=function(){return this.modifiers.length>0?"."+this.modifiers.join("."):""},EditorRule.prototype.clientStyles=function(){return(this.path||this.root)&&this.content?(".gcap"+this.modifiersClass()+" "+this.path+" { "+this.content+" }\n").replace(/[ ]{2,}/gi," "):""},EditorRule.prototype.backendStyles=function(){return(this.path||this.root)&&this.content?(".gcap-"+scope.campaign.key+this.modifiersClass()+" "+this.path+" { "+this.content+" }\n").replace(/[ ]{2,}/gi," "):""},EditorRule}(),StyleEditor=function(){function StyleEditor(_scope,_messanger){scope=_scope,messanger=_messanger,styleEditor=this,this.rules=[],messanger.on("selectTemplateElement",this.editRule.bind(this)),messanger.on("setExistingRule",this.setExistingRule.bind(this)),this.load(),this.applyIframeStyles()}return StyleEditor.prototype.refresh=function(){var j,len,ref,results,rule;for(ref=this.rules,results=[],j=0,len=ref.length;len>j;j++)rule=ref[j],results.push(rule.exploreStyleSheet());return results},StyleEditor.prototype.applyChanges=function(){var that;return that=this,clearTimeout(this.applyChangesTimeout),this.applyChangesTimeout=setTimeout(function(){return that.applyIframeStyles(),that.save()},500)},StyleEditor.prototype.setExistingRule=function(data){var rule;return rule=this.ruleByPath(data.path),rule.directRules=data.directRules,rule.relatedRules=data.relatedRules,scope.$apply()},StyleEditor.prototype.setModifier=function(modifier){return scope.previewModifier=modifier,$timeout(function(){return scope.$apply()})},StyleEditor.prototype.select=function(rule){return"string"==typeof rule&&(rule=this.ruleByPath(rule)),this.selectedRule=rule,rule.modifier&&this.setModifier(rule.modifier),$timeout(function(){return scope.$apply()})},StyleEditor.prototype.checkSelectedTextarea=function(){return $timeout(function(){return $("textarea.rule-content:focus").trigger("click")})},StyleEditor.prototype.focusSelected=function(){var rule;return rule=this.selectedRule,$timeout(function(){return rule.path?$("#rule-line-"+rule.id+" textarea").focus():$("#rule-line-"+rule.id+" input").focus();
})},StyleEditor.prototype.selectAndFocus=function(rule){return this.select(rule),this.focusSelected()},StyleEditor.prototype.createRule=function(path,modifiers,root,content){var rule;return null==path&&(path=""),null==modifiers&&(modifiers=[]),null==root&&(root=!1),null==content&&(content=""),rule=new EditorRule(path,modifiers,root,content),this.rules.push(rule),rule},StyleEditor.prototype.updateRulePath=function(rule,path){var foundRule,modifier,modifiers,root;if(path){if(rule.pathEditing=!1,path=path.trim(),root=rootRegExp.test(path),path=path.replace(/.gcap($|\.| )/,"$1").trim(),root)modifiers=path?path.replace(/^./,"").split("."):[],foundRule=this.ruleQuery("",modifiers,!0);else{for(modifiers=[];startWithModifierRegExp.test(path);)modifier=path.match(startWithModifierRegExp)[1],modifiers.push(modifier),path=path.replace("."+modifier,"").trim();foundRule=this.ruleQuery(path,modifiers)}return rule!==foundRule?foundRule.content?alert("You already define this rule"):(rule["import"](foundRule),foundRule.remove()):void 0}},StyleEditor.prototype.addEmptyRule=function(){return this.select(this.createRule())},StyleEditor.prototype.ruleByPath=function(path){var match,modifier,modifiers;for(modifiers=[];match=path.match(startWithModifierRegExp);)modifier=match[1],modifiers.push(modifier),path=path.replace("."+modifier,"").trim();return this.ruleQuery(path,modifiers,!path)},StyleEditor.prototype.ruleQuery=function(path,modifiers,root){var result;return null==modifiers&&(modifiers=[]),null==root&&(root=!1),result=this.rules.filter(function(rule){return rule.path===path&&rule.root===root&&arraysEqual(rule.modifiers,modifiers)}),result.length>0?result[0]:this.createRule(path,modifiers,root)},StyleEditor.prototype.editRule=function(path){return this.selectAndFocus(this.ruleByPath(path))},StyleEditor.prototype.clientStyles=function(){return this.rules.map(function(rule){return rule.clientStyles()}).join("\n")},StyleEditor.prototype.backendStyles=function(){return this.rules.map(function(rule){return rule.backendStyles()}).join("\n")},StyleEditor.prototype.applyIframeStyles=function(){return messanger.send("applyIframeStyles",this.clientStyles())},StyleEditor.prototype.clearIframeStyles=function(){return messanger.send("applyIframeStyles","")},StyleEditor.prototype.load=function(){var content,extra_css,found,j,len,modifiers,path,results,root,rule,rules;for(extra_css=scope.lead_capture.template_extra_css,rules=extra_css.split("}"),results=[],j=0,len=rules.length;len>j;j++)rule=rules[j],rule.trim()?(found=rule.match(/.gcap-[^. ]*([.-\w]*) ([^{]*){([^}]*)/),found?(modifiers=found[1].trim()?found[1].trim().replace(/^./,"").split("."):"",path=found[2].trim(),content=found[3].trim(),root=!path,rule=this.ruleQuery(path,modifiers,root),results.push(rule.content=content)):results.push(void 0)):results.push(void 0);return results},StyleEditor.prototype.save=function(){return scope.lead_capture.template_extra_css=this.backendStyles(),$timeout(function(){return scope.$apply()})},StyleEditor}(),{EditorRule:EditorRule,StyleEditor:StyleEditor}}])}.call(this),function(){angular.module("App.services").service("lcThemeService",[function(){var customLayoutClass,getCustomDisplayArea,lcThemeService,templateById;return customLayoutClass=function(lead_capture){switch(lead_capture.custom_display_area){case"top":return"gcap-layout-bar";case"popup":return"gcap-layout-popup";case"bottom":return"gcap-layout-floating";case"takeover":return"gcap-layout-takeover";case"embeddable":return"gcap-layout-embeddable"}},getCustomDisplayArea=function(id){return"Default"===id&&(id="PopupText"),lcThemeService.templateById(id).display_area},templateById=function(id){var templates;return templates=window.lcTemplates.filter(function(template){return template.id===id}),templates.length?templates[0]:null},lcThemeService={templates:function(){return window.lcTemplates},categories:function(){return window.lcCategories},customThemesConfig:function(){return window.lcCustomThemesConfig},getCustomHtml:function(id){return window.lcCustomThemesConfig[id].html},getCustomCss:function(id){return window.lcCustomThemesConfig[id].css},getCustomDisplayArea:getCustomDisplayArea,templateById:templateById,customLayoutClass:customLayoutClass}}])}.call(this),function(){var PlanSelectionHelpers;PlanSelectionHelpers=function($http,$filter){this.addCard=function(cardId,userId){return $http({method:"PATCH",url:"/cards/"+userId+"/add-card/"+cardId}).then(function(response){return"Credit card added."},function(response){return"Sorry, an error occured."})},this.advertisedFeatures=function(features){var array;return array=features.split("\n"),array=array.map(function(value){return value.split(" : ")})},this.dateAsUtc=function(date){var result;return result=new Date(date),result.setMinutes(result.getMinutes()-result.getTimezoneOffset())},this.daysBetween=function(startDate,endDate){var millisecondsPerDay;return millisecondsPerDay=864e5,Math.abs((this.dateAsUtc(endDate)-this.dateAsUtc(startDate))/millisecondsPerDay)},this.formatAvailablePlans=function(response){var array,i,len,plan,ref;for(array=[],ref=response.data.data,i=0,len=ref.length;len>i;i++)plan=ref[i],array.push(plan.attributes);return array},this.formatData=function(cycle,limits,plan,siteId,planSelection){var object;return object={data:{type:"plan_selection",attributes:{plan_type:plan.type,desired_cycle:0===plan.cents_per_month?"Monthly":cycle},relationships:{desired_plan:{data:{id:plan.id.toString(),type:"plan"}}}}},limits&&(object.data.relationships.limit_selections={data:this.limitSelections(limits,plan,planSelection)}),planSelection?object.data.id=planSelection.id.toString():object.data.relationships.site={data:{id:siteId.toString(),type:"site"}},JSON.stringify(object)},this.formatCreditParams=function(creditStatus,siteId){var object;return object={limit_type:creditStatus.limit_type,site_id:siteId,value:creditStatus.reserve_credits}},this.formatCreditSuccess=function(response,type){var creditStatus,object;return object={},creditStatus=((response||{}).data||{}).credit_status,creditStatus&&(object={id:creditStatus.id,paused:creditStatus.paused,remaining:creditStatus.remaining_cycle_credits,reserve:creditStatus.reserve_credits,type:creditStatus.limit_type}),object},this.formatCreditTransition=function(data){var object;return object={message:"You now have <strong>"+$filter("prettyNumber")(data.remaining)+" credits</strong> on your plan and <strong>"+$filter("prettyNumber")(data.reserve)+" reserve credits.</strong>",success:!0,title:'Credits <span class="thin">bought!</span>'}},this.formatError=function(response){var errors,object;return object={},errors=((response||{}).data||{}).errors,errors?(object.error=errors[0].status+": "+errors[0].title,object.description=errors[0].detail):(object.error=response.status+": "+response.statusText,object.description="Something unexpected happened.<br><br>Please try again later."),object},this.formatTransitions=function(response){var creditTransition,cycleTransition,desiredCycle,expiryTransition,features,i,index,j,len,len1,limit,limitTransition,limitWording,newValue,object,oldValue,planTransition,planType,transitions,value;if(desiredCycle=((((response||{}).data||{}).data||{}).attributes||{}).desired_cycle,features=(((((response||{}).data||{}).meta||{}).plan_changes||{}).sites[0]||{}).all_features,object={features:features,success:!0},planType=((((response||{}).data||{}).data||{}).attributes||{}).plan_type,transitions=((((((response||{}).data||{}).meta||{}).plan_changes||{}).sites[0]||{}).plan_change||{}).transitions){if(creditTransition=transitions.filter(function(item){return"credit"===item.type}),cycleTransition=transitions.filter(function(item){return"cycle"===item.type}),expiryTransition=transitions.filter(function(item){return"expiry"===item.type}),limitTransition=transitions.filter(function(item){return"limit"===item.type}),planTransition=transitions.filter(function(item){return"plan"===item.type}),planTransition[0])if(object.title='Plan <span class="thin">changed!</span>',1===planTransition.length){if(planTransition[0].old_value?(object.message="You've changed from",cycleTransition[0]&&0!==planTransition[0].old_value.cents_per_month?(object.message+=" <strong>"+planTransition[0].old_value.name+" "+cycleTransition[0].old_value+"</strong>",0!==planTransition[0].new_value.cents_per_month?object.message+=" to <strong>"+planTransition[0].new_value.name+" "+desiredCycle+" Plan</strong>":object.message+=" to <strong>"+planTransition[0].new_value.name+"</strong>"):(object.message+=" <strong>"+planTransition[0].old_value.name+"</strong>",object.message+=" to <strong>"+planTransition[0].new_value.name+" "+desiredCycle+" Plan</strong>")):(object.title='Lets <span class="thin">begin!</span>',object.message="You're now subscribed to",0!==planTransition[0].new_value.cents_per_month?object.message+=" <strong>"+planTransition[0].new_value.name+" "+desiredCycle+" Plan</strong>":object.message+=" <strong>"+planTransition[0].new_value.name+" Plan</strong>"),limitTransition[0])for(object.message+=" with ",index=i=0,len=limitTransition.length;len>i;index=++i)limit=limitTransition[index],value=$filter("prettyNumber")(limit.new_value),object.message+="<strong>"+value+" "+this.limitType(limit.sub_type)+"</strong>",index===limitTransition.length-2?object.message+=" and ":index!==limitTransition.length-1&&(object.message+=", ")}else object.message="You've changed from",object.message+=" <strong>"+planTransition[0].old_value.name+" Plan</strong>",object.message+=" to <strong>"+planTransition[1].new_value.name+" "+desiredCycle+" Plan</strong>";else if(cycleTransition[0])object.title='Cycle <span class="thin">changed!</span>',cycleTransition[0].delayed?object.message="Your plan will remain on <strong>"+cycleTransition[0].old_value+"</strong> cycle until it expires":object.message="Your plan is now on a <strong>"+cycleTransition[0].new_value+"</strong> cycle";else if(limitTransition[0])for(limitWording=limitTransition.length>1?"limits":"limit",object.title=limitWording.toCapitalStart()+' <span class="thin">changed!</span>',object.message="The following plan "+limitWording+" changed: ",index=j=0,len1=limitTransition.length;len1>j;index=++j)limit=limitTransition[index],oldValue=$filter("prettyNumber")(limitTransition[index].old_value),newValue=$filter("prettyNumber")(limitTransition[index].new_value),object.message+=" <strong>"+oldValue+"</strong>",object.message+=" to <strong>"+newValue+" "+this.limitType(limitTransition[index].sub_type)+"</strong>",index===limitTransition.length-2?object.message+=" and ":index!==limitTransition.length-1&&(object.message+=", ");object.message+="."}return object},this.goToApp=function(noRefresh){var html,takeoverEl;return noRefresh?(html=angular.element(document.documentElement),takeoverEl=angular.element(document.getElementsByClassName("js-takeover")[0]),html.removeClass("takeover-shown"),setTimeout(function(){return takeoverEl.remove()},200),!0):window.location.reload()},this.limitSelections=function(limits,plan,planSelection){var index,key,limit,limitSelection,limitSelections;limitSelections=[],index=0;for(key in limits)limit=limits[key],limitSelection={type:"limit_selection",attributes:{desired_limit:limit.val,limit_type:key.replace("_limit_selections","")}},planSelection?limitSelection.id=planSelection.limit_selections.filter(function(item){return item.limit_type===key.replace("_limit_selections","")})[0].id.toString():limitSelection.relationships={plan_selection:{data:{type:"plan_selection"}}},index++,limitSelections.push(limitSelection);return limitSelections},this.limitType=function(type){var types;return types={competitions:"sites",captures:"conversions",rewards:"claims",galleries:"connections"},types[type]},this.setDefaultCard=function(cardId,userId){return $http({method:"PATCH",url:"/cards/"+userId+"/default-card/"+cardId}).then(function(response){return"Credit card set as default."},function(response){return"Sorry, an error occured."})},this.takeoverBackground=function(step){var takeoverEl;takeoverEl=angular.element(document.getElementsByClassName("js-takeover")[0]),"Checkout"===step||"Error"===step?takeoverEl.addClass("is-last-step"):takeoverEl.removeClass("is-last-step")}},angular.module("App.services").service("PlanSelectionHelpers",PlanSelectionHelpers)}.call(this),function(){var PlanSelectionService;PlanSelectionService=function($http,PlanSelectionHelpers){var PlanSelection;return PlanSelection=function(cycle,limits,plan,siteId){this.cycle=cycle,this.headers={Accept:"application/vnd.api+json","Content-Type":"application/vnd.api+json"},this.http=$http,this.limits=limits,this.plan=plan,this.siteId=siteId},PlanSelection.prototype.add=function(){return this.http({headers:this.headers,data:PlanSelectionHelpers.formatData(this.cycle,this.limits,this.plan,this.siteId),method:"POST",url:"/api/v1/plan_selections"}).then(function(response){return PlanSelectionHelpers.formatTransitions(response)})["catch"](function(response){return PlanSelectionHelpers.formatError(response)})},PlanSelection.prototype.getAvailablePlans=function(){return this.http({headers:this.headers,method:"GET",url:"/api/v1/plans"}).then(function(response){return PlanSelectionHelpers.formatAvailablePlans(response)})["catch"](function(response){return PlanSelectionHelpers.formatError(response)})},PlanSelection.prototype.update=function(planSelection){return this.http({headers:this.headers,data:PlanSelectionHelpers.formatData(this.cycle,this.limits,this.plan,this.siteId,planSelection),method:"PATCH",url:"/api/v1/plan_selections"}).then(function(response){return PlanSelectionHelpers.formatTransitions(response)})["catch"](function(response){return PlanSelectionHelpers.formatError(response)})},PlanSelection.prototype.remove=function(id){return this.http({headers:this.headers,method:"DELETE",url:"/api/v1/plan_selections/"+id}).then(function(response){return response})["catch"](function(response){return response})},PlanSelection.prototype.list=function(){return this.http({headers:this.headers,method:"GET",url:"/api/v1/plan_selections/"}).then(function(response){return response})["catch"](function(response){return response})},PlanSelection},angular.module("App.services").service("PlanSelectionService",PlanSelectionService)}.call(this),function(){var MessageReceiver,MessageSender,Messanger;MessageReceiver=function(){function MessageReceiver(window1,host1,scope1,context1){this.window=window1,this.host=host1,this.scope=scope1,this.context=context1,this.handlers={},$(window).on("message onmessage",this.handleMessages.bind(this)),this.on("scope",this.parseScope.bind(this)),this.on("scopeProperty",this.parseScopeProperty.bind(this))}return MessageReceiver.prototype.handleMessages=function(event){var command;return event=event.originalEvent,event.origin===this.host&&event.data&&(command=this.parse(event.data))?this.receiveMessage(command):void 0},MessageReceiver.prototype.parse=function(data){var command,error;try{command=JSON.parse(data)}catch(error1){return error=error1,null}return command.context===this.context?command:null},MessageReceiver.prototype.on=function(command,callback){return this.handlers[command]||(this.handlers[command]=[]),this.handlers[command].push(callback)},MessageReceiver.prototype.off=function(command,callback){var index;return this.handlers[command]&&(index=this.handlers[command].indexOf(callback),index>-1)?this.handlers[command].splice(index,1):void 0},MessageReceiver.prototype.parseScope=function(bundle){var key,value;for(key in bundle)value=bundle[key],this.setProperty(key,value);return this.scope.$apply()},MessageReceiver.prototype.parseScopeProperty=function(data){return this.setProperty(data.path,data.value),this.scope.$apply()},MessageReceiver.prototype.setProperty=function(path,value){var head,i,len,scope,subpath,tail;for(path=path.split("."),head=path.slice(0,-1),tail=path.slice(-1),scope=this.scope,i=0,len=head.length;len>i;i++)subpath=head[i],subpath in scope||(scope[subpath]={}),scope=scope[subpath];return scope[tail]=value},MessageReceiver.prototype.receiveMessage=function(data){var callback,command,i,len,ref,results;if(command=data.command,command in this.handlers){for(ref=this.handlers[command],results=[],i=0,len=ref.length;len>i;i++)callback=ref[i],results.push(callback(data.value));return results}},MessageReceiver}(),MessageSender=function(){function MessageSender(window1,host1,scope1,context1,properties1){var i,len,path,ref;for(this.window=window1,this.host=host1,this.scope=scope1,this.context=context1,this.properties=null!=properties1?properties1:[],this.timeouts={},ref=this.properties,i=0,len=ref.length;len>i;i++)path=ref[i],this.watch(path)}return MessageSender.prototype.send=function(command,value,path){var sender;return null==path&&(path=""),sender=this,clearTimeout(this.timeouts[this.context+":"+command+":"+path]),this.timeouts[this.context+":"+command+":"+path]=setTimeout(function(){return sender.window.postMessage(JSON.stringify({context:sender.context,command:command,value:value}),sender.host)},100)},MessageSender.prototype.sendScope=function(){var bundle,i,len,path,ref,value;for(bundle={},ref=this.properties,i=0,len=ref.length;len>i;i++)path=ref[i],bundle[path]=this.getValueByPath(path),value=this.getValueByPath(path);return this.send("scope",bundle)},MessageSender.prototype.sendScopeProperty=function(path,value){return this.send("scopeProperty",{path:path,value:value},path)},MessageSender.prototype.getValueByPath=function(path){var head,i,len,scope,subpath,tail;for(path=path.split("."),head=path.slice(0,-1),tail=path.slice(-1),scope=this.scope,i=0,len=head.length;len>i;i++)if(subpath=head[i],scope=scope[subpath],!scope)return;return scope[tail]},MessageSender.prototype.watch=function(path){var sender;return sender=this,this.scope.$watch(path,function(newValue,oldValue){return sender.sendScopeProperty(path,newValue)})},MessageSender}(),Messanger=function(){function Messanger(window1,host1,scope1,context1,properties1){this.window=window1,this.host=host1,this.scope=scope1,this.context=context1,this.properties=properties1,this.sender=new MessageSender(this.window,this.host,this.scope,this.context,this.properties),this.receiver=new MessageReceiver(this.window,this.host,this.scope,this.context,this.properties)}return Messanger.prototype.send=function(command,value,path){return null==path&&(path=""),this.sender.send(command,value,path)},Messanger.prototype.sendScope=function(){return this.sender.sendScope()},Messanger.prototype.on=function(command,callback){return this.receiver.on(command,callback)},Messanger.prototype.off=function(command,callback){return this.receiver.off(command,callback)},Messanger}(),angular.module("App.services").factory("postMessageService",["$injector",function($injector){return{messanger:function(window,host,scope,context,properties){return new Messanger(window,host,scope,context,properties)},sender:function(window,host,scope,context,properties){return new MessageSender(window,host,scope,context,properties)},receiver:function(window,host,scope,context){return new MessageReceiver(window,host,scope,context)}}}])}.call(this),function(){angular.module("App.controllers").controller("BillingContactController",["$scope","$window",function($scope,$window){var ctrl;return ctrl=this,ctrl.billing_contact={},ctrl.initBillingContact=function(data){return data?ctrl.billing_contact=data:ctrl.billing_contact={}},ctrl.save=function(){return ctrl.billing_contact.id?$window.API.billingContacts.update(ctrl.billing_contact,{success:function(data,textStatus,jqXHR){return alert("Billing contact updated"),$window.location.href=$window.location.href}}):$window.API.billingContacts.create(ctrl.billing_contact,{success:function(data,textStatus,jqXHR){return alert("Billing contact added"),$window.location.href=$window.location.href}})},ctrl}])}.call(this),angular.module("colorpicker.module",[]).factory("helper",function(){return{closest:function(elem,selector){for(var matchesSelector=elem.matches||elem.webkitMatchesSelector||elem.mozMatchesSelector||elem.msMatchesSelector||function(selector){for(var elems=this.parentNode.querySelectorAll(selector),count=elems.length,i=0;count>i;i++)if(elems[i]===elem)return!0;return!1};elem;){if(matchesSelector.bind(elem)(selector))return elem;elem=elem.parentNode}return!1},getOffset:function(elem,fixedPosition){for(var x=0,y=0,scrollX=0,scrollY=0;elem&&!isNaN(elem.offsetLeft)&&!isNaN(elem.offsetTop);)x+=elem.offsetLeft,y+=elem.offsetTop,(fixedPosition||"BODY"!==elem.tagName)&&(scrollX+=elem.scrollLeft,scrollY+=elem.scrollTop),elem=elem.offsetParent;return{top:y,left:x,scrollX:scrollX,scrollY:scrollY}},extend:function(){for(var i=1;i<arguments.length;i++)for(var key in arguments[i])arguments[i].hasOwnProperty(key)&&(arguments[0][key]=arguments[i][key]);return arguments[0]},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[2.55*execResult[1],2.55*execResult[2],2.55*execResult[3],execResult[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16)]}}]}}).factory("Color",["helper",function(helper){return{value:{h:1,s:1,b:1,a:1},rgb:function(){var rgb=this.toRGB();return"rgb("+rgb.r+","+rgb.g+","+rgb.b+")"},rgba:function(){var rgb=this.toRGB();return"rgba("+rgb.r+","+rgb.g+","+rgb.b+","+rgb.a+")"},hex:function(){return this.toHex()},RGBtoHSB:function(r,g,b,a){r/=255,g/=255,b/=255;var H,S,V,C;return V=Math.max(r,g,b),C=V-Math.min(r,g,b),H=0===C?null:V==r?(g-b)/C:V==g?(b-r)/C+2:(r-g)/C+4,H=(H+360)%6*60/360,S=0===C?0:C/V,{h:H||1,s:S,b:V,a:a||1}},HueToRGB:function(p,q,h){return 0>h?h+=1:h>1&&(h-=1),1>6*h?p+(q-p)*h*6:1>2*h?q:2>3*h?p+(q-p)*(2/3-h)*6:p},setColor:function(val){if(void 0!==val&&val.toLowerCase){val=val.toLowerCase();for(var key in helper.stringParsers)if(helper.stringParsers.hasOwnProperty(key)){var parser=helper.stringParsers[key],match=parser.re.exec(val),values=match&&parser.parse(match);parser.space||"rgba";if(values)return this.value=this.RGBtoHSB.apply(null,values),!1}}},setHue:function(h){this.value.h=1-h},setSaturation:function(s){this.value.s=s},setLightness:function(b){this.value.b=1-b},setAlpha:function(a){this.value.a=parseInt(100*(1-a),10)/100},toRGB:function(h,s,b,a){h||(h=this.value.h,s=this.value.s,b=this.value.b),h*=360;var R,G,B,X,C;return h=h%360/60,C=b*s,X=C*(1-Math.abs(h%2-1)),R=G=B=b-C,h=~~h,R+=[C,X,0,0,X,C][h],G+=[X,C,C,X,0,0][h],B+=[0,0,X,C,C,X][h],{r:Math.round(255*R),g:Math.round(255*G),b:Math.round(255*B),a:a||this.value.a}},toHex:function(h,s,b,a){var rgb=this.toRGB(h,s,b,a);return"#"+(1<<24|parseInt(rgb.r)<<16|parseInt(rgb.g)<<8|parseInt(rgb.b)).toString(16).substr(1)}}}]).directive("colorpicker",["$document","$compile","Color","helper",function($document,$compile,Color,helper){return{require:"?ngModel",restrict:"A",link:function($scope,elem,attrs,ngModel){$scope.model=ngModel;var pickerColorPreview,pickerColorAlpha,pickerColorBase,pickerColorPointers,withoutClose=angular.isDefined(attrs.colorpickerWithoutCloseButton)?attrs.colorpickerWithoutCloseButton:!1,withInput=angular.isDefined(attrs.colorpickerWithInput)?attrs.colorpickerWithInput:!1,closeButton=withoutClose?"":'<button type="button" class="close close-colorpicker">&times;</button>',inputTemplate=withInput?'<input name="colorpicker-input" class="colorpicker-input" >':"",template='<div class="colorpicker dropdown-menu" unselectable="on"><div class="colorpicker-saturation" unselectable="on"><i unselectable="on"><b unselectable="on"></b></i></div><div class="colorpicker-hue" unselectable="on"><i unselectable="on"></i></div><div class="colorpicker-alpha" unselectable="on"><i unselectable="on"></i></div><div class="colorpicker-color" unselectable="on"><div unselectable="on"></div></div>'+inputTemplate+closeButton+"</div>",colorpickerTemplate=angular.element(template),pickerColor=Color,pointer=null,slider=null,thisFormat=attrs.colorpicker?attrs.colorpicker:"hex",position=attrs.colorpickerPosition?attrs.colorpickerPosition:"bottom";if($compile(colorpickerTemplate)($scope),withInput){var pickerColorInput=colorpickerTemplate.find("input");pickerColorInput.on("mousedown",function(event){event.stopPropagation()}).on("keyup",function(event){var newColor=this.value;elem.val(newColor),ngModel&&$scope.$apply(ngModel.$setViewValue(newColor)),event.stopPropagation(),event.preventDefault()}),elem.on("keyup",function(){pickerColorInput.val(elem.val())})}pickerColorAlpha={enabled:"rgba"===thisFormat,css:null},pickerColorAlpha.enabled===!0&&(colorpickerTemplate.addClass("alpha"),pickerColorAlpha.css=colorpickerTemplate.find("div")[2].style),colorpickerTemplate.addClass("colorpicker-position-"+position),angular.element(document.body).append(colorpickerTemplate),ngModel&&(ngModel.$render=function(){elem.val(ngModel.$viewValue)},$scope.$watch(attrs.ngModel,function(newVal){update(),withInput&&!pickerColorInput.is(":focus")&&pickerColorInput.val(newVal)})),elem.bind("$destroy",function(){colorpickerTemplate.remove()}),pickerColorBase=colorpickerTemplate.find("div")[0].style,pickerColorPreview=colorpickerTemplate.find("div")[4].style,pickerColorPointers=colorpickerTemplate.find("i");var previewColor=function(){try{pickerColorPreview.backgroundColor=pickerColor[thisFormat]()}catch(e){pickerColorPreview.backgroundColor=pickerColor.toHex()}pickerColorBase.backgroundColor=pickerColor.toHex(pickerColor.value.h,1,1,1),pickerColorAlpha.enabled===!0&&(pickerColorAlpha.css.backgroundColor=pickerColor.toHex())},slidersUpdate=function(event){event.stopPropagation(),event.preventDefault();var zone=helper.closest(event.target,"div");if("colorpicker-saturation"===zone.className)slider=helper.extend({},{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"});else if("colorpicker-hue"===zone.className)slider=helper.extend({},{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"});else{if("colorpicker-alpha"!==zone.className)return slider=null,!1;slider=helper.extend({},{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"})}slider.knob=zone.children[0].style,slider.left=event.pageX-helper.getOffset(zone).left,slider.top=event.pageY-helper.getOffset(zone).top,pointer={left:event.pageX,top:event.pageY}},mousemove=function(event){if(slider){var left=Math.max(0,Math.min(slider.maxLeft,slider.left+((event.pageX||pointer.left)-pointer.left))),top=Math.max(0,Math.min(slider.maxTop,slider.top+((event.pageY||pointer.top)-pointer.top)));slider.knob.left=left+"px",slider.knob.top=top+"px",slider.callLeft&&pickerColor[slider.callLeft].call(pickerColor,left/100),slider.callTop&&pickerColor[slider.callTop].call(pickerColor,top/100),previewColor();var newColor=pickerColor[thisFormat]();return elem.val(newColor),ngModel&&$scope.$apply(ngModel.$setViewValue(newColor)),withInput&&pickerColorInput.val(newColor),!1}},mouseup=function(){$document.unbind("mousemove",mousemove),$document.unbind("mouseup",mouseup)},update=function(){pickerColor.setColor(elem.val()||elem.attr("placeholder")),pickerColorPointers.eq(0).css({left:100*pickerColor.value.s+"px",top:100-100*pickerColor.value.b+"px"}),pickerColorPointers.eq(1).css("top",100*(1-pickerColor.value.h)+"px"),pickerColorPointers.eq(2).css("top",100*(1-pickerColor.value.a)+"px"),previewColor()},getColorpickerTemplatePosition=function(){var positionValue,positionOffset=helper.getOffset(elem[0]);return"top"===position?positionValue={top:positionOffset.top-positionOffset.scrollY-146,left:positionOffset.left-positionOffset.scrollX}:"right"===position?positionValue={top:positionOffset.top-positionOffset.scrollY,left:positionOffset.left-positionOffset.scrollX+141}:"bottom"===position?positionValue={top:positionOffset.top-positionOffset.scrollY+elem[0].offsetHeight,left:positionOffset.left-positionOffset.scrollX}:"left"===position&&(positionValue={top:positionOffset.top-positionOffset.scrollY,left:positionOffset.left-positionOffset.scrollX-131}),{top:positionValue.top+"px",left:positionValue.left+"px"}};elem.bind("click",function(){if(colorpickerTemplate.hasClass("colorpicker-visible"))hideColorpickerTemplate();else{update(),colorpickerTemplate.addClass("colorpicker-visible").css(getColorpickerTemplatePosition());var reposition=function(){colorpickerTemplate.css(getColorpickerTemplatePosition())};setTimeout(reposition,350),setTimeout(reposition,500)}}),colorpickerTemplate.bind("mousedown",function(event){event.stopPropagation(),event.preventDefault()}),colorpickerTemplate.find("div").bind("click",function(event){slidersUpdate(event),mousemove(event)}),colorpickerTemplate.find("div").bind("mousedown",function(event){slidersUpdate(event),$document.bind("mousemove",mousemove),$document.bind("mouseup",mouseup)});var hideColorpickerTemplate=function(){colorpickerTemplate.hasClass("colorpicker-visible")&&colorpickerTemplate.removeClass("colorpicker-visible")};colorpickerTemplate.find("button").bind("click",function(){hideColorpickerTemplate()}),$document.bind("mousedown",function(){hideColorpickerTemplate()})}}}]),function(){angular.module("App.controllers").controller("CampaignListController",["$scope","$http",function($scope,$http){return $scope.reorder=function(){var disabled,enabled,priority;return enabled=[],disabled=[],$("[ng-controller=CampaignListController] input[name=disabled]").each(function(){var $t;return $t=$(this),$t.is(":checked")?enabled.push($t.val()):disabled.push($t.val())}),priority=$("[data-apply-order-id]").map(function(){return $(this).data("apply-order-id")}).toArray(),$http.post("/sites/"+$scope.site_id+"/apply-campaign-state",{enabled:enabled,disabled:disabled,priority:priority}).success(function(data){var i,j,key,len,len1,ref,ref1,results;for(ref=data.enabled,i=0,len=ref.length;len>i;i++)key=ref[i],$("[data-when-disabled="+key+"]").hide(),$("[data-when-enabled="+key+"]").show();for(ref1=data.disabled,results=[],j=0,len1=ref1.length;len1>j;j++)key=ref1[j],$("[data-when-disabled="+key+"]").show(),results.push($("[data-when-enabled="+key+"]").hide());return results}).error(function(){return alert("Sorry, we could not apply that change.")})}}])}.call(this),function(){angular.module("App.controllers").controller("CreditsPurchaseController",["$scope","$http","$window","$timeout","CreditPurchaseService","PlanSelectionHelpers",function($scope,$http,$window,$timeout,CreditPurchaseService,PlanSelectionHelpers){var limitTypes,self;return self=this,this.checkoutMessage=null,this.creditCards=[],this.creditCardSelectOpen=!1,this.currentCredits=0,this.defaultCreditCard=null,this.loading=!1,this.select={},this.step="Review",limitTypes={captures:"conversions",rewards:"claims"},this.init=function(data){var card,costs,creditCard,i,key,len,options,ref,ref1,results,value;this.context=data.type,this.creditPurchaseService=new CreditPurchaseService(this.context,data.site.id),this.creditStatus=data.credit_status,this.currentCredits=this.creditStatus.remaining_cycle_credits+this.creditStatus.reserve_credits,this.limitType=limitTypes[this.context],this.user=data.user,options=[],costs=[],ref=data.options;for(key in ref)value=ref[key],options.push(key),costs.push(value);for(this.select={cost:costs,options:options,val:options[0]},ref1=data.credit_cards,results=[],i=0,len=ref1.length;len>i;i++)creditCard=ref1[i],card={id:creditCard.id,number:creditCard.last4,type:creditCard.brand.toLowerCase(),name:creditCard.name},data.default_credit_card===creditCard.id&&(this.defaultCreditCard=card),results.push(this.creditCards.push(card));return results},this.addCreditCard=function(){return self=this,this.loading=!0,$window.addStripeCard({panelLabel:"Add card",email:this.user.email},function(response){var card;return card={id:response.card.id,number:response.card.last4,type:response.card.brand.toLowerCase(),name:response.card.name},$scope.$apply(function(){return self.defaultCreditCard=card,self.creditCards.push(card),self.loading=!1}),PlanSelectionHelpers.addCard(response.id,self.user.id).then(function(){return PlanSelectionHelpers.setDefaultCard(self.defaultCreditCard.id,self.user.id)})},angular.bind(self,self.stripeModalClosed))},this.changeDefaultCard=angular.bind(this,function(){return self=this,$timeout(function(){return PlanSelectionHelpers.setDefaultCard(self.defaultCreditCard.id,self.user.id)},0)}),this.changeStep=function(step){
return this.step=step,PlanSelectionHelpers.takeoverBackground(step)},this.checkout=function(){return self=this,this.creditStatus.reserve_credits=parseInt(this.select.val),this.loading=!0,this.creditPurchaseService.post(this.creditStatus).then(function(response){return self.loading=!1,self.checkoutMessage=response,response.success?self.changeStep("Checkout"):self.changeStep("Error")})},this.close=function(noRefresh){return PlanSelectionHelpers.goToApp(noRefresh)},this.stripeModalClosed=function(){return this.loading=!1,$scope.$apply()},this.updatePrice=angular.bind(this,function(){var selectIndex;return selectIndex=this.select.options.indexOf(this.select.val),this.price=this.select.cost[selectIndex]/100,this.unitPrice=(this.select.cost[selectIndex]/this.select.val/100).toFixed(3)}),this}])}.call(this),function(){angular.module("App.controllers").controller("DowngradeController",function(){var ctrl;return ctrl=this,ctrl.impact={campaigns:[],galleries:[]},ctrl.setImpact=function(impact){return ctrl.impact=impact},ctrl.splitRequiredFeatures=function(campaign){return campaign.required_features.split(/\n/)},ctrl.impactedCampaignsDescription=function(){return 1===ctrl.impact.campaigns.length?"1 Campaign":ctrl.impact.campaigns.length+" Campaigns"},ctrl.impactedGalleriesDescription=function(){return 1===ctrl.impact.galleries.length?"1 Gallery":ctrl.impact.galleries.length+" Gallery"},ctrl.confirm=function(){return $("[ng-controller='SitesController']").scope().submitUpdate()},ctrl})}.call(this),function(){angular.module("App.controllers").controller("FacebookInstallController",["$scope","$http",function($scope,$http){var facebookAdminId;return $scope.install={facebookAdminPages:[],placementOptions:[],currentApps:[],accessTokens:{},tabStatuses:null},$scope.facebookAdminLogin=function(){return FB.login(function(response){return $scope.$apply(function(){return $scope.install.getttingFacebokAdminPages=!1})},{auth_type:"rerequest",scope:"manage_pages"})},$scope.loadExistingTabs=function(){return $scope.install.tabStatuses=null,$http({url:"/facebook-tabs/page-tab-status",method:"GET",params:{access_token:$scope.install.accessTokens[$scope.install.page_id],page_id:$scope.install.page_id}}).success(function(data){var found,i,install,j,k,l,len,len1,len2,ref,ref1,status,tab;for(l=[],ref=data.installs,i=0,len=ref.length;len>i;i++)install=ref[i],l.push({install:install});for(ref1=data.tabs,j=0,len1=ref1.length;len1>j;j++){for(tab=ref1[j],found=!1,k=0,len2=l.length;len2>k;k++)status=l[k],!found&&status.install&&status.install.app_id===tab.app_id&&(status.tab=tab,found=!0);found||l.push({tab:tab})}return $scope.install.tabStatuses=l}).error(function(data,status,headers,config){return alert("Sorry, there was an error loading your tabs.")})},$scope.removeTabStatus=function(tabStatus){return tabStatus.removing?void 0:(tabStatus.removing=!0,$http({url:"/facebook-tabs/clear-tab-status",method:"POST",params:{access_token:$scope.install.accessTokens[$scope.install.page_id],page_id:$scope.install.page_id,app_id:tabStatus.tab?tabStatus.tab.app_id:void 0,facebok_install_id:tabStatus.install?tabStatus.install.id:void 0}}).success(function(data){var tabStatusIndex;return tabStatusIndex=$scope.install.tabStatuses.indexOf(tabStatus),tabStatusIndex>=0&&$scope.install.tabStatuses.splice(tabStatusIndex,1),tabStatus.removing=!1}).error(function(data,status,headers,config){return alert("Sorry, there was an error removing that tab/install"),tabStatus.removing=!1}))},$scope.tabLink=function(tabStatus){var response,t;return t=tabStatus.tab,t?response="https://www.facebook.com/"+$scope.install.page_id+"?sk=app_"+t.app_id:void 0},$scope.installLink=function(tabStatus){return tabStatus.install?tabStatus.install.installed_url:void 0},$scope.existingInstalls=function(){var i,len,placementOption,ref;if($scope.install&&$scope.install.placementOptions&&$scope.install.placementOptions.length>0)for(ref=$scope.install.placementOptions,i=0,len=ref.length;len>i;i++)if(placementOption=ref[i],"new"!==placementOption.app_id)return!0;return!1},$scope.applyPageSelection=function(){return $scope.install.placementOptions=[],$http({url:"/facebook-page-tab-options",method:"GET",params:{access_token:$scope.install.access_token,page_id:$scope.install.page_id,id:$scope.install.id,type:$scope.install.type}}).success(function(data){return $scope.install.tabPlacement=data[data.length-1].app_id,$scope.install.placementOptions=data}).error(function(data,status,headers,config){return alert("Sorry, we could not confirm that you manage that page.")})},$scope.facebookAdminId=facebookAdminId=function(){var response;return window.FB?(response=FB.getAuthResponse())?($scope.install.access_token=response.accessToken,response.userID):void 0:null},$scope.applyInstall=function(){return $scope.install.success=null,$scope.install.tabPlacement&&!$scope.install.installing?($scope.install.installing=!0,$http.post("/apply-facebook-install",$scope.install).success(function(data){return $scope.install.success=data,$scope.install.installing=!1}).error(function(){return alert("Sorry, we were not able to install the tab to your Facebook page"),$scope.install.installing=!1})):void 0},$scope.getFacebookAdminPages=function(){return window.FB&&facebookAdminId()&&!$scope.install.getttingFacebokAdminPages&&($scope.install.getttingFacebokAdminPages=!0,FB.api("/me/accounts?fields=id,access_token,name",{limit:500},function(response){return $scope.$apply(function(){var account,i,len,ref;if(response.data)for(ref=response.data,i=0,len=ref.length;len>i;i++)account=ref[i],$scope.install.accessTokens[account.id]=account.access_token;return $scope.install.facebookAdminPages=response.data})})),$scope.install.facebookAdminPages}}])}.call(this),function(){angular.module("App.controllers").controller("FailedEnableController",["$window",function($window){var ctrl;return ctrl=this,ctrl.required_features="",ctrl.site_id=null,ctrl.setState=function(site_id,required_features){return ctrl.site_id=site_id,ctrl.required_features=required_features},ctrl.splitRequiredFeatures=function(){return ctrl.required_features.replace(/Requires features to enable:\s*\n/,"").split(/\n/)},ctrl.toUpgrade=function(){return $window.location.href="/sites/"+site_id+"/plan"},ctrl}])}.call(this),function(){angular.module("App.controllers").controller("GalleryInstallController",["$scope",function($scope){return $scope.install={header:!0,sort:"Popularity",type:"Hosted"},$scope.params=function(){var data;return data=[],$scope.install.header||data.push("h=f"),!$scope.install.enter&&$scope.install.promote_entry&&data.push("e=f"),$scope.install.allow_voting&&($scope.install.sorting||data.push("s=f"),"Popularity"!==$scope.install.sort&&data.push("o=r")),0===data.length?"":"?"+data.join("&")},$scope.embedCode=function(key){var str;return str='<div data-gallery-embed="'+encodeURIComponent(key)+'"',$scope.install.header||(str+=" data-header='f'"),!$scope.install.enter&&$scope.install.promote_entry&&(str+=" data-enter='f'"),$scope.install.allow_voting&&($scope.install.sorting||(str+=" data-sorting='f'"),"Popularity"!==$scope.install.sort&&(str+=" data-sort='r'")),str+"></div>"}}])}.call(this),function(){angular.module("App.controllers").controller("GalleryController",["$document","$scope","$interval","$timeout","$element","$location",function($document,$scope,$interval,$timeout,$element,$location){var fallbackNavBarElm,find,flatTabs,fullViewTabs,get,getCampaignKey,isEmpty,isNaN,modernTabs,noop,selectedTabBaseOnFallbackNavBar,selectedTabBaseOnLocation,selectedValues,tabs,toArray,toStr,waitIframe;return get=function(obj,key){return"object"==typeof obj?obj[key]:void 0},noop=function(){},find=function(arr,func){return arr.filter(func)[0]},toStr=function(v){return""+v},isNaN=function(v){return v!==v},toArray=function(v){return Array.prototype.slice.call(v)},isEmpty=function(v){return"string"==typeof v&&0===v.length||null===v||void 0===v||isNaN(v)},selectedValues=function(multiSelect){return toArray(multiSelect.options).filter(function(opt){return opt.selected}).map(function(opt){return opt.value})},$scope.galleryHeaderStyles=function(){var str;return str="",$scope.header_color&&(str+="color: "+$scope.header_color+";"),$scope.header_background&&(str+="background-color: "+$scope.header_background+"; background-image: none;"),$scope.image&&(str+='background-image: url("'+$scope.image,str+='"); background-size: cover;'),str},fallbackNavBarElm=$element.find(".nav.nav-tabs"),fallbackNavBarElm.on("click",function(){return $timeout(noop)}),tabs=[$scope.HOME_TAB="home-tab",$scope.HEADER_TAB="header-tab",$scope.CONTENT_TAB="content-tab",$scope.SOCIAL_TAB="social-tab",$scope.IMPORT_TAB="import-tab",$scope.ADVANCED_TAB="advanced-tab",$scope.ADMIN_TAB="admin-tab"],fullViewTabs=[$scope.IMPORT_TAB],modernTabs=[$scope.HOME_TAB,$scope.HEADER_TAB,$scope.CONTENT_TAB,$scope.ADVANCED_TAB,$scope.ADMIN_TAB],flatTabs=[$scope.HOME_TAB,$scope.ADVANCED_TAB,$scope.ADMIN_TAB],$scope.enableSplitView=function(){return"2"===toStr($scope.version)&&-1===fullViewTabs.indexOf($scope.selectedTab())},$scope.isModernStyle=function(){return"2"===toStr($scope.version)&&-1!==modernTabs.indexOf($scope.selectedTab())},$scope.isPaneFlat=function(){return"2"===toStr($scope.version)&&-1!==flatTabs.indexOf($scope.selectedTab())},$scope.selectedTab=function(){return selectedTabBaseOnLocation()||selectedTabBaseOnFallbackNavBar()||$scope.HOME_TAB},selectedTabBaseOnLocation=function(){var knownTabName,rawHref,tabName,tabNameER;return rawHref=$location.url(),tabNameER=/\w+-tab/.exec(rawHref),tabName=tabNameER&&tabNameER[0],knownTabName=-1!==tabs.indexOf(tabName),knownTabName&&tabName},selectedTabBaseOnFallbackNavBar=function(){var knownTabName,rawHref,tabName,tabNameER;return rawHref=fallbackNavBarElm.find("li.active > a").prop("href"),tabNameER=/\w+-tab/.exec(rawHref),tabName=tabNameER&&tabNameER[0],knownTabName=-1!==tabs.indexOf(tabName),knownTabName&&tabName},$scope.allowFullscreenSection=function(){return $scope.header_show_cover||$scope.header_show_logo},$scope.allowCampaignSection=function(){return!isEmpty($scope.campaignsSelected)&&$scope.campaignsSelected},$scope.toNumber=function(v){return parseFloat(v)},$scope["default"]=function(v,def){return isEmpty(v)?def:v},$scope.toPositive=function(v){return v>0?v:0},$scope.toPixel=function(v){return v+"px"},getCampaignKey=function(){var campaign,campaignId;return campaignId=$scope.campaign,campaign=find(window.campaignInfoList,function(cmp){return toStr(cmp.id)===toStr(campaignId)}),get(campaign,"key")},$scope.$watch("allow_voting",function(){return $scope.allow_sorting=$scope.allow_voting}),waitIframe=$interval(function(){var campaignsElm,cancelLoop,gContentWindow,gIframe,getValueFunc,haltTimeoutErr,handleStylerMeta,inspectCount,inspectLimit,inspectLoop,knownMethods,origAEL,pendingApplyId,prop2func,proxyAEL,setEntryCampaignId,talker,talkerSubs,whileIframe;return(gIframe=$document.find("[data-gallery-embed][data-live-edit] > iframe")[0])?($interval.cancel(waitIframe),gContentWindow=gIframe.contentWindow,campaignsElm=document.querySelector("#gallery-import-campaigns"),pendingApplyId=null,setEntryCampaignId=function(){var values;return values=selectedValues(campaignsElm),$scope.campaign=values[0],clearTimeout(pendingApplyId),pendingApplyId=setTimeout(function(){return $scope.$apply()},300)},setEntryCampaignId(),$(campaignsElm).on("change",setEntryCampaignId),prop2func={allow_entry:function(){return $scope.promote_entry&&$scope.allowCampaignSection()},campaign_key:getCampaignKey,fullscreen_button_show:function(){return $scope.fullscreen_button_show&&$scope.allowFullscreenSection()}},getValueFunc=function(propKey){return prop2func[propKey]?prop2func[propKey]:function(){return $scope[propKey]}},knownMethods=[],haltTimeoutErr=function(errHandler){return function(err){return"Error: timeout"!==err.toString()?errHandler(err):void 0}},handleStylerMeta=function(metaList){return metaList.filter(function(meta){var isNew;return isNew=-1===knownMethods.indexOf(meta.propKey),isNew&&knownMethods.push(meta.propKey),isNew}).map(function(meta){var style,value,valueFunc;return valueFunc=getValueFunc(meta.propKey),value=valueFunc(),style={style:meta.propKey,value:value},talker.send("applyStyle",style).then(noop,haltTimeoutErr(function(err){return console.error("setup: applyStyle - fail!",style,err)})),meta}).map(function(meta){return $scope.$watch(getValueFunc(meta.propKey),function(newValue,oldValue){var style;if(void 0===oldValue||oldValue!==newValue)return style={style:meta.propKey,value:newValue},talker.send("applyStyle",style).then(noop,haltTimeoutErr(function(err){return console.error("watch: applyStyle - fail!",style,err)}))})})},inspectCount=0,inspectLimit=5,inspectLoop=function(){var testIframe;return inspectCount>=inspectLimit?void cancelLoop():(inspectCount++,testIframe=$document.find("[data-gallery-embed][data-live-edit] > iframe")[0],testIframe&&testIframe.contentWindow===gContentWindow?talker.send("inspect").then(function(msg){var err;try{return msg.data.isDone?handleStylerMeta(msg.data.data):console.error("inspectLoop:",msg.data)}catch(error){return err=error,console.error("inspectLoop:",err)}},function(err){return console.error("inspectLoop:",err)}):void cancelLoop())},cancelLoop=function(){return $interval.cancel(whileIframe),talkerSubs.forEach(function(sub){return window.removeEventListener(sub.event,sub.func)})},proxyAEL=function(event,func){return talkerSubs.push({event:event,func:func}),origAEL.apply(window,arguments)},origAEL=window.addEventListener,talkerSubs=[],window.addEventListener=proxyAEL,talker=new Talker(gContentWindow,"*"),window.addEventListener=origAEL,whileIframe=$interval(inspectLoop,2e3)):void 0},1e3)}])}.call(this),function(){angular.module("App.controllers").controller("GalleryListController",["$window","$http","jQuery",function($window,$http,jQuery){var ctrl;return ctrl=this,ctrl.toggle=function(element,id,site_id){var checked;return checked=jQuery(element).is(":checked"),$window.API.galleries.update({id:id,disabled:!checked},{failure:function(data,textStatus,errorThrown,jqXHR){var controller,scope;return data&&data.errors&&data.errors[0]&&data.errors[0].meta&&data.errors[0].meta.attributes&&data.errors[0].meta.attributes.disabled?(scope=jQuery("[ng-controller='FailedEnableController as failed']").scope(),controller=scope.failed,controller.setState(site_id,data.errors[0].meta.attributes.disabled.join("\n")),scope.$apply(),jQuery("#failed-enable-modal").modal("show"),jQuery(element).prop("checked",!1).trigger("change")):$window.API.defaultOnError.apply(this,arguments)}})},ctrl}])}.call(this),function(){angular.module("App.controllers").controller("ImportController",["$scope","$http",function($scope,$http){var ctrl;return ctrl=this,ctrl["import"]={suppress_email:!0},ctrl.init=function(data){return ctrl.entry_methods=data,ctrl["import"].entry_method_id=ctrl.entry_methods[0].id},ctrl}])}.call(this),function(){angular.module("App.controllers").controller("IncentiveController",["$scope",function($scope){var ctrl;return ctrl=this,ctrl.hasFeatureImageLayout=function(){var ref;return"OnlyImage"===(ref=$scope.incentives[0].layout)||"ImageAbove"===ref||"NameImageDesc"===ref},ctrl.imageLabel=function(){return"SideImage"===$scope.incentives[0].layout?"Side Image":"Feature Image"},ctrl.imageHint=function(){return"SideImage"===$scope.incentives[0].layout?"Recommended size 135px for Small Image with name/description":"Recommended size 540px for Feature Image or 1080px for hi-res/retina image"},ctrl.layoutDataLabel=function(){return"Twitch"===$scope.incentives[0].layout?"Twitch Username":"YouTube, Vimeo or Wistia Url"},ctrl.layoutDataPlaceholder=function(){return"Twitch"===$scope.incentives[0].layout?"riotgames":"https://www.youtube.com/watch?v=dQw4w9WgXcQ"},ctrl}])}.call(this),function(){angular.module("App.controllers").controller("IntegrationsController",["$http","$timeout","$q",function($http,$timeout,$q){var changeCredentialsField,checkCredentialsFields,fetchIntegrationFields,firstPullLists,hintMessages,init,makeErrorFromResponse,pullLists,sendTestContact,vm;vm=this,hintMessages={initial_enabled:"Click on field to get data",initial_disabled:"Please provide valid credentials",in_process:"Getting data...",success:function(size){return"Found "+size+" options."},invalid:"Can't get data with given credentials.",error:"Sorry, an error occured."},pullLists=function(){var error_callback,params,success_callback;checkCredentialsFields()&&(success_callback=function(data){return vm.lists=data.lists,vm.mustPullLists=!1,vm.pullListsInProcess=!1,vm.hint=hintMessages.success(vm.lists.length)},error_callback=function(data,status){return vm.lists=[],vm.pullListsInProcess=!1,data&&data.error?vm.hint=data.error:(vm.hint=hintMessages.error,alert("Sorry, an error occured.  We have been notified of the error and will work to ensure this never happens again."))},vm.hint=hintMessages.in_process,vm.pullListsInProcess=!0,params={integration:vm.integration,integration_class:vm.integration_class},$http.post("/integrations/lists",params).success(success_callback).error(error_callback))},fetchIntegrationFields=function(){var dfd,params;return dfd=$q.defer(),checkCredentialsFields()?(params={integration:vm.integration,integration_class:vm.integration_class},$http.post("/integrations/custom_fields",params).then(function(response){return dfd.resolve(response.data.custom_fields)},function(response){return dfd.reject(makeErrorFromResponse(response))})):$timeout(function(){return dfd.reject(Error("Enter credentials first"))},4),dfd.promise},sendTestContact=function(testContact){var dfd,params;return dfd=$q.defer(),checkCredentialsFields()?(params={integration:vm.integration,integration_class:vm.integration_class,field_mapping:jsyaml.safeDump(vm.field_mapping),user_defined_fields:jsyaml.safeDump(vm.user_defined_fields),test_contact:testContact},$http.post("/integrations/send_test_contact",params).then(function(response){return dfd.resolve(response.data.message)},function(response){return dfd.reject(makeErrorFromResponse(response))})):$timeout(function(){return dfd.reject(Error("Enter credentials first"))},4),dfd.promise},firstPullLists=function(){return vm.mustPullLists?vm.pullLists():void 0},checkCredentialsFields=function(){var credentials_attr,i,len,ref;for(ref=vm.credentials_attrs,i=0,len=ref.length;len>i;i++)if(credentials_attr=ref[i],""===vm.integration[credentials_attr])return!1;return!0},changeCredentialsField=function(value){value||(vm.credentialsEmpty=!0,vm.hint=hintMessages.initial_disabled),checkCredentialsFields()&&(vm.credentialsEmpty=!1,vm.hint=hintMessages.initial_enabled),vm.lists=[],vm.mustPullLists=!0},init=function(options){options&&(vm.integration_class=options.integration_class,vm.integration=options.integration,vm.credentials_attrs=options.credentials_attrs,vm.lists=options.lists,vm.field_mapping=options.field_mapping,vm.user_defined_fields=options.user_defined_fields,vm.mustPullLists=!0,$timeout(function(){return vm.credentialsEmpty=!checkCredentialsFields(),vm.hint=vm.credentialsEmpty?hintMessages.initial_disabled:hintMessages.initial_enabled},100))},makeErrorFromResponse=function(response){return response.data&&response.data.error?Error(response.data.error):Error(response.status+" - "+response.statusText)},vm.sendTestContact=sendTestContact,vm.fetchIntegrationFields=fetchIntegrationFields,vm.pullLists=pullLists,vm.firstPullLists=firstPullLists,vm.changeCredentialsField=changeCredentialsField,vm.init=init}]).controller("SiteSettingsIntegrationsController",["$http","$timeout","$q",function($http,$timeout,$q){var makeErrorFromResponse;this.init=function(_this){return function(options){return _this.integration_class=options.integration_class,_this.integration=options.integration,_this.field_mapping=options.field_mapping,_this.user_defined_fields=options.user_defined_fields}}(this),this.fetchIntegrationFields=function(_this){return function(){var dfd,params;return dfd=$q.defer(),params={integration:_this.integration,integration_class:_this.integration_class},$http.post("/integrations/custom_fields",params).success(function(data){return dfd.resolve(data.custom_fields)}).error(function(data,status){return dfd.reject(makeErrorFromResponse(data,status))}),dfd.promise}}(this),this.sendTestContact=function(_this){return function(testContact){var dfd,params;return dfd=$q.defer(),params={integration:_this.integration,integration_class:_this.integration_class,field_mapping:jsyaml.safeDump(_this.field_mapping),user_defined_fields:jsyaml.safeDump(_this.user_defined_fields),test_contact:testContact},$http.post("/integrations/send_test_contact",params).success(function(data){return dfd.resolve(data.message)}).error(function(data,status){return dfd.reject(makeErrorFromResponse(data,status))}),dfd.promise}}(this),makeErrorFromResponse=function(data,status){return data&&data.error?Error(data.error):Error(status)}}]).controller("MiniIntegrationController",["$http","$timeout","$q",function($http,$timeout,$q){var init,mi;mi=this,mi.mailSettings={selectedOption:null,options:[]},mi.init=init=function(data){return mi.mailSettings.selectedOption=data.options.find(function(_this){return function(option){return option.value===data.value}}(this)),mi.mailSettings.options=data.options}}])}.call(this),function(){angular.module("App.controllers").controller("PlanSelectionController",["$scope","$http","$window","$timeout","$filter","PlanSelectionService","PlanSelectionHelpers",function($scope,$http,$window,$timeout,$filter,PlanSelectionService,PlanSelectionHelpers){var cycleUnits,limitsKeys,plansByContext,plansById,plansForComparison;return this.advertisedFeatures={},this.creditCards=[],this.creditCardSelectOpen=!1,this.checkoutLabel="Subscribe Plan",this.checkoutMessage=null,this.currentPlan=null,this.currentPlanLimits={},this.currency="$",this.curDate=new Date,this.cycle="Yearly",this.cycleAbbr="/yr",this.cycleDividers={Monthly:1,Quarterly:3,Yearly:12},this.defaultCreditCard=null,this.limitsReviewText={competitions_limit_selections:{label:"Sites",tip:"The number of sites you receive per billing cycle"},captures_limit_selections:{label:"Conversions",tip:"The number of redeem credits you receive per billing cycle"},rewards_limit_selections:{label:"Claims",tip:"The number of redeem credits you receive per billing cycle"},galleries_limit_selections:{label:"Connections",tip:"The number of hashtags/threads that you can automatically import in to a gallery"}},this.limitsTypes={competitions_limits:"sites",captures_limits:"conversions",rewards_limits:"claims",galleries_limits:"connections"},this.loading=!1,this.nextPlan=null,this.paymentMethod="credit-card",this.plansLimits={},this.previousCycle="Yearly",this.purchasableItems=null,this.selectedPlan=null,this.skipUpsell=!1,this.step="Choose",this.upsellPlan=null,this.upsellStep=1,this.sliderTest={minValue:1,maxValue:8,value:0,options:{floor:0,ceil:10,showTicksValues:!0,showSelectionBar:!0}},cycleUnits={Monthly:"month",Quarterly:"quarter",Yearly:"year"},limitsKeys=["competitions_limit_selections","rewards_limit_selections","captures_limit_selections","galleries_limit_selections"],plansById={},plansByContext={},plansForComparison={},this.init=function(data,featureComparison){var card,creditCard,j,k,len,len1,name,name1,plan,planIndex,priceKey,ref,ref1,results;for(this.cancel=data.cancel,this.context=this.initialContext=data.context,this.desiredPlan=data.desired_plan,this.featuresContext="Package"===this.context?"Competitions":this.context,this.featureComparison=featureComparison,this.limitKey=this.context.toLowerCase()+"_limit_selections",this.modify=data.modify,this.plans=data.available_plans,this.reload=data.reload,this.selectedContext=data.context,this.site=data.site,this.planSelections=data.plan_selections,this.proRata=data.pro_rata_credit,this.user=data.user,"Rewards"===this.context&&(this.purchasableItems="claims"),"Captures"===this.context&&(this.purchasableItems="credits"),priceKey="cents_per_"+cycleUnits[this.cycle],this.plans.sort(function(a,b){return a[priceKey]-b[priceKey]}),this.formatComparisonFeatures(),this.formatPlansLimits(),this.setCurrentPlan(),this.setFreePlan(),planIndex=0,ref=this.plans,j=0,len=ref.length;len>j;j++)plan=ref[j],plan.advertised_features&&(this.advertisedFeatures[plan.id]=PlanSelectionHelpers.advertisedFeatures(plan.advertised_features)),plan.name===this.desiredPlan&&(this.changeStep("Review"),this.selectPlan(plan)),(0!==plan.cents_per_month||0===plan.cents_per_month&&"Competitions"===plan.plan_type)&&(plansForComparison[name=plan.plan_type]||(plansForComparison[name]=[]),plansForComparison[plan.plan_type].push(plan)),plansByContext[name1=plan.plan_type]||(plansByContext[name1]=[]),plansByContext[plan.plan_type].push(plan),plansById[plan.id]=plan,planIndex++;for(ref1=data.credit_cards,results=[],k=0,len1=ref1.length;len1>k;k++)creditCard=ref1[k],card={id:creditCard.id,number:creditCard.last4,type:creditCard.brand.toLowerCase(),name:creditCard.name},data.default_credit_card===creditCard.id&&(this.defaultCreditCard=card),this.creditCards.push(card),this.currentPlan?(plan=this.planById(this.currentPlan.id),this.cancel&&this.changeStep("Cancel",plan),this.modify&&0!==plan.cents_per_month?results.push(this.changeStep("Modify",plan)):results.push(void 0)):results.push(void 0);return results},this.stickyTitle=function(selector){var $scrollElement,$title,_whenScrolling;return $scrollElement=$(".js-billing-scroll-section"),$title=$(selector),_whenScrolling=function(){var titlePosition;return $title.length>0?(titlePosition=$(selector).parent().offset().top,0>=titlePosition?$title.addClass("fixed"):$title.removeClass("fixed")):void 0},$scrollElement.off("scroll.title").on("scroll.title",function(){return _whenScrolling()})},this.stickyHeaders=function(selector){var $headers,$scrollElement,_whenScrolling;return $scrollElement=$(".js-billing-scroll-section"),$headers=$(selector),_whenScrolling=function(){return $headers.each(function(i){var $nextHeader,$prevHeader,$thisHeader,headerPosition,nextHeaderPosition,scrollTop;return $thisHeader=$(this),0!==$thisHeader.outerHeight()?(headerPosition=$thisHeader.parent().offset().top,scrollTop=$scrollElement.scrollTop(),0>headerPosition?($nextHeader=$headers.eq(i+1),$nextHeader.length>0&&(nextHeaderPosition=$nextHeader.parent().offset().top),$thisHeader.addClass("fixed"),$nextHeader.length>0?nextHeaderPosition<=$thisHeader.outerHeight()?$thisHeader.css("top",nextHeaderPosition-$thisHeader.outerHeight()):$thisHeader.css("top",0):void 0):($prevHeader=$headers.eq(i-1),$thisHeader.removeClass("fixed"))):void 0})},$scrollElement.off("scroll.headers").on("scroll.headers",function(){return _whenScrolling()})},this.addCreditCard=function(){var self;return self=this,this.loading=!0,$window.addStripeCard({panelLabel:"Add card",email:this.user.email},function(response){var card;return card={id:response.card.id,number:response.card.last4,type:response.card.brand.toLowerCase(),name:response.card.name},$scope.$apply(function(){return self.defaultCreditCard=card,self.creditCards.push(card),self.loading=!1}),PlanSelectionHelpers.addCard(response.id,self.user.id).then(function(){return PlanSelectionHelpers.setDefaultCard(self.defaultCreditCard.id,self.user.id)})},angular.bind(self,self.stripeModalClosed))},this.calculateLimitPrice=function(selection,limitKey,plan,cycle){return this.limitPrice(plan,limitKey,cycle,selection)||null},this.changeContext=function(){return this.scrollToTop(),"Package"===this.context?(this.context=this.selectedContext,this.featuresContext=this.selectedContext,"Upsell"===this.previousStep?this.step="Review":this.step=this.previousStep):(this.context="Package",this.featuresContext="Competitions",this.previousStep=this.step,this.step="Choose"),this.formatComparisonFeatures(),this.formatPlansLimits(),this.setCurrentPlan()},this.changeDefaultCard=angular.bind(this,function(){var self;return self=this,$timeout(function(){return PlanSelectionHelpers.setDefaultCard(self.defaultCreditCard.id,self.user.id)},0)}),this.changeCycle=function(cycle){return this.cycle=cycle,this.cycleAbbr="Monthly"===this.cycle?"/mo":"/yr",this.formatPlansLimits(),this.currentPlan&&this.cycle===this.currentPlan.current_cycle&&this.plansLimits[this.currentPlan.id]?this.plansLimits[this.currentPlan.id][this.limitsKey].val=this.currentPlanLimits[this.limitsKey]:void 0},this.changeFeaturesContext=function(context){return this.featuresContext=context,this.formatComparisonFeatures()},this.changeStep=function(step,selectedPlan){var j,len,plan,ref,selectedPlanType;if(this.upsellPlan=null,this.upsellStep=1,selectedPlan){for(this.checkoutLabel=this.isCurrentPlan(selectedPlan)?"Modify Plan":"Subscribe Plan",this.selectPlan(selectedPlan),selectedPlanType=selectedPlan.name.replace(/\s(Competitions|Rewards|Galleries|Captures|Package)$/,""),ref=this.plans,j=0,len=ref.length;len>j;j++)plan=ref[j],(plan.name===selectedPlanType+" Package"||"Agency Package"===plan.name&&"Premium"===selectedPlanType)&&(this.upsellPlan=plan);if(0===selectedPlan.cents_per_month)return void this.checkout()}return"Upsell"!==step||"Package"!==this.context&&!this.skipUpsell&&this.upsellPlan?"Upsell"===this.step&&"Package"!==this.context&&"Review"===step?(this.skipUpsell=!0,this.step=step,this.refreshTicksSlider()):this.step=step:this.step="Review","Modify"===step&&this.currentPlan&&this.cycle!==this.currentPlan.current_cycle&&(this.cycle=this.currentPlan.current_cycle),PlanSelectionHelpers.takeoverBackground(step),this.scrollToTop()},this.changeUpsellStep=function(step){return this.upsellStep=step},this.selectableCycles=function(plan){var cycle,r,unit;r=[];for(cycle in cycleUnits)unit=cycleUnits[cycle],null!==this.centsPer(cycle,plan)&&r.push(cycle);return r},this.availableOnCycle=function(plan,cycle){return null!==centsPer(cycle,plan)},this.centsPer=function(cycle,plan){return plan["cents_per_"+cycleUnits[cycle]]},this.chargeNow=function(){var chargeNow;return chargeNow=this.totalPrice(this.selectedPlan,!1)-this.proRataCredit(),chargeNow=0>chargeNow?0:chargeNow},this.checkFlag=function(plan,flag){return plan.flags?plan.flags.indexOf(flag)>-1:!1},this.checkout=function(cancel){var PlanSelection,j,len,plan,planSelection,ref,request,self;for(self=this,PlanSelection=cancel?new PlanSelectionService(this.cycle,this.plansLimits[this.freePlan.id],this.freePlan,this.site.id,this.user):new PlanSelectionService(this.cycle,this.plansLimits[this.selectedPlan.id],this.selectedPlan,this.site.id,this.user),planSelection=null,ref=this.planSelections,j=0,len=ref.length;len>j;j++)plan=ref[j],plan.plan_type===this.context&&(planSelection=plan);return request=planSelection?PlanSelection.update(planSelection):PlanSelection.add(),this.loading=!0,request.then(function(response){var buttonTextSufix,planSelectionTriggerButton,planSelectionTriggerButtonContents,selectedPlanShortName;return self.loading=!1,self.checkoutMessage=response,response.success?(self.changeStep("Checkout"),"function"==typeof $("[ng-controller]").scope().setFeatures&&$("[ng-controller]").scope().setFeatures(response.features),self.reload?void 0:(planSelectionTriggerButton=angular.element(document.getElementsByClassName("js-billing-upgrade-trigger")[0]),planSelectionTriggerButtonContents=planSelectionTriggerButton.contents(),selectedPlanShortName=$filter("shortPlanName")(self.selectedPlan.name),buttonTextSufix="Package"===self.selectedPlan.plan_type?" Package":"",planSelectionTriggerButtonContents[1].nodeValue=" Plan: "+selectedPlanShortName+buttonTextSufix)):self.changeStep("Error")})},this.close=function(){return PlanSelectionHelpers.goToApp(!this.reload)},this.displayFeatureHeadingPlan=function(plan){return plan.plan_type===this.featuresContext&&(plan.trial===!1||null===plan.trial)},this.displayFeatureRow=function(feature,rowIndex){return 5>rowIndex&&!feature.expanded||feature.list.length<4||feature.expanded},this.displayPlan=function(plan){return plan.plan_type===this.context&&this.centsPer(this.cycle,plan)},this.expirationDate=function(){var now;return now=new Date,this.isCurrentPlan(this.selectedPlan)?this.currentPlan.expires_at:"Yearly"===this.cycle?new Date(now.setFullYear(now.getFullYear()+1)):new Date(now.setMonth(now.getMonth()+1))},this.formatComparisonFeatures=function(){var feature,featureIndex,j,len,ref,self;for(this.features=[],featureIndex=-1,ref=this.featureComparison[this.featuresContext],j=0,len=ref.length;len>j;j++)feature=ref[j],feature.heading?(this.features.push({heading:feature.heading,expanded:!1,list:[]}),featureIndex++):this.features[featureIndex].list.push(feature);return self=this,setTimeout(function(){return self.stickyTitle(".billing-compare__table__plan-title"),self.stickyHeaders(".billing-compare__table__feature-title");
},0)},this.formatPlanLimit=function(plan,limitKey){var aux,centsPerMonth,limit,limits,options,valIndex;if(centsPerMonth=[],limits=plan[limitKey][this.cycle],options=[],valIndex=0,limits){aux=0;for(limit in limits)options[aux]=limit,centsPerMonth.push(limits[limit]),aux++;return this.plansLimits[plan.id]?this.plansLimits[plan.id][limitKey]&&(valIndex=this.plansLimits[plan.id][limitKey].options.indexOf(this.plansLimits[plan.id][limitKey].val)):this.plansLimits[plan.id]={},this.plansLimits[plan.id][limitKey]={cents_per_month:centsPerMonth,options:options,type:plan.plan_type,val:options[valIndex]}}},this.formatPlansLimits=function(){var j,len,limitKey,plan,ref,results;for(this.limitsKey=this.context.toLowerCase()+"_limit_selections",ref=this.plans,results=[],j=0,len=ref.length;len>j;j++)plan=ref[j],"Package"===plan.plan_type?results.push(function(){var k,len1,results1;for(results1=[],k=0,len1=limitsKeys.length;len1>k;k++)limitKey=limitsKeys[k],plan[limitKey]?results1.push(this.formatPlanLimit(plan,limitKey)):results1.push(void 0);return results1}.call(this)):plan[this.limitsKey]&&plan.plan_type===this.context?results.push(this.formatPlanLimit(plan,this.limitsKey)):results.push(void 0);return results},this.fullPaymentDate=function(){var now;return now=new Date,"Yearly"===this.cycle||this.currentPlan&&this.selectedPlan&&this.isCurrentPlan(this.selectedPlan)&&"Yearly"===this.currentPlan.current_cycle&&"Monthly"===this.cycle?new Date(now.setFullYear(now.getFullYear()+1)):new Date(now.setMonth(now.getMonth()+1))},this.includesLabel=function(planName){var previousPlanName;return planName=planName.replace(/\s(Competitions|Rewards|Galleries|Captures|Package)$/,""),previousPlanName=null,"Premium"===planName?previousPlanName="Business":"Business"===planName?previousPlanName="Pro":"Pro"===planName&&"Competitions"===this.context?previousPlanName="Hobby":"Hobby"===planName&&(previousPlanName="Free"),previousPlanName?"Includes everything on <strong>"+previousPlanName+"</strong> and:":"Includes:"},this.isCheckoutDisabled=function(){return this.currentPlan&&this.selectedPlan&&this.isCurrentPlan(this.selectedPlan)&&this.currentPlan.current_cycle===this.cycle?"Competitions"===this.context?!0:this.plansLimits[this.selectedPlan.id]&&("Package"===this.currentPlan.plan_type&&this.plansLimits[this.selectedPlan.id].rewards_limits.val===this.currentPlanLimits.rewards_limits&&this.plansLimits[this.selectedPlan.id].captures_limits.val===this.currentPlanLimits.captures_limits&&this.plansLimits[this.selectedPlan.id].galleries_limits.val===this.currentPlanLimits.galleries_limits||"Package"!==this.currentPlan.plan_type&&this.plansLimits[this.selectedPlan.id][this.limitsKey].val===this.currentPlanLimits[this.limitsKey].toString())?!0:!1:this.defaultCreditCard?!1:!0},this.isCurrentPlan=function(plan){return this.currentPlan&&null===this.currentPlan&&plan.id===this.freePlan.id||this.currentPlan&&this.currentPlan.id===plan.id},this.isCurrentPlanPackagePlan=function(){return this.currentPlan&&"Package"===this.currentPlan.plan_type},this.isNextPlan=function(plan){return this.nextPlan&&this.nextPlan.id!==this.currentPlan.id&&this.nextPlan.id===plan.id},this.isTrialPlan=function(planName){return-1!==planName.indexOf("Trial")},this.individualPlansTotal=function(){var cost,j,len,plan,ref,selectedPlanType;if(cost=0,this.selectedPlan){for(selectedPlanType=this.selectedPlan.name.replace(/\s(Competitions|Rewards|Galleries|Captures|Package)$/,""),ref=this.plans,j=0,len=ref.length;len>j;j++)plan=ref[j],-1!==plan.name.indexOf(selectedPlanType)&&"Package"!==plan.plan_type&&(cost+=parseInt(plan.cents_per_month));cost="Yearly"===this.cycle?Math.floor(.008*cost):Math.floor(cost/100)}return cost},this.orderFeatures=function(featuresList){var j,len,orderedFeaturesList,plan,ref;for(orderedFeaturesList=[],ref=plansByContext[this.featuresContext],j=0,len=ref.length;len>j;j++)plan=ref[j],featuresList[plan.name]&&orderedFeaturesList.push(featuresList[plan.name]);return orderedFeaturesList},this.planById=function(id){return plansById[id]},this.plansByContext=function(context){return plansByContext[context]},this.plansForComparison=function(){return plansForComparison[this.featuresContext]},this.proRataCredit=function(){var proRataCredit;return proRataCredit=this.proRata.current[this.context][this.cycle],this.currentPlan&&this.selectedPlan&&this.isCurrentPlan(this.selectedPlan)&&(this.currentPlan.current_cycle===this.cycle?"Competitions"===this.context?proRataCredit=this.proRata.next[this.context][this.cycle]:this.plansLimits[this.selectedPlan.id]&&("Package"===this.currentPlan.plan_type&&this.plansLimits[this.selectedPlan.id].competitions_limits.val===this.currentPlanLimits.competitions_limits,(this.plansLimits[this.selectedPlan.id].rewards_limits.val===this.currentPlanLimits.rewards_limits&&this.plansLimits[this.selectedPlan.id].captures_limits.val===this.currentPlanLimits.captures_limits&&this.plansLimits[this.selectedPlan.id].galleries_limits.val===this.currentPlanLimits.galleries_limits||"Package"!==this.currentPlan.plan_type&&this.plansLimits[this.selectedPlan.id][this.limitsKey].val===this.currentPlanLimits[this.limitsKey].toString())&&(proRataCredit=this.proRata.next[this.context][this.cycle])):"Yearly"===this.currentPlan.current_cycle?proRataCredit=this.proRata.current[this.context].Yearly:proRataCredit+=this.proRata.next[this.context][this.cycle]),Math.ceil(proRataCredit/100)},this.planSelectLabel=function(planName){return this.isTrialPlan(planName)?"Try now":"Select Plan"},this.refreshTicksSlider=function(){$timeout(function(){$scope.$broadcast("rzSliderForceRender")})},this.scrollToTop=function(){return document.getElementsByClassName("js-billing-scroll-section")[0].scrollTop=0},this.selectPlan=function(plan){return this.selectedPlan=plan},this.limitPrice=function(plan,limitKey,cycle,selection){var amount,price,ref;if(selection&&plan&&plan[limitKey]){ref=plan[limitKey][cycle];for(amount in ref)if(price=ref[amount],parseInt(selection)===parseInt(amount))return price}return null},this.setCurrentPlan=function(){var j,len,limit,planSelection,ref,results;for(ref=this.planSelections,results=[],j=0,len=ref.length;len>j;j++)planSelection=ref[j],planSelection.plan_type===this.context&&!this.currentPlan||"Package"===planSelection.plan_type?(this.currentPlan={current_cycle:planSelection.current_cycle,expires_at:planSelection.expires_at,id:planSelection.current_plan_id,plan_type:planSelection.plan_type},this.nextPlan={cycle:planSelection.desired_cycle,id:planSelection.desired_plan_id},results.push(function(){var k,len1,ref1,results1;for(ref1=planSelection.limit_selections,results1=[],k=0,len1=ref1.length;len1>k;k++)limit=ref1[k],limit.current_limit?(this.currentPlanLimits[limit.limit_type+"_limit_selections"]=limit.current_limit.toString(),"Package"===planSelection.plan_type?(this.plansLimits[this.currentPlan.id].competitions_limits.val=this.currentPlanLimits.competitions_limits,this.plansLimits[this.currentPlan.id].rewards_limits.val=this.currentPlanLimits.rewards_limits,this.plansLimits[this.currentPlan.id].captures_limits.val=this.currentPlanLimits.captures_limits,this.plansLimits[this.currentPlan.id].galleries_limits.val=this.currentPlanLimits.galleries_limits,results1.push(this.context="Package")):this.plansLimits[this.currentPlan.id]?results1.push(this.plansLimits[this.currentPlan.id][this.limitsKey].val=this.currentPlanLimits[this.limitsKey]):results1.push(void 0)):results1.push(void 0);return results1}.call(this))):results.push(void 0);return results},this.setFreePlan=function(){var j,len,plan,ref,results;for(ref=this.plans,results=[],j=0,len=ref.length;len>j;j++)plan=ref[j],plan.plan_type===this.context&&0===plan.cents_per_month?results.push(this.freePlan=plan):results.push(void 0);return results},this.stripeModalClosed=function(){return this.loading=!1,$scope.$apply()},this.selectedLimit=function(plan,limitKey){return this.plansLimits&&this.plansLimits[plan.id]&&this.plansLimits[plan.id][limitKey]?this.plansLimits[plan.id][limitKey].val:void 0},this.totalPrice=function(plan,asMonthly){var divider,j,len,limitKey,totalPrice;for(divider=(asMonthly?this.cycleDividers[this.cycle]:void 0)||1,totalPrice=parseInt(this.centsPer(this.cycle,plan)/divider)||0,j=0,len=limitsKeys.length;len>j;j++)limitKey=limitsKeys[j],totalPrice+=(this.calculateLimitPrice(this.selectedLimit(plan,limitKey),limitKey,plan,this.cycle)||0)/divider;return totalPrice=Math.floor(totalPrice/100)},this.upsellTotalPrice=function(){var totalPrice;return totalPrice=0,this.upsellPlan&&(totalPrice=parseInt(this.upsellPlan.cents_per_month),totalPrice="Yearly"===this.cycle?Math.floor(.008*totalPrice):Math.floor(totalPrice/100)),totalPrice},this}])}.call(this),function(){angular.module("App.controllers").controller("SignupController",["$scope","$timeout","userService","facebookLoginService",function($scope,$timeout,userService,facebookLoginService){var appName,newLogin,setPosting;return appName=$scope.appName=window.actionMarketingAppName,$scope.signupStatus={step:1},$scope.fbLoggingIn=!1,$scope.createButtonText="Create My Account",$scope.posting=!1,newLogin=function(){return window.FB?FB.login(function(response){return $scope.$apply(function(){return response.authResponse?$scope.facebookLogin():($scope.fbLoggingIn=!1,$("[data-facebook-login]").removeClass("facebook-logging-in"))})},{scope:"email,user_website"}):alert("Sorry, Facebook is not initialized yet.")},setPosting=function(){return $scope.posting=!0,$scope.createButtonText="Creating Account..."},$scope.closePopup=function(){return window.parent&&window.postMessage?window.parent.postMessage(appName+"CloseCapture","*"):void 0},$scope.submitEmail=function(){var email;return $scope.signupStatus.email?(email=$scope.signupStatus.email,$scope.emailStart=!0,userService.emailExists(email,{existing:function(facebook){return $scope.existingEmailUser=!0},"new":function(){return email&&userService.sendLead(email,$scope.leadType),$scope.signupStatus.name=userService.parseUserName(email),$scope.signupStatus.site_name=userService.parseCompanyName(email),$scope.signupStatus.site_url=userService.parseCompanyUrl(email),$scope.existingEmailUser=!1},complete:function(){return $scope.signupStatus.step=2,$scope.emailStart=!1,$scope.signupStatus.facebook_login=!1,setTimeout(function(){return $(".signup-wizard input[name=password]").focus()},500)}})):void 0},$scope.proceed=function(){var f;if(1===$scope.signupStatus.step)$scope.submitEmail();else if(f=$scope.signupStatus,$scope.fullSubmit=!0,$scope.existingEmailUser)userService.login(f.email,f.password);else{if($scope.posting)return;setPosting(),userService.submitUser(f.email,f.name,f.password,f.site_name,f.site_url,f.facebook_login),trackPageview("/signup/new")}return!0},$scope.facebookLogin=function(completeCallback){return $scope.fbLoggingIn=!0,window.FB&&FB.getUserID()?FB.api("/me/permissions?fields=permission,status",function(response){var permissions;return permissions=facebookLoginService.parsePermissions(response),permissions.basic_info||permissions.public_profile?facebookLoginService.existingUserCheck({existing:function(){return facebookLoginService.gleamLogin()},"new":function(){return facebookLoginService.getDetails(function(email,name,siteName,siteUrl){return email&&userService.sendLead(email,$scope.leadType,name,siteName,siteUrl),$scope.$apply(function(){return $scope.signupStatus.step=2,$scope.signupStatus.password=null,$scope.signupStatus.email=email,$scope.signupStatus.name=name,$scope.signupStatus.site_name=siteName,$scope.signupStatus.site_url=siteUrl,$scope.signupStatus.facebook_login=!0,$scope.fbLoggingIn=!1,$("[data-facebook-login]").removeClass("facebook-logging-in"),setTimeout(function(){return email?$(".signup-wizard input[name=name]").focus():$(".signup-wizard input[name=email]").focus(),$("#lead-form").modal("show")},500)})})}}):newLogin()}):newLogin()}}])}.call(this),function(){angular.module("App.controllers").controller("SitesController",["$scope","$http",function($scope,$http){var anualSaving,bestDiscount,changingPlans,competitionCredit,competitionDowngrade,competitionPrice,currentCost,cycleMultiplied,logoUrl,newCost,requiresPayment,token,willCredit;return $scope.headerStyles=function(){return logoUrl()||$scope.site.remove_branding?{backgroundColor:$scope.site.email_header_color||"white",height:"68px"}:$scope.site.email_header_color?{backgroundColor:$scope.site.email_header_color,padding:"20px"}:{backgroundColor:"#444",padding:"20px"}},$scope.submitUpdate=function(){var $form;return $form=$("form.site"),$form.submit(),$scope.submitting=!0},$scope.headerTextColor=function(){return($scope.site.email_header_color+"").match(/#fff|white/)?"#444":"white"},$scope.cleanUrl=function(){return $scope.site.url&&!$scope.site.url.match(/^https?:\/\//)?"http://"+$scope.site.url:$scope.site.url},$scope.logoUrl=logoUrl=function(){return $("#logo_preview").attr("src")||$(".user-asset__preview:visible img").attr("src")},$scope.updateSubscriptionButtonText=function(){return $scope.requiresPayment()?"Update & Pay":"Update"},$scope.chooseSubscriptionButtonText=function(){return $scope.requiresPayment()?"Choose & Pay":"Choose"},$scope.site=$("form.site").serializeJSON().site,cycleMultiplied=function(price,cycle){return"Yearly"===cycle?price*$scope.site.months_payment_for_year:price},bestDiscount=function(comp_ref,cycle){var best,discount,i,len,ref;for(best=null,ref=$scope.site.discounts,i=0,len=ref.length;len>i;i++)discount=ref[i],discount.plan&&comp_ref!==discount.plan||discount.min_length&&("Yearly"!==discount.min_length||"Yearly"!==cycle)||(!best||best.monthly_price>discount.monthly_price)&&(best=discount);return best},$scope.anualSavingDescription=function(){var a;return a=anualSaving(),a>0?" (Save "+a+"%)":""},anualSaving=function(){var m,y;return m=competitionPrice($scope.site.desired_competition_plan_ref,"Monthly"),y=competitionPrice($scope.site.desired_competition_plan_ref,"Yearly"),Math.floor(100-y/(.12*m)),m&&m>0?Math.floor(100-y/(.12*m)):0},competitionPrice=function(comp_ref,cycle){var discount;return discount=bestDiscount(comp_ref,cycle),discount?cycleMultiplied(discount.monthly_price,cycle):cycleMultiplied($scope.sitePrices[comp_ref]||0,cycle)},changingPlans=function(){var site;return site=$scope.site,site.current_competition_plan_ref!==site.desired_competition_plan_ref},$scope.willCredit=willCredit=function(){return competitionCredit()>0&&changingPlans()&&!competitionDowngrade()},$scope.competitionCredit=competitionCredit=function(){var site;return site=$scope.site,"Yearly"===site.desired_billing_cycle?site.yearly_competition_credit:site.monthly_competition_credit},$scope.requiresPayment=requiresPayment=function(){var current,desired,site;return site=$scope.site,desired=competitionPrice(site.desired_competition_plan_ref,site.desired_billing_cycle),current=competitionPrice(site.current_competition_plan_ref,site.desired_billing_cycle),"stripe"!==site.current_billing_type&&"stripe"===site.desired_billing_type&&desired>0?!0:newCost()>0&&desired>current&&changingPlans()&&newCost()>$scope.user.credit},$scope.currentCost=currentCost=function(){var site;return site=$scope.site,competitionPrice(site.current_competition_plan_ref,site.current_billing_cycle)},$scope.newCost=newCost=function(){var site;return site=$scope.site,competitionPrice(site.desired_competition_plan_ref,site.desired_billing_cycle)},token=function(response){var $form,$input;return $form=$("form.site"),$input=$("<input type=hidden name=stripeToken />").val(response.id),$form.append($input).submit(),$form.find(".btn").attr({disabled:!0})},$scope.onBillingTypeChange=function(){return"shopify"===$scope.site.desired_billing_type?$scope.site.desired_billing_cycle="Monthly":void 0},$scope.updateSubscription=function(){return $scope.submitting?void 0:requiresPayment()&&"stripe"===$scope.site.desired_billing_type&&!$scope.user.card?($scope.submitting=!0,StripeCheckout.open({key:window.stripePublishableKey,billingAddress:!0,name:"Pay/Update Plan",token:token,email:window.stripeEmail,panelLabel:"Pay/Update Plan",image:"https://gleam.io/images/small-logo.png"}),setTimeout(function(){return $scope.submitting=!1},3e3)):($scope.submitting=!0,competitionDowngrade()?$http.get("/sites/"+$scope.site.id+"/check-downgrade?prospective_competitions_plan_ref="+$scope.site.desired_competition_plan_ref).success(function(data,status,headers,config){return $scope.submitting=!1,data&&data.campaigns?0===data.impacted?$scope.submitUpdate():($("[ng-controller='DowngradeController as downgrade']").scope().downgrade.setImpact(data),$("#downgrade-modal").modal("show")):alert("Sorry, something went wrong when attempting to update your plan.")}).error(function(data,status,headers,config){return alert("Sorry, something went wrong when attempting to update your plan."),$scope.submitting=!1}):$scope.submitUpdate())},$scope.competitionDowngrade=competitionDowngrade=function(){var site;return site=$scope.site,$scope.sitePrices[site.current_competition_plan_ref]>$scope.sitePrices[site.desired_competition_plan_ref]}}])}.call(this),function(){angular.module("App.controllers").controller("TeamAccessesController",["$scope","$http","$window",function($scope,$http,$window){var getAccesses,self,touchInputs;return self=this,touchInputs=function(){return setTimeout(function(){return $("select[ng-model]").trigger("chosen:updated.chosen")},1)},self.team_access={},self.team_accesses=[],self.sending=!1,self.showInvite=!1,this.addTeamAccess=function(){return $("#team-access-modal").modal("show"),self.showInvite=!1,touchInputs(),self.team_access={range:"all",level:"Normal",is_saved:!1}},this.popupInvite=function(team_access){return $("#team-access-modal").modal("show"),self.showInvite=!0,self.team_access=team_access},this.saveTeamAccess=function(targetUserId){var always,editing,params;return editing=!!self.team_access.reference,params={team_access:{name:self.team_access.name,reference:self.team_access.reference,target_user_id:targetUserId,level:self.team_access.level,selections:"all"===self.team_access.range?[]:self.team_access.selections}},always=function(data,status,headers,config){return getAccesses(),self.sending=!1},self.sending=!0,$http.post("/team-accesses",params).success(function(data,status,headers,config){return self.team_access.reference=data.reference,self.team_access.is_saved=!0,always(data,status,headers,config),editing?$("#team-access-modal").modal("hide"):self.showInvite=!0}).error(function(data,status,headers,config){return data.errors?alert(data.errors.join(", ")):alert("Sorry, we got an error adding your team member"),always(data,status,headers,config)})},this.editTeamAccess=function(selected_access){return self.showInvite=!1,$("#team-access-modal").modal("show"),touchInputs(),selected_access.range=selected_access.selections&&selected_access.selections.length>0?"selected":"all",self.team_access=selected_access},this.deleteTeamAccess=function(target_user_id,reference,name){return $window.confirm("Are you sure you want to revoke access for "+name+"?")?$http["delete"]("/team-accesses/"+target_user_id+"/"+reference).success(function(){return getAccesses()}).error(function(){return alert("Sorry, we got an error revoking that access")}):void 0},this.cancel=function(){return $("#team-access-modal").modal("hide")},getAccesses=function(){return $http.get("/team-accesses/"+$("[data-team-target-id]").data("team-target-id")).success(function(data,status,headers,config){return self.team_accesses=data,self.teamSize=self.team_accesses.length+1})},getAccesses(),self}])}.call(this),uiCodemirrorDirective.$inject=["$timeout","uiCodemirrorConfig"],angular.module("ui.codemirror",[]).constant("uiCodemirrorConfig",{}).directive("uiCodemirror",uiCodemirrorDirective),function(){angular.module("App.controllers").controller("DrawWinnersController",["GleamAPI","$window","$scope","moment",function(GleamAPI,$window,$scope,moment){var ctrl;return ctrl=this,ctrl.init=function(opts){return ctrl.offsetMs=opts.offsetMs,ctrl.campaignId=opts.campaignId,ctrl.timeValid=!0,ctrl.countValid=!0,ctrl.loading=!1,ctrl.drawing=!1,ctrl.stats={},ctrl.selections={useTimes:"false",repeatedWinners:!1,startDate:ctrl.formattedUTCDate(opts.start),endDate:ctrl.formattedUTCDate(opts.end)}},ctrl.update=function(){return ctrl.load()},ctrl.onDatepickerChange=function(){return ctrl.update()},ctrl.draw=function(){var taskArgs;return taskArgs={campaign_id:ctrl.campaignId,count:ctrl.selections.winnersToDraw,allow_repeated_winners:ctrl.selections.repeatedWinners,task_type:"DrawWinners"},"true"===ctrl.selections.useTimes&&(ctrl.selections.startDate&&(taskArgs.entry_start_date_str=ctrl.toUTCDate(ctrl.selections.startDate)),ctrl.selections.startDate&&(taskArgs.entry_end_date_str=ctrl.toUTCDate(ctrl.selections.endDate))),ctrl.loading=!0,ctrl.drawing=!0,ctrl.error=null,ctrl.stats.status=null,GleamAPI.tasks.complete(taskArgs,{complete:function(task){return ctrl.stats.status=task.status,ctrl.error=task.error_message,$window.location.href=$window.location.href,ctrl.$apply()},progress:function(task){return ctrl.stats.status=task.status,task.error_message&&(ctrl.error=task.error_message,ctrl.loading=!1,ctrl.drawing=!1),ctrl.$apply()},failure:function(){return ctrl.$apply()}})},ctrl.$apply=function(){return $scope.$apply()},ctrl.load=function(callback){var winnerDataOptions;return ctrl.loading=!0,ctrl.error=null,winnerDataOptions={repeatedWinners:ctrl.selections.repeatedWinners},"true"===ctrl.selections.useTimes&&(ctrl.selections.startDate&&(winnerDataOptions.from=ctrl.toUTCDate(ctrl.selections.startDate)),ctrl.selections.endDate&&(winnerDataOptions.to=ctrl.toUTCDate(ctrl.selections.endDate))),winnerDataOptions.success=function(model){var base;return ctrl.stats={total_count:model.meta.pagination?model.meta.pagination.total_count:void 0,prizes_remaining:model.meta.aggregation.count["entries.prizes_remaining"],repeated_potential_winners:(model.meta.aggregation.sum||{})["entries.repeated_potential_winners"],unique_potential_winners:(model.meta.aggregation.count||{})["entries.unique_potential_winners"]},(base=ctrl.selections).winnersToDraw||(base.winnersToDraw=ctrl.stats.prizes_remaining),ctrl.selections.winnersToDraw=Math.min(ctrl.stats.prizes_remaining,ctrl.selections.winnersToDraw),ctrl.stats.repeated_potential_winners&&(ctrl.selections.winnersToDraw=Math.min(ctrl.stats.repeated_potential_winners,ctrl.selections.winnersToDraw)),ctrl.stats.unique_potential_winners&&(ctrl.selections.winnersToDraw=Math.min(ctrl.stats.unique_potential_winners,ctrl.selections.winnersToDraw)),callback&&callback.call(),$scope.$apply(),ctrl.selections.repeatedWinners?$("#selections_repeatedWinners").parent().addClass("checked"):void 0},winnerDataOptions.always=function(){return ctrl.loading=!1,$scope.$apply()},winnerDataOptions.failure=function(data,textStatus,errorThrown,jqXHR){return ctrl.loading=!1,ctrl.error=window.API.parseErrors(data&&data.errors)},GleamAPI.campaigns.winnerData(ctrl.campaignId,winnerDataOptions)},ctrl.maxPrizesSelection=function(){return ctrl.prizes_remaining},ctrl.formattedUTCDate=function(arg){return moment(arg).subtract(moment(arg).utcOffset(),"minutes").format("YYYY-MM-DD hh:mm:ss A")},ctrl.toUTCDate=function(arg){return moment(arg).subtract(ctrl.offsetMs,"ms").add(moment().utcOffset(),"minutes")},ctrl}])}.call(this),function(){angular.module("App.directives").directive("areYouSure",function(){return{restrict:"C",link:function(scope,element,attr){return $(element).areYouSure()}}}).directive("areYouSureLight",function(){return{restrict:"C",link:function(scope,element,attr){return $(element).areYouSure({fieldSelector:""})}}})}.call(this),function(){angular.module("App.directives").directive("bootstrapDatetimepicker",["$timeout",function($timeout){return{restrict:"A",require:"?ngModel",link:function(scope,element,attrs,ngModel){return ngModel?element.on("changeDate",function(event){return $timeout(function(){var controllerScope;return scope.$apply(function(){return ngModel.$setViewValue(element.data("datetimepicker").formatDate(event.date))}),controllerScope=$(element).closest("[ng-controller]").scope(),controllerScope&&controllerScope.ctrl&&controllerScope.ctrl.onDatepickerChange?controllerScope.$apply(function(){return controllerScope.ctrl.onDatepickerChange(scope,element,attrs,ngModel)}):void 0})}):void 0}}}])}.call(this),angular.module("checklist-model",[]).directive("checklistModel",["$parse","$compile",function($parse,$compile){function contains(arr,item,comparator){if(angular.isArray(arr))for(var i=arr.length;i--;)if(comparator(arr[i],item))return!0;return!1}function add(arr,item,comparator){return arr=angular.isArray(arr)?arr:[],contains(arr,item,comparator)||arr.push(item),arr}function remove(arr,item,comparator){if(angular.isArray(arr))for(var i=arr.length;i--;)if(comparator(arr[i],item)){arr.splice(i,1);break}return arr}function postLinkFn(scope,elem,attrs){function setChecked(newArr,oldArr){scope[attrs.ngModel]=contains(newArr,value,comparator)}var checklistModel=attrs.checklistModel;attrs.$set("checklistModel",null),$compile(elem)(scope),attrs.$set("checklistModel",checklistModel);var getter=$parse(checklistModel),setter=getter.assign,checklistChange=$parse(attrs.checklistChange),value=attrs.checklistValue?$parse(attrs.checklistValue)(scope.$parent):attrs.value,comparator=angular.equals;if(attrs.hasOwnProperty("checklistComparator"))if("."==attrs.checklistComparator[0]){var comparatorExpression=attrs.checklistComparator.substring(1);comparator=function(a,b){return a[comparatorExpression]===b[comparatorExpression]}}else comparator=$parse(attrs.checklistComparator)(scope.$parent);scope.$watch(attrs.ngModel,function(newValue,oldValue){if(newValue!==oldValue){var current=getter(scope.$parent);angular.isFunction(setter)&&(newValue===!0?setter(scope.$parent,add(current,value,comparator)):setter(scope.$parent,remove(current,value,comparator))),checklistChange&&checklistChange(scope)}}),angular.isFunction(scope.$parent.$watchCollection)?scope.$parent.$watchCollection(checklistModel,setChecked):scope.$parent.$watch(checklistModel,setChecked,!0)}return{restrict:"A",priority:1e3,terminal:!0,scope:!0,compile:function(tElement,tAttrs){if(("INPUT"!==tElement[0].tagName||"checkbox"!==tAttrs.type)&&"MD-CHECKBOX"!==tElement[0].tagName&&!tAttrs.btnCheckbox)throw'checklist-model should be applied to `input[type="checkbox"]` or `md-checkbox`.';if(!tAttrs.checklistValue&&!tAttrs.value)throw"You should provide `value` or `checklist-value`.";return tAttrs.ngModel||tAttrs.$set("ngModel","checked"),postLinkFn}}}]),function(){var indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};angular.module("App.directives").directive("chosen",["$timeout",function($timeout){var CHOSEN_OPTION_WHITELIST,NG_OPTIONS_REGEXP,isEmpty,snakeCase;return NG_OPTIONS_REGEXP=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/,CHOSEN_OPTION_WHITELIST=["noResultsText","allowSingleDeselect","disableSearchThreshold","disableSearch","enableSplitWordSearch","inheritSelectClasses","maxSelectedOptions","placeholderTextMultiple","placeholderTextSingle","searchContains","singleBackstrokeDelete","displayDisabledOptions","displaySelectedOptions","width","chosenShowingDropdown"],snakeCase=function(input){return input.replace(/[A-Z]/g,function($1){return"_"+$1.toLowerCase()})},isEmpty=function(value){var key;if(angular.isArray(value))return 0===value.length;if(angular.isObject(value))for(key in value)if(value.hasOwnProperty(key))return!1;return!0},{restrict:"A",require:"?ngModel",terminal:!0,link:function(scope,element,attr,ngModel){var chosen,defaultText,disableWithMessage,empty,initOrUpdate,match,options,origRender,removeEmptyMessage,startLoading,stopLoading,valuesExpr,viewWatch;return element.addClass("chosen"),options=scope.$eval(attr.chosen)||{},attr.ngChosenShowingDropdown&&element.on("chosen:showing_dropdown",function(){return scope.$eval(attr.ngChosenShowingDropdown)}),angular.forEach(attr,function(value,key){return indexOf.call(CHOSEN_OPTION_WHITELIST,key)>=0?options[snakeCase(key)]=scope.$eval(value):void 0}),startLoading=function(){return element.addClass("loading").trigger("chosen:updated")},stopLoading=function(){return element.removeClass("loading").trigger("chosen:updated")},chosen=null,defaultText=null,empty=!1,initOrUpdate=function(){return chosen?element.trigger("chosen:updated"):(chosen=element.chosen(options).data("chosen"),defaultText=chosen.default_text)},removeEmptyMessage=function(){return empty=!1,element.attr("data-placeholder",defaultText)},disableWithMessage=function(){return empty=!0,element.trigger("chosen:updated")},ngModel?(origRender=ngModel.$render,ngModel.$render=function(){return origRender(),initOrUpdate()},attr.multiple&&(viewWatch=function(){return ngModel.$viewValue},scope.$watch(viewWatch,ngModel.$render,!0))):initOrUpdate(),attr.$observe("disabled",function(){return element.trigger("chosen:updated")}),attr.ngOptions&&ngModel?(match=attr.ngOptions.match(NG_OPTIONS_REGEXP),valuesExpr=match[7],scope.$watchCollection(valuesExpr,function(newVal,oldVal){var timer;return timer=$timeout(function(){return angular.isUndefined(newVal)?startLoading():(empty&&removeEmptyMessage(),stopLoading(),isEmpty(newVal)?disableWithMessage():void 0)})}),scope.$watch(attr.ngModel,function(){return initOrUpdate()}),scope.$on("$destroy",function(event){return"undefined"!=typeof timer&&null!==timer?$timeout.cancel(timer):void 0})):void 0}}}])}.call(this),function(){angular.module("App.directives").directive("daterangeFilter",["$timeout",function($timeout){return{restrict:"A",link:function(scope,element,attr){var options;return options={minDate:moment($(element).data("min-date")||"Sat Mar 09 2013"),maxDate:moment()},$timeout(function(){var $activeTab,$form,$t,$widget;return $activeTab=$(".tab-pane.active,.lc-active-tab"),$form=$("form.form-daterange-filter",$activeTab||null),$widget=$(".daterange-widget",$activeTab||null),$t=$("[data-xhr-loader-href]"),$t.length>0&&new DaterangeFormFilter($form,$widget,XHRLoader($t),options),$t=$("li.active [data-tab-href].xhr-filter-tab"),$t.length>0?new DaterangeFormFilter($form,$widget,XHRTab($t),options):void 0})}}}])}.call(this),function(){function visibleFully(element){if(0===element.offsetWidth||0===element.offsetHeight)return!1;for(var height=document.documentElement.clientHeight,rects=element.getClientRects(),on_top=function(r){var x_max=Math.ceil(r.right),y_max=Math.ceil(r.bottom),elFromPoint=document.elementFromPoint(x_max-10,y_max-10);return elFromPoint===element||elFromPoint.parentElement===element},i=0,l=rects.length;l>i;i++){var r=rects[i],in_viewport=r.top>0?r.top<=height:r.bottom>0&&r.bottom<=height;if(in_viewport&&on_top(r))return!0}return!1}angular.module("App.directives").directive("dropkick",["$timeout",function($timeout){return{require:"?ngModel",link:function(scope,elm,attrs,ctrl){var fixOpenDirection;return $(elm).attr("name")||$(elm).attr("name","ts"+Date.now()),fixOpenDirection=function(){var $openedDown;return $openedDown=$("#layout-subtab .dk-select-open-down.dk-config-up"),$openedDown.each(function(){var $this,container;return $this=$(this),container=$this.find(".dk-select-options").get(0),visibleFully(container)?void 0:($this.removeClass("dk-select-open-down"),$this.addClass("dk-select-open-up"))})},$timeout(function(){var dk;return $(elm).dropkick({open:fixOpenDirection}),attrs.ngModel?(dk=elm.prev(".dk_container"),scope.$watch(attrs.ngModel,function(value,oldValue){return value!==oldValue?dk.find(".dk_options_inner").children("li").each(function(){var li,link;return li=$(this),link=li.children("a"),li.removeClass("dk_option_current"),link.data("dk-dropdown-value")===value?(li.addClass("dk_option_current"),dk.find(".dk_label").text(link.text())):void 0}):void 0})):void 0})}}}])}.call(this),function(){angular.module("App.directives").directive("iconPicker",["$timeout",function($timeout){return{restrict:"A",link:function(scope,elm,attrs,ctrl){return $timeout(function(){var $button,$span,icon;return $span=angular.element("<span></span>"),$button=angular.element("<a href='javascript:void(0)' class='btn btn-primary'>&nbsp;</a>"),$span.append($button),$(elm).parent().append($span),icon=$(elm).val()||$(elm).attr("placeholder"),$(elm).val()&&$(elm).val()!==icon&&$(elm).val(icon),$button.iconpicker({iconset:"gleam",placement:"right",icon:icon}).change(function(e){return $(elm).val(e.icon)})})}}}]).directive("entryMethodIcons",function(){return{scope:!0,link:function(scope,element,attr){var getBgColorHex;return getBgColorHex=function(){var color,hex,rgb;return color=$("h4",element).css("backgroundColor"),
color?color.indexOf("#")>-1?hex=color:(rgb=color.match(/\d+/g),hex="#"+("0"+parseInt(rgb[0],10).toString(16)).slice(-2)+("0"+parseInt(rgb[1],10).toString(16)).slice(-2)+("0"+parseInt(rgb[2],10).toString(16)).slice(-2)):""},scope.entryMethod={placeholder:getBgColorHex(),normalIconColor:$(element).data("normal-icon-color"),unlockedIconColor:$(element).data("unlocked-icon-color")}}}}).directive("entryMethodShare",function(){return{scope:!0,link:function(scope,element,attr){return scope.initShareCompetitionBody=function(){return scope.isReward()?scope.t("share_reward_body"):scope.t("share_competition_body")}}}})}.call(this),function(){var filterObject,isEmptyObject;filterObject=function(object){var i,key,keys,len,object2;for(keys=Object.keys(object),object2=$.extend({},object),i=0,len=keys.length;len>i;i++)key=keys[i],object2[key]||delete object2[key];return object2},isEmptyObject=function(object){return 0===Object.keys(filterObject(object)).length},angular.module("App.directives").directive("campaignForm",["$q","$timeout","$window","postMessageService",function($q,$timeout,$window,postMessageService){return{restrict:"C",scope:!1,require:"campaignForm",controllerAs:"campaignFormCtrl",link:function(scope,element,attrs,campaignFormCtrl){if(attrs.campaignType)return campaignFormCtrl.campaignType=attrs.campaignType;throw Error("campaign-form directive requires campaign-type attribute to be provided")},controller:["$scope","$element",function($scope,$element){var CAPTURE_PARSER_FIELD_NAME_REGEX,DEFAULT_EMAIL_FIELD,DEFAULT_FIELDS,customCapturePreviewMessenger,fetchCaptureCampaignFields,fetchCompetitionCampaignFields,fetchCustomCaptureCampaignFields,fetchPresetCaptureCampaignFields,fetchTestCampaignFields,getSampleFromTemplate,templates,wrongCampaignTypeError;this.fetchCampaignFields=function(_this){return function(){switch(_this.campaignType){case"Competition":return fetchCompetitionCampaignFields();case"Reward":return fetchCompetitionCampaignFields();case"Capture":return fetchCaptureCampaignFields();case"__Test":return fetchTestCampaignFields();default:return wrongCampaignTypeError(_this.campaignType)}}}(this),DEFAULT_EMAIL_FIELD={key:"Email",name:"Email",type:"string",system:!0},CAPTURE_PARSER_FIELD_NAME_REGEX=/form\[([^\[\]]*)\]/,DEFAULT_FIELDS=[DEFAULT_EMAIL_FIELD,{key:"Name",name:"Name",type:"string",system:!0},{key:"First Name",name:"First Name",type:"string",system:!0},{key:"Last Name",name:"Last Name",type:"string",system:!0}],wrongCampaignTypeError=function(campaignType){var dfd;return dfd=$q.defer(),$timeout(dfd.reject(Error('invalid campaignType "'+campaignType+'"')),4),dfd.promise},templates=null,getSampleFromTemplate=function(templateName){var template;return templates||(templates=JSON.parse($element.find("[data-field-templates]").attr("data-field-templates"))),template=templates.find(function(item){return item.name===templateName}),template&&template.sample?template.sample:""},fetchCompetitionCampaignFields=function(){var data,dfd,fields,rawFieldsData;return data=$element.find("#campaign_additional_contestant_details").val(),rawFieldsData=jsyaml.load(data),fields=[],rawFieldsData&&(fields=$.map(rawFieldsData,function(details,key){return{key:key,name:details.label,type:details.type,system:!1,sample:details.template_name?getSampleFromTemplate(details.template_name):""}}).filter(function(_this){return function(field){return"separator"!==field.type}}(this))),dfd=$q.defer(),$timeout(function(){return dfd.resolve(DEFAULT_FIELDS.concat(fields))},4),dfd.promise},fetchCaptureCampaignFields=function(){var captureLayout;return captureLayout=$("#campaign_lead_capture_attributes_layout_category").val(),"Custom"===captureLayout?fetchCustomCaptureCampaignFields():fetchPresetCaptureCampaignFields()},fetchPresetCaptureCampaignFields=function(){var captureType,dfd;return dfd=$q.defer(),captureType=$element.find("#campaign_lead_capture_attributes_details").val(),$timeout(function(){switch(captureType){case"Email":return dfd.resolve([DEFAULT_EMAIL_FIELD]);case"NameEmail":return dfd.resolve(DEFAULT_FIELDS);default:return dfd.reject(Error("unsupported capture type"))}},4),dfd.promise},customCapturePreviewMessenger=null,fetchCustomCaptureCampaignFields=function(){var acceptParseCampaignFields,dfd;return dfd=$q.defer(),customCapturePreviewMessenger||(customCapturePreviewMessenger=postMessageService.messanger($element.find(".preview-container iframe")[0].contentWindow,$window.previewHost,null,"capture:preview")),acceptParseCampaignFields=function(data){var campaignFields;return campaignFields=$.map(data.fields,function(field){var fieldName;return fieldName=field.name.match(CAPTURE_PARSER_FIELD_NAME_REGEX)[1],{key:fieldName,name:fieldName,type:field.type,system:!1}}),customCapturePreviewMessenger.off("responseParseCampaignFields",acceptParseCampaignFields),dfd.resolve(campaignFields)},customCapturePreviewMessenger.on("responseParseCampaignFields",acceptParseCampaignFields),customCapturePreviewMessenger.send("requestParseCampaignFields"),dfd.promise},fetchTestCampaignFields=function(){return $q.resolve(DEFAULT_FIELDS)}}]}}]).directive("fieldsMappingModal",["$timeout","$q",function($timeout,$q){return{restrict:"C",replace:!0,scope:{name:"@",providerName:"@",fieldMapping:"=",allowUserDefinedFields:"=",userDefinedFields:"=",testContactDefaults:"&",fetchIntegrationFields:"&",sendTestContact:"&"},require:["fieldsMappingModal","^^campaignForm"],templateUrl:"/client_views/fields_mapping_modal.html",controllerAs:"fieldsMappingModalCtrl",link:function(scope,element,attrs,ctrls){var campaignFormCtrl,me;return me=ctrls[0],campaignFormCtrl=ctrls[1],me.fetchCampaignFields=campaignFormCtrl.fetchCampaignFields,me.mappingModal=element.find(".fields-mapping-modal__dialog"),me.savedFieldMapping=null,me.savedUserDefinedFields=null,me.mappingModal.on("hidden.bs.modal",function(_this){return function(){return me.savedFieldMapping=null,me.savedUserDefinedFields=null}}(this))},controller:["$scope","$element",function($scope,$element){var cleanupOutdatedMappings;$scope.mappingFieldName=$scope.name,$scope.UDFFieldName=$scope.name.replace(/\[mapping\]$/,"[user_defined_fields]"),$scope.integrationFields=null,$scope.campaignFields=[],this.sendTestContact=function(testContact){return $scope.sendTestContact({testContact:testContact})},this.closeMappingModal=function(_this){return function(){return _this.mappingModal.modal("hide"),!0}}(this),this.hasMappingsSet=function(_this){return function(){return!isEmptyObject($scope.fieldMapping)}}(this),this.isMappingChanged=function(_this){return function(){return!_.isEqual($scope.fieldMapping,_this.savedFieldMapping)||!_.isEqual($scope.userDefinedFields,_this.savedUserDefinedFields)}}(this),this.resetMapping=function(_this){return function(){return $scope.fieldMapping=_.cloneDeep(_this.savedFieldMapping),$scope.userDefinedFields=_.cloneDeep(_this.savedUserDefinedFields)}}(this),this.openMappingModal=function(_this){return function(){var dfd;return dfd=$q.defer(),$q.all([$scope.fetchIntegrationFields(),_this.fetchCampaignFields()]).then(function(arg){var campaignFields,integrationFields;return integrationFields=arg[0],campaignFields=arg[1],integrationFields.length>0?($scope.integrationFields=integrationFields,$scope.campaignFields=campaignFields,_this.mappingModal.modal("show"),_this.savedFieldMapping=_.cloneDeep($scope.fieldMapping),_this.savedUserDefinedFields=_.cloneDeep($scope.userDefinedFields),dfd.resolve()):dfd.reject(Error("There are no custom fields on provider's side"))},function(error){return dfd.reject(error)}),dfd.promise}}(this),window.fieldMappingYaml=this.fieldMappingYaml=function(_this){return function(){return jsyaml.safeDump(filterObject($scope.fieldMapping))}}(this),window.userDefinedFieldsYaml=this.userDefinedFieldsYaml=function(_this){return function(){return jsyaml.safeDump($scope.userDefinedFields)}}(this),cleanupOutdatedMappings=function(_this){return function(){return $.each($scope.fieldMapping,function(key,value){var mappedTo;return mappedTo=$scope.campaignFields.find(function(field){return field.key===value}),mappedTo?void 0:delete $scope.fieldMapping[key]})}}(this)}]}}]).directive("jsonEditor",function(){return{restrict:"A",require:"ngModel",link:function(scope,element,attr,ngModel){var into,out;return into=function(input){return JSON.parse(input)},out=function(data){return JSON.stringify(data,null,2)},ngModel.$parsers.push(into),ngModel.$formatters.push(out)}}}).filter("yamlSafeDump",function(){return function(input){return jsyaml.safeDump(input)}}).filter("yamlSafeDumpWithFilter",function(){return function(input){return jsyaml.safeDump(filterObject(input))}}).filter("mappingPreview",function(){return function(input){var data,keys;return data=filterObject(input),keys=Object.keys(data),0===keys.length?"(none)":keys.map(function(key){return key+" => "+data[key]}).join(", ")}}).directive("testContactEditor",["$timeout",function($timeout){return{restrict:"C",replace:!0,scope:{testContactDefaults:"&",sendTestContact:"&",campaignFields:"="},templateUrl:"/client_views/test_contact_editor.html",controller:["$scope","$element",function($scope,$element){var readAdditionalDataValue,updateAdditionalDetails;return $scope.isTestContactEditorShown=!1,$scope.isSendingTestContact=!1,$scope.testContactErrorMessage=null,$scope.testContactSuccessMessage=null,$scope.testContact=$.extend($scope.testContactDefaults(),{additionalData:{}}),readAdditionalDataValue=function(key){return $scope.testContact.additionalData&&$scope.testContact.additionalData[key]?$scope.testContact.additionalData[key]:null},updateAdditionalDetails=function(_this){return function(campaignFields){var additionalFields;return additionalFields=campaignFields.filter(function(field){return!field.system}),$scope.testContact.additionalData=additionalFields.reduce(function(memo,field){return memo[field.key]=readAdditionalDataValue(field.key)||field.sample,memo},{})}}(this),updateAdditionalDetails($scope.campaignFields),$scope.$watch("campaignFields",updateAdditionalDetails),$scope.sendTestContactHandler=function(){return $scope.testContactErrorMessage=null,$scope.isSendingTestContact=!0,$scope.sendTestContact({testContact:$scope.testContact}).then(function(successMessage){return $scope.isSendingTestContact=!1,$scope.testContactSuccessMessage=successMessage,$timeout(function(){return $scope.testContactSuccessMessage=null},3e3)},function(error){return $scope.isSendingTestContact=!1,$scope.testContactErrorMessage=error.message})},$scope.toggleTestContactEditor=function(){return $scope.isTestContactEditorShown=!$scope.isTestContactEditorShown}}]}}]).directive("customFieldsPreview",function(){return{restrict:"C",replace:!0,scope:{fieldMapping:"=",onSetupClick:"&"},templateUrl:"/client_views/custom_fields_preview.html",controller:["$scope","$element",function($scope,$element){return $scope.errorMessage=null,$scope.isLoading=!1,$scope.onSetupClickHandler=function(){return $scope.isLoading=!0,$scope.onSetupClick().then(function(){return $scope.isLoading=!1},function(error){return $scope.errorMessage=error.message,$scope.isLoading=!1})}}]}}).directive("customFieldsMapper",["$timeout",function($timeout){return{restrict:"C",replace:!0,scope:{providerName:"=",fieldMapping:"=",allowUserDefinedFields:"=",integrationFields:"=",userDefinedFields:"=",campaignFields:"="},templateUrl:"/client_views/custom_fields_mapper.html",controller:["$scope","$element",function($scope,$element){var EMTRY_RENAMING,getUniqueFieldName,takenFieldNames;return EMTRY_RENAMING={index:null,oldName:null,newName:null},$scope.renamingUserDefinedField=EMTRY_RENAMING,$scope.renamingUserDefinedFieldError=null,takenFieldNames=function(integrationFields,userDefinedFields){return integrationFields.map(function(field){return field.key}).concat(userDefinedFields)},getUniqueFieldName=function(integrationFields,userDefinedFields){var fieldName,takenFieldNamesList;for(takenFieldNamesList=takenFieldNames(integrationFields,userDefinedFields),fieldName="userDefinedField"+parseInt(1e3*Math.random());-1!==takenFieldNamesList.indexOf(fieldName);)fieldName="userDefinedField"+parseInt(1e3*Math.random());return fieldName},$scope.addUserDefinedField=function(){var length;return length=$scope.userDefinedFields.push(getUniqueFieldName($scope.integrationFields,$scope.userDefinedFields)),$scope.startRenamingUserDefinedField(length-1,!0)},$scope.removeUserDefinedField=function(index){var removedFields;return removedFields=$scope.userDefinedFields.splice(index,1),delete $scope.fieldMapping[removedFields[0]]},$scope.handleKeyPress=function(evt){var keyCode;return keyCode=evt.charCode||evt.keyCode||0,13===keyCode?(evt.preventDefault(),$scope.stopRenamingUserDefinedField()):void 0},$scope.handleKeyUp=function(evt){var keyCode;return keyCode=evt.charCode||evt.keyCode||0,27===keyCode?(evt.stopPropagation(),$scope.stopRenamingUserDefinedField()):void 0},$scope.startRenamingUserDefinedField=function(index,autoSelect){return null==autoSelect&&(autoSelect=!1),$scope.renamingUserDefinedFieldError=null,$scope.renamingUserDefinedField={index:index,oldName:$scope.userDefinedFields[index],newName:$scope.userDefinedFields[index]},$timeout(function(){var input;return input=$element[0].querySelector("#renaming-user-defined-field-input"),input.focus(),autoSelect?input.setSelectionRange(0,input.value.length):void 0})},$scope.stopRenamingUserDefinedField=function(){return $scope.renamingUserDefinedFieldError=null,$scope.renamingUserDefinedField.newName===$scope.renamingUserDefinedField.oldName?$scope.renamingUserDefinedField=EMTRY_RENAMING:0===$scope.renamingUserDefinedField.newName.length?($scope.renamingUserDefinedFieldError="Field name can't be blank",$timeout(function(_this){return function(){return $scope.renamingUserDefinedFieldError=null}}(this),3e3),$scope.renamingUserDefinedField=EMTRY_RENAMING):-1!==takenFieldNames($scope.integrationFields,$scope.userDefinedFields).indexOf($scope.renamingUserDefinedField.newName)?($scope.renamingUserDefinedFieldError="Field name has already been taken",$timeout(function(_this){return function(){return $scope.renamingUserDefinedFieldError=null}}(this),3e3),$scope.renamingUserDefinedField=EMTRY_RENAMING):($scope.userDefinedFields[$scope.renamingUserDefinedField.index]=$scope.renamingUserDefinedField.newName,$scope.fieldMapping[$scope.renamingUserDefinedField.newName]=$scope.fieldMapping[$scope.renamingUserDefinedField.oldName],delete $scope.fieldMapping[$scope.renamingUserDefinedField.oldName],$scope.renamingUserDefinedField=EMTRY_RENAMING)}}]}}]).directive("simpleCustomFieldSelector",function(){return{restrict:"C",replace:!0,scope:{fieldModel:"=",campaignFields:"="},templateUrl:"/client_views/simple_custom_field_selector.html",controller:["$scope","$element",function($scope,$element){var found;return $scope.hybridFields=$scope.campaignFields.slice(),$scope.fieldModel&&(found=$scope.hybridFields.reduce(function(acc,item){return acc||item.name===$scope.fieldModel},!1),!found)?$scope.hybridFields=$scope.hybridFields.concat({key:$scope.fieldModel,name:$scope.fieldModel+" (unmapped)"}):void 0}]}}).directive("customFieldSelector",["$timeout",function($timeout){return{restrict:"C",replace:!0,scope:{fieldModel:"=",campaignFields:"="},templateUrl:"/client_views/custom_field_selector.html",link:function(scope,element,attrs,ctrl){var $select,updateSelect;return scope.isCustomInputVisible=null,$select=element.find(".custom-field-selector__select"),updateSelect=function(newValue){return scope.isCustomInputVisible?void 0:newValue&&!scope.campaignFields.find(function(field){return field.key===newValue})?($select.val("%CUSTOM_FIELD_NAME%"),scope.isCustomInputVisible=!0):($select.val(newValue),scope.isCustomInputVisible=!1)},$timeout(function(){return updateSelect(scope.fieldModel)}),scope.$watch("fieldModel",updateSelect),$select.on("change",function(evt){var newValue;return newValue=evt.target.value,"%CUSTOM_FIELD_NAME%"===newValue?(scope.fieldModel=null,scope.isCustomInputVisible=!0):(scope.fieldModel=newValue,scope.isCustomInputVisible=!1),scope.$apply()})}}}]).directive("preventSubmitOnEnter",function(){return{restrict:"A",link:function(scpoe,element,attrs,ctrl){return element.on("keypress",function(evt){var keyCode;return keyCode=evt.charCode||evt.keyCode||0,13===keyCode?evt.preventDefault():void 0})}}})}.call(this),function(){angular.module("App.directives").directive("filerInput",function(){return{restrict:"C",scope:{fileUploadBucket:"@",awsAccessKeyId:"@",options:"@",maxUploadCount:"@",maxFileSize:"@",allowDuplicates:"@"},link:function(scope,iElement,iAttrs,controller){var allowDuplicates,awsAccessKeyId,fileUploadAPI,filerInputDiv,filer_input,helpBlock,jFilerContainer,jFilerUploaded,loadFilerFromList,maxFileSize,maxUploadCount,options,refreshFileList,serverItems,toggleLink,uploadData;return fileUploadAPI="https://"+scope.fileUploadBucket+".s3.amazonaws.com",awsAccessKeyId=scope.awsAccessKeyId,options=scope.options,maxUploadCount=parseInt(scope.maxUploadCount)||100,maxFileSize=parseInt(scope.maxFileSize)||1,allowDuplicates="true"===scope.allowDuplicates||!1,iElement.hide(),filerInputDiv=$("<input type='file' name='file' multiple>"),jFilerUploaded=$("<div class='jFiler-uploaded'></div>"),jFilerContainer=$("<div class='jFiler-container'></div>"),jFilerContainer.append(jFilerUploaded),jFilerContainer.append(filerInputDiv),iElement.before(jFilerContainer),"showtoggle"===options&&(toggleLink=$("<a href='#'>Toggle Text View</a>"),toggleLink.click(function(){return jFilerContainer.toggle(),iElement.toggle()}),helpBlock=$("<span class='help-block'></span>"),helpBlock.append(toggleLink),iElement.after(helpBlock)),uploadData={key:"",AWSAccessKeyId:awsAccessKeyId,acl:"public-read",policy:"",signature:"","Content-Type":"",success_action_status:"200"},filer_input=filerInputDiv.filer({limit:maxUploadCount,maxSize:maxFileSize,extensions:["jpg","jpeg","png","tif","gif","bmp","ico"],changeInput:"<div class='jFiler-input-dragDrop'><div class='jFiler-input-inner'><div class='jFiler-input-icon'><i class='fa fa-file-image-o'></i></div><div class='jFiler-input-text'><h3>Drag&Drop files here</h3> <span style='display:inline-block; margin: 5px 0'>or</span></div><a class='jFiler-input-choose-btn blue'>Browse Files</a></div></div>",showThumbs:!0,allowDuplicates:allowDuplicates,appendTo:jFilerUploaded,theme:"dragdropbox",templates:{box:"<ul class='jFiler-items-list jFiler-items-grid'></ul>",item:"<li class='jFiler-item'>\n  <div class='jFiler-item-container'>\n    <div class='jFiler-item-inner'>\n      <div class='jFiler-item-thumb'>\n        <div class='jFiler-item-status'></div>\n        <div class='jFiler-item-info'>\n          <span class='jFiler-item-title'><b title='{{fi-name}}'>{{fi-name | limitTo: 25}}</b></span>\n          <span class='jFiler-item-others'>{{fi-size2}}</span>\n        </div>\n        {{fi-image}}\n      </div>\n      <div class='jFiler-item-assets jFiler-row'>\n        <ul class='list-inline pull-left'>\n          <li>{{fi-progressBar}}</li>\n        </ul>\n        <ul class='list-inline pull-right'>\n          <li><a class='fa fa-trash-o jFiler-item-trash-action'></a></li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</li>",itemAppend:"<li class='jFiler-item'>\n  <div class='jFiler-item-container'>\n    <div class='jFiler-item-inner'>\n      <div class='jFiler-item-thumb'>\n        <div class='jFiler-item-status'></div>\n        <div class='jFiler-item-info'>\n          <span class='jFiler-item-title'><b title='{{fi-name}}'>{{fi-name | limitTo: 25}}</b></span>\n          <span class='jFiler-item-others'>{{fi-size2}}</span>\n        </div>\n        {{fi-image}}\n      </div>\n      <div class='jFiler-item-assets jFiler-row'>\n        <ul class='list-inline pull-left'>\n          <li><span class='jFiler-item-others'>{{fi-icon}}</span></li>\n        </ul>\n        <ul class='list-inline pull-right'>\n          <li><a class='fa fa-trash-o jFiler-item-trash-action'></a></li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</li>",progressBar:"<div class='bar'></div>",itemAppendToEnd:!0,removeConfirmation:!1,_selectors:{list:".jFiler-items-list",item:".jFiler-item",progressBar:".bar",remove:".jFiler-item-trash-action"}},dragDrop:{dragEnter:null,dragLeave:null,drop:null},uploadFile:{url:fileUploadAPI,data:uploadData,type:"POST",enctype:"multipart/form-data",success:function(data,el){var parent;refreshFileList(),parent=el.find(".jFiler-jProgressBar").parent(),el.find(".jFiler-jProgressBar").fadeOut("slow",function(){return $("<div class='jFiler-item-others text-success'><i class='fa fa-check-circle'></i> Success</div>").hide().appendTo(parent).fadeIn("slow")})},error:function(el){var parent;alert("An unexpected error occurred uploading a file"),parent=el.find(".jFiler-jProgressBar").parent(),el.find(".jFiler-jProgressBar").fadeOut("slow",function(){return $("<div class='jFiler-item-others text-error'><i class='fa fa-minus-circle'></i> Error</div>").hide().appendTo(parent).fadeIn("slow")})},statusCode:null,onProgress:null,onComplete:null},files:null,addMore:!1,clipBoardPaste:!0,excludeName:null,beforeRender:null,afterRender:null,beforeShow:null,beforeSelect:null,onSelect:null,afterShow:null,afterRemove:function(){refreshFileList()},beforeSendDeferred:function(id,ufd){var deferred;return deferred=$.Deferred(),$.ajax({headers:{"Content-Type":"application/vnd.api+json",Accept:"application/vnd.api+json"},url:"/api/v1/signed_urls",type:"POST",dataType:"json",data:JSON.stringify({data:{type:"signed_url",attributes:{title:filer_input.current_file.file.name,content_type:filer_input.current_file.file.type,size:filer_input.current_file.file.size}}}),success:function(data){var jfile;ufd.key=data.data.attributes.key,ufd.policy=data.data.attributes.policy,ufd.signature=data.data.attributes.signature,ufd["Content-Type"]=data.data.attributes.content_type,jfile=filer_input.files_list[id],jfile.file.file=decodeURIComponent(fileUploadAPI+"/"+data.data.attributes.key),deferred.resolve()},error:function(xhr,ajaxOptions,thrownError){alert("An unexpected error occurred uploading a file"),deferred.reject()}}),deferred},onEmpty:null,options:null,captions:{button:"Choose Files",feedback:"Choose files To Upload",feedback2:"files were chosen",drop:"Drop file here to Upload",removeConfirmation:"Are you sure you want to remove this file?",errors:{filesLimit:"Only {{fi-limit}} files are allowed to be uploaded.",filesType:"Only Images are allowed to be uploaded.",filesSize:"{{fi-name}} is too large. Upload file size is limited to {{fi-maxSize}} MB.",filesSizeAll:"The total size of the selected files exceeds the limit of {{fi-maxSize}} MB."}}}),filer_input=filerInputDiv.prop("jFiler"),loadFilerFromList=function(serverItems){var serverItemsUnique;filer_input.reset(),serverItems&&serverItems.length>0&&(serverItemsUnique=allowDuplicates?serverItems:serverItems.filter(function(item,pos){return serverItems.indexOf(item)===pos}),serverItemsUnique.forEach(function(url){var serverItem;url.length>0&&(serverItem={name:url.substring(url.lastIndexOf("/")+1),size:0,type:"image/"+url.substring(url.lastIndexOf(".")+1),file:url},filer_input.append(serverItem))}))},refreshFileList=function(){var fileItems;fileItems=[],filer_input.files_list.forEach(function(f){"undefined"!=typeof f.file.file&&(-1===$.inArray(f.file.file,fileItems)||allowDuplicates)&&fileItems.push(f.file.file)}),iElement.val(fileItems.join("\n"))},iElement.change(function(){var serverItems;serverItems=$(this).val().split("\n"),loadFilerFromList(serverItems)}),serverItems=iElement.val().split("\n"),loadFilerFromList(serverItems)}}})}.call(this),function(){angular.module("App.directives").directive("fontPicker",["fontsService",function(fontsService){return{require:["select","ngModel"],link:function(scope,elem,attrs){var $container,$search,bindHandlers,getVisibleElements,loadAppearedFonts,optionsSourceStr;return $container=null,$search=null,optionsSourceStr=attrs.ngOptions.split(" ").pop(),scope.$watch(optionsSourceStr,function(items){return elem.find("option").each(function(index,option){return option.style.fontFamily=option.value})}),getVisibleElements=function(){return $container.find(".active-result").filter(function(i,element){var $element;return $element=$(element),$element.offset().top>=$container.offset().top&&$element.offset().top+$element.height()<=$container.offset().top+$container.height()})},bindHandlers=function(){return $container=$("#"+elem.attr("id")+"_chosen .chosen-results"),$search=$("#"+elem.attr("id")+"_chosen .chosen-search input"),$container.on("scroll",function(){return loadAppearedFonts($container)}),$search.on("keyup",function(){return loadAppearedFonts($container)})},loadAppearedFonts=function(){var fonts;return $container||$search||bindHandlers(),fonts=getVisibleElements($container).map(function(){return this.innerText}).toArray(),fontsService.loadFontsLabel(fonts)},$(elem).on("chosen:showing_dropdown",function(){return loadAppearedFonts($container)}),scope.$watch(attrs.ngModel,function(font){return font&&fontsService.load([font])})}}}])}.call(this),function(){angular.module("App.directives").directive("highlight",["$compile",function($compile){return{restrict:"A",link:function(scope,element,attr){return navigator.userAgent.match(/MSIE [4-8]/gi)?void 0:($(element).find("code").addClass($(element).attr("lang")),hljs.highlightBlock($(element).find("code")[0]),$compile(element.contents())(scope))}}}])}.call(this),function(){angular.module("App.directives").directive("integrations",["$timeout","$window",function($timeout,$window){return{restrict:"A",link:function(scope,element,attr){var $modal;return $modal=$("#add-integration"),scope.integrations={},scope.initIntegrations=function(types){var i,integrationType,len;for(i=0,len=types.length;len>i;i++)integrationType=types[i],scope.integrations[integrationType]=!0;return scope.integrations},element.data("enabled-integrations")&&scope.initIntegrations(element.data("enabled-integrations").split(",")),scope.selectIntegrationModal=function(){var integrationType;for(integrationType in scope.integrations)scope.integrations[integrationType]?$modal.find("[data-select-integration='"+integrationType+"']").hide():$modal.find("[data-select-integration='"+integrationType+"']").show();return $modal.on("click","[data-select-integration]",function(e){return integrationType=$(this).data("select-integration"),scope.selectIntegration(integrationType),$modal.modal("hide"),$modal.off("click","[data-select-integration]")}),$timeout(function(){return $modal.modal("show")})},scope.mailSettings=function(integrationType){return scope.integrations[integrationType]?"MailAlternate":""},scope.enabled=function(integrationType){return scope.integrations[integrationType]?"t":"f"},scope.isConfigured=function(integrationType){return integrationType in scope.integrations},scope.isVisible=function(integrationType){return scope.integrations[integrationType]},scope.selectIntegration=function(integrationType){return scope.integrations[integrationType]=!0,$timeout(function(){return scope.$apply(),$(".sortable, .unsortable").trigger("reorder")})},scope.removeIntegration=function(integrationType){return element.closest("form").addClass("dirty"),scope.integrations[integrationType]=!1,$timeout(function(){return scope.$apply(),$(".sortable, .unsortable").trigger("reorder")})},scope.resetIntegration=function($event){var $integration,$this;return $this=$($event.target),$integration=$this.closest(".integration-configuration"),$integration.find("[data-oauth-param]").size()>0?($integration.find("[data-hide-when-connected]").removeClass("hidden"),$integration.find("[data-show-when-connected]").addClass("hidden"),$integration.find("[data-enable-when-connected]").prop("disabled",!0)):void 0},scope.connectIntegrationWithParam=function($event){var $input,$integration,$this,value;return $this=$($event.target),$integration=$this.closest(".integration-configuration"),$input=$integration.find("[data-oauth-param-input]"),value=$($input).val(),value?window.open($this.attr("href")+"?value="+encodeURIComponent(value),"_blank"):alert("Please enter your "+$input.closest(".control-group").find("label").text()+" to begin"),$event.preventDefault()},scope.connectIntegration=function($event){var $integration,$this;return $this=$($event.target),$integration=$this.closest(".integration-configuration"),window.connectIntegration=function(signature,credentials_map){var field,value;$integration.find(':input[name*="[signature]"]').val(signature);for(field in credentials_map)value=credentials_map[field],$integration.find(':input[name*="['+field+']"]').val(value),$integration.find(':input[name*="['+field+']"]').trigger("change");return $integration.find("[data-hide-when-connected]").addClass("hidden"),$integration.find("[data-show-when-connected]").removeClass("hidden"),$integration.find("[data-enable-when-connected]").prop("disabled",!1),$this.closest("form").addClass("dirty")}},scope.integrationSourceTracker=function(source){return Cookies.set("SiteIntegrationSource",source,{expires:1})}}}}])}.call(this),function(){angular.module("App.directives").directive("lcCustomTheme",["$window","$timeout","lcThemeService",function($window,$timeout,lcThemeService){return{restrict:"A",link:function(scope,element,attrs){var lead_capture,restore_css,restore_display_area,restore_html,restore_version,setCustomTemplate,unwatchCustomTheme;return lead_capture=scope.lead_capture,restore_html=null,restore_css=null,restore_display_area=null,restore_version=null,unwatchCustomTheme=null,scope.openTemplatePicker=function(){return unwatchCustomTheme=scope.$watch("custom_theme",function(theme){return theme?setCustomTemplate(theme):void 0}),restore_html=lead_capture.template_html,restore_css=lead_capture.template_css,restore_display_area=lead_capture.custom_display_area,restore_version=lead_capture.version,scope.pickFromTemplates=!0,scope.custom_theme?setCustomTemplate(scope.custom_theme):scope.custom_theme="Bar",$timeout(function(){return scope.$apply()})},scope.setCustomTemplate=setCustomTemplate=function(theme){return lead_capture.template_html=lcThemeService.getCustomHtml(theme),lead_capture.template_css=lcThemeService.getCustomCss(theme),lead_capture.custom_display_area=lcThemeService.getCustomDisplayArea(theme),lead_capture.version=3,$timeout(function(){return scope.$apply()})},scope.applyCustomTemplate=function(){return unwatchCustomTheme(),scope.pickFromTemplates=!1},scope.cancelCustomTemplate=function(){return unwatchCustomTheme(),lead_capture.template_html=restore_html,lead_capture.template_css=restore_css,lead_capture.custom_display_area=restore_display_area,lead_capture.version=restore_version,scope.pickFromTemplates=!1},scope.$watch("lead_capture.custom_display_area",function(){return scope.customDisplayAreaClass=lcThemeService.customLayoutClass(lead_capture)})}}}])}.call(this),function(){var indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};angular.module("App.directives").directive("lcEditModeDefaults",["$window","$timeout",function($window,$timeout){return{restrict:"A",link:function(scope,element,attrs){var fields,ignore_defaults,lead_capture;return lead_capture=scope.lead_capture,fields=window.lcDefaults,ignore_defaults=["image","image_mobile","background_image","coupon_icon","coupon_success_icon","no_thanks_button_background_color","border_color"],scope.applyDefaults=function(){var key,ref,value;lead_capture.defaults=scope.template.defaults,ref=scope.template.defaults;for(key in ref)value=ref[key],lead_capture[key]&&(""+lead_capture[key]).trim()||indexOf.call(ignore_defaults,key)>=0||(lead_capture[key]=value);return lead_capture.border_color?void 0:lead_capture.border_color=lead_capture.button_background_color||scope.template.defaults.border_color}}}}]).directive("lcChooseModeDefaults",["$window","$timeout",function($window,$timeout){return{restrict:"A",link:function(scope,element,attrs){var fields,lead_capture,resetDefaults;return lead_capture=scope.lead_capture,fields=window.lcDefaults,resetDefaults=function(){var i,key,len,results;for(results=[],i=0,len=fields.length;len>i;i++)key=fields[i],results.push(lead_capture[key]=null);return results},scope.applyDefaults=function(){var key,ref,value;resetDefaults(),lead_capture.defaults=scope.template.defaults,ref=scope.template.defaults;for(key in ref)value=ref[key],lead_capture[key]=value;return lead_capture.countdown_endtime=new Date(+new Date+6e7),lead_capture.floating_placement="Right"}}}}])}.call(this),function(){var indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};angular.module("App.directives").directive("lcPostCapture",["$window","$timeout",function($window,$timeout){
return{restrict:"A",link:function(scope,element,attrs){var afterRestore,autoCloseRestore,availableOptions,changeAfterBehaviour,changeDetails,changeTemplate,facebookUrlRestore,lead_capture,restoreAfterOption,setAfter,updateAfterOption;return lead_capture=scope.lead_capture,setAfter=function(after){return $timeout(function(){return lead_capture.after=after})},afterRestore=lead_capture.after,availableOptions=function(template,details){return"NotificationMessages"===template.id||template.coupon?["None"]:"LinkButton"===details?["Redirect","NewWindow","TriggerCampaign"]:["None","Message","Social","Redirect","NewWindow","TriggerCampaign"]},updateAfterOption=function(){var options,ref;return options=availableOptions(scope.template,lead_capture.details),ref=lead_capture.after,indexOf.call(options,ref)<0?setAfter(indexOf.call(options,"Redirect")>=0?"Redirect":"None"):void 0},restoreAfterOption=function(){return indexOf.call(availableOptions(scope.template,lead_capture.details),afterRestore)>=0?setAfter(afterRestore):void 0},changeTemplate=function(newTemplate){return newTemplate?(restoreAfterOption(),$timeout(function(){return updateAfterOption()})):void 0},changeDetails=function(details){return scope.template&&details?(restoreAfterOption(),$timeout(function(){return updateAfterOption()})):void 0},scope.resetPostCaptureState=function(){return $timeout(function(){return afterRestore=lead_capture.after})},facebookUrlRestore="",autoCloseRestore=!1,changeAfterBehaviour=function(newBehaviour,oldBehaviour){return newBehaviour!==oldBehaviour&&("Social"===oldBehaviour&&(facebookUrlRestore=lead_capture.facebook_url,lead_capture.facebook_url="",lead_capture.auto_close=autoCloseRestore),"Social"===newBehaviour&&facebookUrlRestore&&(lead_capture.facebook_url=facebookUrlRestore),"Social"===newBehaviour&&oldBehaviour)?(autoCloseRestore=lead_capture.auto_close,lead_capture.auto_close=!1):void 0},scope.$watch("template",changeTemplate),scope.$watch("lead_capture.details",changeDetails),scope.$watch("lead_capture.after",changeAfterBehaviour)}}}])}.call(this),function(){var indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};angular.module("App.directives").directive("lcTabsAndStates",["$window","$timeout","lcDesignTabs",function($window,$timeout,lcDesignTabs){return{restrict:"A",link:function(scope,element,attrs){var defaultModifier,errorTab,isFeatureOnActiveDesignTab,lead_capture,setCurrentTab,setDesignTab,setModifier,updateDesignTab,visibleFeatures;return lead_capture=scope.lead_capture,defaultModifier=function(){return scope.template&&(scope.template.two_steps&&scope.lead_capture.two_steps||scope.template.countdown)?"gcap-first-step":""},scope.setCurrentTab=setCurrentTab=function(tab){return scope.cssEditingMode="extra-css"===tab,"after"===tab&&(scope.previewModifier="gcap-done"),"layout"===tab&&(scope.previewModifier=defaultModifier()),scope.currentTab=tab,$timeout(function(){return scope.$apply()})},setCurrentTab(element.data("current-tab")||"layout"),scope.setDesignTab=setDesignTab=function(tab){return scope.currentDesignTab=tab,"design"===scope.currentTab&&(scope.previewModifier=tab.modifier||""),$timeout(function(){return scope.$apply()})},element.data("design-tab")&&(errorTab=parseInt(element.data("design-tab"))),scope.updateDesignTab=updateDesignTab=function(){return scope.template?("layout"===scope.currentTab&&(scope.previewModifier=defaultModifier()),scope.designTabs=lcDesignTabs.getDesignTabs(scope),errorTab?(setDesignTab(scope.designTabs[errorTab]),errorTab=null):setDesignTab(scope.designTabs[0])):void 0},scope.setModifier=setModifier=function(modifier){return scope.previewModifier=modifier,$timeout(function(){return scope.$apply()})},visibleFeatures={bar_behaviour:function(){return scope.template.bar_behaviour},floating_placement:function(){return scope.template.floating_placement},bar_logo:function(){return scope.template.bar_logo},heading:function(){return scope.template.heading},image:function(){return scope.template.image},image_mobile:function(){return scope.template.image_mobile},main_text:function(){return scope.template.text},text_color:function(){return scope.template.text},button:function(){return scope.template.button&&("EmbeddableBox"!==scope.template.id||lead_capture.call_to_action)},inputs:function(){return"LinkButton"!==scope.lead_capture.details},border:function(){return scope.template.border},close_button:function(){return scope.template.close_button_color&&scope.lead_capture.version},first_step:function(){return scope.template.two_steps&&scope.lead_capture.two_steps},call_to_action:function(){return scope.template.call_to_action&&scope.lead_capture.call_to_action},minibox:function(){return scope.template.minibox},madlib:function(){return scope.template.madlib},countdown:function(){return scope.template.countdown},coupon:function(){return scope.template.coupon},background_image:function(){return scope.template.background_image&&!lead_capture.background_gradient},background_gradient:function(){return scope.template.background_gradient&&lead_capture.background_gradient},background_opacity:function(){return scope.template.background_opacity||visibleFeatures.background_image()},background_overlay:function(){return visibleFeatures.background_image()&&lead_capture.background_image},no_thanks_button:function(){return visibleFeatures.minibox()||visibleFeatures.countdown()||visibleFeatures.coupon()},font:function(){return scope.template.custom_font},coupon_icon:function(){return visibleFeatures.coupon()},coupon_success:function(){return visibleFeatures.coupon()},coupon_codes:function(){return visibleFeatures.coupon()},success_button:function(){return visibleFeatures.coupon()||visibleFeatures.countdown()},what_is_new:function(){return scope.template.what_is_new},footer:function(){return scope.template.footer},after_thanks:function(){var ref;return"LinkButton"!==lead_capture.details&&!lead_capture.isCustom&&!scope.template.coupon&&!("None"===(ref=lead_capture.after)||"TriggerCampaign"===ref)},after_redirect:function(){return"Redirect"===lead_capture.after||"NewWindow"===lead_capture.after},after_facebook:function(){return("LinkButton"!==lead_capture.details||lead_capture.isCustom)&&"Social"===lead_capture.after},auto_close:function(){var ref;return!("Redirect"===(ref=lead_capture.after)||"TriggerCampaign"===ref||visibleFeatures.coupon()||"NotificationMessages"===scope.template.id)},after_closing_delay:function(){return lead_capture.auto_close&&visibleFeatures.auto_close()},trigger_campaign:function(){return"TriggerCampaign"===lead_capture.after}},isFeatureOnActiveDesignTab=function(feature){return scope.currentDesignTab&&(scope.currentDesignTab["default"]||indexOf.call(scope.currentDesignTab.features,feature)>=0)},scope.visible=function(feature){return scope.template&&(!visibleFeatures[feature]||visibleFeatures[feature]())&&isFeatureOnActiveDesignTab(feature)},scope.post_visible=function(feature){return scope.template&&(!visibleFeatures[feature]||visibleFeatures[feature]())},scope.$watch("currentTab",updateDesignTab),scope.$watch("template",updateDesignTab),scope.$watch("lead_capture.two_steps",updateDesignTab)}}}])}.call(this),function(){var indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};angular.module("App.directives").directive("lcThemePicker",["$compile","$templateCache","$timeout","lcThemeService",function($compile,$templateCache,$timeout,lcThemeService){return{restrict:"A",scope:{theme:"=",template:"=",layoutCategory:"="},link:function(scope,element,attrs){var layoutByTitle,selectTemplate,widget;return element.hide(),scope.templates=lcThemeService.templates(),scope.categories=angular.copy(lcThemeService.categories()),widget=dom("div",$templateCache.get("lead_captures/editor/select_template.html")),element.after(widget),scope.layouts=function(categoryName){return scope.categories.filter(function(category){return category.name===(categoryName||scope.template.category)})[0].layouts},layoutByTitle=function(title){return scope.layouts().filter(function(layout){return layout.title===title})[0]},scope.selectLayout=function(layout){return scope.layout=layout,scope.selectTemplate(layout.templateId||layout.templates[0].id)},scope.selectTemplate=selectTemplate=function(templateId){var template;return template=lcThemeService.templateById(templateId),scope.template=template,scope.theme=template.id,$timeout(function(){return scope.$apply()})},scope.defineActiveVariation=function(layout){var ref;return ref=scope.template.id,indexOf.call(layout.templates.map(function(t){return t.id}),ref)>=0?scope.template.id:layout.templateId||layout.templates[0].id},scope.theme?scope.template=lcThemeService.templateById(scope.theme):(scope.theme=scope.templates[0].id,scope.template=scope.templates[0]),scope.layout=layoutByTitle(scope.template.layout),$timeout(function(){return scope.$apply()}),$compile($(widget).contents())(scope),scope.$watch("layoutCategory",function(category){var layout;return category!==scope.template.category?(layout=scope.layouts(scope.layoutCategory)[0],scope.selectLayout(layout)):void 0},!0)}}}])}.call(this),function(){var indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};angular.module("App.directives").directive("leadCaptureEditor",["$window","$timeout","postMessageService","lcStyleEditingService","lcThemeService","lcImageHintsService","fontsService","lcBackgroundService",function($window,$timeout,postMessageService,lcStyleEditingService,lcThemeService,lcImageHintsService,fontsService,lcBackgroundService){return{restrict:"A",link:function(scope,element,attrs){var $iframe,applyCapturing,backgroundStyles,changeTemplate,defaultCapturing,iframeWindow,initFonts,isEmbeddableTheme,lead_capture,messanger,notificationMessagesTemplateFix,refreshStyleEditor,requestWysiwygStyles,setDefaultModifier,shared_defaults,templatesMainTextMap,templatesThanksMap,templatesWhatIsnewMap,waitStyleEditorRediness,waitUntil;return $iframe=$(".preview-container iframe"),iframeWindow=$iframe[0].contentWindow,lead_capture=scope.lead_capture,shared_defaults=$window.lcDefaults.map(function(field){return"lead_capture."+field}),messanger=postMessageService.messanger(iframeWindow,$window.previewHost,scope,"capture:preview",["campaign.key","template","cssEditingMode","isEditCaptureMode","previewModifier","customDisplayAreaClass","lead_capture.version","lead_capture.theme","lead_capture.details","lead_capture.defaults","lead_capture.after","lead_capture.bar_logo","lead_capture.bar_behaviour","lead_capture.bar_placement","lead_capture.floating_placement","lead_capture.floating_offset","lead_capture.template_html","lead_capture.template_css","lead_capture.template_extra_css","lead_capture.font","lead_capture.details","lead_capture.facebook_url","lead_capture.call_to_action","lead_capture.madlib","lead_capture.countdown_endtime","lead_capture.time_zone","lead_capture.coupon_codes","lead_capture.background_gradient"].concat(shared_defaults)),scope.requireDetails=function(){return"LinkButton"!==lead_capture.details},messanger.on("iframeReady",function(){return messanger.sendScope(),requestWysiwygStyles()}),scope.isEditCaptureMode&&messanger.on("iframeStyleManagerReady",function(){return scope.styleEditor=new lcStyleEditingService.StyleEditor(scope,messanger)}),messanger.on("previewHeight",function(height){return parseInt($iframe.attr("height"))!==height?$iframe.attr("height",height):void 0}),messanger.on("showLoading",function(){return scope.previewLoading=!0,scope.$apply()}),messanger.on("hideLoading",function(){return scope.previewLoading=!1,scope.$apply()}),messanger.on("showNext",function(){return"design"===scope.currentTab&&scope.setDesignTab(scope.designTabs[2]),"layout"===scope.currentTab?scope.setModifier(""):void 0}),scope.isEmbeddableTheme=isEmbeddableTheme=function(){return/Embeddable/.test(lead_capture.theme)},scope.isEmbeddable=function(){return isEmbeddableTheme()||scope.template&&scope.template.embeddable&&lead_capture.embeddable},scope.previewWidth=function(){return lead_capture.mobile_preview?"320px":scope.resizableWidth},scope.leadCaptureImageHint=function(){return lcImageHintsService.imageHint(lead_capture)},scope.leadCaptureMobileImageHint=function(){return lcImageHintsService.mobileImageHint(lead_capture)},scope.leadCaptureBackgroundImageHint=function(){return lcImageHintsService.backgroundImageHint(lead_capture)},scope.isCapturingConfigurable=function(){var capturing;return capturing=scope.template&&scope.template.capturing,capturing&&capturing.length>1&&!lead_capture.isCustom},scope.detailsMap={Email:"Email",NameEmail:"Name + Email",LinkButton:"Clicks"},defaultCapturing=lead_capture.details,scope.saveCapturing=function(){return defaultCapturing=lead_capture.details},applyCapturing=function(){var capturing,ref;return capturing=scope.template.capturing,defaultCapturing&&(lead_capture.details=defaultCapturing),ref=lead_capture.details,indexOf.call(capturing,ref)<0&&(lead_capture.details=capturing[0]),scope.isEditCaptureMode||(lead_capture.details="Email"),1===capturing.length?lead_capture.details=capturing[0]:void 0},waitUntil=function(condition,callback){return condition()?$timeout(function(){return callback()}):setTimeout(function(){return waitUntil(condition,callback)},10)},waitStyleEditorRediness=function(callback){return waitUntil(function(){return scope.styleEditor},callback)},refreshStyleEditor=function(){return scope.isEditCaptureMode?waitStyleEditorRediness(function(){return scope.styleEditor.refresh()}):void 0},setDefaultModifier=function(){return scope.template.countdown?scope.previewModifier="gcap-first-step":scope.previewModifier=""},notificationMessagesTemplateFix=function(newTemplate,oldTemplate){return"NotificationMessages"===newTemplate.id||oldTemplate&&"NotificationMessages"===oldTemplate.id?lead_capture.text=scope.template.defaults.text:void 0},changeTemplate=function(newTemplate,oldTemplate){return newTemplate?(lead_capture.isCustom="Custom"===newTemplate.id,scope.htmlEditingMode="Custom"===newTemplate.id,"Custom"!==newTemplate.id?(requestWysiwygStyles(),applyCapturing(),scope.applyDefaults(),oldTemplate&&notificationMessagesTemplateFix(newTemplate,oldTemplate),setDefaultModifier(),refreshStyleEditor()):(scope.isEditCaptureMode||(scope.customDisplayAreaClass="gcap-layout-popup"),lead_capture.template_html||scope.setCustomTemplate("Default")),$timeout(function(){return $("#campaign_lead_capture_attributes_details").dropkick("refresh"),scope.$apply()})):void 0},initFonts=function(){return scope.fonts=fontsService.fonts()},initFonts(),backgroundStyles=function(){return scope.template&&scope.template.image?lcBackgroundService.backgroundColor(lead_capture):lcBackgroundService.backgroundStyles(lead_capture)},templatesMainTextMap={},templatesThanksMap={},templatesWhatIsnewMap={},requestWysiwygStyles=function(){return templatesMainTextMap[scope.template.id]||messanger.send("requestMainTextStyles"),templatesThanksMap[scope.template.id]||messanger.send("requestThanksStyles"),templatesWhatIsnewMap[scope.template.id]?void 0:messanger.send("requestWhatIsNewStyles")},scope.mainTextStyles=function(){return backgroundStyles()+";\nfont-family: "+(lead_capture.text_font||lead_capture.form_font)+";\ncolor: "+lead_capture.text_color+";\n"+(scope.template?templatesMainTextMap[scope.template.id]:void 0)},scope.whatIsNewStyles=function(){return backgroundStyles()+";\nfont-family: "+(lead_capture.text_font||lead_capture.form_font)+";\ncolor: "+lead_capture.what_is_new_color+";\n"+(scope.template?templatesWhatIsnewMap[scope.template.id]:void 0)},scope.thanksStyles=function(){return backgroundStyles()+";\nfont-family: "+(lead_capture.text_font||lead_capture.form_font)+";\ncolor: "+lead_capture.text_color+";\n"+(scope.template?templatesThanksMap[scope.template.id]:void 0)},messanger.on("responseMainTextStyles",function(data){return templatesMainTextMap[data.id]=data.css,scope.$apply()}),messanger.on("responseThanksStyles",function(data){return templatesThanksMap[data.id]=data.css,scope.$apply()}),messanger.on("responseWhatIsNewStyles",function(data){return templatesWhatIsnewMap[data.id]=data.css,scope.$apply()}),scope.$watch("template",changeTemplate),scope.$watch("lead_capture.details",function(details){return lead_capture.two_steps&&"LinkButton"===details&&(lead_capture.two_steps=!1,$timeout(function(){return scope.$apply()})),refreshStyleEditor()}),scope.$watch("lead_capture.bar_behaviour",refreshStyleEditor)}}}]).directive("extraStyleEditor",["$window","$compile","$templateCache",function($window,$compile,$templateCache){return{restrict:"A",link:function(scope,element,attrs){var widget;return element.hide(),widget=dom("div",$templateCache.get("lead_captures/editor/style_editor.html")),element.after(widget),$compile($(widget).contents())(scope)}}}])}.call(this),function(){angular.module("App.directives").directive("prizePreview",["$timeout","$window",function($timeout,$window){return{restrict:"A",link:function(scope,element,attr){return scope.refreshPreview=function(){return $timeout(function(){return $(".youtube-auto-init").each(initYoutubeVideo),$(".cover-video.vimeo").each(initVimeoVideo)})},scope.updatePreview=function(layout,parameters){var catImage,normalImage,tallImage;return null==parameters&&(parameters={}),tallImage="https://d2duufa9p461kj.cloudfront.net/user-assets/10/HrQ3lcZpbU8gkbYb/37212422_1_x.jpg?1492743697",normalImage="https://d2duufa9p461kj.cloudfront.net/user-assets/830138774/CHZJypYFH0mYryFw/custom-semi-trucks-top-1apartment-1.jpg",catImage="https://d2duufa9p461kj.cloudfront.net/user-assets/9/PjuDrvfTXVO79CBV/cat-pet-animal-domestic-104827.jpeg?1491269161",scope.incentives[0]=angular.copy(scope.configured_incentives),scope.incentives[0].youtube_video_id=parameters.youtube_video_id,scope.incentives[0].vimeo_video_id=parameters.vimeo_video_id,scope.incentives[0].wistia_video_id=parameters.wistia_video_id,scope.incentives[0].twitch_embed=parameters.twitch_embed,"OnlyText"===layout&&(scope.incentives[0].medium_url=null,scope.incentives[0].url=null,scope.incentives[0].single_image=null),parameters.activateTallImage&&(scope.incentives[0].medium_url=tallImage,scope.incentives[0].url=tallImage,scope.incentives[0].single_image=tallImage,scope.incentives[0].image_width=638,scope.incentives[0].image_height=1085),parameters.activateGallery&&(scope.incentives[0].image_group=[{original_url:catImage},{original_url:normalImage},{original_url:tallImage}]),parameters.layout_data&&(scope.incentives[0].layout_data=parameters.layout_data),scope.incentives[0].layout=layout,scope.refreshPreview()},scope.bestCouponCode=function(){return"gleam.io"},scope.descriptionWithoutBottomMargin=function(){var ref;return!("NameImageDesc"!==(ref=scope.incentives[0].layout)&&"YouTube"!==ref&&"Twitch"!==ref||1!==scope.contentPreviewMode&&2!==scope.contentPreviewMode)}}}}])}.call(this),function(){angular.module("App.directives").directive("resizable",["$timeout",function($timeout){return{restrict:"AE",link:function(scope,element,attr){var directions,dragEnd,dragStart,dragging,leadConfigElement,leadConfigStyle,refresh,resizeTimeout,start,style,w;return navigator.userAgent.match(/MSIE/)||navigator.userAgent.match(/Trident.*rv\:11\./)?void 0:(element.addClass("resizable"),scope.minWidth=320,style=window.getComputedStyle(element[0],null),leadConfigElement=$(".lead-capture-config"),leadConfigStyle=window.getComputedStyle(leadConfigElement[0],null),start=null,w=null,directions=["right"],refresh=function(){var maxWidth;return maxWidth=Math.max(320,$(window).width()-(leadConfigElement.offset().left+leadConfigElement.width())-40),scope.maxWidth=maxWidth,scope.resizableWidth=parseInt(maxWidth)+"px",$timeout(function(){return scope.$apply()})},$timeout(refresh),dragging=function(e){var offset;return offset=start-e.clientX,scope.resizableWidth=Math.max(Math.min(w-offset,scope.maxWidth),scope.minWidth)+"px",$timeout(function(){return scope.$apply()})},dragEnd=function(e){return document.removeEventListener("mouseup",dragEnd,!1),document.removeEventListener("mousemove",dragging,!1),element.removeClass("no-transition")},dragStart=function(e,direction){var dragDir;return dragDir=direction,start=e.clientX,w=parseInt(style.getPropertyValue("width")),element.addClass("no-transition"),document.addEventListener("mouseup",dragEnd,!1),document.addEventListener("mousemove",dragging,!1),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1},directions.forEach(function(direction){var down,grabber;return grabber=dom("div.rg-"+direction,[dom("span")]),element[0].appendChild(grabber),grabber.ondragstart=function(){return!1},down=function(e){return 1===e.which?dragStart(e,direction):void 0},grabber.addEventListener("mousedown",down,!1)}),resizeTimeout=null,$(window).resize(function(){return clearTimeout(resizeTimeout),resizeTimeout=setTimeout(refresh,100)}))}}}])}.call(this),function(){Array.prototype.removeItem||(Array.prototype.removeItem=function(val){for(var i=0;i<this.length;i++)this[i]===val&&(this.splice(i,1),i--);return this});var Taggable,defaultSplitKeyCodes,entityMap,escapeHtml,parseKeyCodes,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},escapeHtml=function(string){return String(string).replace(/[&<>"'\/]/g,function(s){return entityMap[s]})},defaultSplitKeyCodes=[13,9,32,188],parseKeyCodes=function(keyCodes){return"number"==typeof keyCodes?[keyCodes]:keyCodes.split(",").map(function(keyCode){return+keyCode})},Taggable=function(){function Taggable(element1){var value;this.element=element1,value=$(this.element).val(),this.kind=$(this.element).data("kind"),this.normalize=!!$(this.element).data("normalize"),$(this.element).data("split-key-codes")?this.splitKeyCodes=parseKeyCodes($(this.element).data("split-key-codes")):this.splitKeyCodes=defaultSplitKeyCodes,this.render(),this.load(value)}return Taggable.prototype.render=function(){var $span,that;return that=this,this.wrapper=dom(".tagsinput-primary",[dom(".bootstrap-tagsinput",[this.addTagInput=dom("input",{type:"text",placeholder:$(this.element).attr("placeholder")||"",style:"max-width: 100%;",size:10})])]),$span=$(this.tagInputSpan),this.tagInputSize=10,$(this.addTagInput).on("keydown keyup",function(){var length;return length=$(this).val().length+2,that.tagInputSize=10*parseInt(length/10+1),$(this).attr("size",that.tagInputSize)}),$(this.wrapper).on("click",function(){return $(that.addTagInput).focus()}),$(this.addTagInput).on("focus",function(){return $(that.wrapper).addClass("active")}),$(this.addTagInput).on("blur",function(){return that.addTag($(that.addTagInput).val()),$(that.addTagInput).val(""),$(that.wrapper).removeClass("active")}),$(this.addTagInput).keydown(function(e){var ref,tag,tagElement;return ref=e.keyCode,indexOf.call(that.splitKeyCodes,ref)>=0&&$(that.addTagInput).val()&&(that.addTag($(that.addTagInput).val()),$(that.addTagInput).val(""),$(that.addTagInput).focus(),e.stopPropagation(),e.preventDefault()),8===e.keyCode&&that.tags.length>0&&""===$(that.addTagInput).val()?(tag=that.tags[that.tags.length-1],tagElement=$(that.wrapper).find("span.tag").last(),that.removeTag(tag,tagElement)):void 0}),$(this.element).after(this.wrapper)},Taggable.prototype.refreshInputSize=function(){return this.tagInputSize=10,$(this.addTagInput).attr("size",this.tagInputSize)},Taggable.prototype.addTag=function(tag){var removeButton,tagElement,that;return that=this,tag=tag.trim(),this.normalize&&(tag=this.normalizeTag(tag)),!tag.trim().replace("#","")||indexOf.call(this.tags,tag)>=0?void 0:(tagElement=dom("span.tag.label.label-info",escapeHtml(tag)),removeButton=dom("span",{"data-role":"remove"}),$(tagElement).append(removeButton),this.tags.push(tag),this.save(),$(this.addTagInput).before(tagElement),$(removeButton).on("click",function(){return that.removeTag(tag,tagElement)}),this.refreshInputSize(),this.refreshPlaceholder())},Taggable.prototype.removeTag=function(tag,tagElement){return this.tags.removeItem(tag),this.save(),setTimeout(function(){return $(tagElement).remove()},1),this.refreshPlaceholder()},Taggable.prototype.refreshPlaceholder=function(){return 0===this.tags.length?$(this.addTagInput).attr("placeholder",$(this.element).attr("placeholder")||""):$(this.addTagInput).attr("placeholder","")},Taggable.prototype.load=function(value){var i,len,results,tag,tags;for(tags=value&&value.length>0?value.split(","):[],this.tags=[],$(this.wrapper).find("span.tag").remove(),results=[],i=0,len=tags.length;len>i;i++)tag=tags[i],results.push(this.addTag(tag));return results},Taggable.prototype.save=function(){return $(this.element).val(this.tags.join(",")).trigger("tagchange")},Taggable.prototype.normalizeTag=function(tag){return/^#/.test(tag)||(tag="#"+tag),tag},Taggable}(),angular.module("App.directives").directive("taggable",function(){return{link:function(scope,element,attrs,ctrl){var taggable;return taggable=new Taggable(element),$(element).css("display","none")}}})}.call(this),function(){angular.module("App.directives").directive("textAngularOuter",["$window",function($window){return{replace:!0,restrict:"EA",require:"ngModel",template:'<div ng-show="!rawMode">\n  <div class="loader" style="line-height:200px;font-size:30px;text-align:center;font-family:sans-serif;color:#666">\n    <img src="'+$window.assetHost+'/images/custom-email-loader.gif" style="vertical-align:middle;height:74px;width:74px;margin:0 10px 0 0;border:none;display:inline-block;">\n    Loading...\n  </div>\n  <iframe src="'+$window.previewHost+'/client_views/textangular.html#" width="100%" height="0" style="border: none" frameBorder="0"></iframe>\n</div>',link:function(scope,element,attrs,ngModel){var checkIframeVisibilityTimer,iframe,listener,removeListeners,win;return iframe=$("iframe",element),(win=iframe[0].contentWindow)?(checkIframeVisibilityTimer=0,listener=function(event){var checkIframeVisibility,command,error,loader;if(event=event.originalEvent,event.origin===$window.previewHost&&event.data){try{command=JSON.parse(event.data)}catch(error1){return void(error=error1)}if("ready"===command.command&&(loader=$(".loader",element),loader.css("display","none"),iframe.height("585px"),checkIframeVisibility=function(){return iframe.is(":visible")?win.postMessage(JSON.stringify({command:"show"}),$window.previewHost):checkIframeVisibilityTimer=setTimeout(checkIframeVisibility,100)},checkIframeVisibilityTimer=setTimeout(checkIframeVisibility,1),win.postMessage(JSON.stringify({value:ngModel.$viewValue,command:"change"}),$window.previewHost),win.postMessage(JSON.stringify({value:scope.incentives[0],command:"incentive"}),$window.previewHost),win.postMessage(JSON.stringify({value:scope.campaign,command:"campaign"}),$window.previewHost)),"change"===command.command&&command.value)return scope.$apply(function(){return ngModel.$setViewValue(command.value)})}},removeListeners=function(){return $(window).off("message onmessage",listener),$(document).off("turbolinks:click",removeListeners),clearTimeout(checkIframeVisibilityTimer)},$(window).on("message onmessage",listener),$(document).on("turbolinks:click",removeListeners),scope.$watch("incentives[0]",function(value,oldValue){return value!==oldValue?win.postMessage(JSON.stringify({value:value,command:"incentive"}),$window.previewHost):void 0},!0),scope.$watch("campaign",function(value,oldValue){return value!==oldValue?win.postMessage(JSON.stringify({value:value,command:"campaign"}),$window.previewHost):void 0},!0)):void 0}}}]).directive("textAngularInner",["$window","$timeout","customEmailService",function($window,$timeout,customEmailService){return{require:"ngModel",restrict:"EA",link:function(scope,element,attrs,ngModel){var listener,postFullEmail;return listener=function(event){var command,error;if(event=event.originalEvent,event.origin===$window.baseHost&&event.data){try{command=JSON.parse(event.data)}catch(error1){return void(error=error1)}if("show"===command.command&&(window.rangy.initialized=!1,window.rangy.init()),"change"===command.command&&command.value&&$timeout(function(){return scope.$apply(function(){var value;return value=customEmailService.getEmailBody(command.value),ngModel.$setViewValue(value)}),window.codemirror&&codemirror.getValue()!==command.value?(codemirror.silent=!0,codemirror.setValue(command.value),codemirror.refresh(),codemirror.silent=!1,codemirror.setCursor(0,0)):void 0}),"incentive"===command.command&&command.value&&$timeout(function(){return scope.$apply(function(){return scope.incentive=command.value})}),"campaign"===command.command&&command.value)return $timeout(function(){return scope.$apply(function(){return scope.campaign=command.value})}),window.campaignType=command.value.campaign_type}},$(window).on("message onmessage",listener),postFullEmail=function(){var value;return ngModel.$viewValue&&""!==ngModel.$viewValue?(value=customEmailService.getFullEmail(ngModel.$viewValue),parent.postMessage(JSON.stringify({value:value,command:"change"}),$window.baseHost)):void 0},scope.$watch(attrs.ngModel,postFullEmail),customEmailService.onComponentsChange(postFullEmail),parent.postMessage(JSON.stringify({command:"ready"}),$window.baseHost)}}}]).directive("emailEditor",["$compile","$templateCache","$window",function($compile,$templateCache,$window){return{replace:!0,require:"ngModel",templateUrl:"/client_views/email_editor.html",link:function(scope,element,attrs,ngModel){var isRawMode,prepareTemplate,prepareTemplateAndTokens,prepareTokens,replaceDynamic,saved_custom_confirmation_email_body,saved_custom_confirmation_email_subject,templateById,toggleRawMode,win;return scope.templates=$(element).data("templates"),scope.tokens=$(element).data("tokens"),win=$("iframe",element)[0].contentWindow,isRawMode=function(){return scope.campaign.custom_confirmation_email_body&&scope.campaign.custom_confirmation_email_body.match(/<html/i)},toggleRawMode=function(){return scope.rawMode=!scope.rawMode},scope.rawMode=isRawMode(),templateById=function(id){var templates;return templates=scope.templates.filter(function(template){return template.id===id}),templates.length>0?templates[0]:!1},replaceDynamic=function(content){var campaign,entry_methods_attributes,share_entry_method_present;return entry_methods_attributes=$("form.campaign").serializeJSON().campaign.entry_methods_attributes,share_entry_method_present=entry_methods_attributes&&entry_methods_attributes.filter(function(entry_method){return"share_action"===entry_method.entry_type&&"true"!==entry_method._destroy}).length>0,campaign={share_entry_method_present:share_entry_method_present,incentive_is_coupon:"Coupon"===scope.incentives[0].data_type,incentive_is_link:"Link"===scope.incentives[0].data_type,incentive_is_download:"Download"===scope.incentives[0].data_type},Mustache.render(content,{campaign:campaign})},prepareTokens=function(content){return content.replace(/(?:###)?([A-Z_]*)(?:###)?/g,"$1")},prepareTemplate=function(content){var first_symbol,processing_content;return processing_content=content.replace(/(^|\s+)(\n|$)/g,""),first_symbol=processing_content.indexOf(processing_content.match(/\S/)[0]),processing_content.replace(new RegExp("(^|\\n)\\s{"+first_symbol+"}","g"),"$1")},prepareTemplateAndTokens=function(content){return prepareTokens(prepareTemplate(content))},scope.$watch("template",function(){var subject,template;return template=templateById(scope.template),template&&template.path?(subject=scope.isReward()?template.reward_subject:template.subject,scope.campaign.custom_confirmation_email_subject=replaceDynamic(subject),scope.campaign.custom_confirmation_email_body=replaceDynamic(prepareTemplateAndTokens($templateCache.get(template.path))),win.postMessage(JSON.stringify({value:scope.campaign.custom_confirmation_email_body,command:"change"}),$window.previewHost)):void 0}),saved_custom_confirmation_email_subject="",saved_custom_confirmation_email_body="",scope.$watch("campaign.custom_confirmation_email",function(){return scope.campaign.custom_confirmation_email&&!scope.campaign.custom_confirmation_email_body&&(saved_custom_confirmation_email_subject||saved_custom_confirmation_email_body?(scope.campaign.custom_confirmation_email_subject=saved_custom_confirmation_email_subject,scope.campaign.custom_confirmation_email_body=saved_custom_confirmation_email_body):scope.template="default"),scope.campaign.custom_confirmation_email?void 0:(scope.template="",saved_custom_confirmation_email_subject=scope.campaign.custom_confirmation_email_subject,saved_custom_confirmation_email_body=scope.campaign.custom_confirmation_email_body,
scope.campaign.custom_confirmation_email_subject="",scope.campaign.custom_confirmation_email_body="")}),scope.$watch("rawMode",function(value){return value?void 0:win.postMessage(JSON.stringify({value:scope.campaign.custom_confirmation_email_body,command:"change"}),$window.previewHost)})}}}]).directive("ngInitial",function(){return{restrict:"A",controller:["$scope","$element","$attrs","$parse",function($scope,$element,$attrs,$parse){var getter,setter,val;return val=$attrs.sbInitial||$attrs.value||$element.text(),getter=$parse($attrs.ngModel),(setter=getter.assign)($scope,val)}]}}).directive("textareaEditor",["$compile",function($compile){return{require:"ngModel",restrict:"EA",link:function(scope,element,attrs,ngModel){var defaultToolbar,placeholder,style,taDefaultWrap,template,textangular,toolbar;return placeholder=$(element).attr("placeholder")||"",defaultToolbar="[\n  ['h1','h2','bold','italics','underline'],\n  ['fontColor', 'ul', 'ol'],\n  ['insertLink', 'insertButton', 'html']\n]",toolbar=attrs.taToolbar||defaultToolbar,style=$(element).attr("ta-style")||"width: 90%;",taDefaultWrap=attrs.taDefaultWrap||"p",scope.linkPresetted="presetted"===attrs.taButtonLink,template='<div text-angular\n     ta-toolbar="'+toolbar+'"\n     ng-model="'+attrs.ngModel+'"\n     ng-attr-style="'+style+'"\n     ta-default-wrap="'+taDefaultWrap+'"\n     placeholder="'+placeholder+'"\n     >\n</div>',textangular=angular.element(template),textangular.insertAfter(element),$(element).hide(),$compile(textangular)(scope)}}}])}.call(this),function(){var indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};angular.module("App.directives").directive("splitArray",function(){return{restrict:"A",require:"ngModel",link:function(scope,element,attr,ngModel){var fromUser,toUser;return fromUser=function(text){return text?text.split("\n"):null},toUser=function(array){return array=array||[],array.join("\n")},ngModel.$parsers.push(fromUser),ngModel.$formatters.push(toUser)}}}).directive("wysicFieldPreview",["$compile","$templateCache",function($compile,$templateCache){return{replace:!0,scope:{field:"="},template:$templateCache.get("client_views/additional_details/field.html"),link:function(scope,element,attrs,ctrl){var html,recompile,recompileTimeout;return html=$templateCache.get("client_views/additional_details/field.html"),scope.defaultDobPattern="/^(0?[1-9]|[12][0-9]|3[01])/(0?[1-9]|1[012])/(19|20)\\d\\d$/",scope.initializeSelect=function(model,defaultValue,possibleValues){var value;return value=model||defaultValue,possibleValues&&indexOf.call(possibleValues,value)>=0?model||(model=defaultValue):void 0},recompileTimeout=!1,recompile=function(){return scope.field.viewValue="",element.html(html),scope.$apply(function(){return $compile(element.contents())(scope)})},scope.$watch("field.prefill + field.pattern + field.maxlength + field.default",function(current,last){return recompileTimeout&&(clearTimeout(recompileTimeout),recompileTimeout=!1),current!==last?recompileTimeout=setTimeout(recompile,500):void 0})}}}]).directive("wysic",["$sanitize",function($sanitize){return{replace:!0,scope:{campaign:"="},templateUrl:function(elem,attrs){return"/client_views/wysic.html?context="+attrs.context},link:function(scope,elm,attrs,ctrl){var $campaignAdditionalContestantDetails,a,addDateOfBirthdayField,addRequiredAgeField,addWatches,applyMinimumAge,b,clone,d,field,fnDelay,getDateOfBirtdayField,getFormatDefaults,getPrefillByKey,getRequiredAgeField,getTemplateByName,getYAML,hiddenTemplateFields,initField,j,k,key,lastFid,len,len1,objKeys,recursiveOptions,ref,ref1,refreshFieldGroups,refreshFieldKeys,removeAgeFields,removeDateOfBirthdayField,removeRequiredAgeField,saveTimeout,saveWysic,typeIsArray,uniqFieldKeys,updateAbove,validate;for(scope.dependentFields=[],scope.inputTypes=$(elm).data("input-types"),scope.fieldTypes=$(elm).data("field-types"),scope.fieldTemplates=$(elm).data("field-templates"),scope.dobFormats=[{name:"DD/MM/YYYY",format:"DD/MM/YYYY",pattern:"/^(0?[1-9]|[12][0-9]|3[01])/(0?[1-9]|1[012])/(19|20)\\d\\d$/",placeholder:"DD/MM/YYYY",label:"Date of Birth"},{name:"MM/DD/YYYY",format:"MM/DD/YYYY",pattern:"/^(0?[1-9]|1[012])/(0?[1-9]|[12][0-9]|3[01])/(19|20)\\d\\d$/",placeholder:"MM/DD/YYYY",label:"Date of Birth"},{name:"Custom",format:"Custom",pattern:"",placeholder:"",label:"Date of Birth"}],getFormatDefaults=function(formatName){var formats;return formats=scope.dobFormats.filter(function(format){return format.name===formatName}),formats.length>0?formats[0]:{}},getTemplateByName=function(templateName){var templates;return templates=scope.fieldTemplates.filter(function(template){return template.name===templateName}),templates.length>0?templates[0]:!1},scope.fieldTypes.forEach(function(fieldType){var i,j,len,ref,results;for(ref=fieldType.fields,results=[],j=0,len=ref.length;len>j;j++)i=ref[j],results.push(fieldType.fields[i]=scope.inputTypes[fieldType.fields[i]]);return results}),scope.fieldSettings=function(field){var settings;return settings={},scope.fieldTypes.forEach(function(type){return type.name===field.type?settings=type:void 0}),settings},hiddenTemplateFields=["type","instructions","instructions_after","pattern","maxlength","format"],scope.inputTypeAvailable=function(field,inputType){if((field.template||"minimum_age"===field.generated)&&-1!==hiddenTemplateFields.indexOf(inputType))return!1;if(field.template){if(field.template.hidden_fields&&-1!==field.template.hidden_fields.indexOf(inputType))return!1;if("options"===inputType&&"State"===field.template.name&&"Other"!==field.prefill)return!1}return scope.fieldSettings(field).fields&&-1!==scope.fieldSettings(field).fields.indexOf(inputType)},objKeys=function(obj){return obj?Object.keys(obj):[]},scope.addField=function(defaultType){var field;return null==defaultType&&(defaultType="string"),field={type:defaultType,opened:!0,required:!0},scope.fields.push(field),initField(field)},getPrefillByKey=function(template,key){var prefills;return prefills=template.prefill.filter(function(prefill){return prefill.name===key}),prefills.length>0?prefills[0]:!1},scope.addFieldByTemplate=function(template){var defaults,field,key,prefill;field={},field.type=template.type,field.label=template.name,field.opened=!1,field.template_name=template.name,field.icon=template.icon,template.defaults.prefill?(prefill=getPrefillByKey(template,template.defaults.prefill),defaults=prefill.defaults,defaults.prefill=template.defaults.prefill):defaults=template.defaults;for(key in defaults)field[key]=defaults[key];return scope.fields.push(field),initField(field)},scope.removeField=function(field){var index;return index=scope.fields.indexOf(field),uniqFieldKeys.removeItem(field.key),scope.fields.splice(index,1)},clone=function(obj){var key,temp;if(null===obj||"object"!=typeof obj)return obj;temp=new obj.constructor;for(key in obj)temp[key]=clone(obj[key]);return temp},getYAML=function(){var preJSON;return preJSON={},scope.fields.length<=1?"":(scope.fields.filter(function(field){return"default"!==field.type}).forEach(function(field){return preJSON[field.key]=field.getJSON()}),jsyaml.safeDump(preJSON))},$campaignAdditionalContestantDetails=$("#campaign_additional_contestant_details"),saveTimeout=null,saveWysic=function(){return scope.fields&&scope.fields.length>0?(saveTimeout&&clearTimeout(saveTimeout),saveTimeout=setTimeout(function(){return $campaignAdditionalContestantDetails.val(getYAML())},500)):void 0},refreshFieldKeys=function(){var field,j,len,ref,results;for(ref=scope.fields,results=[],j=0,len=ref.length;len>j;j++)field=ref[j],results.push(field.refreshKey());return results},refreshFieldGroups=function(){var currentGroup,field,groups,j,len,ref;for(groups=[],currentGroup=[],ref=scope.fields,j=0,len=ref.length;len>j;j++)field=ref[j],"separator"===field.type?(groups.push(currentGroup),currentGroup=[field]):currentGroup.push(field);return groups.push(currentGroup),groups.length>0&&groups[0].push({type:"notify_and_facebook"}),scope.fieldGroups=groups},scope.isGroupVisible=function(group){var field,j,len;for(j=0,len=group.length;len>j;j++)if(field=group[j],"separator"!==field.type&&(!field.dependent||field.dependentOptions&&field.dependentOptions[field.dependentField().viewValue]))return!0;return!1},scope.possibleDependants=function(field){var index,possibleFields,previousFields;return index=scope.fields.indexOf(field),previousFields=scope.fields.slice(0,index),possibleFields=previousFields.filter(function(field){return scope.dependentSelect(field)})},scope.dependentSelect=function(field){return"select"===field.type||"largeselect"===field.type},typeIsArray=function(value){return value&&"object"==typeof value&&value instanceof Array&&"number"==typeof value.length&&"function"==typeof value.splice&&!value.propertyIsEnumerable("length")},recursiveOptions=function(options){var option,result;if(result=[],typeIsArray(options))return options;for(option in options)result=result.concat(recursiveOptions(options[option]));return result},scope.dependentOptions=function(key){var fields;return fields=scope.fields.filter(function(field){return field.key===key}),fields.length>0?recursiveOptions(fields[0].options).filter(function(value,index,self){return self.indexOf(value)===index}):[]},scope.getFieldByKey=function(key){var fields;return fields=scope.fields.filter(function(key){return field.key===key}),fields[0]},scope.dependentSelected=function(dependentKey,key){var dependent,fields;return fields=scope.fields.filter(function(dependentKey){return field.key===key}),dependent=fields[0],dependent.viewValue===item},scope.$watch("fields",saveWysic,!0,scope.$watch("fields",refreshFieldKeys,!0)),scope.$watchCollection("fields",refreshFieldGroups),scope.json=jsyaml.safeLoad(elm.data("content")),scope.fields=[],validate=function(field){return field.label||"separator"===field.type?void 0:(field.opened=!0,field.label_error="can't be blank")},ref=objKeys(scope.json),j=0,len=ref.length;len>j;j++)key=ref[j],field=scope.json[key],void 0===field.label&&(field.label=key),validate(field),scope.fields.push(field);for(scope.fields.push({label:"Full Name and Email",type:"default"}),a=[],d=[],b=[],ref1=scope.fields,k=0,len1=ref1.length;len1>k;k++)field=ref1[k],field.type=field.type.replace(/[^a-z_]/gi,""),field.above?a.push(field):"default"===field.type?d.push(field):b.push(field);return scope.fields=a.concat(d).concat(b),uniqFieldKeys=[],lastFid=0,initField=function(field){return field.dependent&&(field.dependentCheckbox=!0,field.dependentOptions=field.options,delete field.options),field.template_name&&(field.template=getTemplateByName(field.template_name)),field.fieldId=function(){return field.fid||(field.fid=lastFid++)},field.useDefaultFormatForOldField=function(){return field.format?void 0:field.pattern?field.format="Custom":(field.format="DD/MM/YYYY",field.updatePattern())},field.focusPatternInput=function(){return"Custom"===field.format?setTimeout(function(){return $("[data-field-id='"+field.fieldId()+"'] .pattern-input").focus()},1):void 0},field.dependentField=function(){var dependentField;return dependentField=scope.fields.filter(function(otherField){return otherField.key===field.dependent}),dependentField[0]},field.getJSON=function(){var json,option,propertyName;json={type:field.type},field.label=field.label||"";for(propertyName in scope.inputTypes)void 0!==field[propertyName]&&(json[propertyName]=field[propertyName]);if("dob"!==field.type&&delete json.format,field.dependentCheckbox&&field.dependent&&(json.options={},field.dependentOptions))for(option in field.dependentOptions)field.dependentOptions[option]&&(json.options[option]=field.dependentOptions[option]);return field.dependentCheckbox||delete json.dependent,json},field.prefillAvailable=function(){return field.template&&field.template.prefill},field.updateTNCName=function(){return field.label=(field.terms_and_conditions_label+" "+field.terms_and_conditions_title).trim()},field.updatePattern=function(){var defaults;return defaults=getFormatDefaults(field.format),field.pattern=defaults.pattern},field.updateFormatFields=function(forceUpdateLabel){var defaults;return null==forceUpdateLabel&&(forceUpdateLabel=!0),defaults=getFormatDefaults(field.format),field.format=defaults.format,field.pattern=defaults.pattern,field.placeholder=defaults.placeholder,(forceUpdateLabel||!field.label)&&(field.label=defaults.label)},field.updateTypeSpecificFields=function(){return"dob"!==field.type||field.format?void 0:(field.format="DD/MM/YYYY",field.updateFormatFields(!1))},field.getPrefillByKey=function(key){return getPrefillByKey(field.template,key)},field.prefillDefaults=function(key){var prefill,results;prefill=field.getPrefillByKey(key),results=[];for(key in prefill.defaults)results.push(field[key]=prefill.defaults[key]);return results},field.getLabel=function(){return field.label||field.template_name||field.type.charAt(0).toUpperCase()+field.type.slice(1)},field.refreshKey=function(){var i,ref2;if(field.key&&uniqFieldKeys.removeItem(field.key),key=field.getLabel(),"separator"===field.type&&(key+="-separator"),indexOf.call(uniqFieldKeys,key)>=0){for(i=1;ref2=key+"-"+i,indexOf.call(uniqFieldKeys,ref2)>=0;)i++;key=key+"-"+i}return uniqFieldKeys.push(key),field.key=key},field.refreshKey()},scope.fields.forEach(function(field){return initField(field)}),updateAbove=function(){var beforeDefault;return beforeDefault=!0,scope.fields.forEach(function(field){return"default"===field.type&&(beforeDefault=!1),field.above=beforeDefault})},scope.sortableElement=$(".sortable",elm).sortable({handle:".handle",opacity:.9,tolerance:"pointer",update:function(event,ui){var end,start;return start=ui.item.data("start"),end=ui.item.index(),scope.$apply(function(){return scope.fields.splice(end,0,scope.fields.splice(start,1)[0]),updateAbove()})},start:function(event,ui){return ui.item.data("start",ui.item.index())}}),getRequiredAgeField=function(){var fields;return fields=scope.fields.filter(function(field){return"minimum_age"===field.generated&&"checkbox"===field.type}),fields.length>0?fields[0]:null},getDateOfBirtdayField=function(){var fields;return fields=scope.fields.filter(function(field){return"minimum_age"===field.generated&&"dob"===field.type}),fields.length>0?fields[0]:null},removeRequiredAgeField=function(){return field=getRequiredAgeField(),field?scope.removeField(field):void 0},removeDateOfBirthdayField=function(){return field=getDateOfBirtdayField(),field?scope.removeField(field):void 0},removeAgeFields=function(){return removeRequiredAgeField(),removeDateOfBirthdayField()},addRequiredAgeField=function(age){return removeDateOfBirthdayField(),field=getRequiredAgeField(),field?field.label="I am at least "+age+" years of age (required)":(field={label:"I am at least "+age+" years of age (required)",type:"checkbox",readonly:!0,required:!0,generated:"minimum_age"},scope.fields.push(field),initField(field))},addDateOfBirthdayField=function(age,format,placeholder){return removeRequiredAgeField(),field=getDateOfBirtdayField(),field?(field.age_format=format,field.minimum_age=age,field.placeholder=placeholder):(field={label:"Date of birth",type:"dob",readonly:!0,required:!0,generated:"minimum_age",minimum_age:age,age_format:format,placeholder:placeholder,pattern:"/^.+$/"},scope.fields.push(field),initField(field))},applyMinimumAge=function(minimumAge){var age,format,placeholder;return minimumAge?(age=+minimumAge.match(/\d+/)[0],minimumAge.match(/CHK$/)?addRequiredAgeField(age):(format=minimumAge.match(/...$/)[0],placeholder=format.replace(/D/,"DD/").replace(/M/,"MM/").replace(/Y/,"YYYY"),addDateOfBirthdayField(age,format,placeholder))):removeAgeFields()},fnDelay=function(fn,timeout){var timer;return timer=0,function(){var args;return args=Array.prototype.slice.call(arguments),clearTimeout(timer),timer=setTimeout(function(){return fn.apply(this,args)},timeout)}},addWatches=function(){return scope.$watch("campaign.minimum_age",function(){return scope.campaign?applyMinimumAge(scope.campaign.minimum_age):void 0}),scope.$watch("campaign.facebook_url",fnDelay(function(){return"FB"in window?FB.XFBML.parse():void 0},500))},setTimeout(addWatches,2e3)}}}])}.call(this),function(){angular.module("App.filters").filter("limitHelp",function(){return function(limitType){return{sites:"Number of sites that can run competitons at the same time",rewards:"The number of redeem credits you receive per billing cycle",sources:"The number of hashtags/threads that you can automatically import in to a gallery",captures:"The number of capture credits (for clicks or lead capture) you receive per billing cycle."}[limitType]}}).filter("verticalPipes",function(){return function(input){return(input+"").replace(/\|/g,"<br>")}})}.call(this),function(){!function($){"use strict";return $.fn.userAsset=function(q){var $file,$form,accessKey,allowedExtension,allowedFileTypes,bucket,fileExtRegex,maxSizeMB;return $file=this,maxSizeMB=$file.data("max-size-mb")||10,accessKey=$file.data("access-key"),bucket=$file.data("bucket"),allowedFileTypes=$file.data("allowed-file-types")||"all",fileExtRegex=new RegExp(".("+allowedFileTypes+")$","i"),$form=$("<form enctype='multipart/form-data' style='display: none'><input name='key'/><input name='AWSAccessKeyId' /><input name='acl' value='public-read'/><input name='success_action_status' value='200'/><input name='policy'/><input name='signature'/><input name='Content-Type'/></form>"),$form.attr("action","//"+bucket+".s3.amazonaws.com"),$form.find("[name=AWSAccessKeyId]").val(accessKey),$file.attr("name","file"),$form.append($file),allowedExtension=function(fileName){return fileExtRegex.test(fileName)},$form.fileupload({forceIframeTransport:!0,initialIframeSrc:"about:blank",autoUpload:!0,add:function(event,data){var fileName,size;return size=data.files[0].size,fileName=data.files[0].name,size>maxSizeMB*Math.pow(2,20)?(alert("Sorry, max file size is "+maxSizeMB+"MB"),q.onComplete()):"all"===allowedFileTypes||allowedExtension(fileName)?(q.beforeAjax(),$.ajax({headers:{"Content-Type":"application/vnd.api+json",Accept:"application/vnd.api+json"},url:"/api/v1/signed_urls",type:"POST",dataType:"json",data:JSON.stringify({data:{type:"signed_url",attributes:{title:data.files[0].name,size:size}}}),success:function(response){return $form.find("input[name=key]").val(response.data.attributes.key),$form.find("input[name=policy]").val(response.data.attributes.policy),$form.find("input[name=signature]").val(response.data.attributes.signature),$form.find("input[name='Content-Type']").val(response.data.attributes.content_type),data.submit()},error:function(data,textStatus,thrown){return q.onAjaxError(data),q.onComplete()}})):(alert("Sorry, invalid file type"),q.onComplete())},fail:function(e,data){return q.onFail(data),q.onComplete()},done:function(event,data){var file_url;return file_url=(data.url+$form.find("input[name=key]").val()).replace(/^http:/,"https:"),$form.remove(),q.onDone(file_url)}}),$("body").append("form"),$file.trigger("change")}}(jQuery)}.call(this),function(){$(document).on("click",".user-asset__stand-alone .user-asset__remove",function(e){var $asset;return $asset=$(this).hide().closest(".user-asset"),$asset.find(".user-asset__preview").hide().find("img").attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"),$asset.find(".user-asset__text-input").val("").trigger("change"),$asset.closest("[ng-controller]").scope()?$asset.scope().$apply():void 0}),$(document).on("change",".user-asset__stand-alone input[type=file]",function(e){var $asset,$container,$file,$preview,$text,cloudfrontDomain,completed;return $file=$(this),$asset=$file.closest(".user-asset"),$container=$asset.find(".user-asset__file-container"),$text=$asset.find(".user-asset__text-input"),$preview=$asset.find(".user-asset__preview"),cloudfrontDomain=$file.data("cloudfront-domain"),completed=function(){return $asset.removeClass("loading").find("input[type=file]").remove(),$container.append($file.clone().val("")),$asset.closest("[ng-controller]").scope()?$asset.scope().$apply():void 0},$file.userAsset({beforeAjax:function(){return $asset.addClass("loading"),$preview.hide()},onAjaxError:function(data){return alert("Sorry, that file was not a valid image")},onFail:function(data){return alert("File "+data.files[0].name+" failed to upload")},onDone:function(file_url){return $preview.show().find("img").attr("src",file_url.replace(/https?:\/\/[^\/]+/i,"https://"+cloudfrontDomain)),$asset.find(".user-asset__remove").show(),$text.val(file_url).trigger("change"),completed()},onComplete:function(){return completed()}})})}.call(this),function(){$(document).on("change",".secret-code__toggle-area .choice :input",function(e){var $asset,$toggle;return $toggle=$(this).closest(".secret-code__toggle-area"),$asset=$toggle.find(".user-asset"),$toggle[0].once?($asset.find(".user-asset__data-preview").hide("fast","swing"),$toggle.find(".help-inline").hide(),$toggle.find(":input[type='text']").val("").trigger("change"),$toggle.find(".user-asset__error-inline").hide().html(""),$toggle.find(".control-group").removeClass("error"),$asset.closest("[ng-controller]").scope()?$asset.scope().$apply():void 0):$toggle[0].once=!0}),$(document).on("change",".secret-code__toggle-area input[type=file]",function(e){var $asset,$container,$data,$dataPreview,$error,$errorInline,$file,$inputHelpInline,$text,completed,failedVerification,hidePreviewAndValues,lookupType,showErrorMessage,showPreviewDataAndSetConfig,siteId,verifyAndSign;return $file=$(this),$asset=$file.closest(".user-asset"),$container=$asset.find(".user-asset__file-container"),$text=$asset.find(".user-asset__text-input"),$dataPreview=$asset.find(".user-asset__data-preview"),$data=$asset.find(".user-asset__data"),$inputHelpInline=$asset.find(".help-inline"),$errorInline=$asset.find(".user-asset__error-inline"),siteId=$file.data("site-id"),lookupType=$file.data("lookup-type"),$error="",completed=function(){return $asset.removeClass("loading").find("input[type=file]").remove(),$container.append($file.clone().val("")),""!==$error&&showErrorMessage($error),$asset.closest("[ng-controller]").scope()?$asset.scope().$apply():void 0},hidePreviewAndValues=function(){return $dataPreview.hide("fast","swing"),$text.val(""),$error="",$errorInline.hide().html(""),$inputHelpInline.hide()},showErrorMessage=function(errorMessage){return $errorInline.show().html(errorMessage)},verifyAndSign=function(file_url){var deferred,lookupValue;return deferred=$.Deferred(),lookupValue={file_url:file_url,site_id:siteId},$.get("/lookup",{type:lookupType,value:lookupValue}).done(function(data){return deferred.resolve(data)}).fail(function(data){return deferred.reject(data)}),deferred.promise()},showPreviewDataAndSetConfig=function(data_json){var max_length,record_count,sample_codes;return record_count=data_json.record_count,max_length=data_json.max_length,sample_codes=data_json.sample_codes,$data.html('<div class="user-asset__text-file-sample">Codes: '+sample_codes+'</div><div class="user-asset__text-file-count">Number of Codes: '+record_count+"</div>"),$dataPreview.show("fast","swing"),$text.val(JSON.stringify(data_json)).trigger("change"),completed()},failedVerification=function(data){return data.responseJSON.errors?($error=data.responseJSON.errors,showPreviewDataAndSetConfig(data.responseJSON)):(alert("File upload and verification failed. Please try again or contact support"),completed())},$file.userAsset({beforeAjax:function(){return $asset.addClass("loading"),hidePreviewAndValues()},onAjaxError:function(data){return alert("Sorry, that file was not valid")},onFail:function(data){return alert("File "+data.files[0].name+" failed to upload")},onDone:function(file_url){return verifyAndSign(file_url).then(showPreviewDataAndSetConfig,failedVerification)},onComplete:function(){return completed()}})})}.call(this),!function(a){"use strict";var b=function(a,c,d){var e,f,g=document.createElement("img");if(g.onerror=c,g.onload=function(){!f||d&&d.noRevoke||b.revokeObjectURL(f),c&&c(b.scale(g,d))},b.isInstanceOf("Blob",a)||b.isInstanceOf("File",a))e=f=b.createObjectURL(a),g._type=a.type;else{if("string"!=typeof a)return!1;e=a,d&&d.crossOrigin&&(g.crossOrigin=d.crossOrigin)}return e?(g.src=e,g):b.readFile(a,function(a){var b=a.target;b&&b.result?g.src=b.result:c&&c(a)})},c=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;b.isInstanceOf=function(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"},b.transformCoordinates=function(){},b.getTransformedOptions=function(a,b){var c,d,e,f,g=b.aspectRatio;if(!g)return b;c={};for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);return c.crop=!0,e=a.naturalWidth||a.width,f=a.naturalHeight||a.height,e/f>g?(c.maxWidth=f*g,c.maxHeight=f):(c.maxWidth=e,c.maxHeight=e/g),c},b.renderImageToCanvas=function(a,b,c,d,e,f,g,h,i,j){return a.getContext("2d").drawImage(b,c,d,e,f,g,h,i,j),a},b.hasCanvasOption=function(a){return a.canvas||a.crop||a.aspectRatio},b.scale=function(a,c){c=c||{};var d,e,f,g,h,i,j,k,l,m=document.createElement("canvas"),n=a.getContext||b.hasCanvasOption(c)&&m.getContext,o=a.naturalWidth||a.width,p=a.naturalHeight||a.height,q=o,r=p,s=function(){var a=Math.max((f||q)/q,(g||r)/r);a>1&&(q*=a,r*=a)},t=function(){var a=Math.min((d||q)/q,(e||r)/r);1>a&&(q*=a,r*=a)};return n&&(c=b.getTransformedOptions(a,c),j=c.left||0,k=c.top||0,c.sourceWidth?(h=c.sourceWidth,void 0!==c.right&&void 0===c.left&&(j=o-h-c.right)):h=o-j-(c.right||0),c.sourceHeight?(i=c.sourceHeight,void 0!==c.bottom&&void 0===c.top&&(k=p-i-c.bottom)):i=p-k-(c.bottom||0),q=h,r=i),d=c.maxWidth,e=c.maxHeight,f=c.minWidth,g=c.minHeight,n&&d&&e&&c.crop?(q=d,r=e,l=h/i-d/e,0>l?(i=e*h/d,void 0===c.top&&void 0===c.bottom&&(k=(p-i)/2)):l>0&&(h=d*i/e,void 0===c.left&&void 0===c.right&&(j=(o-h)/2))):((c.contain||c.cover)&&(f=d=d||f,g=e=e||g),c.cover?(t(),s()):(s(),t())),n?(m.width=q,m.height=r,b.transformCoordinates(m,c),b.renderImageToCanvas(m,a,j,k,h,i,0,0,q,r)):(a.width=q,a.height=r,a)},b.createObjectURL=function(a){return c?c.createObjectURL(a):!1},b.revokeObjectURL=function(a){return c?c.revokeObjectURL(a):!1},b.readFile=function(a,b,c){if(window.FileReader){var d=new FileReader;if(d.onload=d.onerror=b,c=c||"readAsDataURL",d[c])return d[c](a),d}return!1},"function"==typeof define&&define.amd?define(function(){return b}):a.loadImage=b}(this),function(a){"use strict";"function"==typeof define&&define.amd?define(["load-image"],a):a(window.loadImage)}(function(a){"use strict";if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var b=a.renderImageToCanvas;a.detectSubsampling=function(a){var b,c;return a.width*a.height>1048576?(b=document.createElement("canvas"),b.width=b.height=1,c=b.getContext("2d"),c.drawImage(a,-a.width+1,0),0===c.getImageData(0,0,1,1).data[3]):!1},a.detectVerticalSquash=function(a,b){var c,d,e,f,g,h=a.naturalHeight||a.height,i=document.createElement("canvas"),j=i.getContext("2d");for(b&&(h/=2),i.width=1,i.height=h,j.drawImage(a,0,0),c=j.getImageData(0,0,1,h).data,d=0,e=h,f=h;f>d;)g=c[4*(f-1)+3],0===g?e=f:d=f,f=e+d>>1;return f/h||1},a.renderImageToCanvas=function(c,d,e,f,g,h,i,j,k,l){if("image/jpeg"===d._type){var m,n,o,p,q=c.getContext("2d"),r=document.createElement("canvas"),s=1024,t=r.getContext("2d");if(r.width=s,r.height=s,q.save(),m=a.detectSubsampling(d),m&&(e/=2,f/=2,g/=2,h/=2),n=a.detectVerticalSquash(d,m),m||1!==n){for(f*=n,k=Math.ceil(s*k/g),l=Math.ceil(s*l/h/n),j=0,p=0;h>p;){for(i=0,o=0;g>o;)t.clearRect(0,0,s,s),t.drawImage(d,e,f,g,h,-o,-p,g,h),q.drawImage(r,0,0,s,s,i,j,k,l),o+=s,i+=k;p+=s,j+=l}return q.restore(),c}}return b(c,d,e,f,g,h,i,j,k,l)}}}),function(a){"use strict";"function"==typeof define&&define.amd?define(["load-image"],a):a(window.loadImage)}(function(a){"use strict";var b=a.hasCanvasOption,c=a.transformCoordinates,d=a.getTransformedOptions;a.hasCanvasOption=function(c){return b.call(a,c)||c.orientation},a.transformCoordinates=function(b,d){c.call(a,b,d);var e=b.getContext("2d"),f=b.width,g=b.height,h=d.orientation;if(h&&!(h>8))switch(h>4&&(b.width=g,b.height=f),h){case 2:e.translate(f,0),e.scale(-1,1);break;case 3:e.translate(f,g),e.rotate(Math.PI);break;case 4:e.translate(0,g),e.scale(1,-1);break;case 5:e.rotate(.5*Math.PI),e.scale(1,-1);break;case 6:e.rotate(.5*Math.PI),e.translate(0,-g);break;case 7:e.rotate(.5*Math.PI),e.translate(f,-g),e.scale(-1,1);break;case 8:e.rotate(-.5*Math.PI),e.translate(-f,0)}},a.getTransformedOptions=function(b,c){var e,f,g=d.call(a,b,c),h=g.orientation;if(!h||h>8||1===h)return g;e={};for(f in g)g.hasOwnProperty(f)&&(e[f]=g[f]);switch(g.orientation){case 2:e.left=g.right,e.right=g.left;break;case 3:e.left=g.right,e.top=g.bottom,e.right=g.left,e.bottom=g.top;break;case 4:e.top=g.bottom,e.bottom=g.top;break;case 5:e.left=g.top,e.top=g.left,e.right=g.bottom,e.bottom=g.right;break;case 6:e.left=g.top,e.top=g.right,e.right=g.bottom,e.bottom=g.left;break;case 7:e.left=g.bottom,e.top=g.right,e.right=g.top,e.bottom=g.left;break;case 8:e.left=g.bottom,e.top=g.left,e.right=g.top,e.bottom=g.right}return g.orientation>4&&(e.maxWidth=g.maxHeight,e.maxHeight=g.maxWidth,e.minWidth=g.minHeight,e.minHeight=g.minWidth,e.sourceWidth=g.sourceHeight,e.sourceHeight=g.sourceWidth),e}}),function(a){"use strict";"function"==typeof define&&define.amd?define(["load-image"],a):a(window.loadImage)}(function(a){"use strict";var b=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);a.blobSlice=b&&function(){var a=this.slice||this.webkitSlice||this.mozSlice;return a.apply(this,arguments)},a.metaDataParsers={jpeg:{65505:[]}},a.parseMetaData=function(b,c,d){d=d||{};var e=this,f=d.maxMetaDataSize||262144,g={},h=!(window.DataView&&b&&b.size>=12&&"image/jpeg"===b.type&&a.blobSlice);(h||!a.readFile(a.blobSlice.call(b,0,f),function(b){if(b.target.error)return console.log(b.target.error),void c(g);var f,h,i,j,k=b.target.result,l=new DataView(k),m=2,n=l.byteLength-4,o=m;if(65496===l.getUint16(0)){for(;n>m&&(f=l.getUint16(m),f>=65504&&65519>=f||65534===f);){if(h=l.getUint16(m+2)+2,m+h>l.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(i=a.metaDataParsers.jpeg[f])for(j=0;j<i.length;j+=1)i[j].call(e,l,m,h,g,d);m+=h,o=m}!d.disableImageHead&&o>6&&(g.imageHead=k.slice?k.slice(0,o):new Uint8Array(k).subarray(0,o))}else console.log("Invalid JPEG file: Missing JPEG marker.");c(g)},"readAsArrayBuffer"))&&c(g)}}),function(a){"use strict";"function"==typeof define&&define.amd?define(["load-image","load-image-meta"],a):a(window.loadImage)}(function(a){"use strict";a.ExifMap=function(){return this},a.ExifMap.prototype.map={Orientation:274},a.ExifMap.prototype.get=function(a){return this[a]||this[this.map[a]]},a.getExifThumbnail=function(a,b,c){var d,e,f;if(!c||b+c>a.byteLength)return void console.log("Invalid Exif data: Invalid thumbnail data.");for(d=[],e=0;c>e;e+=1)f=a.getUint8(b+e),d.push((16>f?"0":"")+f.toString(16));return"data:image/jpeg,%"+d.join("%")},a.exifTagTypes={1:{getValue:function(a,b){return a.getUint8(b)},size:1},2:{getValue:function(a,b){return String.fromCharCode(a.getUint8(b))},size:1,ascii:!0},3:{getValue:function(a,b,c){return a.getUint16(b,c)},size:2},4:{getValue:function(a,b,c){return a.getUint32(b,c)},size:4},5:{getValue:function(a,b,c){return a.getUint32(b,c)/a.getUint32(b+4,c)},size:8},9:{getValue:function(a,b,c){return a.getInt32(b,c)},size:4},10:{getValue:function(a,b,c){return a.getInt32(b,c)/a.getInt32(b+4,c)},size:8}},a.exifTagTypes[7]=a.exifTagTypes[1],a.getExifValue=function(b,c,d,e,f,g){var h,i,j,k,l,m,n=a.exifTagTypes[e];if(!n)return void console.log("Invalid Exif data: Invalid tag type.");if(h=n.size*f,i=h>4?c+b.getUint32(d+8,g):d+8,i+h>b.byteLength)return void console.log("Invalid Exif data: Invalid data offset.");if(1===f)return n.getValue(b,i,g);for(j=[],k=0;f>k;k+=1)j[k]=n.getValue(b,i+k*n.size,g);if(n.ascii){for(l="",k=0;k<j.length&&(m=j[k],"\x00"!==m);k+=1)l+=m;return l}return j},a.parseExifTag=function(b,c,d,e,f){var g=b.getUint16(d,e);f.exif[g]=a.getExifValue(b,c,d,b.getUint16(d+2,e),b.getUint32(d+4,e),e)},a.parseExifTags=function(a,b,c,d,e){var f,g,h;if(c+6>a.byteLength)return void console.log("Invalid Exif data: Invalid directory offset.");if(f=a.getUint16(c,d),g=c+2+12*f,g+4>a.byteLength)return void console.log("Invalid Exif data: Invalid directory size.");for(h=0;f>h;h+=1)this.parseExifTag(a,b,c+2+12*h,d,e);return a.getUint32(g,d)},a.parseExifData=function(b,c,d,e,f){if(!f.disableExif){var g,h,i,j=c+10;if(1165519206===b.getUint32(c+4)){if(j+8>b.byteLength)return void console.log("Invalid Exif data: Invalid segment size.");if(0!==b.getUint16(c+8))return void console.log("Invalid Exif data: Missing byte alignment offset.");
switch(b.getUint16(j)){case 18761:g=!0;break;case 19789:g=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==b.getUint16(j+2,g))return void console.log("Invalid Exif data: Missing TIFF marker.");h=b.getUint32(j+4,g),e.exif=new a.ExifMap,h=a.parseExifTags(b,j,j+h,g,e),h&&!f.disableExifThumbnail&&(i={exif:{}},h=a.parseExifTags(b,j,j+h,g,i),i.exif[513]&&(e.exif.Thumbnail=a.getExifThumbnail(b,j+i.exif[513],i.exif[514]))),e.exif[34665]&&!f.disableExifSub&&a.parseExifTags(b,j,j+e.exif[34665],g,e),e.exif[34853]&&!f.disableExifGps&&a.parseExifTags(b,j,j+e.exif[34853],g,e)}}},a.metaDataParsers.jpeg[65505].push(a.parseExifData)}),function(a){"use strict";"function"==typeof define&&define.amd?define(["load-image","load-image-exif"],a):a(window.loadImage)}(function(a){"use strict";a.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},a.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},a.ExifMap.prototype.getText=function(a){var b=this.get(a);switch(a){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[a][b];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(b[0],b[1],b[2],b[3]);case"ComponentsConfiguration":return this.stringValues[a][b[0]]+this.stringValues[a][b[1]]+this.stringValues[a][b[2]]+this.stringValues[a][b[3]];case"GPSVersionID":return b[0]+"."+b[1]+"."+b[2]+"."+b[3]}return String(b)},function(a){var b,c=a.tags,d=a.map;for(b in c)c.hasOwnProperty(b)&&(d[c[b]]=b)}(a.ExifMap.prototype),a.ExifMap.prototype.getAll=function(){var a,b,c={};for(a in this)this.hasOwnProperty(a)&&(b=this.tags[a],b&&(c[b]=this.getText(b)));return c}}),/*
 * JavaScript Canvas to Blob 2.0.5
 * https://github.com/blueimp/JavaScript-Canvas-to-Blob
 *
 * Copyright 2012, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 *
 * Based on stackoverflow user Stoive's code snippet:
 * http://stackoverflow.com/q/4998908
 */
function(window){"use strict";var CanvasPrototype=window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype,hasBlobConstructor=window.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),hasArrayBufferViewSupport=hasBlobConstructor&&window.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,dataURLtoBlob=(hasBlobConstructor||BlobBuilder)&&window.atob&&window.ArrayBuffer&&window.Uint8Array&&function(dataURI){var byteString,arrayBuffer,intArray,i,mimeString,bb;for(byteString=dataURI.split(",")[0].indexOf("base64")>=0?atob(dataURI.split(",")[1]):decodeURIComponent(dataURI.split(",")[1]),arrayBuffer=new ArrayBuffer(byteString.length),intArray=new Uint8Array(arrayBuffer),i=0;i<byteString.length;i+=1)intArray[i]=byteString.charCodeAt(i);return mimeString=dataURI.split(",")[0].split(":")[1].split(";")[0],hasBlobConstructor?new Blob([hasArrayBufferViewSupport?intArray:arrayBuffer],{type:mimeString}):(bb=new BlobBuilder,bb.append(arrayBuffer),bb.getBlob(mimeString))};window.HTMLCanvasElement&&!CanvasPrototype.toBlob&&(CanvasPrototype.mozGetAsFile?CanvasPrototype.toBlob=function(callback,type,quality){callback(quality&&CanvasPrototype.toDataURL&&dataURLtoBlob?dataURLtoBlob(this.toDataURL(type,quality)):this.mozGetAsFile("blob",type))}:CanvasPrototype.toDataURL&&dataURLtoBlob&&(CanvasPrototype.toBlob=function(callback,type,quality){callback(dataURLtoBlob(this.toDataURL(type,quality)))})),"function"==typeof define&&define.amd?define(function(){return dataURLtoBlob}):window.dataURLtoBlob=dataURLtoBlob}(this),/*
 * jQuery Iframe Transport Plugin 1.8.3
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery"],factory):factory("object"==typeof exports?require("jquery"):window.jQuery)}(function($){"use strict";var counter=0;$.ajaxTransport("iframe",function(options){if(options.async){var form,iframe,addParamChar,initialIframeSrc=options.initialIframeSrc||"javascript:false;";return{send:function(_,completeCallback){form=$('<form style="display:none;"></form>'),form.attr("accept-charset",options.formAcceptCharset),addParamChar=/\?/.test(options.url)?"&":"?","DELETE"===options.type?(options.url=options.url+addParamChar+"_method=DELETE",options.type="POST"):"PUT"===options.type?(options.url=options.url+addParamChar+"_method=PUT",options.type="POST"):"PATCH"===options.type&&(options.url=options.url+addParamChar+"_method=PATCH",options.type="POST"),counter+=1,iframe=$('<iframe src="'+initialIframeSrc+'" name="iframe-transport-'+counter+'"></iframe>').bind("load",function(){var fileInputClones,paramNames=$.isArray(options.paramName)?options.paramName:[options.paramName];iframe.unbind("load").bind("load",function(){var response;try{if(response=iframe.contents(),!response.length||!response[0].firstChild)throw new Error}catch(e){response=void 0}completeCallback(200,"success",{iframe:response}),$('<iframe src="'+initialIframeSrc+'"></iframe>').appendTo(form),window.setTimeout(function(){form.remove()},0)}),form.prop("target",iframe.prop("name")).prop("action",options.url).prop("method",options.type),options.formData&&$.each(options.formData,function(index,field){$('<input type="hidden"/>').prop("name",field.name).val(field.value).appendTo(form)}),options.fileInput&&options.fileInput.length&&"POST"===options.type&&(fileInputClones=options.fileInput.clone(),options.fileInput.after(function(index){return fileInputClones[index]}),options.paramName&&options.fileInput.each(function(index){$(this).prop("name",paramNames[index]||options.paramName)}),form.append(options.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),options.fileInput.removeAttr("form")),form.submit(),fileInputClones&&fileInputClones.length&&options.fileInput.each(function(index,input){var clone=$(fileInputClones[index]);$(input).prop("name",clone.prop("name")).attr("form",clone.attr("form")),clone.replaceWith(input)})}),form.append(iframe).appendTo(document.body)},abort:function(){iframe&&iframe.unbind("load").prop("src",initialIframeSrc),form&&form.remove()}}}}),$.ajaxSetup({converters:{"iframe text":function(iframe){return iframe&&$(iframe[0].body).text()},"iframe json":function(iframe){return iframe&&$.parseJSON($(iframe[0].body).text())},"iframe html":function(iframe){return iframe&&$(iframe[0].body).html()},"iframe xml":function(iframe){var xmlDoc=iframe&&iframe[0];return xmlDoc&&$.isXMLDoc(xmlDoc)?xmlDoc:$.parseXML(xmlDoc.XMLDocument&&xmlDoc.XMLDocument.xml||$(xmlDoc.body).html())},"iframe script":function(iframe){return iframe&&$.globalEval($(iframe[0].body).text())}}})}),/*
 * jQuery File Upload Plugin 5.42.3
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],factory):"object"==typeof exports?factory(require("jquery"),require("./vendor/jquery.ui.widget")):factory(window.jQuery)}(function($){"use strict";function getDragHandler(type){var isDragOver="dragover"===type;return function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var dataTransfer=e.dataTransfer;dataTransfer&&-1!==$.inArray("Files",dataTransfer.types)&&this._trigger(type,$.Event(type,{delegatedEvent:e}))!==!1&&(e.preventDefault(),isDragOver&&(dataTransfer.dropEffect="copy"))}}$.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||$('<input type="file">').prop("disabled")),$.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),$.support.xhrFormDataFileUpload=!!window.FormData,$.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),$.widget("blueimp.fileupload",{options:{dropZone:$(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(message,context){return message=this.messages[message]||message.toString(),context&&$.each(context,function(key,value){message=message.replace("{"+key+"}",value)}),message},formData:function(form){return form.serializeArray()},add:function(e,data){return e.isDefaultPrevented()?!1:void((data.autoUpload||data.autoUpload!==!1&&$(this).fileupload("option","autoUpload"))&&data.process().done(function(){data.submit()}))},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:$.support.blobSlice&&function(){var slice=this.slice||this.webkitSlice||this.mozSlice;return slice.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(now,loaded,interval){var timeDiff=now-this.timestamp;return(!this.bitrate||!interval||timeDiff>interval)&&(this.bitrate=(loaded-this.loaded)*(1e3/timeDiff)*8,this.loaded=loaded,this.timestamp=now),this.bitrate}},_isXHRUpload:function(options){return!options.forceIframeTransport&&(!options.multipart&&$.support.xhrFileUpload||$.support.xhrFormDataFileUpload)},_getFormData:function(options){var formData;return"function"===$.type(options.formData)?options.formData(options.form):$.isArray(options.formData)?options.formData:"object"===$.type(options.formData)?(formData=[],$.each(options.formData,function(name,value){formData.push({name:name,value:value})}),formData):[]},_getTotal:function(files){var total=0;return $.each(files,function(index,file){total+=file.size||1}),total},_initProgressObject:function(obj){var progress={loaded:0,total:0,bitrate:0};obj._progress?$.extend(obj._progress,progress):obj._progress=progress},_initResponseObject:function(obj){var prop;if(obj._response)for(prop in obj._response)obj._response.hasOwnProperty(prop)&&delete obj._response[prop];else obj._response={}},_onProgress:function(e,data){if(e.lengthComputable){var loaded,now=Date.now?Date.now():(new Date).getTime();if(data._time&&data.progressInterval&&now-data._time<data.progressInterval&&e.loaded!==e.total)return;data._time=now,loaded=Math.floor(e.loaded/e.total*(data.chunkSize||data._progress.total))+(data.uploadedBytes||0),this._progress.loaded+=loaded-data._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(now,this._progress.loaded,data.bitrateInterval),data._progress.loaded=data.loaded=loaded,data._progress.bitrate=data.bitrate=data._bitrateTimer.getBitrate(now,loaded,data.bitrateInterval),this._trigger("progress",$.Event("progress",{delegatedEvent:e}),data),this._trigger("progressall",$.Event("progressall",{delegatedEvent:e}),this._progress)}},_initProgressListener:function(options){var that=this,xhr=options.xhr?options.xhr():$.ajaxSettings.xhr();xhr.upload&&($(xhr.upload).bind("progress",function(e){var oe=e.originalEvent;e.lengthComputable=oe.lengthComputable,e.loaded=oe.loaded,e.total=oe.total,that._onProgress(e,options)}),options.xhr=function(){return xhr})},_isInstanceOf:function(type,obj){return Object.prototype.toString.call(obj)==="[object "+type+"]"},_initXHRData:function(options){var formData,that=this,file=options.files[0],multipart=options.multipart||!$.support.xhrFileUpload,paramName="array"===$.type(options.paramName)?options.paramName[0]:options.paramName;options.headers=$.extend({},options.headers),options.contentRange&&(options.headers["Content-Range"]=options.contentRange),multipart&&!options.blob&&this._isInstanceOf("File",file)||(options.headers["Content-Disposition"]='attachment; filename="'+encodeURI(file.name)+'"'),multipart?$.support.xhrFormDataFileUpload&&(options.postMessage?(formData=this._getFormData(options),options.blob?formData.push({name:paramName,value:options.blob}):$.each(options.files,function(index,file){formData.push({name:"array"===$.type(options.paramName)&&options.paramName[index]||paramName,value:file})})):(that._isInstanceOf("FormData",options.formData)?formData=options.formData:(formData=new FormData,$.each(this._getFormData(options),function(index,field){formData.append(field.name,field.value)})),options.blob?formData.append(paramName,options.blob,file.name):$.each(options.files,function(index,file){(that._isInstanceOf("File",file)||that._isInstanceOf("Blob",file))&&formData.append("array"===$.type(options.paramName)&&options.paramName[index]||paramName,file,file.uploadName||file.name)})),options.data=formData):(options.contentType=file.type||"application/octet-stream",options.data=options.blob||file),options.blob=null},_initIframeSettings:function(options){var targetHost=$("<a></a>").prop("href",options.url).prop("host");options.dataType="iframe "+(options.dataType||""),options.formData=this._getFormData(options),options.redirect&&targetHost&&targetHost!==location.host&&options.formData.push({name:options.redirectParamName||"redirect",value:options.redirect})},_initDataSettings:function(options){this._isXHRUpload(options)?(this._chunkedUpload(options,!0)||(options.data||this._initXHRData(options),this._initProgressListener(options)),options.postMessage&&(options.dataType="postmessage "+(options.dataType||""))):this._initIframeSettings(options)},_getParamName:function(options){var fileInput=$(options.fileInput),paramName=options.paramName;return paramName?$.isArray(paramName)||(paramName=[paramName]):(paramName=[],fileInput.each(function(){for(var input=$(this),name=input.prop("name")||"files[]",i=(input.prop("files")||[1]).length;i;)paramName.push(name),i-=1}),paramName.length||(paramName=[fileInput.prop("name")||"files[]"])),paramName},_initFormSettings:function(options){options.form&&options.form.length||(options.form=$(options.fileInput.prop("form")),options.form.length||(options.form=$(this.options.fileInput.prop("form")))),options.paramName=this._getParamName(options),options.url||(options.url=options.form.prop("action")||location.href),options.type=(options.type||"string"===$.type(options.form.prop("method"))&&options.form.prop("method")||"").toUpperCase(),"POST"!==options.type&&"PUT"!==options.type&&"PATCH"!==options.type&&(options.type="POST"),options.formAcceptCharset||(options.formAcceptCharset=options.form.attr("accept-charset"))},_getAJAXSettings:function(data){var options=$.extend({},this.options,data);return this._initFormSettings(options),this._initDataSettings(options),options},_getDeferredState:function(deferred){return deferred.state?deferred.state():deferred.isResolved()?"resolved":deferred.isRejected()?"rejected":"pending"},_enhancePromise:function(promise){return promise.success=promise.done,promise.error=promise.fail,promise.complete=promise.always,promise},_getXHRPromise:function(resolveOrReject,context,args){var dfd=$.Deferred(),promise=dfd.promise();return context=context||this.options.context||promise,resolveOrReject===!0?dfd.resolveWith(context,args):resolveOrReject===!1&&dfd.rejectWith(context,args),promise.abort=dfd.promise,this._enhancePromise(promise)},_addConvenienceMethods:function(e,data){var that=this,getPromise=function(args){return $.Deferred().resolveWith(that,args).promise()};data.process=function(resolveFunc,rejectFunc){return(resolveFunc||rejectFunc)&&(data._processQueue=this._processQueue=(this._processQueue||getPromise([this])).pipe(function(){return data.errorThrown?$.Deferred().rejectWith(that,[data]).promise():getPromise(arguments)}).pipe(resolveFunc,rejectFunc)),this._processQueue||getPromise([this])},data.submit=function(){return"pending"!==this.state()&&(data.jqXHR=this.jqXHR=that._trigger("submit",$.Event("submit",{delegatedEvent:e}),this)!==!1&&that._onSend(e,this)),this.jqXHR||that._getXHRPromise()},data.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",that._trigger("fail",null,this),that._getXHRPromise(!1))},data.state=function(){return this.jqXHR?that._getDeferredState(this.jqXHR):this._processQueue?that._getDeferredState(this._processQueue):void 0},data.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===that._getDeferredState(this._processQueue)},data.progress=function(){return this._progress},data.response=function(){return this._response}},_getUploadedBytes:function(jqXHR){var range=jqXHR.getResponseHeader("Range"),parts=range&&range.split("-"),upperBytesPos=parts&&parts.length>1&&parseInt(parts[1],10);return upperBytesPos&&upperBytesPos+1},_chunkedUpload:function(options,testOnly){options.uploadedBytes=options.uploadedBytes||0;var jqXHR,upload,that=this,file=options.files[0],fs=file.size,ub=options.uploadedBytes,mcs=options.maxChunkSize||fs,slice=this._blobSlice,dfd=$.Deferred(),promise=dfd.promise();return this._isXHRUpload(options)&&slice&&(ub||fs>mcs)&&!options.data?testOnly?!0:ub>=fs?(file.error=options.i18n("uploadedBytes"),this._getXHRPromise(!1,options.context,[null,"error",file.error])):(upload=function(){var o=$.extend({},options),currentLoaded=o._progress.loaded;o.blob=slice.call(file,ub,ub+mcs,file.type),o.chunkSize=o.blob.size,o.contentRange="bytes "+ub+"-"+(ub+o.chunkSize-1)+"/"+fs,that._initXHRData(o),that._initProgressListener(o),jqXHR=(that._trigger("chunksend",null,o)!==!1&&$.ajax(o)||that._getXHRPromise(!1,o.context)).done(function(result,textStatus,jqXHR){ub=that._getUploadedBytes(jqXHR)||ub+o.chunkSize,currentLoaded+o.chunkSize-o._progress.loaded&&that._onProgress($.Event("progress",{lengthComputable:!0,loaded:ub-o.uploadedBytes,total:ub-o.uploadedBytes}),o),options.uploadedBytes=o.uploadedBytes=ub,o.result=result,o.textStatus=textStatus,o.jqXHR=jqXHR,that._trigger("chunkdone",null,o),that._trigger("chunkalways",null,o),fs>ub?upload():dfd.resolveWith(o.context,[result,textStatus,jqXHR])}).fail(function(jqXHR,textStatus,errorThrown){o.jqXHR=jqXHR,o.textStatus=textStatus,o.errorThrown=errorThrown,that._trigger("chunkfail",null,o),that._trigger("chunkalways",null,o),dfd.rejectWith(o.context,[jqXHR,textStatus,errorThrown])})},this._enhancePromise(promise),promise.abort=function(){return jqXHR.abort()},upload(),promise):!1},_beforeSend:function(e,data){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(data),this._initProgressObject(data),data._progress.loaded=data.loaded=data.uploadedBytes||0,data._progress.total=data.total=this._getTotal(data.files)||1,data._progress.bitrate=data.bitrate=0,this._active+=1,this._progress.loaded+=data.loaded,this._progress.total+=data.total},_onDone:function(result,textStatus,jqXHR,options){var total=options._progress.total,response=options._response;options._progress.loaded<total&&this._onProgress($.Event("progress",{lengthComputable:!0,loaded:total,total:total}),options),response.result=options.result=result,response.textStatus=options.textStatus=textStatus,response.jqXHR=options.jqXHR=jqXHR,this._trigger("done",null,options)},_onFail:function(jqXHR,textStatus,errorThrown,options){var response=options._response;options.recalculateProgress&&(this._progress.loaded-=options._progress.loaded,this._progress.total-=options._progress.total),response.jqXHR=options.jqXHR=jqXHR,response.textStatus=options.textStatus=textStatus,response.errorThrown=options.errorThrown=errorThrown,this._trigger("fail",null,options)},_onAlways:function(jqXHRorResult,textStatus,jqXHRorError,options){this._trigger("always",null,options)},_onSend:function(e,data){data.submit||this._addConvenienceMethods(e,data);var jqXHR,aborted,slot,pipe,that=this,options=that._getAJAXSettings(data),send=function(){return that._sending+=1,options._bitrateTimer=new that._BitrateTimer,jqXHR=jqXHR||((aborted||that._trigger("send",$.Event("send",{delegatedEvent:e}),options)===!1)&&that._getXHRPromise(!1,options.context,aborted)||that._chunkedUpload(options)||$.ajax(options)).done(function(result,textStatus,jqXHR){that._onDone(result,textStatus,jqXHR,options)}).fail(function(jqXHR,textStatus,errorThrown){that._onFail(jqXHR,textStatus,errorThrown,options)}).always(function(jqXHRorResult,textStatus,jqXHRorError){if(that._onAlways(jqXHRorResult,textStatus,jqXHRorError,options),that._sending-=1,that._active-=1,options.limitConcurrentUploads&&options.limitConcurrentUploads>that._sending)for(var nextSlot=that._slots.shift();nextSlot;){if("pending"===that._getDeferredState(nextSlot)){nextSlot.resolve();break}nextSlot=that._slots.shift()}0===that._active&&that._trigger("stop")})};return this._beforeSend(e,options),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(slot=$.Deferred(),this._slots.push(slot),pipe=slot.pipe(send)):(this._sequence=this._sequence.pipe(send,send),pipe=this._sequence),pipe.abort=function(){return aborted=[void 0,"abort","abort"],jqXHR?jqXHR.abort():(slot&&slot.rejectWith(options.context,aborted),send())},this._enhancePromise(pipe)):send()},_onAdd:function(e,data){var paramNameSet,paramNameSlice,fileSet,i,that=this,result=!0,options=$.extend({},this.options,data),files=data.files,filesLength=files.length,limit=options.limitMultiFileUploads,limitSize=options.limitMultiFileUploadSize,overhead=options.limitMultiFileUploadSizeOverhead,batchSize=0,paramName=this._getParamName(options),j=0;if(!limitSize||filesLength&&void 0!==files[0].size||(limitSize=void 0),(options.singleFileUploads||limit||limitSize)&&this._isXHRUpload(options))if(options.singleFileUploads||limitSize||!limit)if(!options.singleFileUploads&&limitSize)for(fileSet=[],paramNameSet=[],i=0;filesLength>i;i+=1)batchSize+=files[i].size+overhead,(i+1===filesLength||batchSize+files[i+1].size+overhead>limitSize||limit&&i+1-j>=limit)&&(fileSet.push(files.slice(j,i+1)),paramNameSlice=paramName.slice(j,i+1),paramNameSlice.length||(paramNameSlice=paramName),paramNameSet.push(paramNameSlice),j=i+1,batchSize=0);else paramNameSet=paramName;else for(fileSet=[],paramNameSet=[],i=0;filesLength>i;i+=limit)fileSet.push(files.slice(i,i+limit)),paramNameSlice=paramName.slice(i,i+limit),paramNameSlice.length||(paramNameSlice=paramName),paramNameSet.push(paramNameSlice);else fileSet=[files],paramNameSet=[paramName];return data.originalFiles=files,$.each(fileSet||files,function(index,element){var newData=$.extend({},data);return newData.files=fileSet?element:[element],newData.paramName=paramNameSet[index],that._initResponseObject(newData),that._initProgressObject(newData),that._addConvenienceMethods(e,newData),result=that._trigger("add",$.Event("add",{delegatedEvent:e}),newData)}),result},_replaceFileInput:function(data){var input=data.fileInput,inputClone=input.clone(!0);data.fileInputClone=inputClone,$("<form></form>").append(inputClone)[0].reset(),input.after(inputClone).detach(),$.cleanData(input.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(i,el){return el===input[0]?inputClone[0]:el}),input[0]===this.element[0]&&(this.element=inputClone)},_handleFileTreeEntry:function(entry,path){var dirReader,that=this,dfd=$.Deferred(),errorHandler=function(e){e&&!e.entry&&(e.entry=entry),dfd.resolve([e])},successHandler=function(entries){that._handleFileTreeEntries(entries,path+entry.name+"/").done(function(files){dfd.resolve(files)}).fail(errorHandler)},readEntries=function(){dirReader.readEntries(function(results){results.length?(entries=entries.concat(results),readEntries()):successHandler(entries)},errorHandler)},entries=[];return path=path||"",entry.isFile?entry._file?(entry._file.relativePath=path,dfd.resolve(entry._file)):entry.file(function(file){file.relativePath=path,dfd.resolve(file)},errorHandler):entry.isDirectory?(dirReader=entry.createReader(),readEntries()):dfd.resolve([]),dfd.promise()},_handleFileTreeEntries:function(entries,path){var that=this;return $.when.apply($,$.map(entries,function(entry){return that._handleFileTreeEntry(entry,path)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(dataTransfer){dataTransfer=dataTransfer||{};var items=dataTransfer.items;return items&&items.length&&(items[0].webkitGetAsEntry||items[0].getAsEntry)?this._handleFileTreeEntries($.map(items,function(item){var entry;return item.webkitGetAsEntry?(entry=item.webkitGetAsEntry(),entry&&(entry._file=item.getAsFile()),entry):item.getAsEntry()})):$.Deferred().resolve($.makeArray(dataTransfer.files)).promise()},_getSingleFileInputFiles:function(fileInput){fileInput=$(fileInput);var files,value,entries=fileInput.prop("webkitEntries")||fileInput.prop("entries");if(entries&&entries.length)return this._handleFileTreeEntries(entries);if(files=$.makeArray(fileInput.prop("files")),files.length)void 0===files[0].name&&files[0].fileName&&$.each(files,function(index,file){file.name=file.fileName,file.size=file.fileSize});else{if(value=fileInput.prop("value"),!value)return $.Deferred().resolve([]).promise();files=[{name:value.replace(/^.*\\/,"")}]}return $.Deferred().resolve(files).promise()},_getFileInputFiles:function(fileInput){return fileInput instanceof $&&1!==fileInput.length?$.when.apply($,$.map(fileInput,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(fileInput)},_onChange:function(e){var that=this,data={fileInput:$(e.target),form:$(e.target.form)};this._getFileInputFiles(data.fileInput).always(function(files){data.files=files,that.options.replaceFileInput&&that._replaceFileInput(data),that._trigger("change",$.Event("change",{delegatedEvent:e}),data)!==!1&&that._onAdd(e,data)})},_onPaste:function(e){var items=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,data={files:[]};items&&items.length&&($.each(items,function(index,item){var file=item.getAsFile&&item.getAsFile();file&&data.files.push(file)}),this._trigger("paste",$.Event("paste",{delegatedEvent:e}),data)!==!1&&this._onAdd(e,data))},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var that=this,dataTransfer=e.dataTransfer,data={};dataTransfer&&dataTransfer.files&&dataTransfer.files.length&&(e.preventDefault(),this._getDroppedFiles(dataTransfer).always(function(files){data.files=files,that._trigger("drop",$.Event("drop",{delegatedEvent:e}),data)!==!1&&that._onAdd(e,data)}))},_onDragOver:getDragHandler("dragover"),_onDragEnter:getDragHandler("dragenter"),_onDragLeave:getDragHandler("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),$.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(key,value){var reinit=-1!==$.inArray(key,this._specialOptions);reinit&&this._destroyEventHandlers(),this._super(key,value),reinit&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var options=this.options;void 0===options.fileInput?options.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):options.fileInput instanceof $||(options.fileInput=$(options.fileInput)),options.dropZone instanceof $||(options.dropZone=$(options.dropZone)),options.pasteZone instanceof $||(options.pasteZone=$(options.pasteZone))},_getRegExp:function(str){var parts=str.split("/"),modifiers=parts.pop();return parts.shift(),new RegExp(parts.join("/"),modifiers)},_isRegExpOption:function(key,value){return"url"!==key&&"string"===$.type(value)&&/^\/.*\/[igm]{0,3}$/.test(value)},_initDataAttributes:function(){var that=this,options=this.options,data=this.element.data();$.each(this.element[0].attributes,function(index,attr){var value,key=attr.name.toLowerCase();/^data-/.test(key)&&(key=key.slice(5).replace(/-[a-z]/g,function(str){return str.charAt(1).toUpperCase()}),value=data[key],that._isRegExpOption(key,value)&&(value=that._getRegExp(value)),options[key]=value)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(data){var that=this;data&&!this.options.disabled&&(data.fileInput&&!data.files?this._getFileInputFiles(data.fileInput).always(function(files){data.files=files,that._onAdd(null,data)}):(data.files=$.makeArray(data.files),this._onAdd(null,data)))},send:function(data){if(data&&!this.options.disabled){if(data.fileInput&&!data.files){var jqXHR,aborted,that=this,dfd=$.Deferred(),promise=dfd.promise();return promise.abort=function(){return aborted=!0,jqXHR?jqXHR.abort():(dfd.reject(null,"abort","abort"),promise)},this._getFileInputFiles(data.fileInput).always(function(files){if(!aborted){if(!files.length)return void dfd.reject();data.files=files,jqXHR=that._onSend(null,data),jqXHR.then(function(result,textStatus,jqXHR){dfd.resolve(result,textStatus,jqXHR)},function(jqXHR,textStatus,errorThrown){dfd.reject(jqXHR,textStatus,errorThrown)})}}),this._enhancePromise(promise)}if(data.files=$.makeArray(data.files),data.files.length)return this._onSend(null,data)}return this._getXHRPromise(!1,data&&data.context)}})}),/*
 * jQuery File Upload Processing Plugin 1.3.1
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2012, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],factory):factory("object"==typeof exports?require("jquery"):window.jQuery)}(function($){"use strict";var originalAdd=$.blueimp.fileupload.prototype.options.add;$.widget("blueimp.fileupload",$.blueimp.fileupload,{options:{processQueue:[],add:function(e,data){var $this=$(this);data.process(function(){return $this.fileupload("process",data)}),originalAdd.call(this,e,data)}},processActions:{},_processFile:function(data,originalData){var that=this,dfd=$.Deferred().resolveWith(that,[data]),chain=dfd.promise();return this._trigger("process",null,data),$.each(data.processQueue,function(i,settings){var func=function(data){return originalData.errorThrown?$.Deferred().rejectWith(that,[originalData]).promise():that.processActions[settings.action].call(that,data,settings)};chain=chain.pipe(func,settings.always&&func)}),chain.done(function(){that._trigger("processdone",null,data),that._trigger("processalways",null,data)}).fail(function(){that._trigger("processfail",null,data),that._trigger("processalways",null,data)}),chain},_transformProcessQueue:function(options){var processQueue=[];$.each(options.processQueue,function(){var settings={},action=this.action,prefix=this.prefix===!0?action:this.prefix;$.each(this,function(key,value){"string"===$.type(value)&&"@"===value.charAt(0)?settings[key]=options[value.slice(1)||(prefix?prefix+key.charAt(0).toUpperCase()+key.slice(1):key)]:settings[key]=value}),processQueue.push(settings)}),options.processQueue=processQueue},processing:function(){return this._processing},process:function(data){var that=this,options=$.extend({},this.options,data);return options.processQueue&&options.processQueue.length&&(this._transformProcessQueue(options),0===this._processing&&this._trigger("processstart"),$.each(data.files,function(index){var opts=index?$.extend({},options):options,func=function(){return data.errorThrown?$.Deferred().rejectWith(that,[data]).promise():that._processFile(opts,data)};opts.index=index,that._processing+=1,that._processingQueue=that._processingQueue.pipe(func,func).always(function(){that._processing-=1,0===that._processing&&that._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=$.Deferred().resolveWith(this).promise()}})}),/*
 * jQuery File Upload Image Preview & Resize Plugin 1.7.3
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2013, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","load-image-meta","load-image-exif","load-image-ios","canvas-to-blob","./jquery.fileupload-process"],factory):"object"==typeof exports?factory(require("jquery"),require("load-image")):factory(window.jQuery,window.loadImage)}(function($,loadImage){"use strict";$.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",forceResize:"@",disabled:"@disableImageResize"},{action:"saveImage",quality:"@imageQuality",type:"@imageType",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"},{action:"deleteImageReferences",disabled:"@disableImageReferencesDeletion"}),$.widget("blueimp.fileupload",$.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png|svg\+xml)$/,loadImageMaxFileSize:1e7,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!1,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(data,options){if(options.disabled)return data;var that=this,file=data.files[data.index],dfd=$.Deferred();return"number"===$.type(options.maxFileSize)&&file.size>options.maxFileSize||options.fileTypes&&!options.fileTypes.test(file.type)||!loadImage(file,function(img){img.src&&(data.img=img),dfd.resolveWith(that,[data])},options)?data:dfd.promise()},resizeImage:function(data,options){if(options.disabled||!data.canvas&&!data.img)return data;options=$.extend({canvas:!0},options);var thumbnail,that=this,dfd=$.Deferred(),img=options.canvas&&data.canvas||data.img,resolve=function(newImg){newImg&&(newImg.width!==img.width||newImg.height!==img.height||options.forceResize)&&(data[newImg.getContext?"canvas":"img"]=newImg),data.preview=newImg,dfd.resolveWith(that,[data])};if(data.exif){if(options.orientation===!0&&(options.orientation=data.exif.get("Orientation")),options.thumbnail&&(thumbnail=data.exif.get("Thumbnail")))return loadImage(thumbnail,resolve,options),dfd.promise();data.orientation?delete options.orientation:data.orientation=options.orientation}return img?(resolve(loadImage.scale(img,options)),dfd.promise()):data},saveImage:function(data,options){if(!data.canvas||options.disabled)return data;var that=this,file=data.files[data.index],dfd=$.Deferred();return data.canvas.toBlob?(data.canvas.toBlob(function(blob){blob.name||(file.type===blob.type?blob.name=file.name:file.name&&(blob.name=file.name.replace(/\..+$/,"."+blob.type.substr(6)))),file.type!==blob.type&&delete data.imageHead,data.files[data.index]=blob,dfd.resolveWith(that,[data])},options.type||file.type,options.quality),dfd.promise()):data},loadImageMetaData:function(data,options){if(options.disabled)return data;var that=this,dfd=$.Deferred();return loadImage.parseMetaData(data.files[data.index],function(result){$.extend(data,result),dfd.resolveWith(that,[data])},options),dfd.promise()},saveImageMetaData:function(data,options){if(!(data.imageHead&&data.canvas&&data.canvas.toBlob)||options.disabled)return data;var file=data.files[data.index],blob=new Blob([data.imageHead,this._blobSlice.call(file,20)],{type:file.type});return blob.name=file.name,data.files[data.index]=blob,data},setImage:function(data,options){return data.preview&&!options.disabled&&(data.files[data.index][options.name||"preview"]=data.preview),data},deleteImageReferences:function(data,options){return options.disabled||(delete data.img,delete data.canvas,delete data.preview,delete data.imageHead),data}}})}),/*
 * jQuery postMessage Transport Plugin 1.1.2
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery"],factory):factory("object"==typeof exports?require("jquery"):window.jQuery)}(function($){"use strict";var counter=0,names=["accepts","cache","contents","contentType","crossDomain","data","dataType","headers","ifModified","mimeType","password","processData","timeout","traditional","type","url","username"],convert=function(p){return p};$.ajaxSetup({converters:{"postmessage text":convert,"postmessage json":convert,"postmessage html":convert}}),$.ajaxTransport("postmessage",function(options){if(options.postMessage&&window.postMessage){var iframe,loc=$("<a>").prop("href",options.postMessage)[0],target=loc.protocol+"//"+loc.host,xhrUpload=options.xhr().upload;return{send:function(_,completeCallback){counter+=1;var message={id:"postmessage-transport-"+counter},eventName="message."+message.id;iframe=$('<iframe style="display:none;" src="'+options.postMessage+'" name="'+message.id+'"></iframe>').bind("load",function(){$.each(names,function(i,name){message[name]=options[name]}),message.dataType=message.dataType.replace("postmessage ",""),$(window).bind(eventName,function(e){e=e.originalEvent;var ev,data=e.data;e.origin===target&&data.id===message.id&&("progress"===data.type?(ev=document.createEvent("Event"),ev.initEvent(data.type,!1,!0),$.extend(ev,data),xhrUpload.dispatchEvent(ev)):(completeCallback(data.status,data.statusText,{postmessage:data.result},data.headers),iframe.remove(),$(window).unbind(eventName)))}),iframe[0].contentWindow.postMessage(message,target)}).appendTo(document.body)},abort:function(){iframe&&iframe.remove()}}}})}),/*
 * jQuery XDomainRequest Transport Plugin 1.1.4
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 *
 * Based on Julian Aubourg's ajaxHooks xdr.js:
 * https://github.com/jaubourg/ajaxHooks/
 */
function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery"],factory):factory("object"==typeof exports?require("jquery"):window.jQuery)}(function($){"use strict";window.XDomainRequest&&!$.support.cors&&$.ajaxTransport(function(s){if(s.crossDomain&&s.async){s.timeout&&(s.xdrTimeout=s.timeout,delete s.timeout);var xdr;return{send:function(headers,completeCallback){function callback(status,statusText,responses,responseHeaders){xdr.onload=xdr.onerror=xdr.ontimeout=$.noop,xdr=null,completeCallback(status,statusText,responses,responseHeaders)}var addParamChar=/\?/.test(s.url)?"&":"?";xdr=new XDomainRequest,"DELETE"===s.type?(s.url=s.url+addParamChar+"_method=DELETE",s.type="POST"):"PUT"===s.type?(s.url=s.url+addParamChar+"_method=PUT",s.type="POST"):"PATCH"===s.type&&(s.url=s.url+addParamChar+"_method=PATCH",s.type="POST"),xdr.open(s.type,s.url),xdr.onload=function(){callback(200,"OK",{text:xdr.responseText},"Content-Type: "+xdr.contentType)},xdr.onerror=function(){callback(404,"Not Found")},s.xdrTimeout&&(xdr.ontimeout=function(){callback(0,"timeout")},xdr.timeout=s.xdrTimeout),xdr.send(s.hasContent&&s.data||null)},abort:function(){xdr&&(xdr.onerror=$.noop(),xdr.abort())}}}})}),/*
Turbolinks 5.0.3
Copyright © 2017 Basecamp, LLC
 */
function(){(function(){(function(){this.Turbolinks={supported:function(){return null!=window.history.pushState&&null!=window.requestAnimationFrame&&null!=window.addEventListener}(),visit:function(e,r){return t.controller.visit(e,r)},clearCache:function(){return t.controller.clearCache()}}}).call(this)}).call(this);var t=this.Turbolinks;(function(){(function(){var e,r,n=[].slice;t.copyObject=function(t){var e,r,n;r={};for(e in t)n=t[e],r[e]=n;return r},t.closest=function(t,r){return e.call(t,r)},e=function(){var t,e;return t=document.documentElement,null!=(e=t.closest)?e:function(t){var e;for(e=this;e;){if(e.nodeType===Node.ELEMENT_NODE&&r.call(e,t))return e;e=e.parentNode}}}(),t.defer=function(t){return setTimeout(t,1)},t.throttle=function(t){var e;return e=null,function(){var r;return r=1<=arguments.length?n.call(arguments,0):[],null!=e?e:e=requestAnimationFrame(function(n){return function(){return e=null,t.apply(n,r)}}(this))}},t.dispatch=function(t,e){var r,n,o,i,s;return i=null!=e?e:{},s=i.target,r=i.cancelable,n=i.data,o=document.createEvent("Events"),o.initEvent(t,!0,r===!0),o.data=null!=n?n:{},(null!=s?s:document).dispatchEvent(o),o},t.match=function(t,e){return r.call(t,e)},r=function(){var t,e,r,n;return t=document.documentElement,null!=(e=null!=(r=null!=(n=t.matchesSelector)?n:t.webkitMatchesSelector)?r:t.msMatchesSelector)?e:t.mozMatchesSelector}(),t.uuid=function(){var t,e,r;for(r="",t=e=1;36>=e;t=++e)r+=9===t||14===t||19===t||24===t?"-":15===t?"4":20===t?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16);return r}}).call(this),function(){t.Location=function(){function t(t){var e,r;null==t&&(t=""),r=document.createElement("a"),r.href=t.toString(),this.absoluteURL=r.href,e=r.hash.length,2>e?this.requestURL=this.absoluteURL:(this.requestURL=this.absoluteURL.slice(0,-e),this.anchor=r.hash.slice(1))}var e,r,n,o;return t.wrap=function(t){return t instanceof this?t:new this(t)},t.prototype.getOrigin=function(){return this.absoluteURL.split("/",3).join("/")},t.prototype.getPath=function(){var t,e;return null!=(t=null!=(e=this.absoluteURL.match(/\/\/[^\/]*(\/[^?;]*)/))?e[1]:void 0)?t:"/"},t.prototype.getPathComponents=function(){return this.getPath().split("/").slice(1)},t.prototype.getLastPathComponent=function(){return this.getPathComponents().slice(-1)[0]},t.prototype.getExtension=function(){var t,e;return null!=(t=null!=(e=this.getLastPathComponent().match(/\.[^.]*$/))?e[0]:void 0)?t:""},t.prototype.isHTML=function(){return this.getExtension().match(/^(?:|\.(?:htm|html|xhtml))$/)},t.prototype.isPrefixedBy=function(t){var e;return e=r(t),this.isEqualTo(t)||o(this.absoluteURL,e)},t.prototype.isEqualTo=function(t){return this.absoluteURL===(null!=t?t.absoluteURL:void 0)},t.prototype.toCacheKey=function(){return this.requestURL},t.prototype.toJSON=function(){return this.absoluteURL},t.prototype.toString=function(){return this.absoluteURL},t.prototype.valueOf=function(){return this.absoluteURL},r=function(t){return e(t.getOrigin()+t.getPath())},e=function(t){return n(t,"/")?t:t+"/"},o=function(t,e){return t.slice(0,e.length)===e},n=function(t,e){return t.slice(-e.length)===e},t}()}.call(this),function(){var e=function(t,e){return function(){return t.apply(e,arguments)}};t.HttpRequest=function(){function r(r,n,o){this.delegate=r,this.requestCanceled=e(this.requestCanceled,this),this.requestTimedOut=e(this.requestTimedOut,this),this.requestFailed=e(this.requestFailed,this),this.requestLoaded=e(this.requestLoaded,this),this.requestProgressed=e(this.requestProgressed,this),this.url=t.Location.wrap(n).requestURL,this.referrer=t.Location.wrap(o).absoluteURL,this.createXHR()}return r.NETWORK_FAILURE=0,r.TIMEOUT_FAILURE=-1,r.timeout=60,r.prototype.send=function(){var t;return this.xhr&&!this.sent?(this.notifyApplicationBeforeRequestStart(),this.setProgress(0),this.xhr.send(),this.sent=!0,"function"==typeof(t=this.delegate).requestStarted?t.requestStarted():void 0):void 0},r.prototype.cancel=function(){return this.xhr&&this.sent?this.xhr.abort():void 0},r.prototype.requestProgressed=function(t){return t.lengthComputable?this.setProgress(t.loaded/t.total):void 0},r.prototype.requestLoaded=function(){return this.endRequest(function(t){return function(){var e;return 200<=(e=t.xhr.status)&&300>e?t.delegate.requestCompletedWithResponse(t.xhr.responseText,t.xhr.getResponseHeader("Turbolinks-Location")):(t.failed=!0,t.delegate.requestFailedWithStatusCode(t.xhr.status,t.xhr.responseText))}}(this))},r.prototype.requestFailed=function(){return this.endRequest(function(t){return function(){return t.failed=!0,t.delegate.requestFailedWithStatusCode(t.constructor.NETWORK_FAILURE)}}(this))},r.prototype.requestTimedOut=function(){return this.endRequest(function(t){return function(){return t.failed=!0,t.delegate.requestFailedWithStatusCode(t.constructor.TIMEOUT_FAILURE)}}(this))},r.prototype.requestCanceled=function(){return this.endRequest()},r.prototype.notifyApplicationBeforeRequestStart=function(){return t.dispatch("turbolinks:request-start",{data:{url:this.url,xhr:this.xhr}})},r.prototype.notifyApplicationAfterRequestEnd=function(){return t.dispatch("turbolinks:request-end",{data:{url:this.url,xhr:this.xhr}})},r.prototype.createXHR=function(){return this.xhr=new XMLHttpRequest,this.xhr.open("GET",this.url,!0),this.xhr.timeout=1e3*this.constructor.timeout,this.xhr.setRequestHeader("Accept","text/html, application/xhtml+xml"),this.xhr.setRequestHeader("Turbolinks-Referrer",this.referrer),this.xhr.onprogress=this.requestProgressed,this.xhr.onload=this.requestLoaded,this.xhr.onerror=this.requestFailed,this.xhr.ontimeout=this.requestTimedOut,this.xhr.onabort=this.requestCanceled},r.prototype.endRequest=function(t){return this.xhr?(this.notifyApplicationAfterRequestEnd(),null!=t&&t.call(this),this.destroy()):void 0},r.prototype.setProgress=function(t){var e;return this.progress=t,"function"==typeof(e=this.delegate).requestProgressed?e.requestProgressed(this.progress):void 0},r.prototype.destroy=function(){var t;return this.setProgress(1),"function"==typeof(t=this.delegate).requestFinished&&t.requestFinished(),this.delegate=null,this.xhr=null},r}()}.call(this),function(){var e=function(t,e){return function(){return t.apply(e,arguments)}};t.ProgressBar=function(){function t(){this.trickle=e(this.trickle,this),this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement()}var r;return r=300,t.defaultCSS=".turbolinks-progress-bar {\n  position: fixed;\n  display: block;\n  top: 0;\n  left: 0;\n  height: 3px;\n  background: #0076ff;\n  z-index: 9999;\n  transition: width "+r+"ms ease-out, opacity "+r/2+"ms "+r/2+"ms ease-in;\n  transform: translate3d(0, 0, 0);\n}",t.prototype.show=function(){return this.visible?void 0:(this.visible=!0,this.installStylesheetElement(),this.installProgressElement(),this.startTrickling())},t.prototype.hide=function(){return this.visible&&!this.hiding?(this.hiding=!0,this.fadeProgressElement(function(t){return function(){return t.uninstallProgressElement(),t.stopTrickling(),t.visible=!1,t.hiding=!1}}(this))):void 0},t.prototype.setValue=function(t){return this.value=t,this.refresh()},t.prototype.installStylesheetElement=function(){return document.head.insertBefore(this.stylesheetElement,document.head.firstChild)},t.prototype.installProgressElement=function(){return this.progressElement.style.width=0,this.progressElement.style.opacity=1,document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()},t.prototype.fadeProgressElement=function(t){return this.progressElement.style.opacity=0,setTimeout(t,1.5*r)},t.prototype.uninstallProgressElement=function(){return this.progressElement.parentNode?document.documentElement.removeChild(this.progressElement):void 0},t.prototype.startTrickling=function(){return null!=this.trickleInterval?this.trickleInterval:this.trickleInterval=setInterval(this.trickle,r)},t.prototype.stopTrickling=function(){return clearInterval(this.trickleInterval),this.trickleInterval=null},t.prototype.trickle=function(){return this.setValue(this.value+Math.random()/100)},t.prototype.refresh=function(){return requestAnimationFrame(function(t){return function(){return t.progressElement.style.width=10+90*t.value+"%"}}(this))},t.prototype.createStylesheetElement=function(){var t;return t=document.createElement("style"),t.type="text/css",t.textContent=this.constructor.defaultCSS,t},t.prototype.createProgressElement=function(){var t;return t=document.createElement("div"),t.className="turbolinks-progress-bar",t},t}()}.call(this),function(){var e=function(t,e){return function(){return t.apply(e,arguments)}};t.BrowserAdapter=function(){function r(r){this.controller=r,this.showProgressBar=e(this.showProgressBar,this),this.progressBar=new t.ProgressBar}var n,o,i,s;return s=t.HttpRequest,n=s.NETWORK_FAILURE,i=s.TIMEOUT_FAILURE,o=500,r.prototype.visitProposedToLocationWithAction=function(t,e){return this.controller.startVisitToLocationWithAction(t,e)},r.prototype.visitStarted=function(t){return t.issueRequest(),t.changeHistory(),t.loadCachedSnapshot()},r.prototype.visitRequestStarted=function(t){return this.progressBar.setValue(0),t.hasCachedSnapshot()||"restore"!==t.action?this.showProgressBarAfterDelay():this.showProgressBar()},r.prototype.visitRequestProgressed=function(t){return this.progressBar.setValue(t.progress)},r.prototype.visitRequestCompleted=function(t){return t.loadResponse()},r.prototype.visitRequestFailedWithStatusCode=function(t,e){switch(e){case n:case i:return this.reload();default:return t.loadResponse()}},r.prototype.visitRequestFinished=function(t){return this.hideProgressBar()},r.prototype.visitCompleted=function(t){return t.followRedirect()},r.prototype.pageInvalidated=function(){return this.reload()},r.prototype.showProgressBarAfterDelay=function(){return this.progressBarTimeout=setTimeout(this.showProgressBar,o)},r.prototype.showProgressBar=function(){return this.progressBar.show()},r.prototype.hideProgressBar=function(){return this.progressBar.hide(),clearTimeout(this.progressBarTimeout)},r.prototype.reload=function(){return window.location.reload()},r}()}.call(this),function(){var e=function(t,e){return function(){return t.apply(e,arguments)}};t.History=function(){function r(t){this.delegate=t,this.onPageLoad=e(this.onPageLoad,this),this.onPopState=e(this.onPopState,this)}return r.prototype.start=function(){return this.started?void 0:(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0)},r.prototype.stop=function(){return this.started?(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1):void 0},r.prototype.push=function(e,r){return e=t.Location.wrap(e),this.update("push",e,r)},r.prototype.replace=function(e,r){return e=t.Location.wrap(e),this.update("replace",e,r)},r.prototype.onPopState=function(e){var r,n,o,i;return this.shouldHandlePopState()&&(i=null!=(n=e.state)?n.turbolinks:void 0)?(r=t.Location.wrap(window.location),o=i.restorationIdentifier,this.delegate.historyPoppedToLocationWithRestorationIdentifier(r,o)):void 0},r.prototype.onPageLoad=function(e){return t.defer(function(t){return function(){return t.pageLoaded=!0}}(this))},r.prototype.shouldHandlePopState=function(){return this.pageIsLoaded()},r.prototype.pageIsLoaded=function(){return this.pageLoaded||"complete"===document.readyState},r.prototype.update=function(t,e,r){var n;return n={turbolinks:{restorationIdentifier:r}},history[t+"State"](n,null,e)},r}()}.call(this),function(){t.Snapshot=function(){function e(t){var e,r;r=t.head,e=t.body,this.head=null!=r?r:document.createElement("head"),this.body=null!=e?e:document.createElement("body")}return e.wrap=function(t){return t instanceof this?t:this.fromHTML(t)},e.fromHTML=function(t){var e;return e=document.createElement("html"),e.innerHTML=t,this.fromElement(e)},e.fromElement=function(t){return new this({head:t.querySelector("head"),body:t.querySelector("body")})},e.prototype.clone=function(){return new e({head:this.head.cloneNode(!0),body:this.body.cloneNode(!0)})},e.prototype.getRootLocation=function(){var e,r;return r=null!=(e=this.getSetting("root"))?e:"/",new t.Location(r)},e.prototype.getCacheControlValue=function(){return this.getSetting("cache-control")},e.prototype.hasAnchor=function(t){try{return null!=this.body.querySelector("[id='"+t+"']")}catch(e){}},e.prototype.isPreviewable=function(){return"no-preview"!==this.getCacheControlValue()},e.prototype.isCacheable=function(){return"no-cache"!==this.getCacheControlValue()},e.prototype.getSetting=function(t){var e,r;return r=this.head.querySelectorAll("meta[name='turbolinks-"+t+"']"),e=r[r.length-1],null!=e?e.getAttribute("content"):void 0},e}()}.call(this),function(){var e=[].slice;t.Renderer=function(){function t(){}var r;return t.render=function(){var t,r,n,o;return n=arguments[0],r=arguments[1],t=3<=arguments.length?e.call(arguments,2):[],o=function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(this,t,function(){}),o.delegate=n,o.render(r),o},t.prototype.renderView=function(t){return this.delegate.viewWillRender(this.newBody),t(),this.delegate.viewRendered(this.newBody)},t.prototype.invalidateView=function(){return this.delegate.viewInvalidated()},t.prototype.createScriptElement=function(t){var e;return"false"===t.getAttribute("data-turbolinks-eval")?t:(e=document.createElement("script"),e.textContent=t.textContent,r(e,t),e)},r=function(t,e){var r,n,o,i,s,a,u;for(i=e.attributes,a=[],r=0,n=i.length;n>r;r++)s=i[r],o=s.name,u=s.value,a.push(t.setAttribute(o,u));return a},t}()}.call(this),function(){t.HeadDetails=function(){function t(t){var e,r,i,s,a,u,l;for(this.element=t,this.elements={},l=this.element.childNodes,s=0,u=l.length;u>s;s++)i=l[s],i.nodeType===Node.ELEMENT_NODE&&(a=i.outerHTML,r=null!=(e=this.elements)[a]?e[a]:e[a]={type:o(i),tracked:n(i),elements:[]},r.elements.push(i))}var e,r,n,o;return t.prototype.hasElementWithKey=function(t){return t in this.elements},t.prototype.getTrackedElementSignature=function(){var t,e;return function(){var r,n;r=this.elements,n=[];for(t in r)e=r[t].tracked,e&&n.push(t);return n}.call(this).join("")},t.prototype.getScriptElementsNotInDetails=function(t){return this.getElementsMatchingTypeNotInDetails("script",t)},t.prototype.getStylesheetElementsNotInDetails=function(t){return this.getElementsMatchingTypeNotInDetails("stylesheet",t)},t.prototype.getElementsMatchingTypeNotInDetails=function(t,e){var r,n,o,i,s,a;o=this.elements,s=[];for(n in o)i=o[n],a=i.type,r=i.elements,a!==t||e.hasElementWithKey(n)||s.push(r[0]);return s},t.prototype.getProvisionalElements=function(){var t,e,r,n,o,i,s;r=[],n=this.elements;for(e in n)o=n[e],s=o.type,i=o.tracked,t=o.elements,null!=s||i?t.length>1&&r.push.apply(r,t.slice(1)):r.push.apply(r,t);return r},o=function(t){return e(t)?"script":r(t)?"stylesheet":void 0},n=function(t){return"reload"===t.getAttribute("data-turbolinks-track")},e=function(t){var e;return e=t.tagName.toLowerCase(),"script"===e},r=function(t){var e;return e=t.tagName.toLowerCase(),"style"===e||"link"===e&&"stylesheet"===t.getAttribute("rel")},t}()}.call(this),function(){var e=function(t,e){function n(){this.constructor=t}for(var o in e)r.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;t.SnapshotRenderer=function(r){function n(e,r){this.currentSnapshot=e,this.newSnapshot=r,this.currentHeadDetails=new t.HeadDetails(this.currentSnapshot.head),this.newHeadDetails=new t.HeadDetails(this.newSnapshot.head),this.newBody=this.newSnapshot.body}return e(n,r),n.prototype.render=function(t){return this.trackedElementsAreIdentical()?(this.mergeHead(),this.renderView(function(e){return function(){return e.replaceBody(),e.focusFirstAutofocusableElement(),t()}}(this))):this.invalidateView()},n.prototype.mergeHead=function(){return this.copyNewHeadStylesheetElements(),this.copyNewHeadScriptElements(),this.removeCurrentHeadProvisionalElements(),this.copyNewHeadProvisionalElements()},n.prototype.replaceBody=function(){return this.activateBodyScriptElements(),this.importBodyPermanentElements(),this.assignNewBody()},n.prototype.trackedElementsAreIdentical=function(){return this.currentHeadDetails.getTrackedElementSignature()===this.newHeadDetails.getTrackedElementSignature()},n.prototype.copyNewHeadStylesheetElements=function(){var t,e,r,n,o;for(n=this.getNewHeadStylesheetElements(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(document.head.appendChild(t));return o},n.prototype.copyNewHeadScriptElements=function(){var t,e,r,n,o;for(n=this.getNewHeadScriptElements(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(document.head.appendChild(this.createScriptElement(t)));return o},n.prototype.removeCurrentHeadProvisionalElements=function(){var t,e,r,n,o;for(n=this.getCurrentHeadProvisionalElements(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(document.head.removeChild(t));return o},n.prototype.copyNewHeadProvisionalElements=function(){var t,e,r,n,o;for(n=this.getNewHeadProvisionalElements(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(document.head.appendChild(t));return o},n.prototype.importBodyPermanentElements=function(){var t,e,r,n,o,i;for(n=this.getNewBodyPermanentElements(),i=[],e=0,r=n.length;r>e;e++)o=n[e],(t=this.findCurrentBodyPermanentElement(o))?i.push(o.parentNode.replaceChild(t,o)):i.push(void 0);return i},n.prototype.activateBodyScriptElements=function(){var t,e,r,n,o,i;for(n=this.getNewBodyScriptElements(),i=[],e=0,r=n.length;r>e;e++)o=n[e],t=this.createScriptElement(o),i.push(o.parentNode.replaceChild(t,o));return i},n.prototype.assignNewBody=function(){return document.body=this.newBody},n.prototype.focusFirstAutofocusableElement=function(){var t;return null!=(t=this.findFirstAutofocusableElement())?t.focus():void 0},n.prototype.getNewHeadStylesheetElements=function(){return this.newHeadDetails.getStylesheetElementsNotInDetails(this.currentHeadDetails)},n.prototype.getNewHeadScriptElements=function(){return this.newHeadDetails.getScriptElementsNotInDetails(this.currentHeadDetails)},n.prototype.getCurrentHeadProvisionalElements=function(){return this.currentHeadDetails.getProvisionalElements()},n.prototype.getNewHeadProvisionalElements=function(){return this.newHeadDetails.getProvisionalElements()},n.prototype.getNewBodyPermanentElements=function(){return this.newBody.querySelectorAll("[id][data-turbolinks-permanent]")},n.prototype.findCurrentBodyPermanentElement=function(t){return document.body.querySelector("#"+t.id+"[data-turbolinks-permanent]")},n.prototype.getNewBodyScriptElements=function(){return this.newBody.querySelectorAll("script")},n.prototype.findFirstAutofocusableElement=function(){return document.body.querySelector("[autofocus]")},n}(t.Renderer)}.call(this),function(){var e=function(t,e){function n(){this.constructor=t}for(var o in e)r.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;t.ErrorRenderer=function(t){function r(t){this.html=t}return e(r,t),r.prototype.render=function(t){return this.renderView(function(e){return function(){return e.replaceDocumentHTML(),e.activateBodyScriptElements(),t()}}(this))},r.prototype.replaceDocumentHTML=function(){return document.documentElement.innerHTML=this.html},r.prototype.activateBodyScriptElements=function(){var t,e,r,n,o,i;for(n=this.getScriptElements(),i=[],e=0,r=n.length;r>e;e++)o=n[e],t=this.createScriptElement(o),i.push(o.parentNode.replaceChild(t,o));return i},r.prototype.getScriptElements=function(){return document.documentElement.querySelectorAll("script")},r}(t.Renderer)}.call(this),function(){t.View=function(){function e(t){this.delegate=t,this.element=document.documentElement}return e.prototype.getRootLocation=function(){return this.getSnapshot().getRootLocation()},e.prototype.getSnapshot=function(){return t.Snapshot.fromElement(this.element)},e.prototype.render=function(t,e){var r,n,o;return o=t.snapshot,r=t.error,n=t.isPreview,this.markAsPreview(n),null!=o?this.renderSnapshot(o,e):this.renderError(r,e)},e.prototype.markAsPreview=function(t){return t?this.element.setAttribute("data-turbolinks-preview",""):this.element.removeAttribute("data-turbolinks-preview")},e.prototype.renderSnapshot=function(e,r){return t.SnapshotRenderer.render(this.delegate,r,this.getSnapshot(),t.Snapshot.wrap(e))},e.prototype.renderError=function(e,r){return t.ErrorRenderer.render(this.delegate,r,e)},e}()}.call(this),function(){var e=function(t,e){return function(){return t.apply(e,arguments)}};t.ScrollManager=function(){function r(r){this.delegate=r,this.onScroll=e(this.onScroll,this),this.onScroll=t.throttle(this.onScroll)}return r.prototype.start=function(){return this.started?void 0:(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)},r.prototype.stop=function(){return this.started?(removeEventListener("scroll",this.onScroll,!1),this.started=!1):void 0},r.prototype.scrollToElement=function(t){return t.scrollIntoView()},r.prototype.scrollToPosition=function(t){var e,r;return e=t.x,r=t.y,window.scrollTo(e,r)},r.prototype.onScroll=function(t){return this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},r.prototype.updatePosition=function(t){var e;return this.position=t,null!=(e=this.delegate)?e.scrollPositionChanged(this.position):void 0},r}()}.call(this),function(){t.SnapshotCache=function(){function e(t){this.size=t,this.keys=[],this.snapshots={}}var r;return e.prototype.has=function(t){var e;return e=r(t),e in this.snapshots},e.prototype.get=function(t){var e;return this.has(t)?(e=this.read(t),this.touch(t),e):void 0},e.prototype.put=function(t,e){return this.write(t,e),this.touch(t),e},e.prototype.read=function(t){var e;return e=r(t),this.snapshots[e]},e.prototype.write=function(t,e){var n;return n=r(t),this.snapshots[n]=e},e.prototype.touch=function(t){var e,n;return n=r(t),e=this.keys.indexOf(n),e>-1&&this.keys.splice(e,1),this.keys.unshift(n),this.trim()},e.prototype.trim=function(){var t,e,r,n,o;for(n=this.keys.splice(this.size),o=[],t=0,r=n.length;r>t;t++)e=n[t],o.push(delete this.snapshots[e]);return o},r=function(e){return t.Location.wrap(e).toCacheKey()},e}()}.call(this),function(){var e=function(t,e){return function(){return t.apply(e,arguments)}};t.Visit=function(){function r(r,n,o){this.controller=r,this.action=o,this.performScroll=e(this.performScroll,this),this.identifier=t.uuid(),this.location=t.Location.wrap(n),this.adapter=this.controller.adapter,this.state="initialized",this.timingMetrics={}}var n;return r.prototype.start=function(){return"initialized"===this.state?(this.recordTimingMetric("visitStart"),this.state="started",this.adapter.visitStarted(this)):void 0},r.prototype.cancel=function(){var t;return"started"===this.state?(null!=(t=this.request)&&t.cancel(),this.cancelRender(),this.state="canceled"):void 0},r.prototype.complete=function(){var t;return"started"===this.state?(this.recordTimingMetric("visitEnd"),this.state="completed","function"==typeof(t=this.adapter).visitCompleted&&t.visitCompleted(this),this.controller.visitCompleted(this)):void 0},r.prototype.fail=function(){var t;return"started"===this.state?(this.state="failed","function"==typeof(t=this.adapter).visitFailed?t.visitFailed(this):void 0):void 0},r.prototype.changeHistory=function(){var t,e;return this.historyChanged?void 0:(t=this.location.isEqualTo(this.referrer)?"replace":this.action,e=n(t),this.controller[e](this.location,this.restorationIdentifier),this.historyChanged=!0)},r.prototype.issueRequest=function(){return this.shouldIssueRequest()&&null==this.request?(this.progress=0,this.request=new t.HttpRequest(this,this.location,this.referrer),this.request.send()):void 0},r.prototype.getCachedSnapshot=function(){var t;return!(t=this.controller.getCachedSnapshotForLocation(this.location))||null!=this.location.anchor&&!t.hasAnchor(this.location.anchor)||"restore"!==this.action&&!t.isPreviewable()?void 0:t},r.prototype.hasCachedSnapshot=function(){return null!=this.getCachedSnapshot()},r.prototype.loadCachedSnapshot=function(){var t,e;return(e=this.getCachedSnapshot())?(t=this.shouldIssueRequest(),this.render(function(){var r;return this.cacheSnapshot(),this.controller.render({snapshot:e,isPreview:t},this.performScroll),"function"==typeof(r=this.adapter).visitRendered&&r.visitRendered(this),t?void 0:this.complete()})):void 0},r.prototype.loadResponse=function(){return null!=this.response?this.render(function(){var t,e;return this.cacheSnapshot(),this.request.failed?(this.controller.render({error:this.response},this.performScroll),"function"==typeof(t=this.adapter).visitRendered&&t.visitRendered(this),this.fail()):(this.controller.render({snapshot:this.response},this.performScroll),"function"==typeof(e=this.adapter).visitRendered&&e.visitRendered(this),this.complete())}):void 0},r.prototype.followRedirect=function(){return this.redirectedToLocation&&!this.followedRedirect?(this.location=this.redirectedToLocation,this.controller.replaceHistoryWithLocationAndRestorationIdentifier(this.redirectedToLocation,this.restorationIdentifier),this.followedRedirect=!0):void 0},r.prototype.requestStarted=function(){var t;return this.recordTimingMetric("requestStart"),"function"==typeof(t=this.adapter).visitRequestStarted?t.visitRequestStarted(this):void 0},r.prototype.requestProgressed=function(t){var e;return this.progress=t,"function"==typeof(e=this.adapter).visitRequestProgressed?e.visitRequestProgressed(this):void 0},r.prototype.requestCompletedWithResponse=function(e,r){return this.response=e,null!=r&&(this.redirectedToLocation=t.Location.wrap(r)),this.adapter.visitRequestCompleted(this)},r.prototype.requestFailedWithStatusCode=function(t,e){return this.response=e,this.adapter.visitRequestFailedWithStatusCode(this,t)},r.prototype.requestFinished=function(){var t;return this.recordTimingMetric("requestEnd"),"function"==typeof(t=this.adapter).visitRequestFinished?t.visitRequestFinished(this):void 0},r.prototype.performScroll=function(){return this.scrolled?void 0:("restore"===this.action?this.scrollToRestoredPosition()||this.scrollToTop():this.scrollToAnchor()||this.scrollToTop(),this.scrolled=!0)},r.prototype.scrollToRestoredPosition=function(){var t,e;return t=null!=(e=this.restorationData)?e.scrollPosition:void 0,null!=t?(this.controller.scrollToPosition(t),!0):void 0},r.prototype.scrollToAnchor=function(){return null!=this.location.anchor?(this.controller.scrollToAnchor(this.location.anchor),!0):void 0},r.prototype.scrollToTop=function(){return this.controller.scrollToPosition({x:0,y:0})},r.prototype.recordTimingMetric=function(t){var e;return null!=(e=this.timingMetrics)[t]?e[t]:e[t]=(new Date).getTime()},r.prototype.getTimingMetrics=function(){return t.copyObject(this.timingMetrics)},n=function(t){switch(t){case"replace":return"replaceHistoryWithLocationAndRestorationIdentifier";case"advance":case"restore":return"pushHistoryWithLocationAndRestorationIdentifier"}},r.prototype.shouldIssueRequest=function(){return"restore"===this.action?!this.hasCachedSnapshot():!0},r.prototype.cacheSnapshot=function(){return this.snapshotCached?void 0:(this.controller.cacheSnapshot(),this.snapshotCached=!0)},r.prototype.render=function(t){return this.cancelRender(),this.frame=requestAnimationFrame(function(e){return function(){return e.frame=null,t.call(e)}}(this))},r.prototype.cancelRender=function(){return this.frame?cancelAnimationFrame(this.frame):void 0},r}()}.call(this),function(){var e=function(t,e){return function(){return t.apply(e,arguments)}};t.Controller=function(){function r(){this.clickBubbled=e(this.clickBubbled,this),this.clickCaptured=e(this.clickCaptured,this),this.pageLoaded=e(this.pageLoaded,this),this.history=new t.History(this),this.view=new t.View(this),this.scrollManager=new t.ScrollManager(this),this.restorationData={},this.clearCache()}return r.prototype.start=function(){return t.supported&&!this.started?(addEventListener("click",this.clickCaptured,!0),addEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.start(),this.startHistory(),this.started=!0,this.enabled=!0):void 0},r.prototype.disable=function(){return this.enabled=!1},r.prototype.stop=function(){return this.started?(removeEventListener("click",this.clickCaptured,!0),removeEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.stop(),this.stopHistory(),this.started=!1):void 0},r.prototype.clearCache=function(){return this.cache=new t.SnapshotCache(10)},r.prototype.visit=function(e,r){var n,o;return null==r&&(r={}),e=t.Location.wrap(e),this.applicationAllowsVisitingLocation(e)?this.locationIsVisitable(e)?(n=null!=(o=r.action)?o:"advance",this.adapter.visitProposedToLocationWithAction(e,n)):window.location=e:void 0},r.prototype.startVisitToLocationWithAction=function(e,r,n){var o;return t.supported?(o=this.getRestorationDataForIdentifier(n),this.startVisit(e,r,{restorationData:o})):window.location=e},r.prototype.startHistory=function(){return this.location=t.Location.wrap(window.location),this.restorationIdentifier=t.uuid(),this.history.start(),this.history.replace(this.location,this.restorationIdentifier)},r.prototype.stopHistory=function(){return this.history.stop()},r.prototype.pushHistoryWithLocationAndRestorationIdentifier=function(e,r){return this.restorationIdentifier=r,this.location=t.Location.wrap(e),this.history.push(this.location,this.restorationIdentifier)},r.prototype.replaceHistoryWithLocationAndRestorationIdentifier=function(e,r){return this.restorationIdentifier=r,this.location=t.Location.wrap(e),this.history.replace(this.location,this.restorationIdentifier)},r.prototype.historyPoppedToLocationWithRestorationIdentifier=function(e,r){var n;return this.restorationIdentifier=r,this.enabled?(n=this.getRestorationDataForIdentifier(this.restorationIdentifier),this.startVisit(e,"restore",{restorationIdentifier:this.restorationIdentifier,restorationData:n,historyChanged:!0}),this.location=t.Location.wrap(e)):this.adapter.pageInvalidated()},r.prototype.getCachedSnapshotForLocation=function(t){var e;return e=this.cache.get(t),e?e.clone():void 0},r.prototype.shouldCacheSnapshot=function(){return this.view.getSnapshot().isCacheable()},r.prototype.cacheSnapshot=function(){var t;return this.shouldCacheSnapshot()?(this.notifyApplicationBeforeCachingSnapshot(),t=this.view.getSnapshot(),this.cache.put(this.lastRenderedLocation,t.clone())):void 0},r.prototype.scrollToAnchor=function(t){var e;return(e=document.getElementById(t))?this.scrollToElement(e):this.scrollToPosition({x:0,y:0})},r.prototype.scrollToElement=function(t){return this.scrollManager.scrollToElement(t)},r.prototype.scrollToPosition=function(t){return this.scrollManager.scrollToPosition(t)},r.prototype.scrollPositionChanged=function(t){var e;return e=this.getCurrentRestorationData(),e.scrollPosition=t},r.prototype.render=function(t,e){return this.view.render(t,e)},r.prototype.viewInvalidated=function(){return this.adapter.pageInvalidated()},r.prototype.viewWillRender=function(t){return this.notifyApplicationBeforeRender(t)},r.prototype.viewRendered=function(){return this.lastRenderedLocation=this.currentVisit.location,this.notifyApplicationAfterRender()},r.prototype.pageLoaded=function(){return this.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()},r.prototype.clickCaptured=function(){return removeEventListener("click",this.clickBubbled,!1),addEventListener("click",this.clickBubbled,!1)},r.prototype.clickBubbled=function(t){var e,r,n;return this.enabled&&this.clickEventIsSignificant(t)&&(r=this.getVisitableLinkForNode(t.target))&&(n=this.getVisitableLocationForLink(r))&&this.applicationAllowsFollowingLinkToLocation(r,n)?(t.preventDefault(),e=this.getActionForLink(r),this.visit(n,{action:e})):void 0},r.prototype.applicationAllowsFollowingLinkToLocation=function(t,e){var r;return r=this.notifyApplicationAfterClickingLinkToLocation(t,e),!r.defaultPrevented},r.prototype.applicationAllowsVisitingLocation=function(t){var e;return e=this.notifyApplicationBeforeVisitingLocation(t),!e.defaultPrevented},r.prototype.notifyApplicationAfterClickingLinkToLocation=function(e,r){return t.dispatch("turbolinks:click",{target:e,data:{url:r.absoluteURL},cancelable:!0})},r.prototype.notifyApplicationBeforeVisitingLocation=function(e){return t.dispatch("turbolinks:before-visit",{data:{url:e.absoluteURL},cancelable:!0})},r.prototype.notifyApplicationAfterVisitingLocation=function(e){return t.dispatch("turbolinks:visit",{data:{url:e.absoluteURL}})},r.prototype.notifyApplicationBeforeCachingSnapshot=function(){return t.dispatch("turbolinks:before-cache")},r.prototype.notifyApplicationBeforeRender=function(e){
return t.dispatch("turbolinks:before-render",{data:{newBody:e}})},r.prototype.notifyApplicationAfterRender=function(){return t.dispatch("turbolinks:render")},r.prototype.notifyApplicationAfterPageLoad=function(e){return null==e&&(e={}),t.dispatch("turbolinks:load",{data:{url:this.location.absoluteURL,timing:e}})},r.prototype.startVisit=function(t,e,r){var n;return null!=(n=this.currentVisit)&&n.cancel(),this.currentVisit=this.createVisit(t,e,r),this.currentVisit.start(),this.notifyApplicationAfterVisitingLocation(t)},r.prototype.createVisit=function(e,r,n){var o,i,s,a,u;return i=null!=n?n:{},a=i.restorationIdentifier,s=i.restorationData,o=i.historyChanged,u=new t.Visit(this,e,r),u.restorationIdentifier=null!=a?a:t.uuid(),u.restorationData=t.copyObject(s),u.historyChanged=o,u.referrer=this.location,u},r.prototype.visitCompleted=function(t){return this.notifyApplicationAfterPageLoad(t.getTimingMetrics())},r.prototype.clickEventIsSignificant=function(t){return!(t.defaultPrevented||t.target.isContentEditable||t.which>1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)},r.prototype.getVisitableLinkForNode=function(e){return this.nodeIsVisitable(e)?t.closest(e,"a[href]:not([target]):not([download])"):void 0},r.prototype.getVisitableLocationForLink=function(e){var r;return r=new t.Location(e.getAttribute("href")),this.locationIsVisitable(r)?r:void 0},r.prototype.getActionForLink=function(t){var e;return null!=(e=t.getAttribute("data-turbolinks-action"))?e:"advance"},r.prototype.nodeIsVisitable=function(e){var r;return(r=t.closest(e,"[data-turbolinks]"))?"false"!==r.getAttribute("data-turbolinks"):!0},r.prototype.locationIsVisitable=function(t){return t.isPrefixedBy(this.view.getRootLocation())&&t.isHTML()},r.prototype.getCurrentRestorationData=function(){return this.getRestorationDataForIdentifier(this.restorationIdentifier)},r.prototype.getRestorationDataForIdentifier=function(t){var e;return null!=(e=this.restorationData)[t]?e[t]:e[t]={}},r}()}.call(this),function(){var e,r,n;t.start=function(){return r()?(null==t.controller&&(t.controller=e()),t.controller.start()):void 0},r=function(){return null==window.Turbolinks&&(window.Turbolinks=t),n()},e=function(){var e;return e=new t.Controller,e.adapter=new t.BrowserAdapter(e),e},n=function(){return window.Turbolinks===t},n()&&t.start()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd&&define(t)}.call(this);